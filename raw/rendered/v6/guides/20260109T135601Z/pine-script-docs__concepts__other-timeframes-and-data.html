<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><script data-astro-exec="">
			const url = window.location.href;
			const expectedUrl = url.replace(
				/^https:\/\/(?!beta)(\w+\.)?tradingview\.com/,
				'https://www.tradingview.com',
			);
			if (url !== expectedUrl) {
				window.location.replace(expectedUrl);
			}
		</script><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="none"><link rel="icon" href="https://static.tradingview.com/static/images/favicon.ico"><link rel="icon" type="image/svg+xml" href="/pine-script-docs/favicon.svg"><title>Concepts / Other timeframes and data</title><meta name="og:title" content="Concepts / Other timeframes and data"><meta name="twitter:title" content="Concepts / Other timeframes and data"><meta name="description" content="Everything you need to know about Pine Script®."><meta name="og:description" content="Everything you need to know about Pine Script®."><meta name="twitter:description" content="Everything you need to know about Pine Script®."><meta name="keywords" content="tradingview, pine, script, indicators, strategies"><meta name="og:image" content="/pine-script-docs/meta-image.png?1"><meta name="twitter:image" content="/pine-script-docs/meta-image.png?1"><meta name="og:image:width" content="1200"><meta name="og:image:height" content="630"><meta name="og:url" content="https://www.tradingview.com/pine-script-docs/concepts/other-timeframes-and-data/"><meta name="twitter:url" content="https://www.tradingview.com/pine-script-docs/concepts/other-timeframes-and-data/"><meta name="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@TradingView"><link rel="canonical" href="https://www.tradingview.com/pine-script-docs/concepts/other-timeframes-and-data/"><link rel="sitemap" href="/pine-script-docs/sitemap-index.xml"><link rel="stylesheet" href="/pine-script-docs/_astro/index.DfaRTfPD.css">
<link rel="stylesheet" href="/pine-script-docs/_astro/index.B9ah8c5K.css">
<style>.tv-spinner{display:none;position:absolute;margin:0 auto;border:0 solid rgb(149 152 161 / 20%);border-radius:50%;border-top-color:var(--tv-spinner-color, #2962ff);border-left-color:var(--tv-spinner-color, #2962ff);animation:tv-spinner-container-rotate .9s linear infinite}.tv-spinner-shown{display:block}.tv-spinner-size-large{top:calc(50% - 32px);left:calc(50% - 32px);width:56px;height:56px;border-width:4px}@keyframes tv-spinner-container-rotate{to{transform:rotate(360deg)}}:root{--page-background-color: #fff;background-color:var(--page-background-color)}:root[data-theme=dark]{--page-background-color: #000}body{background-color:var(--page-background-color)}#redirect-link{display:flex;position:absolute;inset:0;align-items:center;justify-content:center}#spinner{display:block;position:absolute;opacity:1;transition:opacity .2s}
.twitter-tweet:not(.twitter-tweet-rendered){padding:var(--tc-padding, 1em);border:1px solid var(--tc-border-color, #cfd9de)}.twitter-tweet:not(.twitter-tweet-rendered)>:first-child{margin-top:0}.twitter-tweet:not(.twitter-tweet-rendered)>:last-child{margin-bottom:0}lite-youtube{background-color:#000;position:relative;display:block;contain:content;background-position:center center;background-size:cover;cursor:pointer;max-width:720px}lite-youtube:before{content:attr(data-title);display:block;position:absolute;top:0;background-image:linear-gradient(180deg,#000000ab,#0000008a 14%,#00000026 54%,#0000000d 72%,#0000 94%);height:99px;width:100%;font-family:YouTube Noto,Roboto,Arial,Helvetica,sans-serif;color:#eee;text-shadow:0 0 2px rgba(0,0,0,.5);font-size:18px;padding:25px 20px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box}lite-youtube:hover:before{color:#fff}lite-youtube:after{content:"";display:block;padding-bottom:56.25%}lite-youtube>iframe{width:100%;height:100%;position:absolute;top:0;left:0;border:0}lite-youtube>.lty-playbtn{display:block;width:100%;height:100%;background:no-repeat center/68px 48px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/><path d="M45 24 27 14v20" fill="white"/></svg>');position:absolute;cursor:pointer;z-index:1;filter:grayscale(100%);transition:filter .1s cubic-bezier(0,0,.2,1);border:0}lite-youtube:hover>.lty-playbtn,lite-youtube .lty-playbtn:focus{filter:none}lite-youtube.lyt-activated{cursor:unset}lite-youtube.lyt-activated:before,lite-youtube.lyt-activated>.lty-playbtn{opacity:0;pointer-events:none}.lyt-visually-hidden{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}lite-youtube>iframe{all:unset!important;width:100%!important;height:100%!important;position:absolute!important;inset:0!important;border:0!important}lite-vimeo{font-size:10px;background-color:#000;position:relative;display:block;contain:content;background-position:center center;background-size:cover}lite-vimeo:after{content:"";display:block;padding-bottom:56.25%}lite-vimeo>iframe{all:unset!important;width:100%!important;height:100%!important;position:absolute!important;inset:0!important;border:0!important}lite-vimeo>.ltv-playbtn{content:"";position:absolute;inset:0;width:100%;background:transparent;outline:0;border:0;cursor:pointer}lite-vimeo>.ltv-playbtn:before{width:6.5em;height:4em;background:#172322bf;opacity:.8;border-radius:.25rem;transition:all .2s cubic-bezier(0,0,.2,1)}lite-vimeo>.ltv-playbtn:focus:before{outline:auto}lite-vimeo:hover>.ltv-playbtn:before{background-color:#00adef;background-color:var(--ltv-color, #00adef);opacity:1}lite-vimeo>.ltv-playbtn:after{border-style:solid;border-width:1em 0 1em 1.7em;border-color:transparent transparent transparent #fff}lite-vimeo>.ltv-playbtn:before,lite-vimeo>.ltv-playbtn:after{content:"";position:absolute;top:50%;left:50%;transform:translate3d(-50%,-50%,0)}lite-vimeo.ltv-activated:before,lite-vimeo.ltv-activated>.ltv-playbtn{cursor:unset;opacity:0;pointer-events:none}
</style><script type="module" src="/pine-script-docs/_astro/hoisted.wfEHaJbk.js" data-astro-exec=""></script><style id="tv-pine-light" type="text/css" media="screen">.monaco-editor-tv-pine-light { 
.mtk1 { color: #131722; }
.mtk2 { color: #ffffff; }
.mtk3 { color: #808080; }
.mtk4 { color: #ff0000; }
.mtk5 { color: #0451a5; }
.mtk6 { color: #0000ff; }
.mtk7 { color: #098658; }
.mtk8 { color: #008000; }
.mtk9 { color: #9598a1; }
.mtk10 { color: #dd0000; }
.mtk11 { color: #cc2929; }
.mtk12 { color: #f57f17; }
.mtk13 { color: #000000; }
.mtk14 { color: #383838; }
.mtk15 { color: #0c3299; }
.mtk16 { color: #2962ff; }
.mtk17 { color: #8e24aa; }
.mtk18 { color: #22ab94; }
.mtk19 { color: #cd3131; }
.mtk20 { color: #863b00; }
.mtk21 { color: #af00db; }
.mtk22 { color: #800000; }
.mtk23 { color: #e00000; }
.mtk24 { color: #3030c0; }
.mtk25 { color: #666666; }
.mtk26 { color: #778899; }
.mtk27 { color: #c700c7; }
.mtk28 { color: #a31515; }
.mtk29 { color: #388e3c; }
.mtk30 { color: #4f76ac; }
.mtk31 { color: #008080; }
.mtk32 { color: #001188; }
.mtk33 { color: #2a2e39; }
.mtk34 { color: #4864aa; }
.mtki { font-style: italic; }
.mtkb { font-weight: bold; }
.mtku { text-decoration: underline; text-underline-position: under; }
.mtks { text-decoration: line-through; }
.mtks.mtku { text-decoration: underline line-through; text-underline-position: under; } }</style></head> <body> <div id="search-content-blur" hidden=""></div> <script data-astro-exec="">
	/* eslint-disable @typescript-eslint/typedef */
	window.ThemeProvider = (() => {
		function getCurrent() {
			return (
				// eslint-disable-next-line no-restricted-syntax
				typeof localStorage !== 'undefined' &&
				localStorage.getItem('tv-docs-theme')
			);
		}
		const storedTheme = getCurrent();
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ?
				'light'
			:	'dark');
		document.documentElement.dataset.theme =
			theme === 'light' ? 'light' : 'dark';
		document.documentElement.classList.toggle(
			'theme-dark',
			theme === 'dark',
		); // add support for ui-lib themes
		document.documentElement.classList.toggle(
			'sl-theme-dark',
			theme === 'dark',
		); // add support for shoelace themes

		return {
			updatePickers(themeArg = storedTheme || 'auto') {
				let currentTheme = themeArg;
				if (currentTheme === 'unknown') {
					currentTheme = getCurrent() || 'auto';
				}
				document
					.querySelectorAll('docs-theme-select')
					.forEach((picker) => {
						const select = picker.querySelector('select');
						if (select) select.value = currentTheme;
						/** @type {HTMLTemplateElement | null} */
						const tmpl = document.querySelector(`#theme-icons`);
						const newIcon =
							tmpl &&
							tmpl.content.querySelector('.' + currentTheme);
						if (newIcon) {
							const oldIcon =
								picker.querySelector('svg.label-icon');
							if (oldIcon) {
								oldIcon.replaceChildren(
									...newIcon.cloneNode(true).childNodes,
								);
							}
						}
					});
			},
		};
	})();
	/* eslint-enable @typescript-eslint/typedef */
</script><template id="theme-icons"><svg width="16" height="16" viewBox="0 0 28 28" class="light" data-icon="theme/sun-28">  <symbol id="ai:local:theme/sun-28"><g fill="currentColor"><path d="M14 3h1.5v5H14zm0 18h1.5v5H14zm12-5.5V14h-5v1.5zM8 14v1.5H3V14zm15.3-7-1-1-3.6 3.6 1.1 1 3.5-3.5ZM9.5 18.7l1.1 1.1-3.5 3.5-1-1zM22 23.3l1-1-3.6-3.6-1 1.1 3.5 3.5ZM10.3 9.6l-1.1 1-3.5-3.5 1-1z"></path><path fill-rule="evenodd" d="M19 14.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0m-1.5 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0" clip-rule="evenodd"></path></g></symbol><use xlink:href="#ai:local:theme/sun-28"></use>  </svg><svg width="16" height="16" viewBox="0 0 28 28" class="dark" data-icon="theme/moon-28">  <symbol id="ai:local:theme/moon-28"><path fill="currentColor" fill-rule="evenodd" d="M21 7.02A9.23 9.23 0 0 0 15.2 5 9.1 9.1 0 0 0 6 14c0 4.97 4.12 9 9.2 9a9.33 9.33 0 0 0 5.8-2.02A7 7 0 0 1 14.36 14 7 7 0 0 1 21 7.02m-3.95-.3a8 8 0 0 0-1.85-.22A7.6 7.6 0 0 0 7.5 14a7.6 7.6 0 0 0 7.7 7.5 8 8 0 0 0 1.85-.22A8.46 8.46 0 0 1 12.86 14c0-3.1 1.69-5.8 4.19-7.28" clip-rule="evenodd"></path></symbol><use xlink:href="#ai:local:theme/moon-28"></use>  </svg><svg width="16" height="16" viewBox="0 0 28 28" class="auto" data-icon="theme/system-28">  <symbol id="ai:local:theme/system-28"><path fill="currentColor" d="M8 4h1v2H8zm0 9v2h1v-2zm6-3V9h-2v1zM3 9v1h2V9zm5.5 3a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5m4.2-6-.7-.7-1.4 1.4.7.7zM5 13.7l-.7-.7 1.4-1.4.7.7zm7.7-.7-.7.7-1.4-1.4.7-.7zM4.3 6l.7-.7 1.4 1.4-.7.7zm3 17 14-14 .8.7L8 23.7zm17.2-.1a3.5 3.5 0 0 1-3.4-5.9H21a4 4 0 1 0 3.5 5.9"></path></symbol><use xlink:href="#ai:local:theme/system-28"></use>  </svg></template> <div class="backdrop" data-mobile-menu-backdrop="" data-astro-cid-h2irkosh=""></div> <div class="menu-container" data-astro-cid-h2irkosh=""> <div class="header" data-astro-cid-h2irkosh=""> <div class="header-group" data-astro-cid-h2irkosh=""> <div id="version-select" data-astro-cid-kx7qoxgq=""> <label style="--sl-select-width: undefined; --sl-label-icon-size: 16px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq="">Version</span>  <select value="v6" data-has-border="" no-icon="true" data-astro-cid-lmznfliq=""> <option value="v6" selected="true" data-astro-cid-lmznfliq="">Version 6</option><option value="v5" data-astro-cid-lmznfliq="">Version 5</option><option value="v4" data-astro-cid-lmznfliq="">Version 4</option><option value="v3" data-astro-cid-lmznfliq="">Version 3</option> </select> <svg width="16" height="16" viewBox="0 0 24 24" class="icon caret" data-astro-cid-lmznfliq="" data-icon="theme/down-caret">  <symbol id="ai:local:theme/down-caret"><path fill="currentColor" d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1 1 0 0 0 1.42 0L17 10.59a1 1 0 0 0 0-1.42"></path></symbol><use xlink:href="#ai:local:theme/down-caret"></use>  </svg> </label>  </div>   <docs-theme-select class="" data-astro-cid-3wpspbi7=""> <label style="--sl-select-width: 48px; --sl-label-icon-size: 28px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq="">Theme</span> <svg width="28" height="28" viewBox="0 0 28 28" class="icon label-icon" data-button="" data-round="" data-astro-cid-lmznfliq="" data-icon="theme/system-28">  <symbol id="ai:local:theme/system-28"><path fill="currentColor" d="M8 4h1v2H8zm0 9v2h1v-2zm6-3V9h-2v1zM3 9v1h2V9zm5.5 3a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5m4.2-6-.7-.7-1.4 1.4.7.7zM5 13.7l-.7-.7 1.4-1.4.7.7zm7.7-.7-.7.7-1.4-1.4.7-.7zM4.3 6l.7-.7 1.4 1.4-.7.7zm3 17 14-14 .8.7L8 23.7zm17.2-.1a3.5 3.5 0 0 1-3.4-5.9H21a4 4 0 1 0 3.5 5.9"></path></symbol><use xlink:href="#ai:local:theme/system-28"></use>  </svg> <select value="auto" data-button="" data-astro-cid-lmznfliq=""> <option value="dark" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Dark&nbsp;&nbsp;</option><option value="light" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Light&nbsp;&nbsp;</option><option value="auto" selected="true" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Auto&nbsp;&nbsp;</option> </select>  </label>  </docs-theme-select>   <script data-astro-exec="">
	ThemeProvider.updatePickers('unknown');
</script>  </div> <div class="header-group" data-astro-cid-h2irkosh="">  <div class="not-content" style="stroke-width:2px" data-astro-cid-pkzv2hgs=""> <button id="mobile-menu-back-button" title="Close menu" data-astro-cid-pkzv2hgs="" class="not-content stvb-base stvb-pointer stvb-gray stvb-medium stvb-primary stvb-icon">  <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-h2irkosh="" data-icon="theme/arrow-back">  <symbol id="ai:local:theme/arrow-back"><g fill="none"><g clip-path="url(#a)"><path stroke="var(--arrow-fill-color, #131722)" d="m17 20-6-6 6-6"></path></g><defs><clipPath id="a"><path fill="#fff" d="M28 28H0V0h28z"></path></clipPath></defs></g></symbol><use xlink:href="#ai:local:theme/arrow-back"></use>  </svg>  </button> </div>  </div> </div> <aside id="nav" class="keep-visible" style="--navbar-right-border-width: 0px" data-astro-cid-sa57sq6l=""> <div class="sidebar-viewport slick-scroll" data-astro-cid-sa57sq6l=""> <div class="sidebar" data-mobile="" data-astro-cid-sa57sq6l=""> <ul class="toc" aria-label="Docs sidebar" data-astro-cid-sa57sq6l=""> <li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/welcome" data-astro-cid-omxx3dey="">Welcome to Pine Script® v6</a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Pine Script® primer</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-steps" data-astro-cid-omxx3dey="">First steps</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-indicator" data-astro-cid-omxx3dey="">First indicator</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/next-steps" data-astro-cid-omxx3dey="">Next steps</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Language</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/execution-model" data-astro-cid-omxx3dey="">Execution model</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/type-system" data-astro-cid-omxx3dey="">Type system</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/script-structure" data-astro-cid-omxx3dey="">Script structure</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/identifiers" data-astro-cid-omxx3dey="">Identifiers</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/variable-declarations" data-astro-cid-omxx3dey="">Variable declarations</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/operators" data-astro-cid-omxx3dey="">Operators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/conditional-structures" data-astro-cid-omxx3dey="">Conditional structures</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/loops" data-astro-cid-omxx3dey="">Loops</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/built-ins" data-astro-cid-omxx3dey="">Built-ins</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/user-defined-functions" data-astro-cid-omxx3dey="">User-defined functions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/objects" data-astro-cid-omxx3dey="">Objects</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/enums" data-astro-cid-omxx3dey="">Enums</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/methods" data-astro-cid-omxx3dey="">Methods</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/arrays" data-astro-cid-omxx3dey="">Arrays</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/matrices" data-astro-cid-omxx3dey="">Matrices</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/maps" data-astro-cid-omxx3dey="">Maps</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Visuals</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/overview" data-astro-cid-omxx3dey="">Overview</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/backgrounds" data-astro-cid-omxx3dey="">Backgrounds</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/bar-coloring" data-astro-cid-omxx3dey="">Bar coloring</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/bar-plotting" data-astro-cid-omxx3dey="">Bar plotting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/colors" data-astro-cid-omxx3dey="">Colors</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/fills" data-astro-cid-omxx3dey="">Fills</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/levels" data-astro-cid-omxx3dey="">Levels</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/lines-and-boxes" data-astro-cid-omxx3dey="">Lines and boxes</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/plots" data-astro-cid-omxx3dey="">Plots</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/tables" data-astro-cid-omxx3dey="">Tables</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/text-and-shapes" data-astro-cid-omxx3dey="">Text and shapes</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details open="" data-is-parent="" data-is-on-path="" data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Concepts</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/alerts" data-astro-cid-omxx3dey="">Alerts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-states" data-astro-cid-omxx3dey="">Bar states</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/chart-information" data-astro-cid-omxx3dey="">Chart information</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/inputs" data-astro-cid-omxx3dey="">Inputs</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/libraries" data-astro-cid-omxx3dey="">Libraries</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/non-standard-charts-data" data-astro-cid-omxx3dey="">Non-standard charts data</a></li><li class="item" data-current="" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/other-timeframes-and-data" data-astro-cid-omxx3dey="">Other timeframes and data</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/repainting" data-astro-cid-omxx3dey="">Repainting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/sessions" data-astro-cid-omxx3dey="">Sessions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strategies" data-astro-cid-omxx3dey="">Strategies</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strings" data-astro-cid-omxx3dey="">Strings</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/time" data-astro-cid-omxx3dey="">Time</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/timeframes" data-astro-cid-omxx3dey="">Timeframes</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Writing scripts</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/style-guide" data-astro-cid-omxx3dey="">Style guide</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/debugging" data-astro-cid-omxx3dey="">Debugging</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/profiling-and-optimization" data-astro-cid-omxx3dey="">Profiling and optimization</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/publishing" data-astro-cid-omxx3dey="">Publishing scripts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/limitations" data-astro-cid-omxx3dey="">Limitations</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">FAQ</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/general" data-astro-cid-omxx3dey="">General</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/alerts" data-astro-cid-omxx3dey="">Alerts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/data-structures" data-astro-cid-omxx3dey="">Data structures</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/functions" data-astro-cid-omxx3dey="">Functions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/indicators" data-astro-cid-omxx3dey="">Indicators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/other-data-and-timeframes" data-astro-cid-omxx3dey="">Other data and timeframes</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/programming" data-astro-cid-omxx3dey="">Programming</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/strategies" data-astro-cid-omxx3dey="">Strategies</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/strings-and-formatting" data-astro-cid-omxx3dey="">Strings and formatting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/techniques" data-astro-cid-omxx3dey="">Techniques</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/times-dates-and-sessions" data-astro-cid-omxx3dey="">Times, dates, and sessions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/variables-and-operators" data-astro-cid-omxx3dey="">Variables and operators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/visuals" data-astro-cid-omxx3dey="">Visuals</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/error-messages" data-astro-cid-omxx3dey="">Error messages</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/release-notes" data-astro-cid-omxx3dey="">Release notes</a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Migration guides</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/overview" data-astro-cid-omxx3dey="">Overview</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-6" data-astro-cid-omxx3dey="">To Pine Script® version 6</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-5" data-astro-cid-omxx3dey="">To Pine Script® version 5</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-4" data-astro-cid-omxx3dey="">To Pine Script® version 4</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-3" data-astro-cid-omxx3dey="">To Pine Script® version 3</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-2" data-astro-cid-omxx3dey="">To Pine Script® version 2</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/where-can-i-get-more-information" data-astro-cid-omxx3dey="">Where can I get more information?</a></li> </ul> <div class="toc-bottom" data-astro-cid-sa57sq6l=""></div> </div> </div> </aside>  </div>   <header class="header" data-astro-cid-d74r2unp=""> <nav role="navigation" aria-label="Main Navigation" data-astro-cid-d74r2unp=""> <mobile-menu-button id="mobile-menu-button-wc" data-astro-cid-oojooh3d=""> <!-- Annoyingly I need to wrap this. TODO: improve this --> <div id="mobile-menu-button-header" data-astro-cid-oojooh3d=""> <div class="not-content" style="" data-astro-cid-pkzv2hgs=""> <button title="Open navigation menu" data-astro-cid-pkzv2hgs="" class="not-content stvb-base stvb-pointer stvb-gray stvb-medium stvb-secondary stvb-icon stvb-icon-force-color stvb-force-no-border">  <svg width="28" height="28" viewBox="0 0 24 24" data-astro-cid-oojooh3d="" data-icon="theme/bars">  <symbol id="ai:local:theme/bars"><path fill="currentColor" d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2m18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2m0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2"></path></symbol><use xlink:href="#ai:local:theme/bars"></use>  </svg>  </button> </div>  </div> </mobile-menu-button>   <div data-hide-when-search="" data-astro-cid-d74r2unp=""> <div class="header-logo" data-astro-cid-tycb33lk=""> <a href="/pine-script-docs/" aria-label="Home button" data-astro-cid-tycb33lk=""> <div class="documentation-logo logo" data-astro-cid-tycb33lk=""><!-- Old Christmas icon -->
<!-- 
<svg width="184" height="44" viewBox="0 0 184 44" fill="none" xmlns="http://www.w3.org/2000/svg">
	<path fill-rule="evenodd" clip-rule="evenodd" d="M33.8209 5.1219C33.885 4.95937 34.115 4.95937 34.1791 5.1219L35.2253 7.77465L37.8781 8.82088C38.0406 8.88499 38.0406 9.11501 37.8781 9.17912L35.2253 10.2253L34.1791 12.8781C34.115 13.0406 33.885 13.0406 33.8209 12.8781L32.7747 10.2253L30.1219 9.17912C29.9594 9.11501 29.9594 8.88499 30.1219 8.82088L32.7747 7.77465L33.8209 5.1219Z" fill="#F9A825"/>
    <path d="M5.30092 15.1478C5.37479 14.9605 5.63986 14.9605 5.71373 15.1478L6.60557 17.4091L8.86685 18.3009C9.05415 18.3748 9.05415 18.6399 8.86685 18.7137L6.60557 19.6056L5.71373 21.8669C5.63986 22.0541 5.37479 22.0541 5.30092 21.8669L4.40908 19.6056L2.1478 18.7137C1.9605 18.6399 1.9605 18.3748 2.1478 18.3009L4.40908 17.4091L5.30092 15.1478Z" fill="#F9A825"/>
    <path d="M11.8231 3.12041C11.8864 2.95986 12.1136 2.95986 12.1769 3.12041L12.9414 5.05865L14.8796 5.82308C15.0401 5.8864 15.0401 6.1136 14.8796 6.17692L12.9414 6.94135L12.1769 8.87959C12.1136 9.04014 11.8864 9.04014 11.8231 8.87959L11.0586 6.94135L9.12041 6.17692C8.95986 6.1136 8.95986 5.8864 9.12041 5.82308L11.0586 5.05865L11.8231 3.12041Z" fill="#F9A825"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M22.6478 7.35459L34.7627 21.6923C35.1531 22.1543 35.0472 22.8544 34.5376 23.1802L26.9989 28.0001L18.4281 20.7531L11.3382 23.2611C10.402 23.5923 9.60771 22.5041 10.2085 21.7134L21.0877 7.39502C21.4749 6.88536 22.2346 6.86567 22.6478 7.35459ZM33.432 28.0842L38.3592 34.7471C38.7427 35.2657 38.3724 36 37.7274 36H6.27248C5.62746 36 5.25722 35.2657 5.64074 34.7471L10.8523 27.6996C10.9484 27.5697 11.0822 27.4725 11.2356 27.4214L17.6878 25.2707C17.9285 25.1904 18.1932 25.2314 18.3984 25.3806L26.2854 31.1166C26.5445 31.3051 26.8922 31.3173 27.1639 31.1475L32.3838 27.885C32.7316 27.6677 33.1881 27.7544 33.432 28.0842Z" fill="#089981"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M17.6363 11.9375C20.7386 12.451 23.1213 11.505 24.9187 10.0422L25.8869 11.1881C23.6236 13.0379 20.553 14.1584 16.6261 13.267L17.6363 11.9375ZM34.0572 20.8573C30.0669 21.363 26.2864 20.8179 23.1264 19.7076C20.7393 18.8689 18.6873 17.7013 17.155 16.3997C16.5283 15.8674 15.9767 15.3021 15.5241 14.7174L16.4708 13.4713C16.8706 14.0544 17.4225 14.6588 18.1262 15.2565C19.5001 16.4237 21.3856 17.5061 23.6236 18.2924C26.3235 19.241 29.5087 19.7493 32.8863 19.4716L34.0572 20.8573ZM9.06812 30.1123C15.4775 33.3909 23.0493 33.8897 29.0345 32.0941C31.0827 31.4796 32.9275 30.6019 34.4713 29.4897L35.3633 30.6959C33.6586 31.9268 31.6497 32.8756 29.4655 33.5309C23.053 35.4546 14.9758 34.8964 8.16479 31.3339L9.06812 30.1123Z" fill="#45E5CB"/>
    <path d="M55.56 13.96C59.016 13.96 61.536 16.456 61.536 19.696C61.536 22.936 59.016 25.432 55.56 25.432H53.376V31H49.896V13.96H55.56ZM55.512 22.168C57.096 22.168 58.152 21.088 58.152 19.696C58.152 18.304 57.096 17.224 55.512 17.224H53.376V22.168H55.512ZM66.8636 14.944C66.8636 16.096 65.9276 17.032 64.7516 17.032C63.6236 17.032 62.6636 16.096 62.6636 14.944C62.6636 13.792 63.6236 12.856 64.7516 12.856C65.9276 12.856 66.8636 13.792 66.8636 14.944ZM63.1196 31V19H66.4076V31H63.1196ZM69.0849 31V19H72.3729V20.368C72.9969 19.408 74.2449 18.736 75.8049 18.736C78.7089 18.736 80.4369 20.848 80.4369 23.968V31H77.1489V24.52C77.1489 22.792 76.4049 21.736 75.0369 21.736C73.5249 21.736 72.3729 22.84 72.3729 25.144V31H69.0849ZM82.2041 25C82.2041 21.448 84.8681 18.736 88.5161 18.736C91.6601 18.736 94.4201 20.752 94.4201 24.64C94.4201 24.928 94.4201 25.264 94.3721 25.768H85.3961C85.5881 27.376 87.0041 28.264 88.5881 28.264C90.0761 28.264 91.1561 27.568 91.6841 26.752L94.1321 28.576C93.0281 30.184 91.0841 31.264 88.5641 31.264C84.9881 31.264 82.2041 28.792 82.2041 25ZM88.4201 21.448C87.1961 21.448 85.8281 22.072 85.5161 23.536H91.1321C90.8441 22.12 89.6441 21.448 88.4201 21.448ZM100.412 28.24L103.076 26.008C103.916 27.28 105.38 28.024 106.772 28.024C108.14 28.024 109.052 27.352 109.052 26.368C109.052 25.408 108.356 24.736 106.676 24.16L105.236 23.656C102.5 22.696 101.036 21.112 101.036 18.784C101.036 15.568 103.484 13.672 106.796 13.672C108.884 13.672 110.708 14.392 112.172 16.024L109.868 18.4C109.052 17.416 107.996 16.936 106.82 16.936C105.644 16.936 104.54 17.44 104.54 18.448C104.54 19.48 105.38 19.936 107.18 20.584L108.548 21.088C111.044 22 112.604 23.584 112.604 26.152C112.58 29.2 110.156 31.288 106.628 31.288C103.916 31.288 101.636 30.112 100.412 28.24ZM125.859 27.808C124.827 29.872 122.667 31.264 120.171 31.264C116.619 31.264 113.811 28.624 113.811 25C113.811 21.376 116.619 18.736 120.171 18.736C122.667 18.736 124.827 20.128 125.859 22.192L123.003 23.728C122.523 22.624 121.491 21.808 120.171 21.808C118.443 21.808 117.123 23.152 117.123 25C117.123 26.848 118.443 28.192 120.171 28.192C121.491 28.192 122.523 27.376 123.003 26.272L125.859 27.808ZM127.482 31V19H130.77V20.92C131.178 19.744 132.402 18.856 133.746 18.856C134.082 18.856 134.442 18.88 134.85 19V22.336C134.346 22.168 133.89 22.072 133.362 22.072C131.802 22.072 130.77 23.296 130.77 25.264V31H127.482ZM140.215 14.944C140.215 16.096 139.279 17.032 138.103 17.032C136.975 17.032 136.015 16.096 136.015 14.944C136.015 13.792 136.975 12.856 138.103 12.856C139.279 12.856 140.215 13.792 140.215 14.944ZM136.471 31V19H139.759V31H136.471ZM142.436 36.016V19H145.724V20.344C146.276 19.576 147.548 18.736 149.204 18.736C152.396 18.736 154.844 21.592 154.844 25C154.844 28.408 152.396 31.264 149.204 31.264C147.548 31.264 146.276 30.424 145.724 29.656V36.016H142.436ZM151.508 25C151.508 23.128 150.284 21.736 148.484 21.736C146.684 21.736 145.46 23.128 145.46 25C145.46 26.872 146.684 28.264 148.484 28.264C150.284 28.264 151.508 26.872 151.508 25ZM164.407 30.88C163.879 31.048 163.231 31.144 162.319 31.144C159.775 31.144 157.735 29.728 157.735 26.8V21.88H155.311V19H157.735V15.664H161.023V19H164.407V21.88H161.023V26.152C161.023 27.616 161.647 28.192 163.063 28.192C163.591 28.192 164.023 28.12 164.407 27.976V30.88ZM173.626 22.648V13.96H175.978L177.874 16.888L179.746 13.96H182.122V22.648H179.698V18.184L177.874 20.968L176.026 18.136V22.648H173.626ZM167.386 22.648V16.456H165.058V13.96H172.258V16.456H169.93V22.648H167.386Z" fill="currentColor"/>
</svg> -->



<!-- Regular icon -->

<svg width="177" height="44" viewBox="0 0 177 44" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M17.6876 25.2705C17.9283 25.1902 18.1933 25.2316 18.3985 25.3808L26.2852 31.1162C26.5444 31.3047 26.8924 31.3173 27.1641 31.1474L32.3839 27.8847C32.7316 27.6675 33.1878 27.7545 33.4317 28.084L38.3594 34.7471C38.7428 35.2656 38.3725 35.9999 37.7276 36H6.27253C5.62754 36 5.25723 35.2657 5.64069 34.7471L10.8526 27.6992C10.9486 27.5695 11.0824 27.4729 11.2354 27.4219L17.6876 25.2705ZM21.088 7.39451C21.4752 6.88532 22.2345 6.8659 22.6475 7.35448L34.7628 21.6924C35.1531 22.1544 35.0468 22.8548 34.5372 23.1806L26.9991 28L18.4278 20.7529L11.338 23.2607C10.4021 23.5917 9.60809 22.5044 10.2081 21.7139L21.088 7.39451ZM13.8243 20.2597L17.7608 18.8672C18.4309 18.6301 19.1771 18.7667 19.7198 19.2256L27.1641 25.5205L32.4981 22.1103L21.9259 9.59862L13.8243 20.2597Z" fill="currentColor"></path>
<path d="M147.308 16.959C150.499 16.959 152.948 19.8149 152.948 23.2227C152.948 26.6307 150.5 29.4873 147.308 29.4873C145.652 29.4872 144.38 28.6469 143.828 27.8789V34.2393H140.54V17.2227H143.828V18.5674C144.38 17.7994 145.652 16.9591 147.308 16.959ZM104.9 11.8955C106.988 11.8956 108.812 12.6152 110.276 14.2471L107.972 16.623C107.156 15.6392 106.1 15.1592 104.924 15.1592C103.748 15.1592 102.645 15.6631 102.645 16.6709C102.645 17.7029 103.484 18.1596 105.284 18.8076L106.652 19.3115C109.148 20.2235 110.708 21.8072 110.708 24.375C110.684 27.4229 108.26 29.5106 104.732 29.5107C102.02 29.5107 99.7396 28.3349 98.5156 26.4629L101.18 24.2314C102.02 25.5034 103.484 26.247 104.876 26.2471C106.244 26.2471 107.156 25.5748 107.156 24.5908C107.156 23.631 106.46 22.9587 104.78 22.3828L103.34 21.8789C100.604 20.9189 99.1396 19.3348 99.1396 17.0068C99.1398 13.791 101.588 11.8955 104.9 11.8955ZM86.6201 16.959C89.7641 16.959 92.5244 18.9753 92.5244 22.8633C92.5244 23.1513 92.5246 23.4873 92.4766 23.9912H83.5C83.692 25.5992 85.1084 26.4873 86.6924 26.4873C88.18 26.4872 89.26 25.7914 89.7881 24.9756L92.2363 26.7988C91.1323 28.4068 89.188 29.4873 86.668 29.4873C83.092 29.4872 80.3086 27.0146 80.3086 23.2227C80.3088 19.6709 82.9723 16.959 86.6201 16.959ZM118.275 16.959C120.771 16.9591 122.931 18.3512 123.963 20.415L121.107 21.9512C120.627 20.8473 119.595 20.0314 118.275 20.0312C116.548 20.0312 115.227 21.3749 115.227 23.2227C115.227 25.0707 116.547 26.415 118.275 26.415C119.595 26.4149 120.627 25.599 121.107 24.4951L123.963 26.0312C122.931 28.0951 120.771 29.4872 118.275 29.4873C114.723 29.4873 111.915 26.8467 111.915 23.2227C111.915 19.5989 114.724 16.959 118.275 16.959ZM159.127 17.2227H162.511V20.1035H159.127V24.375C159.127 25.839 159.751 26.415 161.167 26.415C161.695 26.415 162.127 26.3432 162.511 26.1992V29.1035C161.983 29.2715 161.335 29.3672 160.423 29.3672C157.879 29.3672 155.839 27.9512 155.839 25.0234V20.1035H153.415V17.2227H155.839V13.8867H159.127V17.2227ZM53.6641 12.1836C57.12 12.1836 59.6395 14.6791 59.6396 17.9189C59.6396 21.1589 57.12 23.6552 53.6641 23.6553H51.4805V29.2227H48V12.1836H53.6641ZM64.5117 29.2227H61.2236V17.2227H64.5117V29.2227ZM73.9092 16.959C76.813 16.9591 78.541 19.0715 78.541 22.1914V29.2227H75.2529V22.7432C75.2529 21.0152 74.5086 19.959 73.1406 19.959C71.6288 19.9591 70.4766 21.0633 70.4766 23.3672V29.2227H67.1885V17.2227H70.4766V18.5908C71.1006 17.6308 72.3492 16.959 73.9092 16.959ZM131.85 17.0791C132.186 17.0791 132.546 17.1027 132.954 17.2227V20.5596C132.45 20.3916 131.994 20.2949 131.466 20.2949C129.906 20.2949 128.874 21.5193 128.874 23.4873V29.2227H125.586V17.2227H128.874V19.1436C129.282 17.9676 130.506 17.0792 131.85 17.0791ZM137.862 29.2227H134.574V17.2227H137.862V29.2227ZM146.588 19.959C144.788 19.959 143.564 21.3509 143.563 23.2227C143.563 25.0947 144.788 26.4873 146.588 26.4873C148.388 26.4873 149.612 25.0947 149.612 23.2227C149.612 21.3509 148.388 19.959 146.588 19.959ZM169.993 9.76074C170.876 9.76079 171.697 9.9237 172.455 10.25C173.213 10.5764 173.881 11.0326 174.457 11.6182C175.043 12.1942 175.499 12.8617 175.825 13.6201C176.151 14.3783 176.314 15.1991 176.314 16.082C176.314 16.9556 176.152 17.7769 175.825 18.5449C175.499 19.3032 175.043 19.975 174.457 20.5605C173.881 21.1365 173.208 21.5877 172.44 21.9141C171.682 22.2404 170.867 22.4042 169.993 22.4043C169.12 22.4043 168.298 22.2405 167.53 21.9141C166.772 21.5877 166.1 21.1365 165.515 20.5605C164.939 19.975 164.488 19.3032 164.161 18.5449C163.835 17.7769 163.671 16.9556 163.671 16.082C163.671 15.2086 163.835 14.393 164.161 13.6348C164.488 12.8668 164.939 12.1942 165.515 11.6182C166.1 11.0327 166.772 10.5764 167.53 10.25C168.298 9.92362 169.12 9.76074 169.993 9.76074ZM86.5244 19.6709C85.3005 19.6709 83.9323 20.295 83.6201 21.7588H89.2363C88.9482 20.3431 87.7482 19.671 86.5244 19.6709ZM169.993 11.1865C169.312 11.1865 168.672 11.3109 168.077 11.5605C167.492 11.8101 166.974 12.1612 166.522 12.6123C166.071 13.0635 165.72 13.5865 165.471 14.1816C165.221 14.7671 165.097 15.4006 165.097 16.082C165.097 16.7634 165.221 17.402 165.471 17.9971C165.72 18.5827 166.071 19.1015 166.522 19.5527C166.974 20.0038 167.492 20.3539 168.077 20.6035C168.672 20.8531 169.312 20.9785 169.993 20.9785C170.675 20.9785 171.308 20.8531 171.894 20.6035C172.489 20.3539 173.012 20.0038 173.463 19.5527C173.914 19.1015 174.265 18.5827 174.515 17.9971C174.764 17.402 174.889 16.7634 174.889 16.082C174.889 15.4006 174.764 14.7671 174.515 14.1816C174.265 13.5865 173.914 13.0635 173.463 12.6123C173.012 12.1611 172.489 11.8101 171.894 11.5605C171.308 11.311 170.675 11.1866 169.993 11.1865ZM51.4805 20.3916H53.6162C55.2001 20.3915 56.2559 19.3109 56.2559 17.9189C56.2558 16.5271 55.2 15.4474 53.6162 15.4473H51.4805V20.3916ZM169.878 13.2314C170.406 13.2315 170.838 13.2932 171.174 13.418C171.519 13.5332 171.773 13.7163 171.937 13.9658C172.1 14.2154 172.182 14.5271 172.182 14.9014C172.182 15.2469 172.09 15.5494 171.908 15.8086C171.726 16.0581 171.481 16.2646 171.174 16.4277L172.815 18.9336H171.217L169.964 16.8027H169.445V18.9336H168.034V13.2314H169.878ZM169.445 15.751H169.849C170.127 15.751 170.348 15.6932 170.511 15.5781C170.674 15.4533 170.756 15.247 170.756 14.959C170.756 14.7383 170.684 14.5703 170.54 14.4551C170.396 14.3399 170.165 14.2822 169.849 14.2822H169.445V15.751ZM62.8555 11.0791C64.0314 11.0791 64.9677 12.0151 64.9678 13.167C64.9678 14.319 64.0315 15.2549 62.8555 15.2549C61.7275 15.2548 60.7676 14.3189 60.7676 13.167C60.7677 12.0151 61.7276 11.0792 62.8555 11.0791ZM136.207 11.0791C137.383 11.0793 138.318 12.0152 138.318 13.167C138.318 14.3188 137.383 15.2546 136.207 15.2549C135.079 15.2549 134.118 14.319 134.118 13.167C134.118 12.0151 135.079 11.0791 136.207 11.0791Z" fill="currentColor"></path>
</svg>
</div> </a> </div>  </div> <div class="flex" data-astro-cid-d74r2unp=""></div> <div class="flex" data-astro-cid-d74r2unp=""> <div class="search-container" data-astro-cid-fg37foga=""> <div class="search-wrapper" data-astro-cid-fg37foga=""> <input class="search-input" type="text" placeholder="Search docs" name="s" value="" data-astro-cid-fg37foga="" data-has-input-listener="true"> <svg width="28" height="28" viewBox="0 0 28 28" class="search-button" data-astro-cid-fg37foga="" data-icon="theme/search">  <symbol id="ai:local:theme/search"><path fill="currentColor" fill-rule="evenodd" d="M18.5 12.5a6 6 0 1 1-12 0 6 6 0 0 1 12 0m-1.25 5.8a7.5 7.5 0 1 1 1.06-1.06l4.22 4.23.53.53L22 23.06l-.53-.53-4.22-4.22Z" clip-rule="evenodd"></path></symbol><use xlink:href="#ai:local:theme/search"></use>  </svg> <button class="search-clear" type="button" title="Reset" data-search-clear="" data-astro-cid-fg37foga="">Clear</button> <span class="divider" data-astro-cid-fg37foga=""></span> <button class="search-close" type="button" title="Close" data-search-close="" data-astro-cid-fg37foga=""> <svg width="18" height="18" viewBox="0 0 18 18" data-astro-cid-fg37foga="" data-icon="theme/cross-18">  <use xlink:href="#ai:local:theme/cross-18"></use>  </svg> </button> </div> <div id="search-results-wrapper" data-astro-cid-fg37foga=""> <aside id="search-results" hidden="" data-astro-cid-fg37foga="" data-has-button-listener="true"> <!-- Don't use h1 because when built it will be used as the first heading on the page --> <div class="heading" data-astro-cid-fg37foga="">Search results</div> <div id="search-results-contents" data-astro-cid-fg37foga=""></div> </aside> </div> </div>   </div> <ul class="links" data-astro-cid-d74r2unp="">  </ul> <div class="flex" data-astro-cid-d74r2unp=""></div> <div data-hide-when-search="" data-astro-cid-d74r2unp=""> <div id="version-select" data-hideable="true" data-astro-cid-kx7qoxgq=""> <label style="--sl-select-width: undefined; --sl-label-icon-size: 16px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq="">Version</span>  <select value="v6" data-has-border="" no-icon="true" data-astro-cid-lmznfliq=""> <option value="v6" selected="true" data-astro-cid-lmznfliq="">Version 6</option><option value="v5" data-astro-cid-lmznfliq="">Version 5</option><option value="v4" data-astro-cid-lmznfliq="">Version 4</option><option value="v3" data-astro-cid-lmznfliq="">Version 3</option> </select> <svg width="16" height="16" viewBox="0 0 24 24" class="icon caret" data-astro-cid-lmznfliq="" data-icon="theme/down-caret">  <use xlink:href="#ai:local:theme/down-caret"></use>  </svg> </label>  </div>   </div> <button id="search-button" data-astro-cid-6zeqadij="" data-has-listener="true"> <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-6zeqadij="" data-icon="theme/search">  <use xlink:href="#ai:local:theme/search"></use>  </svg> </button>  <script data-base-url="/pine-script-docs" data-astro-exec="">
	async function loadPageFind() {
		const base = document.currentScript.getAttribute('data-base-url');
		const pageFindBundleUrl = `${base}/pagefind/`;
		const pagefind = await import(`${pageFindBundleUrl}pagefind.js`);
		await pagefind.options({
			bundlePath: pageFindBundleUrl,
		});
		window.pagefind = pagefind;
	}
	loadPageFind().catch();
</script>  <docs-theme-select class="hide-with-breakpoint-568" data-astro-cid-3wpspbi7=""> <label style="--sl-select-width: 48px; --sl-label-icon-size: 28px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq="">Theme</span> <svg width="28" height="28" viewBox="0 0 28 28" class="icon label-icon" data-button="" data-round="" data-astro-cid-lmznfliq="" data-icon="theme/system-28">  <symbol id="ai:local:theme/system-28"><path fill="currentColor" d="M8 4h1v2H8zm0 9v2h1v-2zm6-3V9h-2v1zM3 9v1h2V9zm5.5 3a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5m4.2-6-.7-.7-1.4 1.4.7.7zM5 13.7l-.7-.7 1.4-1.4.7.7zm7.7-.7-.7.7-1.4-1.4.7-.7zM4.3 6l.7-.7 1.4 1.4-.7.7zm3 17 14-14 .8.7L8 23.7zm17.2-.1a3.5 3.5 0 0 1-3.4-5.9H21a4 4 0 1 0 3.5 5.9"></path></symbol><use xlink:href="#ai:local:theme/system-28"></use>  </svg> <select value="auto" data-button="" data-astro-cid-lmznfliq=""> <option value="dark" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Dark&nbsp;&nbsp;</option><option value="light" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Light&nbsp;&nbsp;</option><option value="auto" selected="true" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Auto&nbsp;&nbsp;</option> </select>  </label>  </docs-theme-select>   <script data-astro-exec="">
	ThemeProvider.updatePickers('unknown');
</script>  </nav> </header>        <div id="image-lightbox" class="not-content" hidden="" data-astro-cid-kws7taxh=""> <div class="button-wrapper" data-astro-cid-kws7taxh=""> <div class="not-content" style="" data-astro-cid-pkzv2hgs=""> <button id="lightbox-close-button" title="Close image preview" data-astro-cid-pkzv2hgs="" class="not-content stvb-base stvb-pointer stvb-black stvb-medium stvb-secondary stvb-icon stvb-force-no-border">  <svg width="24" height="24" viewBox="0 0 18 18" data-astro-cid-kws7taxh="" data-icon="theme/cross-18">  <symbol id="ai:local:theme/cross-18"><g fill="none"><g clip-path="url(#a)"><path fill="currentColor" fill-rule="evenodd" d="M5.53 4.47 4.47 5.53 7.94 9l-3.47 3.47 1.06 1.06L9 10.06l3.47 3.47 1.06-1.06L10.06 9l3.47-3.47-1.06-1.06L9 7.94z" clip-rule="evenodd"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h18v18H0z"></path></clipPath></defs></g></symbol><use xlink:href="#ai:local:theme/cross-18"></use>  </svg>  </button> </div>  </div> <img id="lightbox-image" src="" data-astro-cid-kws7taxh=""> </div>   <div id="page-container" data-astro-cid-xgirumru=""> <aside id="nav" class="" style="" data-astro-cid-sa57sq6l=""> <div class="sidebar-viewport slick-scroll" data-astro-cid-sa57sq6l=""> <div class="sidebar" data-astro-cid-sa57sq6l=""> <ul class="toc" aria-label="Docs sidebar" data-astro-cid-sa57sq6l=""> <li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/welcome" data-astro-cid-omxx3dey="">Welcome to Pine Script® v6</a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Pine Script® primer</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <symbol id="ai:local:theme/right-caret"><path fill="currentColor" d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1 1 0 0 0 0-1.42"></path></symbol><use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-steps" data-astro-cid-omxx3dey="">First steps</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-indicator" data-astro-cid-omxx3dey="">First indicator</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/next-steps" data-astro-cid-omxx3dey="">Next steps</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Language</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/execution-model" data-astro-cid-omxx3dey="">Execution model</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/type-system" data-astro-cid-omxx3dey="">Type system</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/script-structure" data-astro-cid-omxx3dey="">Script structure</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/identifiers" data-astro-cid-omxx3dey="">Identifiers</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/variable-declarations" data-astro-cid-omxx3dey="">Variable declarations</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/operators" data-astro-cid-omxx3dey="">Operators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/conditional-structures" data-astro-cid-omxx3dey="">Conditional structures</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/loops" data-astro-cid-omxx3dey="">Loops</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/built-ins" data-astro-cid-omxx3dey="">Built-ins</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/user-defined-functions" data-astro-cid-omxx3dey="">User-defined functions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/objects" data-astro-cid-omxx3dey="">Objects</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/enums" data-astro-cid-omxx3dey="">Enums</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/methods" data-astro-cid-omxx3dey="">Methods</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/arrays" data-astro-cid-omxx3dey="">Arrays</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/matrices" data-astro-cid-omxx3dey="">Matrices</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/maps" data-astro-cid-omxx3dey="">Maps</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Visuals</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/overview" data-astro-cid-omxx3dey="">Overview</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/backgrounds" data-astro-cid-omxx3dey="">Backgrounds</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/bar-coloring" data-astro-cid-omxx3dey="">Bar coloring</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/bar-plotting" data-astro-cid-omxx3dey="">Bar plotting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/colors" data-astro-cid-omxx3dey="">Colors</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/fills" data-astro-cid-omxx3dey="">Fills</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/levels" data-astro-cid-omxx3dey="">Levels</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/lines-and-boxes" data-astro-cid-omxx3dey="">Lines and boxes</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/plots" data-astro-cid-omxx3dey="">Plots</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/tables" data-astro-cid-omxx3dey="">Tables</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/text-and-shapes" data-astro-cid-omxx3dey="">Text and shapes</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details open="" data-is-parent="" data-is-on-path="" data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Concepts</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/alerts" data-astro-cid-omxx3dey="">Alerts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-states" data-astro-cid-omxx3dey="">Bar states</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/chart-information" data-astro-cid-omxx3dey="">Chart information</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/inputs" data-astro-cid-omxx3dey="">Inputs</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/libraries" data-astro-cid-omxx3dey="">Libraries</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/non-standard-charts-data" data-astro-cid-omxx3dey="">Non-standard charts data</a></li><li class="item" data-current="" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/other-timeframes-and-data" data-astro-cid-omxx3dey="">Other timeframes and data</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/repainting" data-astro-cid-omxx3dey="">Repainting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/sessions" data-astro-cid-omxx3dey="">Sessions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strategies" data-astro-cid-omxx3dey="">Strategies</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strings" data-astro-cid-omxx3dey="">Strings</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/time" data-astro-cid-omxx3dey="">Time</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/timeframes" data-astro-cid-omxx3dey="">Timeframes</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Writing scripts</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/style-guide" data-astro-cid-omxx3dey="">Style guide</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/debugging" data-astro-cid-omxx3dey="">Debugging</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/profiling-and-optimization" data-astro-cid-omxx3dey="">Profiling and optimization</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/publishing" data-astro-cid-omxx3dey="">Publishing scripts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/limitations" data-astro-cid-omxx3dey="">Limitations</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">FAQ</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/general" data-astro-cid-omxx3dey="">General</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/alerts" data-astro-cid-omxx3dey="">Alerts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/data-structures" data-astro-cid-omxx3dey="">Data structures</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/functions" data-astro-cid-omxx3dey="">Functions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/indicators" data-astro-cid-omxx3dey="">Indicators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/other-data-and-timeframes" data-astro-cid-omxx3dey="">Other data and timeframes</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/programming" data-astro-cid-omxx3dey="">Programming</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/strategies" data-astro-cid-omxx3dey="">Strategies</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/strings-and-formatting" data-astro-cid-omxx3dey="">Strings and formatting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/techniques" data-astro-cid-omxx3dey="">Techniques</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/times-dates-and-sessions" data-astro-cid-omxx3dey="">Times, dates, and sessions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/variables-and-operators" data-astro-cid-omxx3dey="">Variables and operators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/visuals" data-astro-cid-omxx3dey="">Visuals</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/error-messages" data-astro-cid-omxx3dey="">Error messages</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/release-notes" data-astro-cid-omxx3dey="">Release notes</a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Migration guides</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/overview" data-astro-cid-omxx3dey="">Overview</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-6" data-astro-cid-omxx3dey="">To Pine Script® version 6</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-5" data-astro-cid-omxx3dey="">To Pine Script® version 5</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-4" data-astro-cid-omxx3dey="">To Pine Script® version 4</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-3" data-astro-cid-omxx3dey="">To Pine Script® version 3</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-2" data-astro-cid-omxx3dey="">To Pine Script® version 2</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/where-can-i-get-more-information" data-astro-cid-omxx3dey="">Where can I get more information?</a></li> </ul> <div class="toc-bottom" data-astro-cid-sa57sq6l=""></div> </div> </div> </aside>  <main class="main-pane" data-page-type="md" data-astro-cid-xgirumru=""> <a id="top" data-astro-cid-xgirumru=""></a> <main class="content" data-toc-shown="" data-astro-cid-ju3wuhkz="">  <div class="content-width" data-astro-cid-xgirumru=""> <div class="breadcrumbs" data-pagefind-ignore="" data-astro-cid-wlavna2o=""> <a href="/pine-script-docs" aria-label="Return back to the documentation home page." data-astro-cid-wlavna2o=""> <span data-astro-cid-wlavna2o="">User Manual</span>  </a>  <span class="divider" data-astro-cid-wlavna2o="">/</span> <a href="/pine-script-docs/concepts/alerts" data-astro-cid-wlavna2o="">Concepts</a> <span class="divider" data-astro-cid-wlavna2o="">/</span> <span class="current-item" data-astro-cid-wlavna2o="">Other timeframes and data</span> </div>     </div> <div id="slot-container" data-astro-cid-xgirumru=""> <h1 id="other-timeframes-and-data" class="md-heading"><a href="#other-timeframes-and-data">Other timeframes and <span class="fancy-wrap">data<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h1>
<h2 id="introduction" class="md-heading"><a href="#introduction"> <span class="fancy-wrap">Introduction<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>Pine Script® allows users to request data from sources and contexts
other than those their charts use. The functions we present on this page
can fetch data from a variety of alternative sources:</p>
<ul>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#requestsecurity">request.security()</a> retrieves data from another symbol, timeframe, or other
context.</li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#requestsecurity_lower_tf">request.security_lower_tf()</a> retrieves <em>intrabar</em> data, i.e., data from a timeframe
lower than the chart timeframe.</li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#requestcurrency_rate">request.currency_rate()</a> requests a <em>daily rate</em> to convert a value expressed in
one currency to another.</li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#requestdividends-requestsplits-and-requestearnings">request.dividends(), request.splits(), and request.earnings()</a> respectively retrieve information about an issuing
company’s dividends, splits, and earnings.</li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#requestfinancial">request.financial()</a> retrieves financial data from
<a href="https://www.factset.com/" rel="nofollow">FactSet</a>.</li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#requesteconomic">request.economic()</a> retrieves economic and industry data.</li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#requestseed">request.seed()</a> retrieves data from a <em>user-maintained</em> GitHub
repository.</li>
</ul>
<aside aria-label="Note" class="tv-informer not-content" style="--informer-header-color:#6A6D78;--informer-back-color-light:#F0F3FA;--informer-back-color-dark:#2A2E39"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM8 6a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 2c.49 0 1 .59 1 1v3.01c0 .42-.51.99-1 .99s-1-.57-1-.99V9c0-.41.51-1 1-1Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Note</span>Throughout this page, and in other parts of our documentation that discuss <code dir="auto">request.*()</code> functions, we often use the term <em>“context”</em> to describe the symbol, timeframe, and any modifications — such as price adjustments, session settings, and non-standard chart types — that apply to a chart or the data retrieved by a script.</p></div></aside>
<p>These are the signatures of the functions in the <code dir="auto">request.*</code> namespace:</p>
<div class="expressive-code not-content"><link rel="stylesheet" href="/pine-script-docs/_astro/ec.dtidy.css"><script type="module" src="/pine-script-docs/_astro/ec.qopfj.js" data-astro-exec=""></script><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text" tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.security(symbol, timeframe, expression, gaps, lookahead, ignore_invalid_symbol, currency, calc_bars_count) → series &lt;type&gt;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.security_lower_tf(symbol, timeframe, expression, ignore_invalid_symbol, currency, ignore_invalid_timeframe, calc_bars_count) → array&lt;type&gt;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.currency_rate(from, to, ignore_invalid_currency) → series float</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.dividends(ticker, field, gaps, lookahead, ignore_invalid_symbol, currency) → series float</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.splits(ticker, field, gaps, lookahead, ignore_invalid_symbol) → series float</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.earnings(ticker, field, gaps, lookahead, ignore_invalid_symbol, currency) → series float</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.financial(symbol, financial_id, period, gaps, ignore_invalid_symbol, currency) → series float</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.economic(country_code, field, gaps, ignore_invalid_symbol) → series float</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.seed(source, symbol, expression, ignore_invalid_symbol, calc_bars_count) → series &lt;type&gt;</span></div></div></code></pre></figure></div>
<p>The <code dir="auto">request.*()</code> family of functions has numerous potential applications. Throughout this page, we discuss in detail these functions and some of their typical use cases.</p>
<aside aria-label="Tip" class="tv-informer not-content" style="--informer-header-color:#089981;--informer-back-color-light:#DAF2EE;--informer-back-color-dark:#082621"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16Zm3.87-12.15c.36.2.49.66.28 1.02l-4 7a.75.75 0 0 1-1.18.16l-3-3a.75.75 0 1 1 1.06-1.06l2.3 2.3 3.52-6.14a.75.75 0 0 1 1.02-.28Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Tip</span>Programmers can also enable compatible scripts to perform calculations on data from another timeframe, without requiring <code dir="auto">request.*()</code> calls, by supplying an argument to the <code dir="auto">timeframe</code> parameter of the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_indicator">indicator()</a> declaration statement.</p></div></aside>
<h2 id="common-characteristics" class="md-heading"><a href="#common-characteristics">Common <span class="fancy-wrap">characteristics<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>Many functions in the <code dir="auto">request.*()</code> namespace share some common properties and parameters. Before we explore each function in depth, let’s familiarize ourselves with these characteristics.</p>
<h3 id="behavior" class="md-heading"><a href="#behavior"> <span class="fancy-wrap">Behavior<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>All <code dir="auto">request.*()</code> functions have similar internal behavior, even though they do not all share the same required parameters. Every unique <code dir="auto">request.*()</code> call in a script requests a dataset from a defined <em>context</em> (i.e., ticker ID and timeframe) and evaluates an <em>expression</em> across the retrieved data.</p>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a> functions allow programmers to specify the context of a request and the expression directly via the <code dir="auto">symbol</code>, <code dir="auto">timeframe</code>, and <code dir="auto">expression</code> parameters, making them suitable for a wide range of data requests.</p>
<p>For example, the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call in this simple script requests daily “AMEX:SPY” data, and it calculates the slope of a 20-bar linear regression line using the retrieved <a href="https://www.tradingview.com/pine-script-reference/v6/#var_hl2">hl2</a> prices. The first two arguments specify the context of the request, and the third specifies the expression to evaluate across the requested data:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Common-characteristics-Behavior-1.B41_C2G4_Z2uWgbr.webp" alt="image" width="1336" height="568" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="1jk"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Behavior&nbsp;of&nbsp;`request.security()`&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;20-bar&nbsp;linear&nbsp;regression&nbsp;slope&nbsp;of&nbsp;`hl2`&nbsp;price</span><span class="mtk9">s&nbsp;from&nbsp;the&nbsp;"AMEX:SPY"&nbsp;symbol&nbsp;on&nbsp;the&nbsp;"1D"&nbsp;timeframe</span><span class="mtk9">.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedSlope</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk29">"AMEX:SPY"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"1D"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.linreg</span><span class="mtk13">(</span><span class="mtk11">hl2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.linreg</span><span class="mtk13">(</span><span class="mtk11">hl2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Is&nbsp;`color.teal`&nbsp;when&nbsp;the&nbsp;`requestedSlope`&nbsp;is&nbsp;posi</span><span class="mtk9">tive,&nbsp;and&nbsp;`color.maroon`&nbsp;otherwise.</span></span><br><span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedSlope</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.maroon</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`requestedSlope`&nbsp;with&nbsp;the&nbsp;`plotColor`.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">requestedSlope</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Requested&nbsp;slope"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_area</span><span class="mtk13">)</span></span><br></code></div>
<p>Other functions within the <code dir="auto">request.*()</code> namespace <em>do not</em> allow programmers to directly define the full context of a request or the evaluated expression. Instead, these functions determine some of the necessary information <em>internally</em> because they perform only specific types of requests.</p>
<p>For instance, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.financial">request.financial()</a> exclusively retrieves periodic financial data. Its required parameters (<code dir="auto">symbol</code>, <code dir="auto">financial_id</code>, and <code dir="auto">period</code>) all define parts of a specific financial <em>ticker ID</em>. The function does not allow specification of the timeframe or expression, as it determines these details internally. The script below demonstrates a simple call to this function that retrieves the annual cost of goods data for the chart symbol’s issuing company:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Common-characteristics-Behavior-2.E8W5-ysC_Z12hBhd.webp" alt="image" width="1336" height="570" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="27k"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Behavior&nbsp;of&nbsp;`request.financial()`&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">format</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">format.volume</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;annual&nbsp;cost&nbsp;of&nbsp;goods&nbsp;sold&nbsp;by&nbsp;the&nbsp;chart&nbsp;symbol</span><span class="mtk9">'s&nbsp;issuing&nbsp;company.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">costOfGoods</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.financial</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"COST_OF_GOODS"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"FY"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`costOfGoods`.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">costOfGoods</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Cost&nbsp;of&nbsp;goods"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_stepline_diamond</span><span class="mtk13">)</span></span><br></code></div>
<p>Scripts can perform up to 40 unique requests using any combination of <code dir="auto">request.*()</code> function calls, or up to 64 if the user has the <a href="https://www.tradingview.com/pricing/">Ultimate plan</a>. Unique <code dir="auto">request.*()</code> calls count toward this limit because they are the only calls that fetch <em>new data</em>. By contrast, redundant calls to the same <code dir="auto">request.*()</code> function with identical arguments <em>do not</em> typically perform new requests. Instead, they <em>reuse</em> the data from the first executed call. See the <a href="/pine-script-docs/writing/limitations/#request-calls"><code dir="auto">request.*()</code> calls</a> section of the <a href="/pine-script-docs/writing/limitations/">Limitations</a> page for more information.</p>
<h3 id="gaps" class="md-heading"><a href="#gaps"><span>​<code dir="auto">gaps</code>​</span><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></a></h3>
<p>When using a <code dir="auto">request.*()</code> function to retrieve data from another context, the data might not come in on each new bar as it would with the current chart. The <code dir="auto">gaps</code> parameter of a <code dir="auto">request.*()</code> function controls how the function responds to nonexistent values in the requested series.</p>
<aside aria-label="Note" class="tv-informer not-content" style="--informer-header-color:#6A6D78;--informer-back-color-light:#F0F3FA;--informer-back-color-dark:#2A2E39"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM8 6a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 2c.49 0 1 .59 1 1v3.01c0 .42-.51.99-1 .99s-1-.57-1-.99V9c0-.41.51-1 1-1Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Note</span>The <code dir="auto">timeframe_gaps</code> parameter of the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_indicator">indicator()</a> declaration statement is similar to the <code dir="auto">gaps</code> parameter for <code dir="auto">request.*()</code> functions. When the declaration statement includes a <code dir="auto">timeframe</code> argument, causing the script to evaluate its code using data from a specific timeframe, the <code dir="auto">timeframe_gaps</code> parameter specifies how the script handles nonexistent values on each chart bar.</p></div></aside>
<p>Suppose we have a script that requests hourly data for the chart’s symbol using <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> executing on a 1-minute chart. The function call returns new values only on the 1-minute bars that cover the opening or closing times of the symbol’s hourly bars. On other chart bars, we can decide whether the function returns <a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a> values or the last available values via the <code dir="auto">gaps</code> parameter.</p>
<p>If the <code dir="auto">gaps</code> parameter uses <a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.gaps_on">barmerge.gaps_on</a>, the function returns <a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a> results on all chart bars where new data is not yet confirmed from the requested context. Otherwise, if the parameter uses <a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.gaps_off">barmerge.gaps_off</a>, the function fills the gaps in the requested data with the last confirmed values on historical bars and the most recent developing values on realtime bars.</p>
<p>The script below demonstrates the difference in behavior by plotting the results from two <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> calls that fetch the <a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a> price of the current symbol from the hourly timeframe on a 1-minute chart. The first call uses <code dir="auto">gaps = barmerge.gaps_off</code> and the second uses <code dir="auto">gaps = barmerge.gaps_on</code>:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Common-characteristics-Gaps-1.DX6PixJ0_ZcmWMl.webp" alt="image" width="1332" height="598" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="2ok"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"`gaps`&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`close`&nbsp;requested&nbsp;from&nbsp;the&nbsp;hourly&nbsp;timeframe&nbsp;w</span><span class="mtk9">ithout&nbsp;gaps.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">dataWithoutGaps</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"60"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">gaps</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.gaps_off</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`close`&nbsp;requested&nbsp;from&nbsp;the&nbsp;hourly&nbsp;timeframe&nbsp;w</span><span class="mtk9">ith&nbsp;gaps.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">dataWithGaps</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"60"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">gaps</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.gaps_on</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;requested&nbsp;data.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">dataWithoutGaps</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Data&nbsp;without&nbsp;gaps"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.blue</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_linebr</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">dataWithGaps</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Data&nbsp;with&nbsp;gaps"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">15</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_linebr</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Highlight&nbsp;the&nbsp;background&nbsp;for&nbsp;realtime&nbsp;bars.</span></span><br><span><span class="mtk16">bgcolor</span><span class="mtk13">(</span><span class="mtk11">barstate.isrealtime</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.aqua</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">70</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">title</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Realtime&nbsp;bar&nbsp;highlight"</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.gaps_off">barmerge.gaps_off</a> is the default value for the <code dir="auto">gaps</code> parameter in all applicable <code dir="auto">request.*()</code> functions.</li>
<li>The script plots the requested series as lines with breaks (<a href="https://www.tradingview.com/pine-script-reference/v6/#var_plot.style_linebr">plot.style_linebr</a>), which do not bridge over <a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a> values as the default style (<a href="https://www.tradingview.com/pine-script-reference/v6/#var_plot.style_line">plot.style_line</a>) does.</li>
<li>When using <a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.gaps_off">barmerge.gaps_off</a>, the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> function returns the last confirmed <a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a> from the hourly timeframe on all historical bars. When running on <em>realtime bars</em> (the bars with the <a href="https://www.tradingview.com/pine-script-reference/v6/#var_color.aqua">color.aqua</a> background in this example), it returns the symbol’s current <a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a> value, regardless of confirmation. For more information, see the <a href="/pine-script-docs/concepts/other-timeframes-and-data/#historical-and-realtime-behavior">Historical and realtime behavior</a> section of this page.</li>
</ul>
<h3 id="ignore_invalid_symbol" class="md-heading"><a href="#ignore_invalid_symbol"><span>​<code dir="auto">ignore_invalid_symbol</code>​</span><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></a></h3>
<p>The <code dir="auto">ignore_invalid_symbol</code> parameter of <code dir="auto">request.*()</code> functions determines how a function handles invalid data requests, e.g.:</p>
<ul>
<li>Using a <code dir="auto">request.*()</code> function with a nonexistent ticker ID as the <code dir="auto">symbol/ticker</code> parameter.</li>
<li>Using <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.financial">request.financial()</a> to retrieve information that does not exist for the specified <code dir="auto">symbol</code> or <code dir="auto">period</code>.</li>
<li>Using <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.economic">request.economic()</a> to request a <code dir="auto">field</code> that does not exist for a <code dir="auto">country_code</code>.</li>
</ul>
<p>A <code dir="auto">request.*()</code> function call produces a <em>runtime error</em> and halts the execution of the script when making an erroneous request if its <code dir="auto">ignore_invalid_symbol</code> parameter is <code dir="auto">false</code>. When this parameter’s value is <code dir="auto">true</code>, the function returns <a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a> values in such a case instead of raising an error.</p>
<p>This example uses <code dir="auto">request.*()</code> calls within a <a href="/pine-script-docs/language/user-defined-functions/">user-defined function</a> to retrieve data for estimating an instrument’s market capitalization (market cap). The user-defined <code dir="auto">calcMarketCap()</code> function calls <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.financial">request.financial()</a> to retrieve the total shares outstanding for a symbol and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
to retrieve a tuple containing the symbol’s <a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a> and <a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.currency">syminfo.currency</a> values. We’ve included <code dir="auto">ignore_invalid_symbol = true</code> in both of these <code dir="auto">request.*()</code> calls to prevent runtime errors for invalid requests.</p>
<p>The script displays a <a href="/pine-script-docs/concepts/strings/#formatting-strings">formatted string</a> representing the symbol’s estimated market cap value and currency in a <a href="https://www.tradingview.com/pine-script-reference/v6/#type_table">table</a> on the chart and uses a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plot">plot()</a> call to visualize the <code dir="auto">marketCap</code> history:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Common-characteristics-Ignore-invalid-symbol-1.DPSV2CB9_2wVvY7.webp" alt="image" width="1334" height="596" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="3rh"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"`ignore_invalid_symbol`&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Market&nbsp;cap&nbsp;estimate"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">format</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">format.volume</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;symbol&nbsp;to&nbsp;request&nbsp;data&nbsp;from.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.symbol</span><span class="mtk13">(</span><span class="mtk29">"TSX:SHOP"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Symbol"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Estimates&nbsp;the&nbsp;market&nbsp;capitalization&nbsp;of&nbsp;the&nbsp;specif</span><span class="mtk9">ied&nbsp;`tickerID`&nbsp;if&nbsp;the&nbsp;data&nbsp;exists.</span></span><br><span><span class="mtk15">calcMarketCap</span><span class="mtk13">(</span><span class="mtk18 mtkb">simple</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">tickerID</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;quarterly&nbsp;total&nbsp;shares&nbsp;outstanding&nbsp;for&nbsp;the&nbsp;`t</span><span class="mtk9">ickerID`.&nbsp;Returns&nbsp;`na`&nbsp;when&nbsp;the&nbsp;data&nbsp;isn't&nbsp;availab</span><span class="mtk9">le.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">tso</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.financial</span><span class="mtk13">(</span><span class="mtk33">tickerID</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"TOTAL_SHARES_OUTSTANDING"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"FQ"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">ignore_invalid_symbol</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`close`&nbsp;price&nbsp;and&nbsp;currency&nbsp;for&nbsp;the&nbsp;`tickerID`</span><span class="mtk9">.&nbsp;Returns&nbsp;`[na,&nbsp;na]`&nbsp;when&nbsp;the&nbsp;`tickerID`&nbsp;is&nbsp;invali</span><span class="mtk9">d.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">[</span><span class="mtk33">price</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">currency</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">tickerID</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">syminfo.currency</span><span class="mtk13">]</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">ignore_invalid_symbol</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Return&nbsp;a&nbsp;tuple&nbsp;containing&nbsp;the&nbsp;market&nbsp;cap&nbsp;estima</span><span class="mtk9">te&nbsp;and&nbsp;the&nbsp;quote&nbsp;currency.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">[</span><span class="mtk33">tso</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">price</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">currency</span><span class="mtk13">]</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;`table`&nbsp;object&nbsp;with&nbsp;a&nbsp;single&nbsp;cell&nbsp;that&nbsp;displays</span><span class="mtk9">&nbsp;the&nbsp;`marketCap`&nbsp;and&nbsp;`quoteCurrency`.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">table</span><span class="mtk1">&nbsp;</span><span class="mtk33">infoTable</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">table.new</span><span class="mtk13">(</span><span class="mtk11">position.top_right</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Initialize&nbsp;the&nbsp;table's&nbsp;cell&nbsp;on&nbsp;the&nbsp;first&nbsp;bar.</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">table.cell</span><span class="mtk13">(</span><span class="mtk33">infoTable</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.white</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">size.huge</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">bgcolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Get&nbsp;the&nbsp;market&nbsp;cap&nbsp;estimate&nbsp;and&nbsp;quote&nbsp;currency&nbsp;</span><span class="mtk9">for&nbsp;the&nbsp;`symbol`.</span></span><br><span><span class="mtk13">[</span><span class="mtk33">marketCap</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">quoteCurrency</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">calcMarketCap</span><span class="mtk13">(</span><span class="mtk33">symbol</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.islast</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;formatted&nbsp;text&nbsp;displayed&nbsp;inside&nbsp;the&nbsp;`infoTabl</span><span class="mtk9">e`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableText</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"Market&nbsp;cap:\n{0}&nbsp;{1}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">marketCap</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">format.volume</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">quoteCurrency</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Update&nbsp;the&nbsp;`infoTable`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">table.cell_set_text</span><span class="mtk13">(</span><span class="mtk33">infoTable</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableText</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`marketCap`&nbsp;value.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">marketCap</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Market&nbsp;cap"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">60</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_area</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The <code dir="auto">calcMarketCap()</code> function only returns non-na values on valid instruments with total shares outstanding data, such as the one we selected for this example. It returns <a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a> on others that do not have financial data, including forex, crypto, and derivatives.</li>
<li>Not all issuing companies publish quarterly financial reports. If the issuing company of the <code dir="auto">symbol</code> does not report on a quarterly basis, change the “FQ” value in this script to the company’s minimum reporting period. See the <a href="/pine-script-docs/concepts/other-timeframes-and-data/#requestfinancial">request.financial()</a> section for more information.</li>
<li>We included <a href="https://www.tradingview.com/pine-script-reference/v6/#var_format.volume">format.volume</a> in the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_indicator">indicator()</a> and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.tostring">str.tostring()</a> calls to specify that the y-axis of the chart pane represents volume-formatted values and the “string” representation of the <code dir="auto">marketCap</code> value shows as volume-formatted text.</li>
<li>For efficiency, this script creates a <a href="https://www.tradingview.com/pine-script-reference/v6/#type_table">table</a> and initializes its cell on the <em>first</em> chart bar, then updates the cell’s text on the <em>last</em> bar. To learn more about working with tables, see the <a href="/pine-script-docs/visuals/tables/">Tables</a> page.</li>
</ul>
<h3 id="currency" class="md-heading"><a href="#currency"><span>​<code dir="auto">currency</code>​</span><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></a></h3>
<p>The <code dir="auto">currency</code> parameter of a <code dir="auto">request.*()</code> function enables programmers to specify the currency of the requested data. If this parameter’s value differs from the symbol’s <a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.currency">syminfo.currency</a> value, the function converts the requested values to express them in the specified currency. The <code dir="auto">currency</code> parameter accepts a built-in constant from the <code dir="auto">currency.*</code> namespace, such as <a href="https://www.tradingview.com/pine-script-reference/v6/#var_currency.JPY">currency.JPY</a>, or a string representing a valid currency code (e.g., “JPY”). By default, this parameter accepts a “series” argument that can change across executions. However, if <a href="/pine-script-docs/concepts/other-timeframes-and-data/#dynamic-requests">dynamic requests</a> are not enabled, it accepts only a value with the “simple” <a href="/pine-script-docs/language/type-system/#qualifiers">qualifier</a> or a weaker one.</p>
<p>The conversion rate between the <a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.currency">syminfo.currency</a> of the requested data and the specified <code dir="auto">currency</code> depends on the <em>previous daily value</em> of the corresponding currency pair from the most popular exchange. If no exchange provides the rate directly, the function derives the rate using a <a href="https://www.tradingview.com/support/solutions/43000502298/">spread symbol</a>.</p>
<aside aria-label="Note" class="tv-informer not-content" style="--informer-header-color:#6A6D78;--informer-back-color-light:#F0F3FA;--informer-back-color-dark:#2A2E39"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM8 6a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 2c.49 0 1 .59 1 1v3.01c0 .42-.51.99-1 .99s-1-.57-1-.99V9c0-.41.51-1 1-1Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Note</span>Not all <code dir="auto">request.*()</code> function calls return values expressed as a currency amount. Therefore, currency conversion is <em>not</em> always necessary. For example, some of the series that the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.financial">request.financial()</a> function can retrieve — such as the “PIOTROSKI_F_SCORE” and “NUMBER_OF_EMPLOYEES” metrics — use units other than currency. It is up to programmers to determine when currency conversion is appropriate for their data requests.</p></div></aside>
<h3 id="lookahead" class="md-heading"><a href="#lookahead"><span>​<code dir="auto">lookahead</code>​</span><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></a></h3>
<p>The <code dir="auto">lookahead</code> parameter in <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.dividends">request.dividends()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.splits">request.splits()</a>, and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.earnings">request.earnings()</a> specifies the lookahead behavior of the function call. Its default value is <a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_off">barmerge.lookahead_off</a>.</p>
<p>When requesting data from a higher-timeframe (HTF) context, the <code dir="auto">lookahead</code> value determines whether the <code dir="auto">request.*()</code> function can return values from times <em>beyond</em> those of the historical bars it executes on. In other words, the <code dir="auto">lookahead</code> paremeter determines whether the requested data may contain <em>lookahead bias</em> on historical bars.</p>
<p>When requesting data from a lower-timeframe (LTF) context, the <code dir="auto">lookahead</code> parameter determines whether the function requests values from the first or last <em>intrabar</em> (LTF bar) of each chart-timeframe bar.</p>
<p><strong>Programmers should exercise extreme caution when using lookahead in their requests, especially when requesting data from higher timeframes.</strong>
When using <a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_on">barmerge.lookahead_on</a> as the <code dir="auto">lookahead</code> value, ensure that it does not compromise the integrity of the script’s logic by leaking <em>future data</em> into historical chart bars.</p>
<p>The following scenarios are cases where enabling lookahead is acceptable in a <code dir="auto">request.*()</code> call:</p>
<ul>
<li>The <code dir="auto">expression</code> argument in a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call includes a <em>historical offset</em> (e.g., <code dir="auto">close[1]</code>), which prevents the function from requesting future values that it would <strong>not</strong> have access to on a realtime basis.</li>
<li>The <code dir="auto">timeframe</code> argument of the call represents the same timeframe as that of the chart on which the script executes, i.e., <a href="https://www.tradingview.com/pine-script-reference/v6/#var_timeframe.period">timeframe.period</a>.</li>
<li>The function call requests data from an intrabar timeframe, i.e., a timeframe smaller than the <a href="https://www.tradingview.com/pine-script-reference/v6/#var_timeframe.period">timeframe.period</a>. See the <a href="/pine-script-docs/concepts/other-timeframes-and-data/#lower-timeframes">Lower-timeframes</a> section for more information.</li>
</ul>
<aside aria-label="Notice" class="tv-informer not-content" style="--informer-header-color:#FF9800;--informer-back-color-light:#FFF3E0;--informer-back-color-dark:#33261A"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path fill-rule="evenodd" d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM9 4c-.79 0-1.38.7-1.25 1.48l.67 4.03a.59.59 0 0 0 1.16 0l.67-4.03A1.27 1.27 0 0 0 9 4Zm0 8a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Notice</span>Scripts that use <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> calls with lookahead to leak future data into the past are extremely <strong>misleading</strong>. As such, they are <strong>not allowed</strong> as script publications. Although the results of such a script might look great across history due to its apparent aquisition of prescience, those results are <em>unrealistic</em> because the retrieved data was not knowable at the time of each bar. Furthermore, the same behavior is <em>impossible</em> to reproduce on realtime bars. Therefore, before <a href="/pine-script-docs/writing/publishing/">publishing a script</a> to share it with others, ensure that its requests <strong>do not</strong> mislead traders by using future data on historical bars.</p></div></aside>
<p>This example demonstrates how the <code dir="auto">lookahead</code> parameter affects the behavior of higher-timeframe data requests and why enabling lookahead in <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> without offsetting the <code dir="auto">expression</code> is misleading. The script calls <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> to get the HTF <a href="https://www.tradingview.com/pine-script-reference/v6/#var_high">high</a> price for the current chart’s symbol in three different ways and <a href="/pine-script-docs/visuals/plots/">plots</a> the resulting series on the chart for comparison.</p>
<p>The first call uses <a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_off">barmerge.lookahead_off</a> (default), and the others use <a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_on">barmerge.lookahead_on</a>. However, the third <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call also <em>offsets</em> its <code dir="auto">expression</code> using the history-referencing operator <a href="https://www.tradingview.com/pine-script-reference/v6/#op_%5B%5D">[]</a> to avoid leaking future data into the past.</p>
<p>As we see on the chart, the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plot">plot</a> of the series requested using <a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_on">barmerge.lookahead_on</a> without an offset (<a href="https://www.tradingview.com/pine-script-reference/v6/#var_color.fuchsia">fuchsia</a> line) shows final HTF <a href="https://www.tradingview.com/pine-script-reference/v6/#var_high">high</a> prices <em>before</em> they are actually available on historical bars, whereas the other two calls do not:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Common-characteristics-Lookahead-1.DhbZxNLg_239Pup.webp" alt="image" width="1348" height="588" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="vf"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"`lookahead`&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;timeframe&nbsp;to&nbsp;request&nbsp;the&nbsp;data&nbsp;from.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.timeframe</span><span class="mtk13">(</span><span class="mtk29">"30"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Timeframe"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;requested&nbsp;`high`&nbsp;price&nbsp;from&nbsp;the&nbsp;current&nbsp;symbo</span><span class="mtk9">l&nbsp;on&nbsp;the&nbsp;`timeframe`&nbsp;without&nbsp;lookahead&nbsp;bias.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;realtime&nbsp;bars,&nbsp;it&nbsp;returns&nbsp;the&nbsp;curre</span><span class="mtk9">nt&nbsp;`high`&nbsp;of&nbsp;the&nbsp;`timeframe`.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookaheadOff</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookahead</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.lookahead_off</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;requested&nbsp;`high`&nbsp;price&nbsp;from&nbsp;the&nbsp;current&nbsp;symbo</span><span class="mtk9">l&nbsp;on&nbsp;the&nbsp;`timeframe`&nbsp;with&nbsp;lookahead&nbsp;bias.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns&nbsp;values&nbsp;that&nbsp;should&nbsp;NOT&nbsp;be&nbsp;acce</span><span class="mtk9">ssible&nbsp;yet&nbsp;on&nbsp;historical&nbsp;bars.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookaheadOn</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookahead</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.lookahead_on</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;requested&nbsp;`high`&nbsp;price&nbsp;from&nbsp;the&nbsp;current&nbsp;symbo</span><span class="mtk9">l&nbsp;on&nbsp;the&nbsp;`timeframe`&nbsp;without&nbsp;lookahead&nbsp;bias&nbsp;or&nbsp;rep</span><span class="mtk9">ainting.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Behaves&nbsp;the&nbsp;same&nbsp;on&nbsp;historical&nbsp;and&nbsp;rea</span><span class="mtk9">ltime&nbsp;bars.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookaheadOnOffset</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookahead</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.lookahead_on</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;values.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">lookaheadOff</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"High,&nbsp;no&nbsp;lookahead&nbsp;bias"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.blue</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">40</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">5</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">lookaheadOn</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"High&nbsp;with&nbsp;lookahead&nbsp;bias"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.fuchsia</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">lookaheadOnOffset</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"High,&nbsp;no&nbsp;lookahead&nbsp;bias&nbsp;or&nbsp;repaint"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.aqua</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Highlight&nbsp;the&nbsp;background&nbsp;on&nbsp;realtime&nbsp;bars.</span></span><br><span><span class="mtk16">bgcolor</span><span class="mtk13">(</span><span class="mtk11">barstate.isrealtime</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.orange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">60</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">title</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Realtime&nbsp;bar&nbsp;highlight"</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The series requested using <a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_off">barmerge.lookahead_off</a> has a new historical value at the <em>end</em> of each HTF period, and both series requested using <a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_on">barmerge.lookahead_on</a> have new historical data at the <em>start</em> of each period.</li>
<li>On realtime bars, the plot of the series without lookahead (<a href="https://www.tradingview.com/pine-script-reference/v6/#var_color.blue">blue</a>) and the series with lookahead and no historical offset (<a href="https://www.tradingview.com/pine-script-reference/v6/#var_color.fuchsia">fuchsia</a>) show the <em>same value</em> (i.e., the HTF period’s unconfirmed <a href="https://www.tradingview.com/pine-script-reference/v6/#var_high">high</a> price), as no data exists beyond those points to leak into the past. Both of these plots <em>repaint</em> their results after the user reloads the script, because the <em>elapsed</em> realtime bars from the previous run become <em>historical</em> bars in the new run.</li>
<li>The series that uses lookahead and a historical offset (<a href="https://www.tradingview.com/pine-script-reference/v6/#var_color.aqua">aqua</a>) <em>does not</em> repaint its results, because it always uses the last <em>confirmed</em> value from the higher timeframe. See the <a href="/pine-script-docs/concepts/other-timeframes-and-data/#avoiding-repainting">Avoiding repainting</a> section of this page for more information.</li>
</ul>
<aside aria-label="Notice" class="tv-informer not-content" style="--informer-header-color:#FF9800;--informer-back-color-light:#FFF3E0;--informer-back-color-dark:#33261A"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path fill-rule="evenodd" d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM9 4c-.79 0-1.38.7-1.25 1.48l.67 4.03a.59.59 0 0 0 1.16 0l.67-4.03A1.27 1.27 0 0 0 9 4Zm0 8a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Notice</span>In Pine Script versions 1 and 2, the <code dir="auto">security()</code> function did not include a <code dir="auto">lookahead</code> parameter. However, the request behaved the same as those with <code dir="auto">lookahead = barmerge.lookahead_on</code> in later versions of Pine, meaning that it systematically accessed future data from a higher timeframe on historical bars. Therefore, <em>exercise caution</em> with Pine v1 or v2 scripts that use HTF <code dir="auto">security()</code> calls, unless those calls offset the requested series with the <a href="https://www.tradingview.com/pine-script-reference/v6/#op_%5B%5D">[]</a> operator.</p></div></aside>
<h3 id="dynamic-requests" class="md-heading"><a href="#dynamic-requests">Dynamic <span class="fancy-wrap">requests<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>By default, unlike all previous Pine Script versions, all v6 script’s <code dir="auto">request.*()</code> functions are <em>dynamic</em>.</p>
<p>In contrast to non-dynamic requests, dynamic requests can:</p>
<ul>
<li>Access data from different data feeds using a single <code dir="auto">request.*()</code> instance with <a href="/pine-script-docs/concepts/other-timeframes-and-data/#series-arguments">“series” arguments</a>.</li>
<li>Execute within the <a href="/pine-script-docs/concepts/other-timeframes-and-data/#in-local-scopes">local scopes</a> of <a href="/pine-script-docs/language/conditional-structures/">conditional structures</a>, <a href="/pine-script-docs/language/loops/">loops</a>, and <a href="/pine-script-docs/concepts/libraries/#library-functions">exported functions</a>.</li>
<li>Execute <a href="/pine-script-docs/concepts/other-timeframes-and-data/#nested-requests">nested requests</a>.</li>
</ul>
<p>Aside from the features listed above, there are insignificant differences in the behavior of dynamic and non-dynamic requests. However, for backward compatibility, programmers can deactivate dynamic requests by specifying <code dir="auto">dynamic_requests = false</code> in the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_indicator">indicator()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_strategy">strategy()</a>, or <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_library">library()</a> declaration statement.</p>
<aside aria-label="Note" class="tv-informer not-content" style="--informer-header-color:#6A6D78;--informer-back-color-light:#F0F3FA;--informer-back-color-dark:#2A2E39"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM8 6a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 2c.49 0 1 .59 1 1v3.01c0 .42-.51.99-1 .99s-1-.57-1-.99V9c0-.41.51-1 1-1Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Note</span></p><p>In Pine Script v5, it is possible for scripts to call <a href="/pine-script-docs/language/user-defined-functions/">user-defined functions</a> or <a href="/pine-script-docs/language/methods/#user-defined-methods">methods</a> containing <code dir="auto">request.*()</code> calls inside loops or conditional structures <em>without</em> enabling dynamic requests. However, those wrapped requests are <strong>not</strong> truly dynamic, and they still require <strong>“simple”</strong> or weaker <a href="/pine-script-docs/language/type-system/#qualifiers">qualifiers</a> for all arguments that define the requested context.</p><br><p>In Pine Script v6, scripts <strong>cannot</strong> use wrapped <code dir="auto">request.*()</code> calls within the local blocks of these structures without enabling dynamic requests.</p><p></p></div></aside>
<h4 id="series-arguments" class="md-heading"><a href="#series-arguments">”series” <span class="fancy-wrap">arguments<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p>Scripts without dynamic requests enabled cannot use “series” arguments for most <code dir="auto">request.*()</code> function parameters, which means the argument values <em>cannot change</em>. The only exception is the <code dir="auto">expression</code> parameter in <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>, and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.seed">request.seed()</a>, which <em>always</em> allows “series” values.</p>
<p>In contrast, when a script allows dynamic requests, all <code dir="auto">request.*()</code> function parameters that define parts of the ticker ID or timeframe of a request accept “series” arguments that <em>can change</em> with each script execution. In other words, with dynamic requests, it’s possible for a single <code dir="auto">request.*()</code> instance to fetch data from <em>different contexts</em> in different executions. Some other optional parameters, such as <code dir="auto">ignore_invalid_symbol</code>, can also accept “series” arguments, allowing additional flexibility in <code dir="auto">request.*()</code> call behaviors.</p>
<p>The following script declares a <code dir="auto">symbolSeries</code> variable that is assigned four different symbol strings in 20-bar cycles, with its value changing after every five bars. The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call uses this variable as the <code dir="auto">symbol</code> argument. The script plots the <code dir="auto">requestedClose</code> values, which therefore represent a different symbol’s <a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a> prices for each five-bar period.</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Common-characteristics-Dynamic-requests-Series-arguments-1.B-eSJN4x_2cWo6g.webp" alt="image" width="1336" height="566" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="1lf"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"'series'&nbsp;arguments&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;"series"&nbsp;that&nbsp;cycles&nbsp;through&nbsp;four&nbsp;different&nbsp;sym</span><span class="mtk9">bol&nbsp;strings.&nbsp;Its&nbsp;value&nbsp;changes&nbsp;every&nbsp;five&nbsp;bars.&nbsp;&nbsp;</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolSeries</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk18">switch</span><span class="mtk1">&nbsp;</span><span class="mtk16">int</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk12">5</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">%</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk12">1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk29">"NASDAQ:MSFT"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk12">2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk29">"NASDAQ:AMD"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk12">3</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk29">"NASDAQ:INTC"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"AMEX:SPY"</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;requested&nbsp;`close`&nbsp;value&nbsp;from&nbsp;one&nbsp;of&nbsp;the&nbsp;four&nbsp;</span><span class="mtk9">`symbolSeries`&nbsp;values&nbsp;on&nbsp;the&nbsp;chart's&nbsp;timeframe.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedClose</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">symbolSeries</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`requestedClose`.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">requestedClose</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Requested&nbsp;close"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Draw&nbsp;a&nbsp;label&nbsp;displaying&nbsp;the&nbsp;requested&nbsp;symbol&nbsp;ea</span><span class="mtk9">ch&nbsp;time&nbsp;the&nbsp;`symbolSeries`&nbsp;changes.</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolSeries</span><span class="mtk1">&nbsp;</span><span class="mtk18">!=</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolSeries</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">label.new</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedClose</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolSeries</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">textcolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.white</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The script draws a <a href="https://www.tradingview.com/pine-script-reference/v6/#type_label">label</a> every time the <code dir="auto">symbolSeries</code> changes, to signify which symbol’s data the <code dir="auto">requestedClose</code> currently represents.</li>
<li>Pine v6 scripts enable dynamic requests by default, allowing this script to use a “series string” <code dir="auto">symbol</code> argument in its <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call without error. If the dynamic behavior is disabled by including <code dir="auto">dynamic_requests = false</code> in the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_indicator">indicator()</a> declaration, then the “series” argument causes a compilation error.</li>
</ul>
<p>An important limitation is that when using dynamic <code dir="auto">request.*()</code> calls with “series” arguments or within <a href="/pine-script-docs/concepts/other-timeframes-and-data/#in-local-scopes">local scopes</a>, scripts must request all required datasets while executing on <strong>historical bars</strong>. All <code dir="auto">request.*()</code> calls on <em>realtime</em> bars can retrieve data from the datasets that the script previously accessed on historical bars, but they <strong>cannot</strong> request a new context or evaluate a new expression.</p>
<p>To illustrate this limitation, let’s revisit the above script. Notice that it requests <a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a> data for all four symbols on the chart’s timeframe during its historical executions. The external datasets for those four contexts are the <strong>only</strong> ones that any <code dir="auto">request.*()</code> call on realtime bars can access.</p>
<p>Below, we changed the <code dir="auto">timeframe</code> argument in the script’s <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call to specify that it requests <code dir="auto">symbolSeries</code> data from the chart’s timeframe on historical bars and the “240” (240 minutes = 4H) timeframe on realtime bars. This version raises a runtime error on the first realtime tick, if it is run on any timeframe other than the 4H timeframe, because it <strong>cannot</strong> access the 4H data feeds without requesting them on historical bars first:</p>
<div class="pine-colorizer not-content colorized" data-id="3bq"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Invalid&nbsp;realtime&nbsp;request&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;"series"&nbsp;that&nbsp;cycles&nbsp;through&nbsp;four&nbsp;different&nbsp;sym</span><span class="mtk9">bol&nbsp;strings.&nbsp;Its&nbsp;value&nbsp;changes&nbsp;every&nbsp;five&nbsp;bars.&nbsp;&nbsp;</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolSeries</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk18">switch</span><span class="mtk1">&nbsp;</span><span class="mtk16">int</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk12">5</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">%</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk12">1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk29">"NASDAQ:MSFT"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk12">2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk29">"NASDAQ:AMD"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk12">3</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk29">"NASDAQ:INTC"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"AMEX:SPY"</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Request&nbsp;the&nbsp;`close`&nbsp;of&nbsp;the&nbsp;`symbolSeries`&nbsp;from&nbsp;</span><span class="mtk9">the&nbsp;chart's&nbsp;timeframe&nbsp;on&nbsp;historical&nbsp;bars&nbsp;and&nbsp;the&nbsp;"</span><span class="mtk9">240"&nbsp;(4H)&nbsp;timeframe&nbsp;</span></span><br><span><span class="mtk9">//&nbsp;on&nbsp;realtime&nbsp;bars.&nbsp;Causes&nbsp;a&nbsp;runtime&nbsp;error&nbsp;on&nbsp;the</span><span class="mtk9">&nbsp;first&nbsp;realtime&nbsp;tick&nbsp;because&nbsp;the&nbsp;script&nbsp;did&nbsp;not&nbsp;pr</span><span class="mtk9">eviously&nbsp;access&nbsp;</span></span><br><span><span class="mtk9">//&nbsp;data&nbsp;from&nbsp;the&nbsp;"240"&nbsp;timeframe&nbsp;on&nbsp;any&nbsp;historical</span><span class="mtk9">&nbsp;bars.&nbsp;</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedClose</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">symbolSeries</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isrealtime</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk29">"240"</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`requestedClose`.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">requestedClose</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Requested&nbsp;close"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Draw&nbsp;a&nbsp;label&nbsp;displaying&nbsp;the&nbsp;requested&nbsp;symbol&nbsp;ea</span><span class="mtk9">ch&nbsp;time&nbsp;the&nbsp;`symbolSeries`&nbsp;changes.</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolSeries</span><span class="mtk1">&nbsp;</span><span class="mtk18">!=</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolSeries</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">label.new</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedClose</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolSeries</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">textcolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.white</span><span class="mtk13">)</span></span><br></code></div>
<h4 id="in-local-scopes" class="md-heading"><a href="#in-local-scopes">In local <span class="fancy-wrap">scopes<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p>When scripts do not allow dynamic requests, all <code dir="auto">request.*()</code> calls execute once on <em>every</em> bar or realtime tick, which prevents their use within most local scopes. The only exception is for <code dir="auto">request.*()</code> calls in the scopes of <em>non-exported</em> <a href="/pine-script-docs/language/user-defined-functions/">functions</a> and <a href="/pine-script-docs/language/methods/#user-defined-methods">methods</a>, because the Pine Script compiler extracts such calls into the <em>global scope</em> during translation.</p>
<p>Scripts that allow dynamic requests <em>do not</em> restrict the execution of <code dir="auto">request.*()</code> calls to the global scope. They can call <code dir="auto">request.*()</code> functions directly within the scopes of <a href="/pine-script-docs/language/conditional-structures/">conditional structures</a> and <a href="/pine-script-docs/language/loops/">loops</a>, meaning that each <code dir="auto">request.*()</code> instance in the code can activate zero, one, or several times on each script execution.</p>
<p>The following example uses a single <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> instance within a loop to request data from multiple forex data feeds. The script declares an <a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a> of <code dir="auto">symbols</code> on the first chart bar, which it iterates through on all bars using a <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_for...in">for…in</a> loop. Each loop iteration calls <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> to retrieve the <a href="https://www.tradingview.com/pine-script-reference/v6/#var_volume">volume</a> value for one of the symbols and pushes the result into the <code dir="auto">requestedData</code> array. After the loop terminates, the script calculates the average, maximum, and minimum values from the <code dir="auto">requestedData</code> array using built-in <a href="/pine-script-docs/language/methods/">methods</a>, then plots the results on the chart:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Common-characteristics-Dynamic-requests-In-local-scopes-1.Bgx3zpOB_Z21iFsc.webp" alt="image" width="1336" height="596" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="6lm"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"In&nbsp;local&nbsp;scopes&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">format</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">format.volume</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;of&nbsp;"string"&nbsp;values&nbsp;representing&nbsp;differen</span><span class="mtk9">t&nbsp;symbols&nbsp;to&nbsp;request.&nbsp;</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">string</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbols</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.from</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"EURUSD"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"USDJPY"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"GBPUSD"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"AUDUSD"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"USDCAD"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"USDCHF"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"NZDUSD"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"EURJPY"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"GBPJPY"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"EURGBP"</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;containing&nbsp;the&nbsp;data&nbsp;retrieved&nbsp;for&nbsp;each&nbsp;r</span><span class="mtk9">equested&nbsp;symbol.&nbsp;&nbsp;</span></span><br><span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedData</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;()</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Retrieve&nbsp;`volume`&nbsp;data&nbsp;for&nbsp;each&nbsp;symbol&nbsp;in&nbsp;the&nbsp;`</span><span class="mtk9">symbols`&nbsp;array&nbsp;and&nbsp;push&nbsp;the&nbsp;results&nbsp;into&nbsp;the&nbsp;`requ</span><span class="mtk9">estedData`&nbsp;array.&nbsp;</span></span><br><span><span class="mtk18">for</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk1">&nbsp;</span><span class="mtk18">in</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbols</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">data</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk29">"OANDA:"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">volume</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">requestedData</span><span class="mtk1">.</span><span class="mtk15">push</span><span class="mtk13">(</span><span class="mtk33">data</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Calculate&nbsp;the&nbsp;average,&nbsp;maximum,&nbsp;and&nbsp;minimum&nbsp;tic</span><span class="mtk9">k&nbsp;volume&nbsp;in&nbsp;the&nbsp;`requestedData`.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">avgVolume</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedData</span><span class="mtk1">.</span><span class="mtk15">avg</span><span class="mtk13">()</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">maxVolume</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedData</span><span class="mtk1">.</span><span class="mtk15">max</span><span class="mtk13">()</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">minVolume</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedData</span><span class="mtk1">.</span><span class="mtk15">min</span><span class="mtk13">()</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`avgVolume`,&nbsp;`maxVolume`,&nbsp;and&nbsp;`minVolu</span><span class="mtk9">me`.&nbsp;</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">avgVolume</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Average&nbsp;volume"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.gray</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">maxVolume</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Highest&nbsp;volume"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">minVolume</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Lowest&nbsp;volume"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk11">color.maroon</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<p>Notice that the <code dir="auto">expression</code> argument in the above example (<a href="https://www.tradingview.com/pine-script-reference/v6/#var_volume">volume</a>) is <em>loop-invariant</em>, i.e., it does not change on any loop iteration. When using <code dir="auto">request.*()</code> calls within a loop, all parameters defining parts of the requested <em>context</em> can accept arguments that depend on variables from the loop’s header or mutable variables that change within the loop’s local scope. However, a <code dir="auto">request.*()</code> call’s evaluated expression <strong>cannot</strong> depend on the values of those variables.</p>
<p>Here, we modified the above script to use the <em>second form</em> of the <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_for...in">for…in</a> loop statement, which creates a <a href="/pine-script-docs/language/type-system/#tuples">tuple</a> containing the index and value of each element in the <code dir="auto">symbols</code> array. The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> instance in this version uses the index (<code dir="auto">i</code>) in its <code dir="auto">expression</code> argument, resulting in a <em>compilation error</em>:</p>
<div class="pine-colorizer not-content colorized" data-id="1x1"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Loop-dependent&nbsp;expression&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">format</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">format.volume</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;of&nbsp;"string"&nbsp;values&nbsp;representing&nbsp;differen</span><span class="mtk9">t&nbsp;symbols&nbsp;to&nbsp;request.&nbsp;</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">string</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbols</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.from</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"EURUSD"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"USDJPY"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"GBPUSD"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"AUDUSD"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"USDCAD"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"USDCHF"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"NZDUSD"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"EURJPY"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"GBPJPY"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"EURGBP"</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;containing&nbsp;the&nbsp;data&nbsp;retrieved&nbsp;for&nbsp;each&nbsp;r</span><span class="mtk9">equested&nbsp;symbol.&nbsp;&nbsp;</span></span><br><span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedData</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;()</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Retrieve&nbsp;`volume`&nbsp;data&nbsp;for&nbsp;each&nbsp;symbol&nbsp;in&nbsp;the&nbsp;`</span><span class="mtk9">symbols`&nbsp;array,&nbsp;weighted&nbsp;using&nbsp;the&nbsp;element&nbsp;index.</span></span><br><span><span class="mtk9">//&nbsp;Causes&nbsp;a&nbsp;compilation&nbsp;error&nbsp;because&nbsp;the&nbsp;`express</span><span class="mtk9">ion`&nbsp;in&nbsp;`request.security()`&nbsp;cannot&nbsp;depend&nbsp;on&nbsp;loop</span><span class="mtk9">&nbsp;variables&nbsp;</span></span><br><span><span class="mtk9">//&nbsp;or&nbsp;mutable&nbsp;variables&nbsp;that&nbsp;change&nbsp;within&nbsp;the&nbsp;loo</span><span class="mtk9">p's&nbsp;scope.&nbsp;</span></span><br><span><span class="mtk18">for</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk33">i</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">in</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbols</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">data</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk29">"OANDA:"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">volume</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk13">(</span><span class="mtk12">10</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">requestedData</span><span class="mtk1">.</span><span class="mtk15">push</span><span class="mtk13">(</span><span class="mtk33">data</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Calculate&nbsp;the&nbsp;average,&nbsp;maximum,&nbsp;and&nbsp;minimum&nbsp;tic</span><span class="mtk9">k&nbsp;volume&nbsp;in&nbsp;the&nbsp;`requestedData`.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">avgVolume</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedData</span><span class="mtk1">.</span><span class="mtk15">avg</span><span class="mtk13">()</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">maxVolume</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedData</span><span class="mtk1">.</span><span class="mtk15">max</span><span class="mtk13">()</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">minVolume</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedData</span><span class="mtk1">.</span><span class="mtk15">min</span><span class="mtk13">()</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`avgVolume`,&nbsp;`maxVolume`,&nbsp;and&nbsp;`minVolu</span><span class="mtk9">me`.&nbsp;</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">avgVolume</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Average&nbsp;volume"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.gray</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">maxVolume</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Highest&nbsp;volume"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">minVolume</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Lowest&nbsp;volume"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk11">color.maroon</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<h4 id="in-libraries" class="md-heading"><a href="#in-libraries">In <span class="fancy-wrap">libraries<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><a href="/pine-script-docs/concepts/libraries/">Libraries</a> with dynamic requests enabled can <em>export</em> <a href="/pine-script-docs/language/user-defined-functions/">functions</a> and <a href="/pine-script-docs/language/methods/#user-defined-methods">methods</a> that utilize <code dir="auto">request.*()</code> calls within their local scopes, provided that the evaluated expressions <strong>do not</strong> depend on any exported function parameters.</p>
<p>For example, this simple library exports an <code dir="auto">htfPrices()</code> function that requests a <a href="/pine-script-docs/language/type-system/#tuples">tuple</a> of confirmed <a href="https://www.tradingview.com/pine-script-reference/v6/#var_open">open</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#var_high">high</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#var_low">low</a>, and <a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a> prices using a specified <code dir="auto">tickerID</code> and <code dir="auto">timeframe</code>. If we publish this library, another script can <em>import</em> the function to request higher-timeframe prices without explicitly calling <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>.</p>
<div class="pine-colorizer not-content colorized" data-id="560"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">library</span><span class="mtk13">(</span><span class="mtk29">"DynamicRequests"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Requests&nbsp;a&nbsp;tuple&nbsp;containing&nbsp;confirmed&nbsp;HTF&nbsp;</span><span class="mtk9">OHLC&nbsp;data&nbsp;for&nbsp;a&nbsp;specified&nbsp;`tickerID`&nbsp;and&nbsp;`timefram</span><span class="mtk9">e`.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;tickerID&nbsp;&nbsp;The&nbsp;ticker&nbsp;identifier&nbsp;to&nbsp;request&nbsp;data&nbsp;f</span><span class="mtk9">or.&nbsp;</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;timeframe&nbsp;The&nbsp;timeframe&nbsp;of&nbsp;the&nbsp;requested&nbsp;data.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;tuple&nbsp;containing&nbsp;the&nbsp;last&nbsp;confirmed&nbsp;`op</span><span class="mtk9">en`,&nbsp;`high`,&nbsp;`low`,&nbsp;and&nbsp;`close`&nbsp;from&nbsp;the&nbsp;requested</span><span class="mtk9">&nbsp;context.</span></span><br><span><span class="mtk18">export</span><span class="mtk1">&nbsp;</span><span class="mtk33">htfPrices</span><span class="mtk13">(</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">tickerID</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk16">timeframe.in_seconds</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;=</span><span class="mtk1">&nbsp;</span><span class="mtk16">timeframe.in_seconds</span><span class="mtk13">(</span><span class="mtk33">timeframe</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">runtime.error</span><span class="mtk13">(</span><span class="mtk29">"The&nbsp;`timeframe`&nbsp;argument&nbsp;of&nbsp;`getHTFPrices()`&nbsp;must</span><span class="mtk29">&nbsp;be&nbsp;higher&nbsp;than&nbsp;the&nbsp;chart's&nbsp;timeframe."</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">tickerID</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk11">open</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]]</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookahead</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.lookahead_on</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The tuple that the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call includes as the <code dir="auto">expression</code> argument <em>does not</em> depend on the <code dir="auto">htfPrices()</code> parameters.</li>
<li>The <code dir="auto">htfPrices()</code> function includes a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_runtime.error">runtime.error()</a> call that raises a custom runtime error when the <code dir="auto">timeframe</code> argument does not represent a higher timeframe than the chart’s timeframe. See the <a href="/pine-script-docs/concepts/other-timeframes-and-data/#higher-timeframes">higher timeframes</a> section for more information.</li>
<li>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call uses <a href="https://www.tradingview.com/pine-script-reference/v6/#const_barmerge.lookahead_on">barmerge.lookahead_on</a> and offsets each item in the tuple by one bar. This is the only recommended method to <a href="/pine-script-docs/concepts/other-timeframes-and-data/#avoiding-repainting">avoid repainting</a>.</li>
</ul>
<h4 id="nested-requests" class="md-heading"><a href="#nested-requests">Nested <span class="fancy-wrap">requests<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p>Scripts can use dynamic requests to execute <em>nested requests</em>, i.e., <code dir="auto">request.*()</code> calls that dynamically evaluate other <code dir="auto">request.*()</code> calls that their <code dir="auto">expression</code> arguments depend on.</p>
<p>When a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> or <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a> call uses an empty string or <a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.tickerid">syminfo.tickerid</a> for its <code dir="auto">symbol</code> argument, or if it uses an empty string or <a href="https://www.tradingview.com/pine-script-reference/v6/#var_timeframe.period">timeframe.period</a> for the <code dir="auto">timeframe</code> argument, the requested ticker ID or timeframe <em>depends</em> on the context where the call executes. This context is normally the ticker ID or timeframe of the chart that the script is running on. However, if such a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> or <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a> function call is evaluated by another <code dir="auto">request.*()</code> call, the nested request <em>inherits</em> that <code dir="auto">request.*()</code> call’s ticker ID or timeframe information.</p>
<p>For example, the script below contains two <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> calls and uses <a href="/pine-script-docs/writing/debugging/#pine-logs">Pine Logs</a> to display their results. The first call uses empty strings as its <code dir="auto">symbol</code> and <code dir="auto">timeframe</code> arguments, meaning that the requested context depends on where the call executes. It evaluates a concatenated string containing the call’s requested ticker ID and timeframe, and the script assigns its result to the <code dir="auto">info1</code> variable.</p>
<p>The second call requests data for a specific <code dir="auto">symbol</code> and <code dir="auto">timeframe</code> using the <code dir="auto">info1</code> variable as its <code dir="auto">expression</code> argument. Since the <code dir="auto">info1</code> variable depends on the first <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call, the second call evaluates the first call <em>within</em> its own context. Therefore, the first call adopts the second call’s ticker ID and timeframe while executing within that context, resulting in a different returned value:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Common-characteristics-Dynamic-requests-Nested-requests-1.cfjIWGiA_Z1Jgykj.webp" alt="image" width="1230" height="374" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="5kn"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Nested&nbsp;requests&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;concatenated&nbsp;string&nbsp;containing&nbsp;the&nbsp;current&nbsp;`sym</span><span class="mtk9">info.tickerid`&nbsp;and&nbsp;`timeframe.period`.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">info1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">syminfo.tickerid</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk29">"_"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;concatenated&nbsp;string&nbsp;representing&nbsp;the&nbsp;`info1`&nbsp;va</span><span class="mtk9">lue&nbsp;calculated&nbsp;within&nbsp;the&nbsp;"NASDAQ:AAPL,&nbsp;240"&nbsp;conte</span><span class="mtk9">xt.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;call&nbsp;evaluates&nbsp;the&nbsp;call&nbsp;on&nbsp;line&nbsp;5</span><span class="mtk9">&nbsp;within&nbsp;its&nbsp;context&nbsp;to&nbsp;determine&nbsp;its&nbsp;result&nbsp;becaus</span><span class="mtk9">e&nbsp;the&nbsp;script&nbsp;</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allows&nbsp;dynamic&nbsp;requests.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">info2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk29">"NASDAQ:AAPL"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"240"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">info1</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Log&nbsp;the&nbsp;results&nbsp;from&nbsp;both&nbsp;calls&nbsp;in&nbsp;the&nbsp;Pine&nbsp;Log</span><span class="mtk9">s&nbsp;pane&nbsp;on&nbsp;the&nbsp;last&nbsp;historical&nbsp;bar.&nbsp;</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.islastconfirmedhistory</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk29">"First&nbsp;request:&nbsp;{0}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">info1</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk29">"Second&nbsp;request:&nbsp;{0}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">info2</span><span class="mtk13">)</span></span><br></code></div>
<p>This script allows the execution of the first <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call within the context of the second call because Pine v6 scripts enable dynamic <code dir="auto">request.*()</code> calls by default. We can disable this behavior by including <code dir="auto">dynamic_requests = false</code> in the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_indicator">indicator()</a> declaration statement. Without dynamic requests enabled, the script evaluates each call <em>independently</em>, passing the first call’s calculated value directly into the second call rather than executing the first call within the second context. Consequently, the second call’s returned value is the <em>same</em> as the first call’s value, as we see below:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Common-characteristics-Dynamic-requests-Nested-requests-2.D2duF-iw_1E8FIY.webp" alt="image" width="1230" height="374" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="3l4"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Nested&nbsp;requests&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">dynamic_requests</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">false</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;concatenated&nbsp;string&nbsp;containing&nbsp;the&nbsp;current&nbsp;`sym</span><span class="mtk9">info.tickerid`&nbsp;and&nbsp;`timeframe.period`.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">info1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">syminfo.tickerid</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk29">"_"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;same&nbsp;value&nbsp;as&nbsp;`info1`.&nbsp;This&nbsp;call&nbsp;does&nbsp;not&nbsp;eva</span><span class="mtk9">lutate&nbsp;the&nbsp;call&nbsp;on&nbsp;line&nbsp;5&nbsp;because&nbsp;dynamic&nbsp;requests</span><span class="mtk9">&nbsp;aren't&nbsp;</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allowed.&nbsp;Instead,&nbsp;it&nbsp;only&nbsp;uses&nbsp;the&nbsp;val</span><span class="mtk9">ue&nbsp;of&nbsp;`info1`,&nbsp;meaning&nbsp;its&nbsp;result&nbsp;does&nbsp;not&nbsp;change.</span><span class="mtk9">&nbsp;</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">info2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk29">"NASDAQ:AAPL"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"240"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">info1</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Log&nbsp;the&nbsp;results&nbsp;from&nbsp;both&nbsp;calls&nbsp;in&nbsp;the&nbsp;Pine&nbsp;Log</span><span class="mtk9">s&nbsp;pane&nbsp;on&nbsp;the&nbsp;last&nbsp;historical&nbsp;bar.&nbsp;</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.islastconfirmedhistory</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk29">"First&nbsp;request:&nbsp;{0}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">info1</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk29">"Second&nbsp;request:&nbsp;{0}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">info2</span><span class="mtk13">)</span></span><br></code></div>
<h2 id="data-feeds" class="md-heading"><a href="#data-feeds">Data <span class="fancy-wrap">feeds<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>TradingView’s data providers supply different data feeds that scripts
can access to retrieve information about an instrument, including:</p>
<ul>
<li>Intraday historical data (for timeframes &lt; 1D)</li>
<li>End-of-day (EOD) historical data (for timeframes &gt;= 1D)</li>
<li>Realtime data (which may be delayed, depending on your account type
and extra data services)</li>
<li>Extended hours data</li>
</ul>
<p>Not all of these data feed types exist for every instrument. For
example, the symbol “BNC:BLX” only has EOD data available.</p>
<p>For some instruments with intraday and EOD historical feeds, volume data
may not be the same since some trades (block trades, OTC trades, etc.)
may only be available at the <em>end</em> of the trading day. Consequently, the
EOD feed will include this volume data, but the intraday feed will not.
Differences between EOD and intraday volume feeds are almost nonexistent
for instruments such as cryptocurrencies, but they are commonplace in
stocks.</p>
<p>Slight price discrepancies may also occur between EOD and intraday
feeds. For example, the high value on one EOD bar may not match any
intraday high values supplied by the data provider for that day.</p>
<p>Another distinction between EOD and intraday data feeds is that EOD
feeds do not contain information from <em>extended hours</em>.</p>
<p>When retrieving information on realtime bars with <code dir="auto">request.*()</code>
functions, it’s important to note that historical and realtime data
reported for an instrument often rely on <em>different</em> data feeds. A
broker/exchange may retroactively modify values reported on realtime
bars, which the data will only reflect after refreshing the chart or
restarting the script.</p>
<p>Another important consideration is that the chart’s data feeds and
feeds requested from providers by the script are managed by
<em>independent</em>, concurrent processes. Consequently, in some <em>rare</em> cases,
it’s possible for races to occur where requested results temporarily
fall out of synch with the chart on a realtime bar, which a script
retroactively adjusts after restarting its executions.</p>
<p>These points may account for variations in the values retrieved by
<code dir="auto">request.*()</code> functions when requesting data from other contexts. They
may also result in discrepancies between data received on realtime bars
and historical bars. There are no steadfast rules about the variations
one may encounter in their requested data feeds.</p>
<aside aria-label="Note" class="tv-informer not-content" style="--informer-header-color:#6A6D78;--informer-back-color-light:#F0F3FA;--informer-back-color-dark:#2A2E39"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM8 6a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 2c.49 0 1 .59 1 1v3.01c0 .42-.51.99-1 .99s-1-.57-1-.99V9c0-.41.51-1 1-1Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Note</span>As a rule, TradingView <em>does not</em> generate data; it relies on its data providers for the information displayed on charts and accessed by scripts.</p></div></aside>
<p>When using data feeds requested from other contexts, it’s also crucial
to consider the <em>time axis</em> differences between the chart the script
executes on and the requested feeds since <code dir="auto">request.*()</code> functions adapt
the returned series to the chart’s time axis. For example, requesting
“BTCUSD” data on the “SPY” chart with
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
will only show new values when the “SPY” chart has new data as well.
Since “SPY” is not a 24-hour symbol, the “BTCUSD” data returned will
contain gaps that are otherwise not present when viewing its chart
directly.</p>
<h2 id="requestsecurity" class="md-heading"><a href="#requestsecurity"><span>​<code dir="auto">request.security()</code>​</span><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></a></h2>
<p>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
function allows scripts to request data from other contexts than the
chart the script executes on, such as:</p>
<ul>
<li>Other symbols, including <a href="https://www.tradingview.com/support/solutions/43000502298/">spread
symbols</a></li>
<li>Other timeframes (see our User Manual’s page on
<a href="/pine-script-docs/concepts/timeframes/">Timeframes</a> to learn
about timeframe specifications in Pine Script)</li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#custom-contexts">Custom contexts</a>, including alternative sessions, price adjustments,
chart types, etc. using <code dir="auto">ticker.*()</code> functions</li>
</ul>
<p>This is the function’s signature:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text" tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.security(symbol, timeframe, expression, gaps, lookahead, ignore_invalid_symbol, currency, calc_bars_count) → series &lt;type&gt;</span></div></div></code></pre></figure></div>
<p>The <code dir="auto">symbol</code> value is the ticker identifier representing the symbol to
fetch data from. This parameter accepts values in any of the following
formats:</p>
<ul>
<li>A “string” representing a symbol (e.g., “IBM” or “EURUSD”) or
an <em>“Exchange:Symbol” pair</em> (e.g., “NYSE:IBM” or
“OANDA:EURUSD”). When the value does not contain an exchange
prefix, the function selects the exchange automatically. We
recommend specifying the exchange prefix when possible for
consistent results. Users can also pass an empty string to this
parameter, which prompts the function to use the current chart’s
symbol.</li>
<li>A “string” representing a <a href="https://www.tradingview.com/support/solutions/43000502298/">spread
symbol</a>
(e.g., “AMD/INTC”). Note that “Bar Replay” mode does not work
with these symbols.</li>
<li>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.ticker">syminfo.ticker</a>
or
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.tickerid">syminfo.tickerid</a>
built-in variables, which return the symbol or the
“Exchange:Symbol” pair that the current chart references. We
recommend using
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.tickerid">syminfo.tickerid</a>
to avoid ambiguity unless the exchange information does not matter
in the data request. For more information on <code dir="auto">syminfo.*</code> variables,
see
<a href="/pine-script-docs/concepts/chart-information/#symbol-information">this</a> section of our
<a href="/pine-script-docs/concepts/chart-information/">Chart information</a> page.</li>
<li>A custom ticker identifier created using <code dir="auto">ticker.*()</code> functions.
Ticker IDs constructed from these functions may contain additional
settings for requesting data using
<a href="/pine-script-docs/concepts/non-standard-charts-data/">non-standard chart</a> calculations, alternative sessions, and other contexts.
See the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#custom-contexts">Custom contexts</a> section for more information.</li>
</ul>
<p>The <code dir="auto">timeframe</code> value specifies the timeframe of the requested data.
This parameter accepts “string” values in our
<a href="/pine-script-docs/concepts/timeframes/#timeframe-string-specifications">timeframe specification</a> format (e.g., a value of “1D” represents the daily
timeframe). To request data from the same timeframe as the chart the
script executes on, use the
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_timeframe.period">timeframe.period</a>
variable or an empty string.</p>
<p>The <code dir="auto">expression</code> parameter of the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
function determines the data it retrieves from the specified context.
This versatile parameter accepts “series” values of
<a href="/pine-script-docs/language/type-system/#int">int</a>,
<a href="/pine-script-docs/language/type-system/#float">float</a>,
<a href="/pine-script-docs/language/type-system/#bool">bool</a>,
<a href="/pine-script-docs/language/type-system/#color">color</a>,
<a href="/pine-script-docs/language/type-system/#string">string</a>,
and <a href="/pine-script-docs/language/type-system/#chart-points">chart.point</a> types. It can also accept
<a href="/pine-script-docs/language/type-system/#tuples">tuples</a>,
<a href="/pine-script-docs/language/type-system/#collections">collections</a>,
<a href="/pine-script-docs/language/type-system/#user-defined-types">user-defined types</a>, and the outputs of function and
<a href="/pine-script-docs/language/methods/">method</a> calls. For more
details on the data one can retrieve, see the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#requestable-data">Requestable data</a> section below.</p>
<aside aria-label="Notice" class="tv-informer not-content" style="--informer-header-color:#FF9800;--informer-back-color-light:#FFF3E0;--informer-back-color-dark:#33261A"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path fill-rule="evenodd" d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM9 4c-.79 0-1.38.7-1.25 1.48l.67 4.03a.59.59 0 0 0 1.16 0l.67-4.03A1.27 1.27 0 0 0 9 4Zm0 8a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Notice</span>If a <code dir="auto">request.*()</code> call uses the value from a <a href="/pine-script-docs/concepts/inputs/#source-input">source input</a> in its <code dir="auto">expression</code> argument, and that input accesses a plotted series from another indicator, the request evaluates that series using the data for the <strong>chart’s symbol</strong>, and <strong>not</strong> the data for the specified symbol. This behavior occurs because <code dir="auto">request.*()</code> functions cannot evaluate the scopes required by an external series. Therefore, some <code dir="auto">request.*()</code> calls that use a <code dir="auto">symbol</code> argument and request the value of a source input can return unintended results.</p></div></aside>
<h3 id="timeframes" class="md-heading"><a href="#timeframes"> <span class="fancy-wrap">Timeframes<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
function can request data from any available timeframe, regardless of
the chart the script executes on. The timeframe of the data retrieved
depends on the <code dir="auto">timeframe</code> argument in the function call, which may
represent a higher timeframe (e.g., using “1D” as the <code dir="auto">timeframe</code>
value while running the script on an intraday chart) or the chart’s
timeframe (i.e., using
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_timeframe.period">timeframe.period</a>
or an empty string as the <code dir="auto">timeframe</code> argument).</p>
<p>Scripts can also request <em>limited</em> data from lower timeframes with
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
(e.g., using “1” as the <code dir="auto">timeframe</code> argument while running the script
on a 60-minute chart). However, we don’t typically recommend using this
function for LTF data requests. The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
function is more optimal for such cases.</p>
<h4 id="higher-timeframes" class="md-heading"><a href="#higher-timeframes">Higher <span class="fancy-wrap">timeframes<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p>Most use cases of
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
involve requesting data from a timeframe higher than or the same as the
chart timeframe. For example, this script retrieves the
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_hl2">hl2</a>
price from a requested <code dir="auto">higherTimeframe</code>. It
<a href="/pine-script-docs/visuals/plots/">plots</a> the resulting series
on the chart alongside the current chart’s
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_hl2">hl2</a> for
comparison:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-security-Timeframes-Higher-timeframes-1.Cfl6KncV_1tTnEJ.webp" alt="image" width="1338" height="570" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="4np"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Higher&nbsp;timeframe&nbsp;security&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;higher&nbsp;timeframe&nbsp;to&nbsp;request&nbsp;data&nbsp;from.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">higherTimeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.timeframe</span><span class="mtk13">(</span><span class="mtk29">"240"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Higher&nbsp;timeframe"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`hl2`&nbsp;value&nbsp;from&nbsp;the&nbsp;`higherTimeframe`.&nbsp;Combi</span><span class="mtk9">nes&nbsp;lookahead&nbsp;with&nbsp;an&nbsp;offset&nbsp;to&nbsp;avoid&nbsp;repainting.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">htfPrice</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">higherTimeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">hl2</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookahead</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.lookahead_on</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`hl2`&nbsp;from&nbsp;the&nbsp;chart&nbsp;timeframe&nbsp;and&nbsp;the</span><span class="mtk9">&nbsp;`higherTimeframe`.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk11">hl2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Current&nbsp;timeframe&nbsp;HL2"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">htfPrice</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Higher&nbsp;timeframe&nbsp;HL2"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>We’ve included an offset to the <code dir="auto">expression</code> argument and used
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_on">barmerge.lookahead_on</a>
in
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
to ensure the series returned behaves the same on historical and
realtime bars. See the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#avoiding-repainting">Avoiding repainting</a> section for more information.</li>
</ul>
<p>Notice that in the above example, it is possible to select a
<code dir="auto">higherTimeframe</code> value that actually represents a <em>lower timeframe</em>
than the one the chart uses, as the code does not prevent it. When
designing a script to work specifically with higher timeframes, we
recommend including conditions to prevent it from accessing lower
timeframes, especially if you intend to
<a href="/pine-script-docs/writing/publishing/">publish</a> it.</p>
<p>Below, we’ve added an <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_if">if</a> structure to our previous example. If the <code dir="auto">higherTimeframe</code> value represents a timeframe that is smaller than the chart’s timeframe, the script calls <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_runtime.error">runtime.error()</a> within the structure’s local block to raise a custom runtime error, effectively preventing the script from requesting LTF data:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-security-Timeframes-Higher-timeframes-2.DLmdElJ0_Z1Wqvh6.webp" alt="image" width="804" height="304" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="1zo"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Higher&nbsp;timeframe&nbsp;security&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;higher&nbsp;timeframe&nbsp;to&nbsp;request&nbsp;data&nbsp;from.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">higherTimeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.timeframe</span><span class="mtk13">(</span><span class="mtk29">"240"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Higher&nbsp;timeframe"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Raise&nbsp;a&nbsp;runtime&nbsp;error&nbsp;when&nbsp;the&nbsp;`higherTimeframe</span><span class="mtk9">`&nbsp;is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;chart's&nbsp;timeframe.</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk16">timeframe.in_seconds</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">timeframe.in_seconds</span><span class="mtk13">(</span><span class="mtk33">higherTimeframe</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">runtime.error</span><span class="mtk13">(</span><span class="mtk29">"The&nbsp;requested&nbsp;timeframe&nbsp;is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;chart</span><span class="mtk29">'s&nbsp;timeframe.&nbsp;Select&nbsp;a&nbsp;higher&nbsp;timeframe."</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`hl2`&nbsp;value&nbsp;from&nbsp;the&nbsp;`higherTimeframe`.&nbsp;Combi</span><span class="mtk9">nes&nbsp;lookahead&nbsp;with&nbsp;an&nbsp;offset&nbsp;to&nbsp;avoid&nbsp;repainting.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">htfPrice</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">higherTimeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">hl2</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookahead</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.lookahead_on</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`hl2`&nbsp;from&nbsp;the&nbsp;chart&nbsp;timeframe&nbsp;and&nbsp;the</span><span class="mtk9">&nbsp;`higherTimeframe`.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk11">hl2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Current&nbsp;timeframe&nbsp;HL2"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">htfPrice</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Higher&nbsp;timeframe&nbsp;HL2"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<h4 id="lower-timeframes" class="md-heading"><a href="#lower-timeframes">Lower <span class="fancy-wrap">timeframes<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p>Although the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
function is intended to operate on timeframes greater than or equal to
the chart timeframe, it <em>can</em> request data from lower timeframes as
well, with limitations. When calling this function to access a lower
timeframe, it will evaluate the <code dir="auto">expression</code> from the LTF context.
However, it returns the results from only a <em>single</em> intrabar (LTF
bar) on each chart bar.</p>
<p>The intrabar that the function returns data from on each historical
chart bar depends on the <code dir="auto">lookahead</code> value in the function call. When
using
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_on">barmerge.lookahead_on</a>,
it will return the <em>first</em> available intrabar from the chart period.
When using
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_off">barmerge.lookahead_off</a>,
it will return the <em>last</em> intrabar from the chart period. On realtime
bars, it returns the last available value of the <code dir="auto">expression</code> from the
timeframe, regardless of the <code dir="auto">lookahead</code> value, as the realtime intrabar
information retrieved by the function is not yet sorted.</p>
<p>This script retrieves
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a>
data from the valid timeframe closest to a fourth of the size of the
chart timeframe. It makes two calls to
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
with different <code dir="auto">lookahead</code> values. The first call uses
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_on">barmerge.lookahead_on</a>
to access the first intrabar value in each chart bar. The second uses
the default <code dir="auto">lookahead</code> value
(<a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_off">barmerge.lookahead_off</a>),
which requests the last intrabar value assigned to each chart bar. The
script <a href="/pine-script-docs/visuals/plots/">plots</a> the outputs of
both calls on the chart to compare the difference:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-security-Timeframes-Lower-timeframes-1.CzbZyyC2_Z2o4fpJ.webp" alt="image" width="1258" height="552" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="4um"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Lower&nbsp;timeframe&nbsp;security&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;valid&nbsp;timeframe&nbsp;closest&nbsp;to&nbsp;1/4&nbsp;the&nbsp;size&nbsp;of&nbsp;th</span><span class="mtk9">e&nbsp;chart&nbsp;timeframe.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowerTimeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">timeframe.from_seconds</span><span class="mtk13">(</span><span class="mtk16">int</span><span class="mtk13">(</span><span class="mtk16">timeframe.in_seconds</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`close`&nbsp;value&nbsp;on&nbsp;the&nbsp;`lowerTimeframe`.&nbsp;Repres</span><span class="mtk9">ents&nbsp;the&nbsp;first&nbsp;intrabar&nbsp;value&nbsp;on&nbsp;each&nbsp;chart&nbsp;bar.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">firstLTFClose</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowerTimeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookahead</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.lookahead_on</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`close`&nbsp;value&nbsp;on&nbsp;the&nbsp;`lowerTimeframe`.&nbsp;Repres</span><span class="mtk9">ents&nbsp;the&nbsp;last&nbsp;intrabar&nbsp;value&nbsp;on&nbsp;each&nbsp;chart&nbsp;bar.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">lastLTFClose</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowerTimeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;values.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">firstLTFClose</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"First&nbsp;intrabar&nbsp;close"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">lastLTFClose</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Last&nbsp;intrabar&nbsp;close"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Highlight&nbsp;the&nbsp;background&nbsp;on&nbsp;realtime&nbsp;bars.</span></span><br><span><span class="mtk16">bgcolor</span><span class="mtk13">(</span><span class="mtk11">barstate.isrealtime</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.orange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">70</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">title</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Realtime&nbsp;background&nbsp;highlight"</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The script determines the value of the <code dir="auto">lowerTimeframe</code> by
calculating the number of seconds in the chart timeframe with
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_timeframe.in_seconds">timeframe.in_seconds()</a>,
then dividing by four and converting the result to a
<a href="/pine-script-docs/concepts/timeframes/#timeframe-string-specifications">valid timeframe string</a> via
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_timeframe.from_seconds">timeframe.from_seconds()</a>.</li>
<li>The plot of the series without lookahead
(<a href="https://www.tradingview.com/pine-script-reference/v6/#var_color.purple">purple</a>)
aligns with the
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a>
value on the chart timeframe, as this is the last intrabar value
in the chart bar.</li>
<li>Both <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> calls return the <em>same</em> value (the current <a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a>) on each <em>realtime</em> bar, as shown on the bars with the <a href="https://www.tradingview.com/pine-script-reference/v6/#var_color.orange">orange</a> background.</li>
<li>Scripts can retrieve up to 200,000 intrabars from a lower-timeframe context. The number of chart bars with available intrabar data varies with the requested lower timeframe, the <code dir="auto">calc_bars_count</code> value, and the user’s plan. For more information, see <a href="/pine-script-docs/writing/limitations/#intrabars">this</a> section of the <a href="/pine-script-docs/writing/limitations/">Limitations</a> page.</li>
</ul>
<aside aria-label="Tip" class="tv-informer not-content" style="--informer-header-color:#089981;--informer-back-color-light:#DAF2EE;--informer-back-color-dark:#082621"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16Zm3.87-12.15c.36.2.49.66.28 1.02l-4 7a.75.75 0 0 1-1.18.16l-3-3a.75.75 0 1 1 1.06-1.06l2.3 2.3 3.52-6.14a.75.75 0 0 1 1.02-.28Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Tip</span>While scripts can use <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> to retrieve limited intrabar data, we recommend using <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a> function for such requests in most cases. Instead of retrieving data for only a single LTF bar on each chart bar, it returns an <a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a> containing the data for <em>all</em> available LTF bars in the chart bar. See the <a href="/pine-script-docs/concepts/other-timeframes-and-data/#requestsecurity_lower_tf"><code dir="auto">​request.security_lower_tf()</code> section</a> below to learn more.</p></div></aside>
<h3 id="requestable-data" class="md-heading"><a href="#requestable-data">Requestable <span class="fancy-wrap">data<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
function is quite versatile, as it can retrieve values of any
fundamental type (<a href="/pine-script-docs/language/type-system/#int">int</a>, <a href="/pine-script-docs/language/type-system/#float">float</a>, <a href="/pine-script-docs/language/type-system/#bool">bool</a>, <a href="/pine-script-docs/language/type-system/#color">color</a>, or <a href="/pine-script-docs/language/type-system/#string">string</a>). It can also request the IDs of data structures and
built-in or
<a href="/pine-script-docs/language/type-system/#user-defined-types">user-defined types</a> that reference fundamental types. The data this function
requests depends on its <code dir="auto">expression</code> parameter, which accepts any of the
following arguments:</p>
<ul>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#built-in-variables-and-functions">Built-in variables and function calls</a></li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#declared-variables">Variables declared by the script</a></li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#tuples">Tuples</a></li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#user-defined-functions">Calls to user-defined functions</a></li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#chart-points">Chart points</a></li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#collections">Collections</a></li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#user-defined-types">User-defined types</a></li>
</ul>
<h4 id="built-in-variables-and-functions" class="md-heading"><a href="#built-in-variables-and-functions">Built-in variables and <span class="fancy-wrap">functions<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p>A frequent use case of
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
is requesting the output of a built-in variable or
function/<a href="/pine-script-docs/language/methods/">method</a> call from
another symbol or timeframe.</p>
<p>For example, suppose we want to calculate the 20-bar SMA of a symbol’s
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_ohlc4">ohlc4</a>
prices from the daily timeframe while on an intraday chart. We can
accomplish this task with a single line of code:</p>
<div class="pine-colorizer not-content colorized" data-id="31b"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">ma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"1D"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">ohlc4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk13">))</span></span><br></code></div>
<p>The above line calculates the value of <code dir="auto">ta.sma(ohlc4, 20)</code> on the current symbol’s data from the daily timeframe.</p>
<p>It’s important to note that newcomers to Pine might sometimes confuse the above line of code as being equivalent to the following:</p>
<div class="pine-colorizer not-content colorized" data-id="bi"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">ma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"1D"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">ohlc4</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk13">)</span></span><br></code></div>
<p>However, this line returns an entirely <em>different</em> result. Rather
than requesting a 20-bar SMA from the daily timeframe, it requests the
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_ohlc4">ohlc4</a>
price from the daily timeframe and calclates the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ta.sma">ta.sma()</a>
of the results over 20 <strong>chart bars</strong>.</p>
<p>In essence, when the intention is to request the results of an
expression from other contexts, pass the expression <em>directly</em> to the
<code dir="auto">expression</code> parameter in the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
call, as demonstrated in the initial example.</p>
<p>Let’s expand on this concept. The script below calculates a multi-timeframe (MTF) ribbon of moving averages, where each moving average in the ribbon calculates over the same number of bars on its respective timeframe. Each <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call uses a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ta.sma">ta.sma()</a> call as its <code dir="auto">expression</code> argument to return a <code dir="auto">length</code>-bar SMA from the specified timeframe:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-security-Requestable-data-Built-in-variables-and-functions-1.CPvZdzBd_Z1LKRRo.webp" alt="image" width="1342" height="570" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="1nv"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Requesting&nbsp;built-ins&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"MTF&nbsp;Ribbon"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;length&nbsp;of&nbsp;each&nbsp;moving&nbsp;average.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">20</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Length"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;number&nbsp;of&nbsp;seconds&nbsp;in&nbsp;the&nbsp;chart&nbsp;timeframe.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">chartSeconds</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">timeframe.in_seconds</span><span class="mtk13">()</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Calculate&nbsp;the&nbsp;higher&nbsp;timeframes&nbsp;closest&nbsp;to&nbsp;2,&nbsp;3</span><span class="mtk9">,&nbsp;and&nbsp;4&nbsp;times&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;chart&nbsp;timeframe.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">htf1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">timeframe.from_seconds</span><span class="mtk13">(</span><span class="mtk33">chartSeconds</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">)</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">htf2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">timeframe.from_seconds</span><span class="mtk13">(</span><span class="mtk33">chartSeconds</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">htf3</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">timeframe.from_seconds</span><span class="mtk13">(</span><span class="mtk33">chartSeconds</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Calculate&nbsp;the&nbsp;`length`-bar&nbsp;moving&nbsp;averages&nbsp;from</span><span class="mtk9">&nbsp;each&nbsp;timeframe.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">chartAvg</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">ohlc4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">htfAvg1</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">htf1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">ohlc4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">))</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">htfAvg2</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">htf2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">ohlc4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">))</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">htfAvg3</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">htf3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">ohlc4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;results.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">chartAvg</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Chart&nbsp;timeframe&nbsp;SMA"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.red</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">htfAvg1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Double&nbsp;timeframe&nbsp;SMA"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.orange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">htfAvg2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Triple&nbsp;timeframe&nbsp;SMA"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.green</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">htfAvg3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Quadruple&nbsp;timeframe&nbsp;SMA"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.blue</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Highlight&nbsp;the&nbsp;background&nbsp;on&nbsp;realtime&nbsp;bars.</span></span><br><span><span class="mtk16">bgcolor</span><span class="mtk13">(</span><span class="mtk11">barstate.isrealtime</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.aqua</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">70</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">title</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Realtime&nbsp;highlight"</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The script calculates the ribbon’s higher timeframes by
multiplying the chart’s
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_timeframe.in_seconds">timeframe.in_seconds()</a>
value by 2, 3, and 4, then converting each result into a
<a href="/pine-script-docs/concepts/timeframes/#timeframe-string-specifications">valid timeframe string</a> using
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_timeframe.from_seconds">timeframe.from_seconds()</a>.</li>
<li>Instead of calling
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ta.sma">ta.sma()</a>
within each
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
call, one could use the <code dir="auto">chartAvg</code> variable as the <code dir="auto">expression</code>
in each call to achieve the same result. See the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#declared-variables">next section</a> for more information.</li>
<li>On realtime bars, this script also tracks <em>unconfirmed</em> SMA
values from each higher timeframe. See the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#historical-and-realtime-behavior">Historical and realtime behavior</a> section to learn more.</li>
</ul>
<h4 id="declared-variables" class="md-heading"><a href="#declared-variables">Declared <span class="fancy-wrap">variables<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> function’s <code dir="auto">expression</code> parameter can accept declared variables that are accessible to the scope from which the function call executes. When using a declared variable as the <code dir="auto">expression</code> argument, the function call <em>duplicates</em> all <em>preceding code</em> that determines the assigned value or reference. This duplication allows the function to evaluate necessary calculations and logic in the requested context without affecting the original variable.</p>
<p>For instance, this line of code declares a <code dir="auto">priceReturn</code> variable that holds the current bar’s arithmetic price return:</p>
<div class="pine-colorizer not-content colorized" data-id="3zr"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">priceReturn</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">])</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span></span><br></code></div>
<p>We can evaluate the <code dir="auto">priceReturn</code> variable’s calculations in another context by using it as the <code dir="auto">expression</code> in a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call. The call below duplicates the variable’s calculation and evaluates it across the data from another <code dir="auto">symbol</code>, returning a <em>separate series</em> adapted to the chart’s time axis:</p>
<div class="pine-colorizer not-content colorized" data-id="6my"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedReturn</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">symbol</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">priceReturn</span><span class="mtk13">)</span></span><br></code></div>
<p>This example script compares the price returns of the current chart’s symbol and a user-specified symbol. It calculates the value of the <code dir="auto">priceReturn</code> variable, then uses that variable as the <code dir="auto">expression</code> in a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call to evaluate the calculation on the input symbol’s data. After the request, the script calculates the correlation between the <code dir="auto">priceReturn</code> and <code dir="auto">requestedReturn</code> series using <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ta.correlation">ta.correlation()</a> and plots the result on the chart:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-security-Requestable-data-Calculated-variables-1.DpMsOLKI_Z6c3MD.webp" alt="image" width="1342" height="572" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="7j3"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Requesting&nbsp;calculated&nbsp;variables&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Price&nbsp;return&nbsp;correlation"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;symbol&nbsp;to&nbsp;compare&nbsp;to&nbsp;the&nbsp;chart&nbsp;symbol.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.symbol</span><span class="mtk13">(</span><span class="mtk29">"SPY"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Symbol&nbsp;to&nbsp;compare"</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;number&nbsp;of&nbsp;bars&nbsp;in&nbsp;the&nbsp;calculation&nbsp;window.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">60</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Length"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;close-to-close&nbsp;price&nbsp;return.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">priceReturn</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">])</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;close-to-close&nbsp;price&nbsp;return&nbsp;calculated&nbsp;on&nbsp;ano</span><span class="mtk9">ther&nbsp;`symbol`.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedReturn</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">symbol</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">priceReturn</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;correlation&nbsp;between&nbsp;the&nbsp;`priceReturn`&nbsp;and&nbsp;`re</span><span class="mtk9">questedReturn`&nbsp;over&nbsp;`length`&nbsp;bars.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">correlation</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.correlation</span><span class="mtk13">(</span><span class="mtk33">priceReturn</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedReturn</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;color&nbsp;of&nbsp;the&nbsp;correlation&nbsp;plot.</span></span><br><span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.from_gradient</span><span class="mtk13">(</span><span class="mtk33">correlation</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">-1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.orange</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;correlation&nbsp;value.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">correlation</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Correlation"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_area</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call executes the same calculation used in the <code dir="auto">priceReturn</code> declaration, but the request’s calculation operates on the <a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a> values from the specified symbol’s data.</li>
<li>The script uses the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_color.from_gradient">color.from_gradient()</a> function to calculate the color for the plot of the <code dir="auto">correlation</code> series on each bar. See <a href="/pine-script-docs/visuals/colors/#colorfrom_gradient">this section</a> of the <a href="/pine-script-docs/visuals/colors/">Colors</a> page to learn more about color gradients.</li>
</ul>
<p>When using a variable as the <code dir="auto">expression</code> argument of a <code dir="auto">request.*()</code> call, it’s important to note that the function only duplicates code that affects the variable <em>before</em> the call. It <em>cannot</em> copy any subsequent code following the call. Consequently, if the script reassigns the variable or modifies its referenced data <em>after</em> calling <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>, the code evaluated on the requested data <strong>does not</strong> include those additional operations.</p>
<p>For example, the following script declares a <code dir="auto">counter</code> variable and calls <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> to evaluate the variable from the same context as the chart. After the call, the script increments the <code dir="auto">counter</code> value by one with the addition assignment operator (<a href="https://www.tradingview.com/pine-script-reference/v6/#op_+=">+=</a>), then uses plots and <a href="/pine-script-docs/writing/debugging/#pine-logs">Pine Logs</a> to display the <code dir="auto">counter</code> and <code dir="auto">requestedCounter</code> values for comparison.</p>
<p>As shown below, the plots and logs of the two variables display <em>different</em> values. The <code dir="auto">requestedCounter</code> variable has a consistent value of 0 because the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call evaluates only the initial variable declaration. The request cannot evaluate the addition assignment operation because the script includes that code <em>after</em> the function call:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-security-Requestable-data-Declared-variables-2.DeWwelo7_ZvPFUy.webp" alt="image" width="2676" height="1018" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="uk"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Modifying&nbsp;variables&nbsp;after&nbsp;requests&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;counter&nbsp;that&nbsp;starts&nbsp;at&nbsp;0&nbsp;and&nbsp;increments&nbsp;by&nbsp;1&nbsp;on</span><span class="mtk9">&nbsp;each&nbsp;bar.&nbsp;</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">counter</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Holds&nbsp;a&nbsp;consistent&nbsp;value&nbsp;of&nbsp;0.&nbsp;</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`request.security()`&nbsp;cannot&nbsp;evaluate&nbsp;`</span><span class="mtk9">counter&nbsp;+=&nbsp;1`&nbsp;in&nbsp;its&nbsp;requested&nbsp;context&nbsp;</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;because&nbsp;that&nbsp;modification&nbsp;occurs&nbsp;*afte</span><span class="mtk9">r*&nbsp;the&nbsp;call.&nbsp;</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedCounter</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">counter</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Increment&nbsp;the&nbsp;`counter`&nbsp;by&nbsp;1.&nbsp;This&nbsp;operation&nbsp;is</span><span class="mtk9">&nbsp;*not*&nbsp;included&nbsp;in&nbsp;the&nbsp;`requestedCounter`&nbsp;calculat</span><span class="mtk9">ion.</span></span><br><span><span class="mtk33">counter</span><span class="mtk1">&nbsp;</span><span class="mtk18">+=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;both&nbsp;variables&nbsp;for&nbsp;comparison.&nbsp;</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">counter</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Original&nbsp;counter"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">requestedCounter</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Requested&nbsp;counter"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.red</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Log&nbsp;the&nbsp;values&nbsp;of&nbsp;both&nbsp;variables&nbsp;in&nbsp;the&nbsp;Pine&nbsp;Lo</span><span class="mtk9">gs&nbsp;pane.</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isconfirmed</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk29">"counter:&nbsp;{0},&nbsp;requestedCounter:&nbsp;{1}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">counter</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedCounter</span><span class="mtk13">)</span></span><br></code></div>
<h4 id="tuples" class="md-heading"><a href="#tuples"> <span class="fancy-wrap">Tuples<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><a href="/pine-script-docs/language/type-system/#tuples">Tuples</a> in Pine Script are comma-separated lists of expressions enclosed in square brackets. Programmers often use tuples when creating <a href="/pine-script-docs/language/user-defined-functions/">functions</a>, <a href="/pine-script-docs/language/conditional-structures/">conditional structures</a>, or <a href="/pine-script-docs/language/loops/">loops</a> that return multiple values or references from their local scopes.</p>
<p>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
function can accept a tuple as its <code dir="auto">expression</code> argument, allowing
scripts to request multiple series of different types using a single
function call. The expressions within requested tuples can be of any
type outlined throughout the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#requestable-data">Requestable data</a> section of this page, excluding other tuples.</p>
<aside aria-label="Note" class="tv-informer not-content" style="--informer-header-color:#6A6D78;--informer-back-color-light:#F0F3FA;--informer-back-color-dark:#2A2E39"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM8 6a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 2c.49 0 1 .59 1 1v3.01c0 .42-.51.99-1 .99s-1-.57-1-.99V9c0-.41.51-1 1-1Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Note</span>The combined size of all tuples returned by <code dir="auto">request.*()</code> calls in a script cannot exceed 127 elements. See the <a href="/pine-script-docs/writing/limitations/#tuple-element-limit">Tuple element limit</a> section of the <a href="/pine-script-docs/writing/limitations/">Limitations</a> page for more information.</p></div></aside>
<p>Tuples are particularly helpful when a script needs to retrieve more than one value from a specific context.</p>
<p>For example, the following script calculates the percent rank of the <a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a> series over <code dir="auto">length</code> bars and assigns the result to the <code dir="auto">rank</code> variable. It then calls <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> to request a tuple containing the values of <code dir="auto">rank</code>, <code dir="auto">ta.crossover(rank, 50)</code>, and <code dir="auto">ta.crossunder(rank, 50)</code> from a specified timeframe. The script plots the <code dir="auto">requestedRank</code> series in a separate pane, then uses the result of a ternary expression based on the <code dir="auto">crossOver</code> and <code dir="auto">crossUnder</code> values within a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_bgcolor">bgcolor()</a> call to conditionally highlight the pane’s background:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-security-Requestable-data-Tuples-1.DfMFJD2A_22M4RL.webp" alt="image" width="1342" height="572" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="7ok"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Requesting&nbsp;tuples&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Percent&nbsp;rank&nbsp;cross"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;timeframe&nbsp;of&nbsp;the&nbsp;request.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.timeframe</span><span class="mtk13">(</span><span class="mtk29">"240"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Timeframe"</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;number&nbsp;of&nbsp;bars&nbsp;in&nbsp;the&nbsp;calculation.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">20</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Length"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;previous&nbsp;bar's&nbsp;percent&nbsp;rank&nbsp;of&nbsp;the&nbsp;`close`&nbsp;pr</span><span class="mtk9">ice&nbsp;over&nbsp;`length`&nbsp;bars.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">rank</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.percentrank</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)[</span><span class="mtk12">1</span><span class="mtk13">]</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Request&nbsp;the&nbsp;`rank`&nbsp;value&nbsp;from&nbsp;another&nbsp;`timefram</span><span class="mtk9">e`,&nbsp;and&nbsp;two&nbsp;"bool"&nbsp;values&nbsp;indicating&nbsp;the&nbsp;`rank`&nbsp;fr</span><span class="mtk9">om&nbsp;the&nbsp;`timeframe`</span></span><br><span><span class="mtk9">//&nbsp;crossed&nbsp;over&nbsp;or&nbsp;under&nbsp;50.</span></span><br><span><span class="mtk13">[</span><span class="mtk33">requestedRank</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">crossOver</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">crossUnder</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk33">rank</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.crossover</span><span class="mtk13">(</span><span class="mtk33">rank</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">50</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.crossunder</span><span class="mtk13">(</span><span class="mtk33">rank</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">50</span><span class="mtk13">)]</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">lookahead</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.lookahead_on</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`requestedRank`&nbsp;and&nbsp;create&nbsp;a&nbsp;horizonta</span><span class="mtk9">l&nbsp;line&nbsp;at&nbsp;50.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">requestedRank</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Percent&nbsp;Rank"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">linewidth</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk16">hline</span><span class="mtk13">(</span><span class="mtk12">50</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Cross&nbsp;line"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">linewidth</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Highlight&nbsp;the&nbsp;background&nbsp;of&nbsp;all&nbsp;bars&nbsp;where&nbsp;the&nbsp;</span><span class="mtk9">`timeframe`'s&nbsp;`crossOver`&nbsp;or&nbsp;`crossUnder`&nbsp;value&nbsp;is</span><span class="mtk9">&nbsp;`true`.</span></span><br><span><span class="mtk16">bgcolor</span><span class="mtk13">(</span><span class="mtk33">crossOver</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.green</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">50</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk33">crossUnder</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.red</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">50</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>We’ve offset the <code dir="auto">rank</code> variable’s expression by one bar using
the history-referencing operator
<a href="https://www.tradingview.com/pine-script-reference/v6/#op_%5B%5D">[]</a>
and included
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_on">barmerge.lookahead_on</a>
in the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
call to ensure the values on realtime bars do not repaint after
becoming historical bars. See the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#avoiding-repainting">Avoiding repainting</a> section for more information.</li>
<li>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
call returns a tuple, so we use a <em>tuple declaration</em> to declare
the <code dir="auto">requestedRank</code>, <code dir="auto">crossOver</code>, and <code dir="auto">crossUnder</code> variables. To
learn more about using tuples, see
<a href="/pine-script-docs/language/type-system/#tuples">this section</a> of our User Manual’s
<a href="/pine-script-docs/language/type-system/">Type system</a>
page.</li>
</ul>
<h4 id="user-defined-functions" class="md-heading"><a href="#user-defined-functions">User-defined <span class="fancy-wrap">functions<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><a href="/pine-script-docs/language/user-defined-functions/">User-defined functions</a> and
<a href="/pine-script-docs/language/methods/#user-defined-methods">methods</a>
are custom functions written by users. They allow users to define
sequences of operations associated with an identifier that scripts can
conveniently call throughout their executions (e.g., <code dir="auto">myUDF()</code>).</p>
<p>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
function can request the results of
<a href="/pine-script-docs/language/user-defined-functions/">user-defined functions</a> and
<a href="/pine-script-docs/language/methods/#user-defined-methods">methods</a>
whose scopes consist of any types outlined throughout this page’s
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#requestable-data">Requestable data</a> section.</p>
<p>For example, this script contains a user-defined <code dir="auto">weightedBB()</code> function
that calculates Bollinger Bands with the basis average weighted by a
specified <code dir="auto">weight</code> series. The function returns a
<a href="/pine-script-docs/language/type-system/#tuples">tuple</a> of custom
band values. The script calls the <code dir="auto">weightedBB()</code> as the <code dir="auto">expression</code>
argument in
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
to retrieve a
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#tuples">tuple</a> of band values calculated on the specified <code dir="auto">timeframe</code> and
<a href="/pine-script-docs/visuals/plots/">plots</a> the results on the
chart:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-security-Requestable-data-User-defined-functions-1.DTi5QOZX_ZMtoWB.webp" alt="image" width="1342" height="578" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="5df"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Requesting&nbsp;user-defined&nbsp;functions&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Weighted&nbsp;Bollinger&nbsp;Bands"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;timeframe&nbsp;of&nbsp;the&nbsp;request.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.timeframe</span><span class="mtk13">(</span><span class="mtk29">"480"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Timeframe"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calculates&nbsp;Bollinger&nbsp;Bands&nbsp;with&nbsp;a&nbsp;custom&nbsp;weig</span><span class="mtk9">hted&nbsp;basis.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;source&nbsp;The&nbsp;series&nbsp;of&nbsp;values&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;length&nbsp;The&nbsp;number&nbsp;of&nbsp;bars&nbsp;in&nbsp;the&nbsp;calculation.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;mult&nbsp;&nbsp;&nbsp;The&nbsp;standard&nbsp;deviation&nbsp;multiplier.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;weight&nbsp;The&nbsp;series&nbsp;of&nbsp;weights&nbsp;corresponding&nbsp;to&nbsp;eac</span><span class="mtk9">h&nbsp;`source`&nbsp;value.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;tuple&nbsp;containing&nbsp;the&nbsp;basis,&nbsp;upper&nbsp;band,&nbsp;an</span><span class="mtk9">d&nbsp;lower&nbsp;band&nbsp;respectively.</span></span><br><span><span class="mtk15">weightedBB</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">mult</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">2.0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">weight</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1.0</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;basis&nbsp;of&nbsp;the&nbsp;bands.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">ma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.sum</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">weight</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.sum</span><span class="mtk13">(</span><span class="mtk33">weight</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;standard&nbsp;deviation&nbsp;from&nbsp;the&nbsp;`ma`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">dev</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0.0</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Loop&nbsp;to&nbsp;accumulate&nbsp;squared&nbsp;error.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">for</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">to</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">difference</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk13">[</span><span class="mtk33">i</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk33">ma</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">dev</span><span class="mtk1">&nbsp;</span><span class="mtk18">+=</span><span class="mtk1">&nbsp;</span><span class="mtk33">difference</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">difference</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Divide&nbsp;`dev`&nbsp;by&nbsp;the&nbsp;`length`,&nbsp;take&nbsp;the&nbsp;square&nbsp;r</span><span class="mtk9">oot,&nbsp;and&nbsp;multiply&nbsp;by&nbsp;the&nbsp;`mult`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">dev</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.sqrt</span><span class="mtk13">(</span><span class="mtk33">dev</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">mult</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Return&nbsp;the&nbsp;bands.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">[</span><span class="mtk33">ma</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">ma</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">dev</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">ma</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk33">dev</span><span class="mtk13">]</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Request&nbsp;weighted&nbsp;bands&nbsp;calculated&nbsp;on&nbsp;the&nbsp;chart&nbsp;</span><span class="mtk9">symbol's&nbsp;prices&nbsp;over&nbsp;20&nbsp;bars&nbsp;from&nbsp;the</span></span><br><span><span class="mtk9">//&nbsp;last&nbsp;confirmed&nbsp;bar&nbsp;on&nbsp;the&nbsp;`timeframe`.</span></span><br><span><span class="mtk13">[</span><span class="mtk33">basis</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">highBand</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowBand</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">weightedBB</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2.0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk13">(</span><span class="mtk11">high</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk13">)[</span><span class="mtk12">1</span><span class="mtk13">])</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookahead</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.lookahead_on</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;values.</span></span><br><span><span class="mtk33">basisPlot</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">basis</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Basis"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.orange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">)</span></span><br><span><span class="mtk33">upperPlot</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">highBand</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Upper"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">)</span></span><br><span><span class="mtk33">lowerPlot</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">lowBand</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Lower"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.maroon</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">)</span></span><br><span><span class="mtk16">fill</span><span class="mtk13">(</span><span class="mtk33">upperPlot</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowerPlot</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.gray</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">90</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Background"</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>We offset the <code dir="auto">source</code> and <code dir="auto">weight</code> arguments in the
<code dir="auto">weightedBB()</code> call used as the <code dir="auto">expression</code> in
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
and used
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_on">barmerge.lookahead_on</a>
to ensure the requested results reflect the last confirmed
values from the <code dir="auto">timeframe</code> on realtime bars. See
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#avoiding-repainting">this section</a> to learn more.</li>
</ul>
<h4 id="chart-points" class="md-heading"><a href="#chart-points">Chart <span class="fancy-wrap">points<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><a href="/pine-script-docs/language/type-system/#chart-points">Chart points</a> are objects that represent coordinates on the chart.
<a href="/pine-script-docs/visuals/lines-and-boxes/#lines">Lines</a>,
<a href="/pine-script-docs/visuals/lines-and-boxes/#boxes">boxes</a>,
<a href="/pine-script-docs/visuals/lines-and-boxes/#polylines">polylines</a>,
and <a href="/pine-script-docs/visuals/text-and-shapes/#labels">labels</a> use these objects to set their display locations.</p>
<p>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
function can use the ID of a
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_chart.point">chart.point</a>
instance in its <code dir="auto">expression</code> argument, allowing scripts to retrieve
chart coordinates from other contexts.</p>
<p>The example below requests a tuple of historical
<a href="/pine-script-docs/language/type-system/#chart-points">chart points</a> from a higher timeframe and uses them to draw
<a href="/pine-script-docs/visuals/lines-and-boxes/#boxes">boxes</a> on the
chart. The script declares the <code dir="auto">topLeft</code> and <code dir="auto">bottomRight</code> variables
that reference
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_chart.point">chart.point</a>
IDs from the last confirmed bar. It then uses
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
to request a
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#tuples">tuple</a> containing the IDs of
<a href="/pine-script-docs/language/type-system/#chart-points">chart points</a> representing the <code dir="auto">topLeft</code> and <code dir="auto">bottomRight</code> from a
<code dir="auto">higherTimeframe</code>.</p>
<p>When a new bar starts on the <code dir="auto">higherTimeframe</code>, the script draws a new box using the <code dir="auto">time</code> and <code dir="auto">price</code> coordinates from the <code dir="auto">requestedTopLeft</code> and <code dir="auto">requestedBottomRight</code> chart points:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-security-Requestable-data-Chart-points-1.C5dKnJ3R_Z1YxlJR.webp" alt="image" width="1342" height="570" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="6pp"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Requesting&nbsp;chart&nbsp;points&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"HTF&nbsp;Boxes"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">max_boxes_count</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">500</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;timeframe&nbsp;to&nbsp;request&nbsp;data&nbsp;from.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">higherTimeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.timeframe</span><span class="mtk13">(</span><span class="mtk29">"1D"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Timeframe"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Raise&nbsp;a&nbsp;runtime&nbsp;error&nbsp;if&nbsp;the&nbsp;`higherTimeframe`&nbsp;</span><span class="mtk9">is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;chart's&nbsp;timeframe.</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk16">timeframe.in_seconds</span><span class="mtk13">(</span><span class="mtk33">higherTimeframe</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">&lt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">timeframe.in_seconds</span><span class="mtk13">(</span><span class="mtk11">timeframe.period</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">runtime.error</span><span class="mtk13">(</span><span class="mtk29">"The&nbsp;selected&nbsp;timeframe&nbsp;is&nbsp;too&nbsp;small.&nbsp;Choose&nbsp;a&nbsp;hig</span><span class="mtk29">her&nbsp;timeframe."</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;`chart.point`&nbsp;containing&nbsp;top-left&nbsp;coordinates&nbsp;f</span><span class="mtk9">rom&nbsp;the&nbsp;last&nbsp;confirmed&nbsp;bar.</span></span><br><span><span class="mtk33">topLeft</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">chart.point.now</span><span class="mtk13">(</span><span class="mtk11">high</span><span class="mtk13">)[</span><span class="mtk12">1</span><span class="mtk13">]</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;`chart.point`&nbsp;containing&nbsp;bottom-right&nbsp;coordinat</span><span class="mtk9">es&nbsp;from&nbsp;the&nbsp;last&nbsp;confirmed&nbsp;bar.</span></span><br><span><span class="mtk33">bottomRight</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">chart.point.from_time</span><span class="mtk13">(</span><span class="mtk11">time_close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk13">)[</span><span class="mtk12">1</span><span class="mtk13">]</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Request&nbsp;the&nbsp;last&nbsp;confirmed&nbsp;`topLeft`&nbsp;and&nbsp;`botto</span><span class="mtk9">mRight`&nbsp;chart&nbsp;points&nbsp;from&nbsp;the&nbsp;`higherTimeframe`.</span></span><br><span><span class="mtk13">[</span><span class="mtk33">requestedTopLeft</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedBottomRight</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">higherTimeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk33">topLeft</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">bottomRight</span><span class="mtk13">]</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookahead</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.lookahead_on</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Draw&nbsp;a&nbsp;new&nbsp;box&nbsp;when&nbsp;a&nbsp;new&nbsp;`higherTimeframe`&nbsp;bar</span><span class="mtk9">&nbsp;starts.</span></span><br><span><span class="mtk9">//&nbsp;The&nbsp;box&nbsp;uses&nbsp;the&nbsp;`time`&nbsp;fields&nbsp;from&nbsp;the&nbsp;`reques</span><span class="mtk9">tedTopLeft`&nbsp;and&nbsp;`requestedBottomRight`&nbsp;as&nbsp;x-coordi</span><span class="mtk9">nates.</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk16">timeframe.change</span><span class="mtk13">(</span><span class="mtk33">higherTimeframe</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">box.new</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">requestedTopLeft</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedBottomRight</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">xloc</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">xloc.bar_time</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">bgcolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">90</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>Because we designed this example to request data from <a href="/pine-script-docs/concepts/other-timeframes-and-data/#higher-timeframes">higher timeframes</a>, we’ve included a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_runtime.error">runtime.error()</a> call that the script executes if the <code dir="auto">higherTimeframe</code> value represents a lower timeframe than <a href="https://www.tradingview.com/pine-script-reference/v6/#var_timeframe.period">timeframe.period</a>.</li>
</ul>
<h4 id="collections" class="md-heading"><a href="#collections"> <span class="fancy-wrap">Collections<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p>Pine Script <em>collections</em> (<a href="/pine-script-docs/language/arrays/">arrays</a>, <a href="/pine-script-docs/language/matrices/">matrices</a>,
and <a href="/pine-script-docs/language/maps/">maps</a>) are data structures
that contain an arbitrary number of elements with specified types. The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
function can retrieve the IDs of
<a href="/pine-script-docs/language/type-system/#collections">collections</a> whose elements consist of:</p>
<ul>
<li>Fundamental types</li>
<li><a href="/pine-script-docs/language/type-system/#chart-points">Chart points</a></li>
<li><a href="/pine-script-docs/language/type-system/#user-defined-types">User-defined types</a> that satisfy the criteria listed in the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#user-defined-types">section below</a></li>
</ul>
<p>This example below calculates the ratio of a confirmed bar’s high-low range to the range between the highest and lowest prices over 10 bars from a from a specified <code dir="auto">symbol</code> and <code dir="auto">timeframe</code>. It uses <a href="/pine-script-docs/language/maps/">maps</a> to hold the values used in the calculations.</p>
<p>The script uses a <code dir="auto">data</code> map with “string” keys and “float” values to store the current bar’s <a href="https://www.tradingview.com/pine-script-reference/v6/#var_high">high</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#var_low">low</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ta.highest">ta.highest()</a>, and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ta.lowest">ta.lowest()</a> results. It passes the map as the <code dir="auto">expression</code> argument in a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call on each bar to retrieve another map containing the values calculated from the specified context, then assigns that map’s reference to the <code dir="auto">otherData</code> variable. The script uses the “float” values associated with the “High”, “Low”, “Highest”, and “Lowest” keys of the <code dir="auto">otherData</code> map to calculate the <code dir="auto">ratio</code> series that it <a href="/pine-script-docs/visuals/plots/">plots</a> in the chart pane:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-security-Requestable-data-Collections-1.C6G31C3k_2bffgq.webp" alt="image" width="1342" height="570" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="76"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Requesting&nbsp;collections&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Bar&nbsp;range&nbsp;ratio"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;ticker&nbsp;ID&nbsp;to&nbsp;request&nbsp;data&nbsp;from.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.symbol</span><span class="mtk13">(</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Symbol"</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;timeframe&nbsp;of&nbsp;the&nbsp;request.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.timeframe</span><span class="mtk13">(</span><span class="mtk29">"30"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Timeframe"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;map&nbsp;with&nbsp;"string"&nbsp;keys&nbsp;and&nbsp;"float"&nbsp;values.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">map</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">string</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">data</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">map.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">string</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;()</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Put&nbsp;key-value&nbsp;pairs&nbsp;into&nbsp;the&nbsp;`data`&nbsp;map.</span></span><br><span><span class="mtk16">map.put</span><span class="mtk13">(</span><span class="mtk33">data</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"High"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk13">)</span></span><br><span><span class="mtk16">map.put</span><span class="mtk13">(</span><span class="mtk33">data</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Low"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk13">)</span></span><br><span><span class="mtk16">map.put</span><span class="mtk13">(</span><span class="mtk33">data</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Highest"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.highest</span><span class="mtk13">(</span><span class="mtk12">10</span><span class="mtk13">))</span></span><br><span><span class="mtk16">map.put</span><span class="mtk13">(</span><span class="mtk33">data</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Lowest"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.lowest</span><span class="mtk13">(</span><span class="mtk12">10</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;new&nbsp;`map`&nbsp;whose&nbsp;data&nbsp;is&nbsp;calculated&nbsp;from&nbsp;the&nbsp;las</span><span class="mtk9">t&nbsp;confirmed&nbsp;bar&nbsp;of&nbsp;the&nbsp;requested&nbsp;context.</span></span><br><span><span class="mtk18 mtkb">map</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">string</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">otherData</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">symbol</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">data</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookahead</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.lookahead_on</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;ratio&nbsp;of&nbsp;the&nbsp;context's&nbsp;bar&nbsp;range&nbsp;to&nbsp;the&nbsp;max&nbsp;r</span><span class="mtk9">ange&nbsp;over&nbsp;10&nbsp;bars.&nbsp;Returns&nbsp;`na`&nbsp;if&nbsp;no&nbsp;data&nbsp;is&nbsp;avai</span><span class="mtk9">lable.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">ratio</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk18">not</span><span class="mtk1">&nbsp;</span><span class="mtk16">na</span><span class="mtk13">(</span><span class="mtk33">otherData</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">ratio</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk13">(</span><span class="mtk33">otherData</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk29">"High"</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk33">otherData</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk29">"Low"</span><span class="mtk13">))</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk13">(</span><span class="mtk33">otherData</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk29">"Highest"</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk33">otherData</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk29">"Lowest"</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;gradient&nbsp;color&nbsp;for&nbsp;the&nbsp;plot&nbsp;of&nbsp;the&nbsp;`ratio`.</span></span><br><span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">ratioColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.from_gradient</span><span class="mtk13">(</span><span class="mtk33">ratio</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.orange</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`ratio`.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">ratio</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Range&nbsp;Ratio"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">ratioColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_area</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
call in this script can return
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a>
if no data is available from the specified context. Since one
cannot call <a href="/pine-script-docs/language/methods/">methods</a> on a
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_map">map</a>
variable when its value is
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a>,
we’ve added an
<a href="https://www.tradingview.com/pine-script-reference/v6/#kw_if">if</a>
structure to only calculate a new <code dir="auto">ratio</code> value when <code dir="auto">otherData</code>
references a valid
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_map">map</a>
instance.</li>
</ul>
<h4 id="user-defined-types" class="md-heading"><a href="#user-defined-types">User-defined <span class="fancy-wrap">types<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><a href="/pine-script-docs/language/type-system/#user-defined-types">User-defined types (UDTs)</a> are <em>composite types</em> containing an arbitrary number of
<em>fields</em>, which can be of any available type, including other
<a href="/pine-script-docs/language/type-system/#user-defined-types">user-defined types</a>.</p>
<p>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
function can retrieve the IDs of
<a href="/pine-script-docs/language/objects/">objects</a> produced by
<a href="/pine-script-docs/language/type-system/#user-defined-types">UDTs</a>
from other contexts if their fields consist of:</p>
<ul>
<li>Fundamental types</li>
<li><a href="/pine-script-docs/language/type-system/#chart-points">Chart points</a></li>
<li><a href="/pine-script-docs/language/type-system/#collections">Collections</a> that satisfy the criteria listed in the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#collections">section above</a></li>
<li>Other <a href="/pine-script-docs/language/type-system/#user-defined-types">UDTs</a> whose fields consist of any of these types</li>
</ul>
<p>The following example requests an
<a href="/pine-script-docs/language/objects/">object</a> ID using a
specified <code dir="auto">symbol</code> and displays its field values on a chart pane.</p>
<p>The script contains a <code dir="auto">TickerInfo</code> UDT with “string” fields for
<code dir="auto">syminfo.*</code> values, an
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a>
field to store recent “float” price data, and an “int” field to hold
the requested ticker’s
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_bar_index">bar_index</a>
value. It assigns a new <code dir="auto">TickerInfo</code> ID to an <code dir="auto">info</code> variable on every
bar and uses the variable as the <code dir="auto">expression</code> in
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
to retrieve the ID of an <a href="/pine-script-docs/language/objects/">object</a> representing the calculated <code dir="auto">info</code> from the specified
<code dir="auto">symbol</code>.</p>
<p>The script displays the <code dir="auto">requestedInfo</code> object’s <code dir="auto">description</code>,
<code dir="auto">tickerType</code>, <code dir="auto">currency</code>, and <code dir="auto">barIndex</code> values in a
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_label">label</a>
and uses
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plotcandle">plotcandle()</a>
to display the values from its <code dir="auto">prices</code> array:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-security-Requestable-data-User-defined-types-1.D90DRv4r_1OUO19.webp" alt="image" width="1342" height="572" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="4pu"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Requesting&nbsp;user-defined&nbsp;types&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Ticker&nbsp;info"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;symbol&nbsp;to&nbsp;request&nbsp;information&nbsp;from.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.symbol</span><span class="mtk13">(</span><span class="mtk29">"NASDAQ:AAPL"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Symbol"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@type</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;custom&nbsp;type&nbsp;containing&nbsp;informatio</span><span class="mtk9">n&nbsp;about&nbsp;a&nbsp;ticker.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9">&nbsp;description&nbsp;&nbsp;The&nbsp;symbol's&nbsp;description.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9">&nbsp;tickerType&nbsp;&nbsp;&nbsp;The&nbsp;type&nbsp;of&nbsp;ticker.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9">&nbsp;currency&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;symbol's&nbsp;currency.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9">&nbsp;prices&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An&nbsp;array&nbsp;of&nbsp;the&nbsp;symbol's&nbsp;current&nbsp;pri</span><span class="mtk9">ces.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9">&nbsp;barIndex&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;ticker's&nbsp;`bar_index`.</span></span><br><span><span class="mtk18">type</span><span class="mtk1">&nbsp;</span><span class="mtk33">TickerInfo</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">description</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">tickerType</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">currency</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">prices</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">barIndex</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;`TickerInfo`&nbsp;object&nbsp;containing&nbsp;current&nbsp;data.</span></span><br><span><span class="mtk33">info</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">TickerInfo</span><span class="mtk1">.</span><span class="mtk15">new</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk11">syminfo.description</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">syminfo.type</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">syminfo.currency</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.from</span><span class="mtk13">(</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">bar_index</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`info`&nbsp;requested&nbsp;from&nbsp;the&nbsp;specified&nbsp;`symbol`.</span></span><br><span><span class="mtk18 mtkb">TickerInfo</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedInfo</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">symbol</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">info</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Assign&nbsp;a&nbsp;new&nbsp;`TickerInfo`&nbsp;instance&nbsp;to&nbsp;`requeste</span><span class="mtk9">dInfo`&nbsp;if&nbsp;one&nbsp;wasn't&nbsp;retrieved.</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk16">na</span><span class="mtk13">(</span><span class="mtk33">requestedInfo</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">requestedInfo</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk33">TickerInfo</span><span class="mtk1">.</span><span class="mtk15">new</span><span class="mtk13">(</span><span class="mtk33">prices</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;(</span><span class="mtk12">4</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;label&nbsp;displaying&nbsp;information&nbsp;from&nbsp;the&nbsp;`requeste</span><span class="mtk9">dInfo`&nbsp;object.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk33">infoLabel</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">label.new</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">label.style_label_left</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">textcolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.white</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">size.large</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;text&nbsp;to&nbsp;display&nbsp;inside&nbsp;the&nbsp;`infoLabel`.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">infoText</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">na</span><span class="mtk13">(</span><span class="mtk33">requestedInfo</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"{0}\nType:&nbsp;{1}\nCurrency:&nbsp;{2}\nBar&nbsp;Index:&nbsp;{3}"</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">requestedInfo</span><span class="mtk1">.</span><span class="mtk33">description</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedInfo</span><span class="mtk1">.</span><span class="mtk33">tickerType</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedInfo</span><span class="mtk1">.</span><span class="mtk33">currency</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedInfo</span><span class="mtk1">.</span><span class="mtk33">barIndex</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Set&nbsp;the&nbsp;`point`&nbsp;and&nbsp;`text`&nbsp;of&nbsp;the&nbsp;`infoLabel`.</span></span><br><span><span class="mtk16">label.set_point</span><span class="mtk13">(</span><span class="mtk33">infoLabel</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">chart.point.now</span><span class="mtk13">(</span><span class="mtk16">array.last</span><span class="mtk13">(</span><span class="mtk33">requestedInfo</span><span class="mtk1">.</span><span class="mtk33">prices</span><span class="mtk13">)))</span></span><br><span><span class="mtk16">label.set_text</span><span class="mtk13">(</span><span class="mtk33">infoLabel</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">infoText</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;candles&nbsp;using&nbsp;the&nbsp;values&nbsp;from&nbsp;the&nbsp;`prices`</span><span class="mtk9">&nbsp;array&nbsp;of&nbsp;the&nbsp;`requestedInfo`.</span></span><br><span><span class="mtk16">plotcandle</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">requestedInfo</span><span class="mtk1">.</span><span class="mtk33">prices</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedInfo</span><span class="mtk1">.</span><span class="mtk33">prices</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk12">1</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedInfo</span><span class="mtk1">.</span><span class="mtk33">prices</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk12">2</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedInfo</span><span class="mtk1">.</span><span class="mtk33">prices</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk12">3</span><span class="mtk13">)</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"Requested&nbsp;Prices"</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The <code dir="auto">syminfo.*</code> variables used in this script all return
“simple string” qualified types. However,
<a href="/pine-script-docs/language/objects/">objects</a> in Pine
are <em>always</em> qualified as “series”. Consequently, all values
assigned to the <code dir="auto">info</code> object’s fields automatically adopt the
“series”
<a href="/pine-script-docs/language/type-system/#qualifiers">qualifier</a>.</li>
<li>It is possible for the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
call to return
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a>
due to differences between the data requested from the <code dir="auto">symbol</code>
and the main chart. This script assigns a new <code dir="auto">TickerInfo</code>
object to the <code dir="auto">requestedInfo</code> in that case to prevent runtime
errors.</li>
</ul>
<h2 id="requestsecurity_lower_tf" class="md-heading"><a href="#requestsecurity_lower_tf"><span>​<code dir="auto">request.security_lower_tf()</code>​</span><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></a></h2>
<p>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
function is an alternative to
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
designed for reliably requesting information from lower-timeframe (LTF)
contexts.</p>
<p>While
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
can retrieve data from a <em>single</em> intrabar (LTF bar) in each chart bar,
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
retrieves data from <em>all</em> available intrabars in each chart bar, which
the script can access and use in additional calculations. Each
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
call can retrieve up to 200,000 intrabars from a lower timeframe, depending on the user’s <a href="https://www.tradingview.com/pricing/">plan</a>. See
<a href="/pine-script-docs/writing/limitations/#request-calls">this</a>
section of our <a href="/pine-script-docs/writing/limitations/">Limitations</a> page for more information.</p>
<aside aria-label="Tip" class="tv-informer not-content" style="--informer-header-color:#089981;--informer-back-color-light:#DAF2EE;--informer-back-color-dark:#082621"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16Zm3.87-12.15c.36.2.49.66.28 1.02l-4 7a.75.75 0 0 1-1.18.16l-3-3a.75.75 0 1 1 1.06-1.06l2.3 2.3 3.52-6.14a.75.75 0 0 1 1.02-.28Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Tip</span>Working with the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a> function involves frequent usage of <em>arrays</em>, because the function always returns array results. Therefore, we recommend reading the <a href="/pine-script-docs/language/arrays/">Arrays</a> page to make the most of this function and understand how to use its returned data.</p></div></aside>
<p>Below is the function’s signature, which is similar to the signature of
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text" tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.security_lower_tf(symbol, timeframe, expression, ignore_invalid_symbol, currency, ignore_invalid_timeframe, calc_bars_count) → array&lt;type&gt;</span></div></div></code></pre></figure></div>
<p>This function requests data only from timeframes that are <em>lower than</em> or <em>equal to</em> the chart’s timeframe (<a href="https://www.tradingview.com/pine-script-reference/v6/#var_timeframe.period">timeframe.period</a>). If the <code dir="auto">timeframe</code> argument of the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a> call represents a higher timeframe, the function raises a runtime error or returns <a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a> results, depending on the <code dir="auto">ignore_invalid_timeframe</code> parameter. The parameter’s default value is <code dir="auto">false</code>, meaning the function raises an error and halts the script’s executions if the <code dir="auto">timeframe</code> argument is invalid.</p>
<h3 id="requesting-intrabar-data" class="md-heading"><a href="#requesting-intrabar-data">Requesting intrabar <span class="fancy-wrap">data<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>Intrabar data can provide a script with additional information that may
not be obvious or accessible from solely analyzing data sampled on the
chart’s timerframe. The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
function can retrieve many data types from an intrabar context.</p>
<p>Before you venture further in this section, we recommend exploring the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#requestable-data">Requestable data</a> portion of the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#requestsecurity">request.security()</a> section above, which provides foundational information about
the types of data one can request. The <code dir="auto">expression</code> parameter in
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
accepts most of the same arguments discussed in that section, excluding
direct references to
<a href="/pine-script-docs/language/type-system/#collections">collections</a> and mutable variables.
Although it accepts many of the same types of arguments, this function
returns
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a>
results, which comes with some differences in interpretation and
handling, as explained below.</p>
<h3 id="intrabar-data-arrays" class="md-heading"><a href="#intrabar-data-arrays">Intrabar data <span class="fancy-wrap">arrays<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>Lower timeframes contain more data points than higher timeframes, as new
values come in at a <em>higher frequency</em>. For example, when comparing a
1-minute chart to an hourly chart, the 1-minute chart will have up to 60
times the number of bars per hour, depending on the available data.</p>
<p>To address the fact that multiple intrabars exist within a chart bar,
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
always creates <a href="/pine-script-docs/language/arrays/">arrays</a> to store the requested data. The elements in the arrays represent the
<code dir="auto">expression</code> values retrieved from the lower timeframe sorted in
ascending order based on each intrabar’s timestamp.</p>
<p>The <em>type identifier</em> of the constructed arrays corresponds to the
data types passed in the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
call. For example, using an “int” as the <code dir="auto">expression</code> will produce an
<code dir="auto">array&lt;int&gt;</code> instance, a “bool” as the <code dir="auto">expression</code> will produce an
<code dir="auto">array&lt;bool&gt;</code> instance, etc.</p>
<p>The following script uses intrabar information to decompose the chart’s close-to-close price changes into positive and negative parts. It calls <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a> to fetch a “float” <a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a> containing <code dir="auto">ta.change(close)</code> values from a specified lower timeframe on each chart bar, then accesses all the array’s elements using a <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_for...in">for…in</a> loop to accumulate <code dir="auto">positiveChange</code> and <code dir="auto">negativeChange</code> sums. The script adds the accumulated values to calculate the <code dir="auto">netChange</code> value, then <a href="/pine-script-docs/visuals/plots/">plots</a> the results on the chart alongside the <code dir="auto">priceChange</code> value for comparison:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-security-lower-tf-Intrabar-data-arrays-1.BFy5KmoZ_CQoK9.webp" alt="image" width="1342" height="574" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="1u8"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Intrabar&nbsp;arrays&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Intrabar&nbsp;price&nbsp;changes"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;lower&nbsp;timeframe&nbsp;of&nbsp;the&nbsp;requested&nbsp;data.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowerTimeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.timeframe</span><span class="mtk13">(</span><span class="mtk29">"1"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Timeframe"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;close-to-close&nbsp;price&nbsp;change.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">priceChange</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.change</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;of&nbsp;`close`&nbsp;values&nbsp;from&nbsp;available&nbsp;intraba</span><span class="mtk9">rs&nbsp;on&nbsp;the&nbsp;`lowerTimeframe`.</span></span><br><span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">intrabarChanges</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security_lower_tf</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowerTimeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">priceChange</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;total&nbsp;positive&nbsp;intrabar&nbsp;`close`&nbsp;movement&nbsp;on&nbsp;t</span><span class="mtk9">he&nbsp;chart&nbsp;bar.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">positiveChange</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0.0</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;total&nbsp;negative&nbsp;intrabar&nbsp;`close`&nbsp;movement&nbsp;on&nbsp;t</span><span class="mtk9">he&nbsp;chart&nbsp;bar.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">negativeChange</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0.0</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Loop&nbsp;to&nbsp;calculate&nbsp;totals,&nbsp;starting&nbsp;from&nbsp;the&nbsp;cha</span><span class="mtk9">rt&nbsp;bar's&nbsp;first&nbsp;available&nbsp;intrabar.</span></span><br><span><span class="mtk18">for</span><span class="mtk1">&nbsp;</span><span class="mtk33">change</span><span class="mtk1">&nbsp;</span><span class="mtk18">in</span><span class="mtk1">&nbsp;</span><span class="mtk33">intrabarChanges</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Add&nbsp;the&nbsp;`change`&nbsp;to&nbsp;`positiveChange`&nbsp;if&nbsp;its&nbsp;sig</span><span class="mtk9">n&nbsp;is&nbsp;1,&nbsp;and&nbsp;add&nbsp;to&nbsp;`negativeChange`&nbsp;if&nbsp;its&nbsp;sign&nbsp;is</span><span class="mtk9">&nbsp;-1.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">switch</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.sign</span><span class="mtk13">(</span><span class="mtk33">change</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk12">1</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">positiveChange</span><span class="mtk1">&nbsp;</span><span class="mtk18">+=</span><span class="mtk1">&nbsp;</span><span class="mtk33">change</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk12">-1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">negativeChange</span><span class="mtk1">&nbsp;</span><span class="mtk18">+=</span><span class="mtk1">&nbsp;</span><span class="mtk33">change</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;sum&nbsp;of&nbsp;`positiveChange`&nbsp;and&nbsp;`negativeChange`.</span><span class="mtk9">&nbsp;Equals&nbsp;the&nbsp;`priceChange`&nbsp;on&nbsp;bars&nbsp;with&nbsp;available&nbsp;i</span><span class="mtk9">ntrabars.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">netChange</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">positiveChange</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">negativeChange</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`positiveChange`,&nbsp;`negativeChange`,&nbsp;an</span><span class="mtk9">d&nbsp;`netChange`.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">positiveChange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Positive&nbsp;intrabar&nbsp;change"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_area</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">negativeChange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Negative&nbsp;intrabar&nbsp;change"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.maroon</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_area</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">netChange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Net&nbsp;intrabar&nbsp;change"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.yellow</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">5</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`priceChange`&nbsp;to&nbsp;compare.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">priceChange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Chart&nbsp;price&nbsp;change"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.orange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The <a href="/pine-script-docs/visuals/plots/">plots</a> based on
intrabar data may not appear on all available chart bars, as
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
can only access up to the most recent 200,000 intrabars
available from the requested context. When executing this
function on a chart bar that doesn’t have accessible intrabar
data, it will return an <em>empty array</em>.</li>
<li>The number of intrabars per chart bar may vary depending on the
data available from the context and the chart the script
executes on. For example, a provider’s 1-minute data feed may
not include data for every minute within the 60-minute timeframe
due to a lack of trading activity over some 1-minute intervals.
To check the number of intrabars retrieved for a chart bar, one
can use
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_array.size">array.size()</a>
on the resulting
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a>.</li>
<li>If the <code dir="auto">lowerTimeframe</code> value is greater than the chart’s
timeframe, the script will raise a <em>runtime error</em>, as we have
not supplied an <code dir="auto">ignore_invalid_timeframe</code> argument in the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
call.</li>
</ul>
<h3 id="tuples-of-intrabar-data" class="md-heading"><a href="#tuples-of-intrabar-data">Tuples of intrabar <span class="fancy-wrap">data<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>When passing a tuple or a function call that returns a tuple as the
<code dir="auto">expression</code> argument in
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>,
the result is a tuple of <a href="/pine-script-docs/language/arrays/">arrays</a> with
<a href="/pine-script-docs/language/type-system/#collections">type templates</a> corresponding to the types within the argument. For example,
using a <code dir="auto">[float, string, color]</code> tuple as the <code dir="auto">expression</code> will result
in <code dir="auto">[array&lt;float&gt;, array&lt;string&gt;, array&lt;color&gt;]</code> data returned by the
function. Using a tuple <code dir="auto">expression</code> allows a script to fetch the IDs of several
<a href="/pine-script-docs/language/arrays/">arrays</a> containing intrabar data
with a single
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
function call.</p>
<aside aria-label="Note" class="tv-informer not-content" style="--informer-header-color:#6A6D78;--informer-back-color-light:#F0F3FA;--informer-back-color-dark:#2A2E39"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM8 6a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 2c.49 0 1 .59 1 1v3.01c0 .42-.51.99-1 .99s-1-.57-1-.99V9c0-.41.51-1 1-1Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Note</span>The combined size of all tuples returned by <code dir="auto">request.*()</code> calls in a script cannot exceed 127 elements. See the <a href="/pine-script-docs/writing/limitations/#tuple-element-limit">Tuple element limit</a> section of the <a href="/pine-script-docs/writing/limitations/">Limitations</a> page for more information.</p></div></aside>
<p>The following example requests OHLC data from a lower timeframe and
visualizes the current bar’s intrabars on the chart using
<a href="/pine-script-docs/visuals/lines-and-boxes/">lines and boxes</a>. The
script calls
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
with the <code dir="auto">[open, high, low, close]</code> tuple as its <code dir="auto">expression</code> to
retrieve a tuple of <a href="/pine-script-docs/language/arrays/">arrays</a>
representing OHLC information from a calculated <code dir="auto">lowerTimeframe</code>. It
then uses a
<a href="https://www.tradingview.com/pine-script-reference/v6/#kw_for">for</a> loop
to set line coordinates with the retrieved data and current bar indices
to display the results next to the current chart bar, providing a
“magnified view” of the price movement within the latest candle. It
also draws a
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_box">box</a>
around the <a href="/pine-script-docs/visuals/lines-and-boxes/#lines">lines</a> to indicate the chart region occupied by intrabar drawings:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-security-lower-tf-Tuples-of-intrabar-data-1.C8-f9Sez_Z96QYf.webp" alt="image" width="1342" height="572" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="7js"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Tuples&nbsp;of&nbsp;intrabar&nbsp;data&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Candle&nbsp;magnifier"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">max_lines_count</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">500</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;maximum&nbsp;number&nbsp;of&nbsp;intrabars&nbsp;to&nbsp;display.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">maxIntrabars</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">20</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Max&nbsp;intrabars"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">250</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;width&nbsp;of&nbsp;the&nbsp;drawn&nbsp;candle&nbsp;bodies.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">candleWidth</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">20</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Candle&nbsp;width"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;largest&nbsp;valid&nbsp;timeframe&nbsp;closest&nbsp;to&nbsp;`maxIntrab</span><span class="mtk9">ars`&nbsp;times&nbsp;smaller&nbsp;than&nbsp;the&nbsp;chart&nbsp;timeframe.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowerTimeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">timeframe.from_seconds</span><span class="mtk13">(</span><span class="mtk16">math.ceil</span><span class="mtk13">(</span><span class="mtk16">timeframe.in_seconds</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk33">maxIntrabars</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;of&nbsp;lines&nbsp;to&nbsp;represent&nbsp;intrabar&nbsp;wicks.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">line</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">wicks</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">line</span><span class="mtk13">&gt;()</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;of&nbsp;lines&nbsp;to&nbsp;represent&nbsp;intrabar&nbsp;bodies.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">line</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">bodies</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">line</span><span class="mtk13">&gt;()</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;box&nbsp;that&nbsp;surrounds&nbsp;the&nbsp;displayed&nbsp;intrabars.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">box</span><span class="mtk1">&nbsp;</span><span class="mtk33">magnifierBox</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">box.new</span><span class="mtk13">(</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">bgcolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Fill&nbsp;the&nbsp;`wicks`&nbsp;and&nbsp;`bodies`&nbsp;arrays&nbsp;with&nbsp;blank</span><span class="mtk9">&nbsp;lines&nbsp;on&nbsp;the&nbsp;first&nbsp;bar.</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">for</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk1">&nbsp;</span><span class="mtk18">to</span><span class="mtk1">&nbsp;</span><span class="mtk33">maxIntrabars</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">array.push</span><span class="mtk13">(</span><span class="mtk33">wicks</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">line.new</span><span class="mtk13">(</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.gray</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">array.push</span><span class="mtk13">(</span><span class="mtk33">bodies</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">line.new</span><span class="mtk13">(</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">width</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">candleWidth</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;tuple&nbsp;of&nbsp;"float"&nbsp;arrays&nbsp;containing&nbsp;`open`,&nbsp;`hig</span><span class="mtk9">h`,&nbsp;`low`,&nbsp;and&nbsp;`close`&nbsp;prices&nbsp;from&nbsp;the&nbsp;`lowerTimef</span><span class="mtk9">rame`.</span></span><br><span><span class="mtk13">[</span><span class="mtk33">oData</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">hData</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lData</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">cData</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security_lower_tf</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowerTimeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">])</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;number&nbsp;of&nbsp;intrabars&nbsp;retrieved&nbsp;from&nbsp;the&nbsp;`lower</span><span class="mtk9">Timeframe`&nbsp;on&nbsp;the&nbsp;chart&nbsp;bar.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">numIntrabars</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.size</span><span class="mtk13">(</span><span class="mtk33">oData</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">numIntrabars</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Define&nbsp;the&nbsp;start&nbsp;and&nbsp;end&nbsp;bar&nbsp;index&nbsp;values&nbsp;for&nbsp;i</span><span class="mtk9">ntrabar&nbsp;display.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">startIndex</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">bar_index</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">endIndex</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">startIndex</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">numIntrabars</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Loop&nbsp;to&nbsp;update&nbsp;lines.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">for</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">to</span><span class="mtk1">&nbsp;</span><span class="mtk33">maxIntrabars</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">line</span><span class="mtk1">&nbsp;</span><span class="mtk33">wickLine</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.get</span><span class="mtk13">(</span><span class="mtk33">wicks</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">line</span><span class="mtk1">&nbsp;</span><span class="mtk33">bodyLine</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.get</span><span class="mtk13">(</span><span class="mtk33">bodies</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk1">&nbsp;</span><span class="mtk18">&lt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">numIntrabars</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`bar_index`&nbsp;of&nbsp;the&nbsp;drawing.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">candleIndex</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">startIndex</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Update&nbsp;the&nbsp;properties&nbsp;of&nbsp;the&nbsp;`wickLine`&nbsp;and&nbsp;`bo</span><span class="mtk9">dyLine`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">line.set_xy1</span><span class="mtk13">(</span><span class="mtk33">wickLine</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">startIndex</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.get</span><span class="mtk13">(</span><span class="mtk33">hData</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">line.set_xy2</span><span class="mtk13">(</span><span class="mtk33">wickLine</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">startIndex</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.get</span><span class="mtk13">(</span><span class="mtk33">lData</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">line.set_xy1</span><span class="mtk13">(</span><span class="mtk33">bodyLine</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">startIndex</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.get</span><span class="mtk13">(</span><span class="mtk33">oData</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">line.set_xy2</span><span class="mtk13">(</span><span class="mtk33">bodyLine</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">startIndex</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.get</span><span class="mtk13">(</span><span class="mtk33">cData</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">line.set_color</span><span class="mtk13">(</span><span class="mtk33">bodyLine</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">bodyLine</span><span class="mtk1">.</span><span class="mtk15">get_y2</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">bodyLine</span><span class="mtk1">.</span><span class="mtk15">get_y1</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.maroon</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">continue</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Set&nbsp;the&nbsp;coordinates&nbsp;of&nbsp;the&nbsp;`wickLine`&nbsp;and&nbsp;`body</span><span class="mtk9">Line`&nbsp;to&nbsp;`na`&nbsp;if&nbsp;no&nbsp;intrabar&nbsp;data&nbsp;is&nbsp;available&nbsp;at&nbsp;</span><span class="mtk9">the&nbsp;index.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">line.set_xy1</span><span class="mtk13">(</span><span class="mtk33">wickLine</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">line.set_xy2</span><span class="mtk13">(</span><span class="mtk33">wickLine</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">line.set_xy1</span><span class="mtk13">(</span><span class="mtk33">bodyLine</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">line.set_xy2</span><span class="mtk13">(</span><span class="mtk33">bodyLine</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Set&nbsp;the&nbsp;coordinates&nbsp;of&nbsp;the&nbsp;`magnifierBox`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">box.set_lefttop</span><span class="mtk13">(</span><span class="mtk33">magnifierBox</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">startIndex</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.max</span><span class="mtk13">(</span><span class="mtk33">hData</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">box.set_rightbottom</span><span class="mtk13">(</span><span class="mtk33">magnifierBox</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">endIndex</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.min</span><span class="mtk13">(</span><span class="mtk33">lData</span><span class="mtk13">))</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The script draws each candle using two
<a href="/pine-script-docs/visuals/lines-and-boxes/#lines">lines</a>:
one to represent wicks and the other to represent the body.
Since the script can display up to 500 lines on the chart,
we’ve limited the <code dir="auto">maxIntrabars</code> input to 250.</li>
<li>The <code dir="auto">lowerTimeframe</code> value is the result of calculating the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_math.ceil">math.ceil()</a>
of the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_timeframe.in_seconds">timeframe.in_seconds()</a>
divided by the <code dir="auto">maxIntrabars</code> and converting to a
<a href="/pine-script-docs/concepts/timeframes/#timeframe-string-specifications">valid timeframe string</a> with
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_timeframe.from_seconds">timeframe.from_seconds()</a>.</li>
<li>The script sets the top of the box drawing using the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_array.max">array.max()</a>
of the requested <code dir="auto">hData</code> array, and it sets the box’s bottom
using the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_array.min">array.min()</a>
of the requested <code dir="auto">lData</code> array. As we see on the chart, these
values correspond to the
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_high">high</a>
and
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_low">low</a>
of the chart bar.</li>
</ul>
<h3 id="requesting-collections" class="md-heading"><a href="#requesting-collections">Requesting <span class="fancy-wrap">collections<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>In some cases, a script might need to request
<a href="/pine-script-docs/language/type-system/#collections">collections</a> from an intrabar context. However, in contrast to
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>,
scripts cannot use collection references or calls to functions that return them as the <code dir="auto">expression</code>
argument in a
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
call, because <a href="/pine-script-docs/language/arrays/">arrays</a> cannot
directly store references to other
<a href="/pine-script-docs/language/type-system/#collections">collections</a>.</p>
<p>Despite these limitations, it is possible to request
<a href="/pine-script-docs/language/type-system/#collections">collections</a> from lower timeframes, if needed, with the help of <em>wrapper</em>
types.</p>
<aside aria-label="Notice" class="tv-informer not-content" style="--informer-header-color:#FF9800;--informer-back-color-light:#FFF3E0;--informer-back-color-dark:#33261A"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path fill-rule="evenodd" d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM9 4c-.79 0-1.38.7-1.25 1.48l.67 4.03a.59.59 0 0 0 1.16 0l.67-4.03A1.27 1.27 0 0 0 9 4Zm0 8a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Notice</span>The technique described below is <strong>advanced</strong> and <strong>not</strong> recommended for beginners, because it requires an understanding of how <a href="/pine-script-docs/language/type-system/#user-defined-types">user-defined types</a> with <a href="/pine-script-docs/language/type-system/#collections">collection</a> fields work. When possible, use <em>simpler</em> methods to manage LTF requests. Use the following technique only if others <em>do not</em> suffice.</p></div></aside>
<p>To make
<a href="/pine-script-docs/language/type-system/#collections">collections</a> requestable with
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>,
we must create a
<a href="/pine-script-docs/language/type-system/#user-defined-types">UDT</a>
with a field to reference a collection ID. This step is necessary since
<a href="/pine-script-docs/language/arrays/">arrays</a> cannot reference
other <a href="/pine-script-docs/language/type-system/#collections">collections</a> directly but <em>can</em> reference UDTs with collection fields:</p>
<div class="pine-colorizer not-content colorized" data-id="1yb"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@type</span><span class="mtk9">&nbsp;A&nbsp;"wrapper"&nbsp;type&nbsp;for&nbsp;storing&nbsp;an&nbsp;`array&lt;float&gt;`&nbsp;re</span><span class="mtk9">ference.</span></span><br><span><span class="mtk18">type</span><span class="mtk1">&nbsp;</span><span class="mtk33">Wrapper</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">collection</span></span><br></code></div>
<p>With our <code dir="auto">Wrapper</code> UDT defined, we can now pass the IDs of
<a href="/pine-script-docs/language/objects/">objects</a> of the UDT to the
<code dir="auto">expression</code> parameter in
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>.</p>
<p>A straightforward approach is to use a call to the type’s built-in <code dir="auto">*.new()</code> function as
the <code dir="auto">expression</code> argument. For example, this line of code uses a call to <code dir="auto">Wrapper.new()</code> with <code dir="auto">array.from(close)</code> as the <code dir="auto">collection</code> argument directly within the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a> call:</p>
<div class="pine-colorizer not-content colorized" data-id="gj"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;of&nbsp;`Wrapper`&nbsp;IDs&nbsp;requested&nbsp;from&nbsp;the&nbsp;1-mi</span><span class="mtk9">nute&nbsp;timeframe.</span></span><br><span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">Wrapper</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">wrappers</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security_lower_tf</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"1"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">Wrapper</span><span class="mtk1">.</span><span class="mtk15">new</span><span class="mtk13">(</span><span class="mtk16">array.from</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk13">)))</span></span><br></code></div>
<p>Alternatively, we can create a
<a href="/pine-script-docs/language/user-defined-functions/">user-defined function</a> or
<a href="/pine-script-docs/language/methods/#user-defined-methods">method</a>
that returns a reference to an <a href="/pine-script-docs/language/objects/">object</a> of
the <a href="/pine-script-docs/language/type-system/#user-defined-types">UDT</a> and call that function within
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>.
For instance, this code calls a custom <code dir="auto">newWrapper()</code> function that
returns a <code dir="auto">Wrapper</code> ID as the <code dir="auto">expression</code> argument:</p>
<div class="pine-colorizer not-content colorized" data-id="751"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Creates&nbsp;a&nbsp;new&nbsp;`Wrapper`&nbsp;instance&nbsp;to&nbsp;wrap&nbsp;the&nbsp;spec</span><span class="mtk9">ified&nbsp;`collection`.</span></span><br><span><span class="mtk15">newWrapper</span><span class="mtk13">(</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">collection</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">Wrapper</span><span class="mtk1">.</span><span class="mtk15">new</span><span class="mtk13">(</span><span class="mtk33">collection</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;of&nbsp;`Wrapper`&nbsp;IDs&nbsp;requested&nbsp;from&nbsp;the&nbsp;1-mi</span><span class="mtk9">nute&nbsp;timeframe.</span></span><br><span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">Wrapper</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">wrappers</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security_lower_tf</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"1"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">newWrapper</span><span class="mtk13">(</span><span class="mtk16">array.from</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk13">)))</span></span><br></code></div>
<p>The result with either of the above is an
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a>
containing <code dir="auto">Wrapper</code> IDs from all available intrabars in the chart bar,
which the script can use to reference <code dir="auto">Wrapper</code> instances from specific
intrabars and use their <code dir="auto">collection</code> fields in additional operations.</p>
<p>The script below utilizes this approach to collect the IDs of
<a href="/pine-script-docs/language/arrays/">arrays</a> containing intrabar data
from a <code dir="auto">lowerTimeframe</code>, then uses those arrays to display data from a specific
lower-timeframe bar. Its custom <code dir="auto">Prices</code> type contains a single <code dir="auto">data</code> field to
reference <code dir="auto">array&lt;float&gt;</code> instances that hold price data, and the
user-defined <code dir="auto">newPrices()</code> function returns the ID of a <code dir="auto">Prices</code> object.</p>
<p>The script calls
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
with a <code dir="auto">newPrices()</code> call as its <code dir="auto">expression</code> argument to retrieve the ID of an
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a>
containing <code dir="auto">Prices</code> IDs from each intrabar in the chart bar, then uses
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_array.get">array.get()</a>
to get the ID from a specified available intrabar, if it exists. Lastly,
it uses
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_array.get">array.get()</a>
on the <code dir="auto">data</code> array referenced by that instance and calls
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plotcandle">plotcandle()</a>
to display its values on the chart:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-security-lower-tf-Requesting-collections-1.D61W65Jj_gcc0V.webp" alt="image" width="1342" height="570" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="628"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Requesting&nbsp;LTF&nbsp;collections&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Intrabar&nbsp;viewer"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;timeframe&nbsp;of&nbsp;the&nbsp;LTF&nbsp;data&nbsp;request.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowerTimeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.timeframe</span><span class="mtk13">(</span><span class="mtk29">"1"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Timeframe"</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;index&nbsp;of&nbsp;the&nbsp;intrabar&nbsp;to&nbsp;show&nbsp;on&nbsp;each&nbsp;chart&nbsp;b</span><span class="mtk9">ar.&nbsp;0&nbsp;is&nbsp;the&nbsp;first&nbsp;available&nbsp;intrabar.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">intrabarIndex</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Intrabar&nbsp;to&nbsp;show"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;custom&nbsp;type&nbsp;to&nbsp;store&nbsp;an&nbsp;`array&lt;float&gt;`&nbsp;referenc</span><span class="mtk9">e.</span></span><br><span><span class="mtk18">type</span><span class="mtk1">&nbsp;</span><span class="mtk33">Prices</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">data</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Returns&nbsp;the&nbsp;ID&nbsp;of&nbsp;a&nbsp;new&nbsp;`Prices`&nbsp;instance&nbsp;contain</span><span class="mtk9">ing&nbsp;current&nbsp;`open`,&nbsp;`high`,&nbsp;`low`,&nbsp;and&nbsp;`close`&nbsp;pri</span><span class="mtk9">ces.</span></span><br><span><span class="mtk15">newPrices</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">Prices</span><span class="mtk1">.</span><span class="mtk15">new</span><span class="mtk13">(</span><span class="mtk16">array.from</span><span class="mtk13">(</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;of&nbsp;`Prices`&nbsp;IDs&nbsp;requested&nbsp;from&nbsp;the&nbsp;`lowe</span><span class="mtk9">rTimeframe`.</span></span><br><span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">Prices</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedPrices</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security_lower_tf</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowerTimeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">newPrices</span><span class="mtk13">())</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`Prices`&nbsp;ID&nbsp;from&nbsp;the&nbsp;`requestedPrices`&nbsp;array&nbsp;</span><span class="mtk9">at&nbsp;the&nbsp;`intrabarIndex`,&nbsp;or&nbsp;`na`&nbsp;if&nbsp;not&nbsp;available.</span></span><br><span><span class="mtk18 mtkb">Prices</span><span class="mtk1">&nbsp;</span><span class="mtk33">intrabarPrices</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.size</span><span class="mtk13">(</span><span class="mtk33">requestedPrices</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">intrabarIndex</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.get</span><span class="mtk13">(</span><span class="mtk33">requestedPrices</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">intrabarIndex</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`data`&nbsp;array&nbsp;ID&nbsp;from&nbsp;the&nbsp;`intrabarPrices`&nbsp;obj</span><span class="mtk9">ect,&nbsp;or&nbsp;the&nbsp;ID&nbsp;of&nbsp;an&nbsp;array&nbsp;of&nbsp;`na`&nbsp;values&nbsp;if&nbsp;`intr</span><span class="mtk9">abarPrices`&nbsp;is&nbsp;`na`.</span></span><br><span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">intrabarData</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">na</span><span class="mtk13">(</span><span class="mtk33">intrabarPrices</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;(</span><span class="mtk12">4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk33">intrabarPrices</span><span class="mtk1">.</span><span class="mtk33">data</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`intrabarData`&nbsp;values&nbsp;as&nbsp;candles.</span></span><br><span><span class="mtk16">plotcandle</span><span class="mtk13">(</span><span class="mtk33">intrabarData</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">intrabarData</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk12">1</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">intrabarData</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk12">2</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">intrabarData</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk12">3</span><span class="mtk13">))</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The <code dir="auto">intrabarPrices</code> variable references a <code dir="auto">Prices</code> object only if the size of the <code dir="auto">requestedPrices</code> array is greater than the <code dir="auto">intrabarIndex</code>, because attempting to use <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_array.get">array.get()</a> to retrieve an element that doesn’t exist causes an <a href="/pine-script-docs/language/arrays/#index-xx-is-out-of-bounds-array-size-is-yy">out of bounds error</a>.</li>
<li>The <code dir="auto">intrabarData</code> variable references an array from the <code dir="auto">intrabarPrices.data</code> field only if the <code dir="auto">intrabarPrices</code> variable references a <code dir="auto">Prices</code> object. If <code dir="auto">intrabarPrices</code> holds <a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a> because intrabar data is not available for a bar, the <code dir="auto">intrabarData</code> variable references an array of <a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a> values.</li>
<li>The process used in this example is <em>not</em> necessary to achieve the intended result. Instead of using <a href="/pine-script-docs/language/type-system/#user-defined-types">UDTs</a>, we can use the tuple <code dir="auto">[open, high, low, close]</code> as the <code dir="auto">expression</code> argument in the request to retrieve a tuple of <a href="/pine-script-docs/language/arrays/">arrays</a> for further operations. See the <a href="/pine-script-docs/concepts/other-timeframes-and-data/#tuples-of-intrabar-data">Tuples of intrabar data</a> section above for more information.</li>
</ul>
<h2 id="custom-contexts" class="md-heading"><a href="#custom-contexts">Custom <span class="fancy-wrap">contexts<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>Pine Script includes multiple <code dir="auto">ticker.*()</code> functions that allow scripts
to construct <em>custom</em> ticker IDs that specify additional settings for
data requests when used as a <code dir="auto">symbol</code> argument in
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
and
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>:</p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ticker.new">ticker.new()</a>
constructs a custom ticker ID from a specified <code dir="auto">prefix</code> and <code dir="auto">ticker</code>
with additional <code dir="auto">session</code> and <code dir="auto">adjustment</code> settings.</li>
<li><a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ticker.modify">ticker.modify()</a>
constructs a modified form of a specified <code dir="auto">tickerid</code> with additional
<code dir="auto">session</code> and <code dir="auto">adjustment</code> settings.</li>
<li><a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ticker.heikinashi">ticker.heikinashi()</a>,
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ticker.renko">ticker.renko()</a>,
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ticker.pointfigure">ticker.pointfigure()</a>,
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ticker.kagi">ticker.kagi()</a>,
and
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ticker.linebreak">ticker.linebreak()</a>
construct a modified form a <code dir="auto">symbol</code> with
<a href="/pine-script-docs/concepts/non-standard-charts-data/">non-standard chart</a> settings.</li>
<li><a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ticker.inherit">ticker.inherit()</a>
constructs a new ticker ID for a <code dir="auto">symbol</code> with additional parameters
inherited from the <code dir="auto">from_tickerid</code> specified in the function call,
allowing scripts to request the <code dir="auto">symbol</code> data with the same
modifiers as the <code dir="auto">from_tickerid</code>, including session, dividend
adjustment, currency conversion, non-standard chart type,
back-adjustment, settlement-as-close, etc.</li>
<li><a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ticker.standard">ticker.standard()</a>
constructs a standard ticker ID representing the <code dir="auto">symbol</code> <em>without</em>
additional modifiers.</li>
</ul>
<p>Let’s explore some practical examples of applying <code dir="auto">ticker.*()</code>
functions to request data from custom contexts.</p>
<p>Suppose we want to include dividend adjustment in a stock symbol’s
prices without enabling the “Adjust data for dividends” option in the
“Symbol” section of the chart’s settings. We can achieve this in a
script by constructing a custom ticker ID for the instrument using
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ticker.new">ticker.new()</a>
or
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ticker.modify">ticker.modify()</a>
with an <code dir="auto">adjustment</code> value of
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_adjustment.dividends">adjustment.dividends</a>.</p>
<p>This script creates an <code dir="auto">adjustedTickerID</code> using
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ticker.modify">ticker.modify()</a>,
uses that ticker ID as the <code dir="auto">symbol</code> in
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
to retrieve a
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#tuples">tuple</a> of adjusted price values, then uses <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plotcandle">plotcandle()</a> to plot the result as candles on the chart. It also highlights the background of bars where the requested prices differ from the prices without dividend adjustment.</p>
<p>As we see on the “NYSE:XOM” chart below, enabling dividend adjustment
results in different historical values before the date of the latest
dividend:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Custom-contexts-1.BPiSCB0G_ZpUr3u.webp" alt="image" width="1342" height="574" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="51u"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Custom&nbsp;contexts&nbsp;demo&nbsp;1"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Adjusted&nbsp;prices"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;custom&nbsp;ticker&nbsp;ID&nbsp;representing&nbsp;the&nbsp;chart's&nbsp;symbo</span><span class="mtk9">l&nbsp;with&nbsp;the&nbsp;dividend&nbsp;adjustment&nbsp;modifier.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">adjustedTickerID</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ticker.modify</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">adjustment</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">adjustment.dividends</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Request&nbsp;the&nbsp;adjusted&nbsp;prices&nbsp;for&nbsp;the&nbsp;chart's&nbsp;sym</span><span class="mtk9">bol.</span></span><br><span><span class="mtk13">[</span><span class="mtk33">o</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">h</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">l</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">c</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">adjustedTickerID</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">])</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;color&nbsp;of&nbsp;the&nbsp;candles&nbsp;on&nbsp;the&nbsp;chart.</span></span><br><span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">candleColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">c</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">o</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.maroon</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;adjusted&nbsp;prices.</span></span><br><span><span class="mtk16">plotcandle</span><span class="mtk13">(</span><span class="mtk33">o</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">h</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">l</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">c</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Adjusted&nbsp;Prices"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">candleColor</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Highlight&nbsp;the&nbsp;background&nbsp;when&nbsp;`c`&nbsp;is&nbsp;different&nbsp;</span><span class="mtk9">from&nbsp;`close`.</span></span><br><span><span class="mtk16">bgcolor</span><span class="mtk13">(</span><span class="mtk33">c</span><span class="mtk1">&nbsp;</span><span class="mtk18">!=</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.orange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">80</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>If a modifier included in a constructed ticker ID does not apply
to the symbol, the script will <em>ignore</em> that modifier when
requesting data. For instance, this script will display the same
values as the main chart on forex symbols such as “EURUSD”.</li>
</ul>
<p>While the example above demonstrates a simple way to modify the chart’s
symbol, a more frequent use case for <code dir="auto">ticker.*()</code> functions is applying
custom modifiers to another symbol while requesting data. If a ticker ID
referenced in a script already has the modifiers one would like to apply
(e.g., adjustment settings, session type, etc.), they can use
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ticker.inherit">ticker.inherit()</a>
to quickly and efficiently add those modifiers to another symbol.</p>
<p>In the example below, we’ve edited the previous script to request data
for a <code dir="auto">symbolInput</code> using modifiers inherited from the
<code dir="auto">adjustedTickerID</code>. This script calls
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ticker.inherit">ticker.inherit()</a>
to construct an <code dir="auto">inheritedTickerID</code> and uses that ticker ID in a
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
call. It also requests data for the <code dir="auto">symbolInput</code> without additional
modifiers and <a href="/pine-script-docs/concepts/bar-plotting/#plotting-candles-with-plotcandle">plots candles</a>
for both ticker IDs in a separate chart pane to compare the difference.</p>
<p>As shown on the chart, the data requested using the <code dir="auto">inheritedTickerID</code>
includes dividend adjustment, whereas the data requested using the
<code dir="auto">symbolInput</code> directly does not:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Custom-contexts-2.DR5Qn5x1_Z1F3irE.webp" alt="image" width="1342" height="574" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="3kk"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Custom&nbsp;contexts&nbsp;demo&nbsp;2"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Inherited&nbsp;adjustment"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;symbol&nbsp;to&nbsp;request&nbsp;data&nbsp;from.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.symbol</span><span class="mtk13">(</span><span class="mtk29">"NYSE:PFE"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Symbol"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;custom&nbsp;ticker&nbsp;ID&nbsp;representing&nbsp;the&nbsp;chart's&nbsp;symbo</span><span class="mtk9">l&nbsp;with&nbsp;the&nbsp;dividend&nbsp;adjustment&nbsp;modifier.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">adjustedTickerID</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ticker.modify</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">adjustment</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">adjustment.dividends</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;custom&nbsp;ticker&nbsp;ID&nbsp;representing&nbsp;the&nbsp;`symbolInput`</span><span class="mtk9">&nbsp;with&nbsp;modifiers&nbsp;inherited&nbsp;from&nbsp;the&nbsp;`adjustedTicker</span><span class="mtk9">ID`.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">inheritedTickerID</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ticker.inherit</span><span class="mtk13">(</span><span class="mtk33">adjustedTickerID</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolInput</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Request&nbsp;prices&nbsp;using&nbsp;the&nbsp;`symbolInput`.</span></span><br><span><span class="mtk13">[</span><span class="mtk33">o1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">h1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">l1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">c1</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">symbolInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">])</span></span><br><span><span class="mtk9">//&nbsp;Request&nbsp;prices&nbsp;using&nbsp;the&nbsp;`inheritedTickerID`.</span></span><br><span><span class="mtk13">[</span><span class="mtk33">o2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">h2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">l2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">c2</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">inheritedTickerID</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">])</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;color&nbsp;of&nbsp;the&nbsp;candles&nbsp;that&nbsp;use&nbsp;the&nbsp;`inheritedT</span><span class="mtk9">ickerID`&nbsp;prices.</span></span><br><span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">candleColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">c2</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">o2</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.maroon</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`symbol`&nbsp;prices.</span></span><br><span><span class="mtk16">plotcandle</span><span class="mtk13">(</span><span class="mtk33">o1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">h1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">l1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">c1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Symbol"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.gray</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.gray</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">bordercolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.gray</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`inheritedTickerID`&nbsp;prices.</span></span><br><span><span class="mtk16">plotcandle</span><span class="mtk13">(</span><span class="mtk33">o2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">h2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">l2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">c2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Symbol&nbsp;With&nbsp;Modifiers"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">candleColor</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Highlight&nbsp;the&nbsp;background&nbsp;when&nbsp;`c1`&nbsp;is&nbsp;different</span><span class="mtk9">&nbsp;from&nbsp;`c2`.</span></span><br><span><span class="mtk16">bgcolor</span><span class="mtk13">(</span><span class="mtk33">c1</span><span class="mtk1">&nbsp;</span><span class="mtk18">!=</span><span class="mtk1">&nbsp;</span><span class="mtk33">c2</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.orange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">80</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>Since the <code dir="auto">adjustedTickerID</code> represents a modified form of the
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.tickerid">syminfo.tickerid</a>,
if we modify the chart’s context in other ways, such as
changing the chart type or enabling extended trading hours in
the chart’s settings, those modifiers will also apply to the
<code dir="auto">adjustedTickerID</code> and <code dir="auto">inheritedTickerID</code>. However, they will
<em>not</em> apply to the <code dir="auto">symbolInput</code> since it represents a
<em>standard</em> ticker ID.</li>
</ul>
<p>Another frequent use case for requesting custom contexts is retrieving
data that uses
<a href="/pine-script-docs/concepts/non-standard-charts-data/">non-standard chart</a> calculations. For example, suppose we want to use
<a href="https://www.tradingview.com/support/solutions/43000502284-renko-charts/">Renko</a>
price values to calculate trade signals in a
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_strategy">strategy()</a>
script. If we simply change the chart type to “Renko” to get the
prices, the <a href="/pine-script-docs/concepts/strategies/">strategy</a>
will also simulate its trades based on those synthetic prices, producing
<a href="https://www.tradingview.com/support/solutions/43000481029/">misleading
results</a>:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Custom-contexts-3.Fi6i41m5_Z15B7Id.webp" alt="image" width="1342" height="656" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="3u4"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">strategy</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"Custom&nbsp;contexts&nbsp;demo&nbsp;3"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Renko&nbsp;strategy"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">default_qty_type</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">strategy.percent_of_equity</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">default_qty_value</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">initial_capital</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">50000</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">slippage</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">commission_type</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">strategy.commission.cash_per_contract</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">commission_value</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">margin_long</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">100</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">margin_short</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">100</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;When&nbsp;`true`,&nbsp;the&nbsp;strategy&nbsp;places&nbsp;a&nbsp;long&nbsp;market&nbsp;or</span><span class="mtk9">der.</span></span><br><span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">longEntry</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.crossover</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;When&nbsp;`true`,&nbsp;the&nbsp;strategy&nbsp;places&nbsp;a&nbsp;short&nbsp;market&nbsp;o</span><span class="mtk9">rder.</span></span><br><span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">shortEntry</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.crossunder</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">longEntry</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">strategy.entry</span><span class="mtk13">(</span><span class="mtk29">"Long&nbsp;Entry"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">strategy.long</span><span class="mtk13">)</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">shortEntry</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">strategy.entry</span><span class="mtk13">(</span><span class="mtk29">"Short&nbsp;Entry"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">strategy.short</span><span class="mtk13">)</span></span><br></code></div>
<p>To ensure our strategy shows results based on <em>actual</em> prices, we can
create a Renko ticker ID using
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ticker.renko">ticker.renko()</a>
while keeping the chart on a <em>standard type</em>, allowing the script to
request and use
<a href="https://www.tradingview.com/support/solutions/43000502284-renko-charts/">Renko</a>
prices to calculate its signals without calculating the strategy results
on them:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Custom-contexts-4.DB0_6eO1_Z2gBlFY.webp" alt="image" width="1342" height="634" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="70i"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">strategy</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"Custom&nbsp;contexts&nbsp;demo&nbsp;3"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Renko&nbsp;strategy"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">default_qty_type</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">strategy.percent_of_equity</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">default_qty_value</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">initial_capital</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">50000</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">slippage</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">commission_type</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">strategy.commission.cash_per_contract</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">commission_value</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">margin_long</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">100</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">margin_short</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">100</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;Renko&nbsp;ticker&nbsp;ID.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">renkoTickerID</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ticker.renko</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"ATR"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">14</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Request&nbsp;the&nbsp;`open`&nbsp;and&nbsp;`close`&nbsp;prices&nbsp;using&nbsp;the</span><span class="mtk9">&nbsp;`renkoTickerID`.</span></span><br><span><span class="mtk13">[</span><span class="mtk33">renkoOpen</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">renkoClose</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">renkoTickerID</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">])</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;When&nbsp;`true`,&nbsp;the&nbsp;strategy&nbsp;places&nbsp;a&nbsp;long&nbsp;market&nbsp;or</span><span class="mtk9">der.</span></span><br><span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">longEntry</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.crossover</span><span class="mtk13">(</span><span class="mtk33">renkoClose</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">renkoOpen</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;When&nbsp;`true`,&nbsp;the&nbsp;strategy&nbsp;places&nbsp;a&nbsp;short&nbsp;market&nbsp;o</span><span class="mtk9">rder.</span></span><br><span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">shortEntry</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.crossunder</span><span class="mtk13">(</span><span class="mtk33">renkoClose</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">renkoOpen</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">longEntry</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">strategy.entry</span><span class="mtk13">(</span><span class="mtk29">"Long&nbsp;Entry"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">strategy.long</span><span class="mtk13">)</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">shortEntry</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">strategy.entry</span><span class="mtk13">(</span><span class="mtk29">"Short&nbsp;Entry"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">strategy.short</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">renkoOpen</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">renkoClose</span><span class="mtk13">)</span></span><br></code></div>
<h2 id="historical-and-realtime-behavior" class="md-heading"><a href="#historical-and-realtime-behavior">Historical and realtime <span class="fancy-wrap">behavior<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>Functions in the <code dir="auto">request.*()</code> namespace can behave differently on
historical and realtime bars. This behavior is closely related to
Pine’s <a href="/pine-script-docs/language/execution-model/">Execution model</a>.</p>
<p>Consider how a script behaves within the main context. Throughout the
chart’s history, the script calculates its required values once and
<em>commits</em> them to that bar so their states are accessible on subsequent executions.
On an unconfirmed bar, however, the script recalculates its
values on <em>each update</em> to the bar’s data to align with realtime
changes. Before recalculating the values on that bar, it reverts
calculated values to their last committed states, otherwise known as
<em>rollback</em>, and it only commits values to that bar once the bar closes.</p>
<p>Now consider the behavior of data requests from other contexts with
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>.
As when evaluating historical bars in the main context,
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
only returns new historical values when it confirms a bar in its
specified context. When executing on realtime bars, it returns
recalculated values on each chart bar, similar to how a script
recalculates values in the main context on the open chart bar.</p>
<p>However, the function only <em>confirms</em> the requested values when a bar
from its context closes. When the script restarts, what
were previously <em>realtime</em> bars become <em>historical</em> bars.
Therefore,
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
only returns the values it confirmed on those bars. In essence, this
behavior means that requested data may <em>repaint</em> when its values
fluctuate on realtime bars without confirmation from the context.</p>
<aside aria-label="Tip" class="tv-informer not-content" style="--informer-header-color:#089981;--informer-back-color-light:#DAF2EE;--informer-back-color-dark:#082621"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16Zm3.87-12.15c.36.2.49.66.28 1.02l-4 7a.75.75 0 0 1-1.18.16l-3-3a.75.75 0 1 1 1.06-1.06l2.3 2.3 3.52-6.14a.75.75 0 0 1 1.02-.28Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Tip</span>It is often helpful to distinguish historical bars from realtime bars when working with <code dir="auto">request.*()</code> functions. Scripts can determine whether bars have historical or realtime states by using the <a href="https://www.tradingview.com/pine-script-reference/v6/#var_barstate.ishistory">barstate.ishistory</a> and <a href="https://www.tradingview.com/pine-script-reference/v6/#var_barstate.isrealtime">barstate.isrealtime</a> variables.</p></div></aside>
<p>In most circumstances where a script requests data from a broader
context, one will typically require confirmed, stable values that <em>do
not</em> fluctuate on realtime bars. The
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#avoiding-repainting">section below</a> explains how to achieve such a result and avoid repainting
data requests.</p>
<h3 id="avoiding-repainting" class="md-heading"><a href="#avoiding-repainting">Avoiding <span class="fancy-wrap">repainting<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<h4 id="higher-timeframe-data" class="md-heading"><a href="#higher-timeframe-data">Higher-timeframe <span class="fancy-wrap">data<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p>When requesting values from a higher timeframe, they are subject to
repainting since realtime bars can contain <em>unconfirmed</em> information
from developing HTF bars, and the script may adjust the times that new
values come in on historical bars. To avoid repainting HTF data, one
must ensure that the function only returns confirmed values with
consistent timing on all bars, regardless of bar state.</p>
<p>The most reliable approach to achieve non-repainting results is to use
an <code dir="auto">expression</code> argument that only references past bars (e.g.,
<code dir="auto">close[1]</code>) while using
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_on">barmerge.lookahead_on</a>
as the <code dir="auto">lookahead</code> value.</p>
<p>Using
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_on">barmerge.lookahead_on</a>
with non-offset HTF data requests is discouraged since it prompts
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
to “look ahead” to the final values of an HTF bar, retrieving
confirmed values <em>before</em> they’re actually available in the script’s
history. However, if the values used in the <code dir="auto">expression</code> are offset by
at least one bar, the “future” data the function retrieves is no
longer from the future. Instead, the data represents confirmed values
from established, <em>available</em> HTF bars. In other words, applying an
offset to the <code dir="auto">expression</code> effectively prevents the requested data from
repainting when the script restarts its executions and eliminates
lookahead bias in the historical series.</p>
<p>The following example demonstrates a repainting HTF data request. The
script uses
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
without offset modifications or additional arguments to retrieve the
results of a
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ta.wma">ta.wma()</a>
call from a higher timeframe. It also highlights the background to
indicate which bars were in a realtime state during its calculations.</p>
<p>As shown on the chart below, the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plot">plot</a>
of the requested WMA only changes on historical bars when HTF bars
close, whereas it fluctuates on all realtime bars since the data
includes unconfirmed values from the higher timeframe:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Historical-and-realtime-behavior-Avoiding-repainting-Higher-timeframe-data-1.BaZM3HDu_2k78Ln.webp" alt="image" width="1342" height="562" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="2vc"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Avoiding&nbsp;HTF&nbsp;repainting&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;multiplier&nbsp;applied&nbsp;to&nbsp;the&nbsp;chart's&nbsp;timeframe.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">tfMultiplier</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Timeframe&nbsp;multiplier"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;number&nbsp;of&nbsp;bars&nbsp;in&nbsp;the&nbsp;moving&nbsp;average.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">5</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"WMA&nbsp;smoothing&nbsp;length"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;valid&nbsp;timeframe&nbsp;string&nbsp;closest&nbsp;to&nbsp;`tfMultipli</span><span class="mtk9">er`&nbsp;times&nbsp;larger&nbsp;than&nbsp;the&nbsp;chart&nbsp;timeframe.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">timeframe.from_seconds</span><span class="mtk13">(</span><span class="mtk16">timeframe.in_seconds</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">tfMultiplier</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;weighted&nbsp;MA&nbsp;of&nbsp;`close`&nbsp;prices&nbsp;over&nbsp;`length`&nbsp;b</span><span class="mtk9">ars&nbsp;on&nbsp;the&nbsp;`timeframe`.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;request&nbsp;repaints&nbsp;because&nbsp;it&nbsp;inclu</span><span class="mtk9">des&nbsp;unconfirmed&nbsp;HTF&nbsp;data&nbsp;on&nbsp;realtime&nbsp;bars&nbsp;and&nbsp;it&nbsp;m</span><span class="mtk9">ay&nbsp;offset&nbsp;the</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;times&nbsp;of&nbsp;its&nbsp;historical&nbsp;results.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedWMA</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.wma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;requested&nbsp;series.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">requestedWMA</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"HTF&nbsp;WMA"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Highlight&nbsp;the&nbsp;background&nbsp;on&nbsp;realtime&nbsp;bars.</span></span><br><span><span class="mtk16">bgcolor</span><span class="mtk13">(</span><span class="mtk11">barstate.isrealtime</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.orange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">70</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">title</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Realtime&nbsp;bar&nbsp;highlight"</span><span class="mtk13">)</span></span><br></code></div>
<p>To avoid repainting in this script, we can add
<code dir="auto">lookahead = barmerge.lookahead_on</code> to the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
call and offset the call history of
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ta.wma">ta.wma()</a>
by one bar with the history-referencing operator
<a href="https://www.tradingview.com/pine-script-reference/v6/#op_%5B%5D">[]</a>,
ensuring the request always retrieves the last confirmed HTF bar’s WMA
at the start of each new <code dir="auto">timeframe</code>. Unlike the previous script, this
version has consistent behavior on historical and realtime bar states,
as we see below:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Historical-and-realtime-behavior-Avoiding-repainting-Higher-timeframe-data-2.DgoLhl8Y_1sHSHG.webp" alt="image" width="1342" height="562" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="7j"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Avoiding&nbsp;HTF&nbsp;repainting&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;multiplier&nbsp;applied&nbsp;to&nbsp;the&nbsp;chart's&nbsp;timeframe.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">tfMultiplier</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Timeframe&nbsp;multiplier"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;number&nbsp;of&nbsp;bars&nbsp;in&nbsp;the&nbsp;moving&nbsp;average.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">5</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"WMA&nbsp;smoothing&nbsp;length"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;valid&nbsp;timeframe&nbsp;string&nbsp;closest&nbsp;to&nbsp;`tfMultipli</span><span class="mtk9">er`&nbsp;times&nbsp;larger&nbsp;than&nbsp;the&nbsp;chart&nbsp;timeframe.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">timeframe.from_seconds</span><span class="mtk13">(</span><span class="mtk16">timeframe.in_seconds</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">tfMultiplier</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;weighted&nbsp;MA&nbsp;of&nbsp;`close`&nbsp;prices&nbsp;over&nbsp;`length`&nbsp;b</span><span class="mtk9">ars&nbsp;on&nbsp;the&nbsp;`timeframe`.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;request&nbsp;does&nbsp;not&nbsp;repaint,&nbsp;as&nbsp;it&nbsp;a</span><span class="mtk9">lways&nbsp;references&nbsp;the&nbsp;last&nbsp;confirmed&nbsp;WMA&nbsp;value&nbsp;on&nbsp;a</span><span class="mtk9">ll&nbsp;bars.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedWMA</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.wma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)[</span><span class="mtk12">1</span><span class="mtk13">]</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookahead</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.lookahead_on</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;requested&nbsp;value.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">requestedWMA</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"HTF&nbsp;WMA"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Highlight&nbsp;the&nbsp;background&nbsp;on&nbsp;realtime&nbsp;bars.</span></span><br><span><span class="mtk16">bgcolor</span><span class="mtk13">(</span><span class="mtk11">barstate.isrealtime</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.orange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">70</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">title</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Realtime&nbsp;bar&nbsp;highlight"</span><span class="mtk13">)</span></span><br></code></div>
<h4 id="lower-timeframe-data" class="md-heading"><a href="#lower-timeframe-data">Lower-timeframe <span class="fancy-wrap">data<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
and
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
functions can retrieve data from lower-timeframe contexts. The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
function can only retrieve data from a <em>single</em> intrabar in each chart
bar, and
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
retrieves data from <em>all</em> available intrabars.</p>
<p>When using these functions to retrieve intrabar data, it’s important to
note that such requests are <strong>not</strong> immune to repainting behavior.
Historical and realtime series often rely on <em>separate</em> data feeds. Data
providers may retroactively modify realtime data, and it’s possible for
races to occur in realtime data feeds, as explained in the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#data-feeds">Data feeds</a> section of this page. Either case may result in intrabar
data retrieved on realtime bars repainting after the script restarts its
executions.</p>
<p>Additionally, a particular case that <em>will</em> cause repainting LTF
requests is using
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
with
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_on">barmerge.lookahead_on</a>
to retrieve data from the first intrabar in each chart bar. While it
will generally work as expected on historical bars, it will track only
the most recent intrabar on realtime bars, as
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
does not retain all intrabar information, and the intrabars the function retrieves on realtime bars are unsorted until restarting the
script:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Historical-and-realtime-behavior-Avoiding-repainting-Lower-timeframe-data-1.CBTFrSjr_3y4ey.webp" alt="image" width="1342" height="562" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="6qk"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Avoiding&nbsp;LTF&nbsp;repainting&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;lower&nbsp;timeframe&nbsp;of&nbsp;the&nbsp;requested&nbsp;data.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowerTimeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.timeframe</span><span class="mtk13">(</span><span class="mtk29">"1"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Timeframe"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;first&nbsp;intrabar&nbsp;`close`&nbsp;requested&nbsp;from&nbsp;the&nbsp;`lo</span><span class="mtk9">werTimeframe`&nbsp;on&nbsp;each&nbsp;bar.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Only&nbsp;works&nbsp;as&nbsp;intended&nbsp;on&nbsp;historical&nbsp;b</span><span class="mtk9">ars.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedClose</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowerTimeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookahead</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.lookahead_on</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`requestedClose`.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">requestedClose</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"First&nbsp;intrabar&nbsp;close"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">linewidth</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Highlight&nbsp;the&nbsp;background&nbsp;on&nbsp;realtime&nbsp;bars.</span></span><br><span><span class="mtk16">bgcolor</span><span class="mtk13">(</span><span class="mtk11">barstate.isrealtime</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.orange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">60</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">title</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Realtime&nbsp;bar&nbsp;Highlight"</span><span class="mtk13">)</span></span><br></code></div>
<p>One can mitigate this behavior and track the values from the first
intrabar, or any available intrabar in the chart bar, by using
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
since it maintains an
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a>
of intrabar values ordered by the times they come in. Here, we call
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_array.first">array.first()</a>
on a requested
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a>
of intrabar data to retrieve the
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a>
price from the first available intrabar in each chart bar:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Historical-and-realtime-behavior-Avoiding-repainting-Lower-timeframe-data-2.6WrbL0Kk_wVrfM.webp" alt="image" width="1342" height="562" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="22c"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Avoiding&nbsp;LTF&nbsp;repainting&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;lower&nbsp;timeframe&nbsp;of&nbsp;the&nbsp;requested&nbsp;data.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowerTimeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.timeframe</span><span class="mtk13">(</span><span class="mtk29">"1"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Timeframe"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;of&nbsp;intrabar&nbsp;`close`&nbsp;values&nbsp;requested&nbsp;fro</span><span class="mtk9">m&nbsp;the&nbsp;`lowerTimeframe`&nbsp;on&nbsp;each&nbsp;bar.</span></span><br><span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedCloses</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security_lower_tf</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowerTimeframe</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;first&nbsp;intrabar&nbsp;`close`&nbsp;on&nbsp;each&nbsp;bar&nbsp;with&nbsp;avail</span><span class="mtk9">able&nbsp;data.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">firstClose</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedCloses</span><span class="mtk1">.</span><span class="mtk15">size</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedCloses</span><span class="mtk1">.</span><span class="mtk15">first</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`firstClose`.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">firstClose</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"First&nbsp;intrabar&nbsp;close"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">linewidth</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Highlight&nbsp;the&nbsp;background&nbsp;on&nbsp;realtime&nbsp;bars.</span></span><br><span><span class="mtk16">bgcolor</span><span class="mtk13">(</span><span class="mtk11">barstate.isrealtime</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.orange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">60</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">title</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Realtime&nbsp;bar&nbsp;Highlight"</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>While
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>
is more optimized for handling historical and realtime
intrabars, it’s still possible in some cases for minor
repainting to occur due to data differences from the provider,
as outlined above.</li>
<li>This code may not show intrabar data on all available chart
bars, depending on how many intrabars each chart bar contains,
as <code dir="auto">request.*()</code> functions can retrieve up to 200,000 intrabars
from an LTF context. The maximum number of requestable intrabars depends on the user’s <a href="https://www.tradingview.com/pricing/">plan</a>. See
<a href="/pine-script-docs/writing/limitations/#request-calls">this</a> section of the
<a href="/pine-script-docs/writing/limitations/">Limitations</a>
page for more information.</li>
</ul>
<h2 id="requestcurrency_rate" class="md-heading"><a href="#requestcurrency_rate"><span>​<code dir="auto">request.currency_rate()</code>​</span><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></a></h2>
<p>When a script needs to convert values expressed in one currency to
another, one can use
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.currency_rate">request.currency_rate()</a>.
This function requests a <em>daily rate</em> for currency conversion
calculations based on currency pair or <a href="https://www.tradingview.com/support/solutions/43000502298/">spread</a> data from the most popular exchanges, providing a simpler alternative
to fetching specific pairs or
<a href="https://www.tradingview.com/support/solutions/43000502298/">spreads</a>
with
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>.</p>
<p>While one can use
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
to retrieve daily currency rates, its use case is more involved than
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.currency_rate">request.currency_rate()</a>,
as one needs to supply a valid <em>ticker ID</em> for a currency pair or spread
to request the rate. Additionally, a historical offset and
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_on">barmerge.lookahead_on</a>
are necessary to prevent the results from repainting, as explained in
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#avoiding-repainting">this section</a>.</p>
<p>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.currency_rate">request.currency_rate()</a>
function, on the other hand, only requires <em>currency codes</em>. No ticker
ID is needed when requesting rates with this function, and it ensures
non-repainting results without requiring additional specification.</p>
<p>The function’s signature is as follows:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.currency_rate(from, to, ignore_invalid_currency) → series float</span></div></div></code></pre></figure></div>
<p>The <code dir="auto">from</code> parameter specifies the currency to convert, and the <code dir="auto">to</code>
parameter specifies the target currency. Both parameters accept
“string” values representing valid currency codes (e.g.,
“USD”) or any built-in <code dir="auto">currency.*</code> variable (e.g.,
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_currency.USD">currency.USD</a>).</p>
<p>When the function cannot calculate a valid conversion rate between the specified
<code dir="auto">from</code> and <code dir="auto">to</code> currencies, programmers can decide whether
it raises a runtime error or returns
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a> via
the <code dir="auto">ignore_invalid_currency</code> parameter. The default value is <code dir="auto">false</code>,
meaning the function raises a runtime error and halts the script’s
executions.</p>
<p>The following example demonstrates a simple use case for
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.currency_rate">request.currency_rate()</a>.
Suppose we want to convert values expressed in Turkish lira
(<a href="https://www.tradingview.com/pine-script-reference/v6/#var_currency.TRY">currency.TRY</a>)
to South Korean won
(<a href="https://www.tradingview.com/pine-script-reference/v6/#var_currency.KRW">currency.KRW</a>)
using a daily conversion rate. If we use
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
to retrieve the rate, we must supply a valid ticker ID and request the
last confirmed
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a>
from the previous day.</p>
<p>In this case, no valid symbol exists that would allow us to
retrieve a conversion rate directly with
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>.
Therefore, we first need a ticker ID for a
<a href="https://www.tradingview.com/support/solutions/43000502298/">spread</a>
that converts TRY to an intermediate currency, such as USD, then
converts the intermediate currency to KRW. We can then use that ticker
ID within
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a>
with <code dir="auto">close[1]</code> as the <code dir="auto">expression</code> and
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.lookahead_on">barmerge.lookahead_on</a>
as the <code dir="auto">lookahead</code> value to request a non-repainting daily rate.</p>
<p>Alternatively, we can achieve the same result more simply by calling
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.currency_rate">request.currency_rate()</a>.
This function does all the heavy lifting for us, only requiring <code dir="auto">from</code>
and <code dir="auto">to</code> currency arguments to perform its calculation.</p>
<p>As we see below, both approaches return the same daily rate:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-currency-rate-1.C1rKgV4h_1dBAP1.webp" alt="image" width="1342" height="558" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="72b"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Requesting&nbsp;currency&nbsp;rates&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;currency&nbsp;to&nbsp;convert.</span></span><br><span><span class="mtk18 mtkb">simple</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">fromCurrency</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">currency.TRY</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;resulting&nbsp;currency.</span></span><br><span><span class="mtk18 mtkb">simple</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">toCurrency</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">currency.KRW</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;spread&nbsp;symbol&nbsp;to&nbsp;request.&nbsp;Required&nbsp;in&nbsp;`reques</span><span class="mtk9">t.security()`&nbsp;because&nbsp;no&nbsp;direct&nbsp;symbol&nbsp;exists.</span></span><br><span><span class="mtk18 mtkb">simple</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">spreadSymbol</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"{0}{2}&nbsp;*&nbsp;{2}{1}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">fromCurrency</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">toCurrency</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">currency.USD</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;non-repainting&nbsp;conversion&nbsp;rate&nbsp;from&nbsp;`request.</span><span class="mtk9">security()`&nbsp;using&nbsp;the&nbsp;`spreadSymbol`.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">securityRequestedRate</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">spreadSymbol</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"1D"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lookahead</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.lookahead_on</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;non-repainting&nbsp;conversion&nbsp;rate&nbsp;from&nbsp;`request.</span><span class="mtk9">currency_rate()`.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">nonSecurityRequestedRate</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.currency_rate</span><span class="mtk13">(</span><span class="mtk33">fromCurrency</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">toCurrency</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;requested&nbsp;rates.&nbsp;We&nbsp;can&nbsp;multiply&nbsp;TRY&nbsp;v</span><span class="mtk9">alues&nbsp;by&nbsp;these&nbsp;rates&nbsp;to&nbsp;convert&nbsp;them&nbsp;to&nbsp;KRW.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">securityRequestedRate</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"`request.security()`&nbsp;value"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">5</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">nonSecurityRequestedRate</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"`request.currency_rate()`&nbsp;value"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.yellow</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">)</span></span><br></code></div>
<h2 id="requestdividends-requestsplits-and-requestearnings" class="md-heading"><a href="#requestdividends-requestsplits-and-requestearnings"><span>​<code dir="auto">request.dividends()</code>​, ​<code dir="auto">request.splits()</code>​, and ​<code dir="auto">request.earnings()</code>​</span><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></a></h2>
<p>Analyzing a stock’s earnings data and corporate actions provides
helpful insights into its underlying financial strength. Pine Script
provides the ability to retrieve essential information about applicable
stocks via
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.dividends">request.dividends()</a>,
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.splits">request.splits()</a>,
and
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.earnings">request.earnings()</a>.</p>
<p>These are the functions’ signatures:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text" tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.dividends(ticker, field, gaps, lookahead, ignore_invalid_symbol, currency) → series float</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.splits(ticker, field, gaps, lookahead, ignore_invalid_symbol) → series float</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.earnings(ticker, field, gaps, lookahead, ignore_invalid_symbol, currency) → series float</span></div></div></code></pre></figure></div>
<p>Each function has the same parameters in its signature, with the
exception of
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.splits">request.splits()</a>,
which doesn’t have a <code dir="auto">currency</code> parameter.</p>
<p>Note that unlike the <code dir="auto">symbol</code> parameter in other <code dir="auto">request.*()</code>
functions, the <code dir="auto">ticker</code> parameter in these functions only accepts an
<em>“Exchange:Symbol” pair</em>, such as “NASDAQ:AAPL”. The built-in
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.ticker">syminfo.ticker</a>
variable does not work with these functions since it does not contain
exchange information. Instead, one must use
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.tickerid">syminfo.tickerid</a>
for such cases.</p>
<p>The <code dir="auto">field</code> parameter determines the data the function will retrieve.
Each of these functions accepts different built-in variables as the
<code dir="auto">field</code> argument since each requests different information about a
stock:</p>
<ul>
<li>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.dividends">request.dividends()</a>
function retrieves current dividend information for a stock, i.e.,
the amount per share the issuing company paid out to investors who
purchased shares before the ex-dividend date. Passing the built-in
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_dividends.gross">dividends.gross</a>
or
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_dividends.net">dividends.net</a>
variables to the <code dir="auto">field</code> parameter specifies whether the returned
value represents dividends before or after factoring in expenses the
company deducts from its payouts.</li>
<li>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.splits">request.splits()</a>
function retrieves current split and reverse split information for a
stock. A split occurs when a company increases its outstanding
shares to promote liquidity. A reverse split occurs when a company
consolidates its shares and offers them at a higher price to attract
specific investors or maintain their listing on a market that has a
minimum per-share price. Companies express their split information
as <em>ratios</em>. For example, a 5:1 split means the company issued
additional shares to its shareholders so that they have five times
the number of shares they had before the split, and the raw price of
each share becomes one-fifth of the previous price. Passing
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_splits.numerator">splits.numerator</a>
or
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_splits.denominator">splits.denominator</a>
to the <code dir="auto">field</code> parameter of
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.splits">request.splits()</a>
determines whether it returns the numerator or denominator of the
split ratio.</li>
<li>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.earnings">request.earnings()</a>
function retrieves the earnings per share (EPS) information for a
stock <code dir="auto">ticker</code>’s issuing company. The EPS value is the ratio of a
company’s net income to the number of outstanding stock shares,
which investors consider an indicator of the company’s
profitability. Passing
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_earnings.actual">earnings.actual</a>,
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_earnings.estimate">earnings.estimate</a>,
or
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_earnings.standardized">earnings.standardized</a>
as the <code dir="auto">field</code> argument in
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.earnings">request.earnings()</a>
respectively determines whether the function requests the actual,
estimated, or standardized EPS value.</li>
</ul>
<p>For a detailed explanation of the <code dir="auto">gaps</code>, <code dir="auto">lookahead</code>, and
<code dir="auto">ignore_invalid_symbol</code> parameters of these functions, see the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#common-characteristics">Common characteristics</a> section at the top of this page.</p>
<p>It’s important to note that the values returned by these functions
reflect the data available as it comes in. This behavior differs from
financial data originating from a
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.financial">request.financial()</a>
call in that the underlying data from such calls becomes available
according to a company’s fiscal reporting period.</p>
<aside aria-label="Tip" class="tv-informer not-content" style="--informer-header-color:#089981;--informer-back-color-light:#DAF2EE;--informer-back-color-dark:#082621"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16Zm3.87-12.15c.36.2.49.66.28 1.02l-4 7a.75.75 0 0 1-1.18.16l-3-3a.75.75 0 1 1 1.06-1.06l2.3 2.3 3.52-6.14a.75.75 0 0 1 1.02-.28Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Tip</span>Scripts can also retrieve information about upcoming earnings and dividends for an instrument via the <code dir="auto">earnings.future_*</code> and <code dir="auto">dividends.future_*</code> built-in variables.</p></div></aside>
<p>Here, we’ve included an example that displays a handy
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_table">table</a>
containing the most recent dividend, split, and EPS data. The script
calls the <code dir="auto">request.*()</code> functions discussed in this section to retrieve
the data, then converts the values to “strings” with <code dir="auto">str.*()</code>
functions and displays the results in the <code dir="auto">infoTable</code> with
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_table.cell">table.cell()</a>:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-dividends-request-splits-and-request-earnings-1.DVVI7Tee_yVHYk.webp" alt="image" width="1342" height="560" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="62r"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Dividends,&nbsp;splits,&nbsp;and&nbsp;earnings&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;size&nbsp;of&nbsp;the&nbsp;table's&nbsp;text.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableSize</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.string</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk11">size.large</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Table&nbsp;size"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk11">size.auto</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">size.tiny</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">size.small</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">size.normal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">size.large</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">size.huge</span><span class="mtk13">]</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;color&nbsp;of&nbsp;the&nbsp;table's&nbsp;text&nbsp;and&nbsp;frame.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;`table`&nbsp;displaying&nbsp;the&nbsp;latest&nbsp;dividend,&nbsp;split,&nbsp;</span><span class="mtk9">and&nbsp;EPS&nbsp;information.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">table</span><span class="mtk1">&nbsp;</span><span class="mtk33">infoTable</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">table.new</span><span class="mtk13">(</span><span class="mtk11">position.top_right</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">frame_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">frame_width</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Add&nbsp;header&nbsp;cells&nbsp;on&nbsp;the&nbsp;first&nbsp;bar.</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">table.cell</span><span class="mtk13">(</span><span class="mtk33">infoTable</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Field"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableSize</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">table.cell</span><span class="mtk13">(</span><span class="mtk33">infoTable</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Value"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableSize</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">table.cell</span><span class="mtk13">(</span><span class="mtk33">infoTable</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Date"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableSize</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">table.cell</span><span class="mtk13">(</span><span class="mtk33">infoTable</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Dividend"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableSize</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">table.cell</span><span class="mtk13">(</span><span class="mtk33">infoTable</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Split"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableSize</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">table.cell</span><span class="mtk13">(</span><span class="mtk33">infoTable</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"EPS"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableSize</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;amount&nbsp;of&nbsp;the&nbsp;last&nbsp;reported&nbsp;dividend&nbsp;as&nbsp;of&nbsp;th</span><span class="mtk9">e&nbsp;current&nbsp;bar.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">latestDividend</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.dividends</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">dividends.gross</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.gaps_on</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;numerator&nbsp;of&nbsp;that&nbsp;last&nbsp;reported&nbsp;split&nbsp;ratio&nbsp;a</span><span class="mtk9">s&nbsp;of&nbsp;the&nbsp;current&nbsp;bar.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">latestSplitNum</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.splits</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">splits.numerator</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.gaps_on</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;denominator&nbsp;of&nbsp;the&nbsp;last&nbsp;reported&nbsp;split&nbsp;ratio&nbsp;</span><span class="mtk9">as&nbsp;of&nbsp;the&nbsp;current&nbsp;bar.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">latestSplitDen</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.splits</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">splits.denominator</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.gaps_on</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;last&nbsp;reported&nbsp;earnings&nbsp;per&nbsp;share&nbsp;as&nbsp;of&nbsp;the&nbsp;cu</span><span class="mtk9">rrent&nbsp;bar.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">latestEPS</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.earnings</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">earnings.actual</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">barmerge.gaps_on</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Update&nbsp;the&nbsp;"Value"&nbsp;and&nbsp;"Date"&nbsp;columns&nbsp;when&nbsp;new&nbsp;</span><span class="mtk9">values&nbsp;come&nbsp;in.</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk18">not</span><span class="mtk1">&nbsp;</span><span class="mtk16">na</span><span class="mtk13">(</span><span class="mtk33">latestDividend</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">table.cell</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">infoTable</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk16">math.round</span><span class="mtk13">(</span><span class="mtk33">latestDividend</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">))</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableSize</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">table.cell</span><span class="mtk13">(</span><span class="mtk33">infoTable</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format_time</span><span class="mtk13">(</span><span class="mtk11">time</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"yyyy-MM-dd"</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableSize</span><span class="mtk13">)</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk18">not</span><span class="mtk1">&nbsp;</span><span class="mtk16">na</span><span class="mtk13">(</span><span class="mtk33">latestSplitNum</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">table.cell</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">infoTable</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"{0}-for-{1}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">latestSplitNum</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">latestSplitDen</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableColor</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableSize</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">table.cell</span><span class="mtk13">(</span><span class="mtk33">infoTable</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format_time</span><span class="mtk13">(</span><span class="mtk11">time</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"yyyy-MM-dd"</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableSize</span><span class="mtk13">)</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk18">not</span><span class="mtk1">&nbsp;</span><span class="mtk16">na</span><span class="mtk13">(</span><span class="mtk33">latestEPS</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">table.cell</span><span class="mtk13">(</span><span class="mtk33">infoTable</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">latestEPS</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableSize</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">table.cell</span><span class="mtk13">(</span><span class="mtk33">infoTable</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format_time</span><span class="mtk13">(</span><span class="mtk11">time</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"yyyy-MM-dd"</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tableSize</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>We’ve included
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.gaps_on">barmerge.gaps_on</a>
in the <code dir="auto">request.*()</code> calls, so they only return values when new
data is available. Otherwise, they return
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a>.</li>
<li>The script assigns a
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_table">table</a>
ID to the <code dir="auto">infoTable</code> variable on the first chart bar. On
subsequent bars, it updates necessary cells with new information
whenever data is available.</li>
<li>If no information is available from any of the <code dir="auto">request.*()</code>
calls throughout the chart’s history (e.g., if the <code dir="auto">ticker</code> has
no dividend information), the script does not initialize the
corresponding cells since it’s unnecessary.</li>
</ul>
<h2 id="requestfinancial" class="md-heading"><a href="#requestfinancial"><span>​<code dir="auto">request.financial()</code>​</span><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></a></h2>
<p>Financial metrics provide investors with insights about a company’s
economic and financial health that are not tangible from solely
analyzing its stock prices. TradingView offers a wide variety of
financial metrics from <a href="https://www.factset.com/" rel="nofollow">FactSet</a> that traders
can access via the “Financials” tab in the “Indicators” menu of the
chart. Scripts can access available metrics for an instrument directly
via the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.financial">request.financial()</a>
function.</p>
<p>This is the function’s signature:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text" tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.financial(symbol, financial_id, period, gaps, ignore_invalid_symbol, currency) → series float</span></div></div></code></pre></figure></div>
<p>As with the first parameter in
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.dividends">request.dividends()</a>,
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.splits">request.splits()</a>,
and
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.earnings">request.earnings()</a>,
the <code dir="auto">symbol</code> parameter in
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.financial">request.financial()</a>
requires an <em>“Exchange:Symbol” pair</em>. To request financial information
for the chart’s ticker ID, use
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.tickerid">syminfo.tickerid</a>,
as
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.ticker">syminfo.ticker</a>
will not work.</p>
<p>The <code dir="auto">financial_id</code> parameter accepts a “string” value representing
the ID of the requested financial metric. TradingView has numerous
financial metrics to choose from. See the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#financial-ids">Financial IDs</a> section below for an overview of all accessible metrics and
their “string” identifiers.</p>
<p>The <code dir="auto">period</code> parameter specifies the fiscal period for which new
requested data comes in. It accepts one of the following “string” arguments:
<strong>“FQ” (quarterly), “FH” (semiannual), “FY” (annual), or “TTM”
(trailing twelve months)</strong>. Not all fiscal periods are available for all
metrics or instruments. To confirm which periods are available for
specific metrics, see the second column of the tables in the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#financial-ids">Financial IDs</a> section.</p>
<p>See this page’s
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#common-characteristics">Common characteristics</a> section for a detailed explanation of this function’s
<code dir="auto">gaps</code>, <code dir="auto">ignore_invalid_symbol</code>, and <code dir="auto">currency</code> parameters.</p>
<p>It’s important to note that the data retrieved from this function comes
in at a <em>fixed frequency</em>, independent of the precise date on which the
data is made available within a fiscal period. For a company’s
dividends, splits, and earnings per share (EPS) information, one can
request data reported on exact dates via
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.dividends">request.dividends()</a>,
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.splits">request.splits()</a>,
and
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.earnings">request.earnings()</a>.</p>
<p>This script uses
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.financial">request.financial()</a>
to retrieve information about the income and expenses of a stock’s
issuing company and visualize the profitability of its typical business
operations. It requests the “OPER_INCOME”, “TOTAL_REVENUE”, and
“TOTAL_OPER_EXPENSE”
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#financial-ids">financial IDs</a> for the
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.tickerid">syminfo.tickerid</a>
over the latest <code dir="auto">fiscalPeriod</code>, then
<a href="/pine-script-docs/visuals/plots/">plots</a> the results on the
chart:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-financial-1.B9cESm-h_ZhOVcV.webp" alt="image" width="1342" height="560" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="12n"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Requesting&nbsp;financial&nbsp;data&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">format</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">format.volume</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;size&nbsp;of&nbsp;the&nbsp;fiscal&nbsp;reporting&nbsp;period.&nbsp;Some&nbsp;opt</span><span class="mtk9">ions&nbsp;may&nbsp;not&nbsp;be&nbsp;available,&nbsp;depending&nbsp;on&nbsp;the&nbsp;instru</span><span class="mtk9">ment.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">fiscalPeriod</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.string</span><span class="mtk13">(</span><span class="mtk29">"FQ"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Period"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk29">"FQ"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"FH"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"FY"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"TTM"</span><span class="mtk13">])</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;operating&nbsp;income&nbsp;after&nbsp;expenses&nbsp;reported&nbsp;for&nbsp;</span><span class="mtk9">the&nbsp;stock's&nbsp;issuing&nbsp;company.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">operatingIncome</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.financial</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"OPER_INCOME"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">fiscalPeriod</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;total&nbsp;revenue&nbsp;reported&nbsp;for&nbsp;the&nbsp;stock's&nbsp;issuin</span><span class="mtk9">g&nbsp;company.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">totalRevenue</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.financial</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"TOTAL_REVENUE"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">fiscalPeriod</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;total&nbsp;operating&nbsp;expenses&nbsp;reported&nbsp;for&nbsp;the&nbsp;sto</span><span class="mtk9">ck's&nbsp;issuing&nbsp;company.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">totalExpenses</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.financial</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"TOTAL_OPER_EXPENSE"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">fiscalPeriod</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Is&nbsp;aqua&nbsp;when&nbsp;the&nbsp;`totalRevenue`&nbsp;exceeds&nbsp;the&nbsp;`tota</span><span class="mtk9">lExpenses`,&nbsp;fuchsia&nbsp;otherwise.</span></span><br><span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">incomeColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">operatingIncome</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.aqua</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">50</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.fuchsia</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">50</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Display&nbsp;the&nbsp;requested&nbsp;data.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">operatingIncome</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Operating&nbsp;income"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">incomeColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_area</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">totalRevenue</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Total&nbsp;revenue"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.green</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">totalExpenses</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Total&nbsp;operating&nbsp;expenses"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.red</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>Not all <code dir="auto">fiscalPeriod</code> options are available for every ticker
ID. For example, companies in the US typically publish
<em>quarterly</em> reports, whereas many European companies publish
<em>semiannual</em> reports. See <a href="https://www.tradingview.com/support/solutions/43000540147">this
page</a>
in our Help Center for more information.</li>
</ul>
<h3 id="calculating-financial-metrics" class="md-heading"><a href="#calculating-financial-metrics">Calculating financial <span class="fancy-wrap">metrics<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.financial">request.financial()</a>
function can provide scripts with numerous useful financial metrics that
don’t require additional calculations. However, some commonly used
financial estimates require combining an instrument’s current market
price with requested financial data. Such is the case for:</p>
<ul>
<li>Market Capitalization (market price * total shares outstanding)</li>
<li>Earnings Yield (12-month EPS / market price)</li>
<li>Price-to-Book Ratio (market price / BVPS)</li>
<li>Price-to-Earnings Ratio (market price / EPS)</li>
<li>Price-to-Sales Ratio (market cap / 12-month total revenue)</li>
</ul>
<p>The following script contains
<a href="/pine-script-docs/language/user-defined-functions/">user-defined functions</a> that calculate the above financial metrics for the
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.tickerid">syminfo.tickerid</a>.
We’ve created these functions so users can easily copy them into their
scripts. This example uses them within a
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a>
call to construct a <code dir="auto">tooltipText</code>, which it displays in tooltips on the
chart using <a href="/pine-script-docs/visuals/text-and-shapes/#labels">labels</a>. Hovering over any bar’s
<a href="https://www.tradingview.com/pine-script-reference/v6/#type_label">label</a>
will expose the tooltip containing the metrics calculated on that bar:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-financial-Calculating-financial-metrics-1.BXp-EVdL_Z2nJnG7.webp" alt="image" width="1342" height="592" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="ng"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Calculating&nbsp;financial&nbsp;metrics&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">max_labels_count</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">500</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Calculates&nbsp;the&nbsp;market&nbsp;capitalization&nbsp;(market&nbsp;cap)</span><span class="mtk9">&nbsp;for&nbsp;the&nbsp;chart's&nbsp;symbol.</span></span><br><span><span class="mtk15">marketCap</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;most&nbsp;recent&nbsp;number&nbsp;of&nbsp;outstanding&nbsp;shares&nbsp;repo</span><span class="mtk9">rted&nbsp;for&nbsp;the&nbsp;symbol.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">totalSharesOutstanding</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.financial</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"TOTAL_SHARES_OUTSTANDING"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"FQ"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Return&nbsp;the&nbsp;market&nbsp;cap&nbsp;value.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">totalSharesOutstanding</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Calculates&nbsp;the&nbsp;Earnings&nbsp;Yield&nbsp;for&nbsp;the&nbsp;chart's&nbsp;sym</span><span class="mtk9">bol.</span></span><br><span><span class="mtk15">earningsYield</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;most&nbsp;recent&nbsp;12-month&nbsp;earnings&nbsp;per&nbsp;share&nbsp;repor</span><span class="mtk9">ted&nbsp;for&nbsp;the&nbsp;symbol.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">eps</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.financial</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"EARNINGS_PER_SHARE"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"TTM"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//Return&nbsp;the&nbsp;Earnings&nbsp;Yield&nbsp;percentage.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk12">100.0</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">eps</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Calculates&nbsp;the&nbsp;Price-to-Book&nbsp;(P/B)&nbsp;ratio&nbsp;for&nbsp;the&nbsp;</span><span class="mtk9">chart's&nbsp;symbol.</span></span><br><span><span class="mtk15">priceBookRatio</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;most&nbsp;recent&nbsp;Book&nbsp;Value&nbsp;Per&nbsp;Share&nbsp;(BVPS)&nbsp;repor</span><span class="mtk9">ted&nbsp;for&nbsp;the&nbsp;symbol.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">bookValuePerShare</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.financial</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"BOOK_VALUE_PER_SHARE"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"FQ"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Return&nbsp;the&nbsp;P/B&nbsp;ratio.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk33">bookValuePerShare</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Calculates&nbsp;the&nbsp;Price-to-Earnings&nbsp;(P/E)&nbsp;ratio&nbsp;for&nbsp;</span><span class="mtk9">the&nbsp;chart's&nbsp;symbol.</span></span><br><span><span class="mtk15">priceEarningsRatio</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;most&nbsp;recent&nbsp;12-month&nbsp;earnings&nbsp;per&nbsp;share&nbsp;repor</span><span class="mtk9">ted&nbsp;for&nbsp;the&nbsp;symbol.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">eps</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.financial</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"EARNINGS_PER_SHARE"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"TTM"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Return&nbsp;the&nbsp;P/E&nbsp;ratio.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk33">eps</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Calculates&nbsp;the&nbsp;Price-to-Sales&nbsp;(P/S)&nbsp;ratio&nbsp;for&nbsp;the</span><span class="mtk9">&nbsp;chart's&nbsp;symbol.</span></span><br><span><span class="mtk15">priceSalesRatio</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;most&nbsp;recent&nbsp;number&nbsp;of&nbsp;outstanding&nbsp;shares&nbsp;repo</span><span class="mtk9">rted&nbsp;for&nbsp;the&nbsp;symbol.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">totalSharesOutstanding</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.financial</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"TOTAL_SHARES_OUTSTANDING"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"FQ"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;most&nbsp;recent&nbsp;12-month&nbsp;total&nbsp;revenue&nbsp;reported&nbsp;f</span><span class="mtk9">or&nbsp;the&nbsp;symbol.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">totalRevenue</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.financial</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"TOTAL_REVENUE"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"TTM"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Return&nbsp;the&nbsp;P/S&nbsp;ratio.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">totalSharesOutstanding</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk33">totalRevenue</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;text&nbsp;to&nbsp;display&nbsp;in&nbsp;label&nbsp;tooltips.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">tooltipText</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"Market&nbsp;Cap:&nbsp;{0}&nbsp;{1}\nEarnings&nbsp;Yield:&nbsp;{2}%\nP/B&nbsp;Ra</span><span class="mtk29">tio:&nbsp;{3}\nP/E&nbsp;Ratio:&nbsp;{4}\nP/S&nbsp;Ratio:&nbsp;{5}"</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">marketCap</span><span class="mtk13">()</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">format.volume</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">syminfo.currency</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">earningsYield</span><span class="mtk13">()</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">priceBookRatio</span><span class="mtk13">()</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">priceEarningsRatio</span><span class="mtk13">()</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">priceSalesRatio</span><span class="mtk13">()</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Displays&nbsp;a&nbsp;blank&nbsp;label&nbsp;with&nbsp;a&nbsp;tooltip&nbsp;containing&nbsp;</span><span class="mtk9">the&nbsp;`tooltipText`.</span></span><br><span><span class="mtk18 mtkb">label</span><span class="mtk1">&nbsp;</span><span class="mtk33">info</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">label.new</span><span class="mtk13">(</span><span class="mtk16">chart.point.now</span><span class="mtk13">(</span><span class="mtk11">high</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">tooltip</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">tooltipText</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>Since not all companies publish quarterly financial reports, one
may need to change the “FQ” in these functions to match the
minimum reporting period for a specific company, as the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.financial">request.financial()</a>
calls will return
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a>
when “FQ” data isn’t available.</li>
</ul>
<h3 id="financial-ids" class="md-heading"><a href="#financial-ids">Financial <span class="fancy-wrap">IDs<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>Below is an overview of all financial metrics one can request via
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.financial">request.financial()</a>,
along with the periods in which reports may be available. We’ve divided
this information into four tables corresponding to the categories
displayed in the “Financials” section of the “Indicators” menu:</p>
<ul>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#income-statements">Income statements</a></li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#balance-sheet">Balance sheet</a></li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#cash-flow">Cash flow</a></li>
<li><a href="/pine-script-docs/concepts/other-timeframes-and-data/#statistics">Statistics</a></li>
</ul>
<p>Each table has the following three columns:</p>
<ul>
<li>The first column contains descriptions of each metric with links to
Help Center pages for additional information.</li>
<li>The second column lists the possible <code dir="auto">period</code> arguments allowed for
the metric. Note that all available values may not be compatible
with specific ticker IDs, e.g., while “FQ” may be a possible
argument, it will not work if the issuing company does not publish
quarterly data.</li>
<li>The third column lists the “string” IDs for the <code dir="auto">financial_id</code>
argument in
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.financial">request.financial()</a>.</li>
</ul>
<aside aria-label="Tip" class="tv-informer not-content" style="--informer-header-color:#089981;--informer-back-color-light:#DAF2EE;--informer-back-color-dark:#082621"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16Zm3.87-12.15c.36.2.49.66.28 1.02l-4 7a.75.75 0 0 1-1.18.16l-3-3a.75.75 0 1 1 1.06-1.06l2.3 2.3 3.52-6.14a.75.75 0 0 1 1.02-.28Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Tip</span>The tables in these sections are quite lengthy, because there are many <code dir="auto">financial_id</code> arguments available. Use the <strong>“Click to show/hide”</strong> option above each table to toggle its visibility.</p></div></aside>
<h4 id="income-statements" class="md-heading"><a href="#income-statements">Income <span class="fancy-wrap">statements<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p>This table lists the available metrics that provide information about a
company’s income, costs, profits and losses.</p>
<details open=""><summary><a>Click to show/hide</a></summary>







































































































































































































<table><thead><tr><th>Financial</th><th><code dir="auto">period</code></th><th><code dir="auto">financial_id</code></th></tr></thead><tbody><tr><td><a href="https://www.tradingview.com/support/solutions/43000563497">After tax other income/expense</a></td><td>FQ, FH, FY, TTM</td><td>AFTER_TAX_OTHER_INCOME</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000670320">Average basic shares outstanding</a></td><td>FQ, FH, FY</td><td>BASIC_SHARES_OUTSTANDING</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563520">Basic earnings per share (Basic EPS)</a></td><td>FQ, FH, FY, TTM</td><td>EARNINGS_PER_SHARE_BASIC</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553618">Cost of goods sold</a></td><td>FQ, FH, FY, TTM</td><td>COST_OF_GOODS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563477">Deprecation and amortization</a></td><td>FQ, FH, FY, TTM</td><td>DEP_AMORT_EXP_INCOME_S</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553616">Diluted earnings per share (Diluted EPS)</a></td><td>FQ, FH, FY, TTM</td><td>EARNINGS_PER_SHARE_DILUTED</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563516">Diluted net income available to common stockholders</a></td><td>FQ, FH, FY, TTM</td><td>DILUTED_NET_INCOME</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000670322">Diluted shares outstanding</a></td><td>FQ, FH, FY</td><td>DILUTED_SHARES_OUTSTANDING</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563504">Dilution adjustment</a></td><td>FQ, FH, FY, TTM</td><td>DILUTION_ADJUSTMENT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563502">Discontinued operations</a></td><td>FQ, FH, FY, TTM</td><td>DISCONTINUED_OPERATIONS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000670329">EBIT</a></td><td>FQ, FH, FY, TTM</td><td>EBIT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553610">EBITDA</a></td><td>FQ, FH, FY, TTM</td><td>EBITDA</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563487">Equity in earnings</a></td><td>FQ, FH, FY, TTM</td><td>EQUITY_IN_EARNINGS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553611">Gross profit</a></td><td>FQ, FH, FY, TTM</td><td>GROSS_PROFIT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563468">Interest capitalized</a></td><td>FQ, FH, FY, TTM</td><td>INTEREST_CAPITALIZED</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563467">Interest expense on debt</a></td><td>FQ, FH, FY, TTM</td><td>INTEREST_EXPENSE_ON_DEBT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563466">Interest expense, net of interest capitalized</a></td><td>FQ, FH, FY, TTM</td><td>NON_OPER_INTEREST_EXP</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563479">Miscellaneous non-operating expense</a></td><td>FQ, FH, FY, TTM</td><td>OTHER_INCOME</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553617">Net income</a></td><td>FQ, FH, FY, TTM</td><td>NET_INCOME</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563500">Net income before discontinued operations</a></td><td>FQ, FH, FY, TTM</td><td>NET_INCOME_BEF_DISC_OPER</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563495">Non-controlling/minority interest</a></td><td>FQ, FH, FY, TTM</td><td>MINORITY_INTEREST_EXP</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563471">Non-operating income, excl. interest expenses</a></td><td>FQ, FH, FY, TTM</td><td>NON_OPER_INCOME</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563465">Non-operating income, total</a></td><td>FQ, FH, FY, TTM</td><td>TOTAL_NON_OPER_INCOME</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563473">Non-operating interest income</a></td><td>FQ, FH, FY, TTM</td><td>NON_OPER_INTEREST_INCOME</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563463">Operating expenses (excl. COGS)</a></td><td>FQ, FH, FY, TTM</td><td>OPERATING_EXPENSES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563464">Operating income</a></td><td>FQ, FH, FY, TTM</td><td>OPER_INCOME</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563478">Other cost of goods sold</a></td><td>FQ, FH, FY, TTM</td><td>COST_OF_GOODS_EXCL_DEP_AMORT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563483">Other operating expenses, total</a></td><td>FQ, FH, FY, TTM</td><td>OTHER_OPER_EXPENSE_TOTAL</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563506">Preferred dividends</a></td><td>FQ, FH, FY, TTM</td><td>PREFERRED_DIVIDENDS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563474">Pretax equity in earnings</a></td><td>FQ, FH, FY, TTM</td><td>PRETAX_EQUITY_IN_EARNINGS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563462">Pretax income</a></td><td>FQ, FH, FY, TTM</td><td>PRETAX_INCOME</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553612">Research &amp; development</a></td><td>FQ, FH, FY, TTM</td><td>RESEARCH_AND_DEV</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553614">Selling/general/admin expenses, other</a></td><td>FQ, FH, FY, TTM</td><td>SELL_GEN_ADMIN_EXP_OTHER</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553613">Selling/general/admin expenses, total</a></td><td>FQ, FH, FY, TTM</td><td>SELL_GEN_ADMIN_EXP_TOTAL</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563492">Taxes</a></td><td>FQ, FH, FY, TTM</td><td>INCOME_TAX</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553615">Total operating expenses</a></td><td>FQ, FH, FY, TTM</td><td>TOTAL_OPER_EXPENSE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553619">Total revenue</a></td><td>FQ, FH, FY, TTM</td><td>TOTAL_REVENUE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563476">Unusual income/expense</a></td><td>FQ, FH, FY, TTM</td><td>UNUSUAL_EXPENSE_INC</td></tr></tbody></table></details>
<h4 id="balance-sheet" class="md-heading"><a href="#balance-sheet">Balance <span class="fancy-wrap">sheet<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p>This table lists the metrics that provide information about a company’s
capital structure.</p>
<details open=""><summary><a>Click to show/hide</a></summary>
























































































































































































































































































































































<table><thead><tr><th>Financial</th><th><code dir="auto">period</code></th><th><code dir="auto">financial_id</code></th></tr></thead><tbody><tr><td><a href="https://www.tradingview.com/support/solutions/43000563619">Accounts payable</a></td><td>FQ, FH, FY</td><td>ACCOUNTS_PAYABLE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563740">Accounts receivable - trade, net</a></td><td>FQ, FH, FY</td><td>ACCOUNTS_RECEIVABLES_NET</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563628">Accrued payroll</a></td><td>FQ, FH, FY</td><td>ACCRUED_PAYROLL</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563673">Accumulated depreciation, total</a></td><td>FQ, FH, FY</td><td>ACCUM_DEPREC_TOTAL</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563874">Additional paid-in capital/Capital surplus</a></td><td>FQ, FH, FY</td><td>ADDITIONAL_PAID_IN_CAPITAL</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000670330">Book value per share</a></td><td>FQ, FH, FY</td><td>BOOK_VALUE_PER_SHARE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563522">Capital and operating lease obligations</a></td><td>FQ, FH, FY</td><td>CAPITAL_OPERATING_LEASE_OBLIGATIONS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563527">Capitalized lease obligations</a></td><td>FQ, FH, FY</td><td>CAPITAL_LEASE_OBLIGATIONS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563709">Cash &amp; equivalents</a></td><td>FQ, FH, FY</td><td>CASH_N_EQUIVALENTS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563702">Cash and short term investments</a></td><td>FQ, FH, FY</td><td>CASH_N_SHORT_TERM_INVEST</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563866">Common equity, total</a></td><td>FQ, FH, FY</td><td>COMMON_EQUITY_TOTAL</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563873">Common stock par/Carrying value</a></td><td>FQ, FH, FY</td><td>COMMON_STOCK_PAR</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563557">Current portion of LT debt and capital leases</a></td><td>FQ, FH, FY</td><td>CURRENT_PORT_DEBT_CAPITAL_LEASES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563631">Deferred income, current</a></td><td>FQ, FH, FY</td><td>DEFERRED_INCOME_CURRENT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563540">Deferred income, non-current</a></td><td>FQ, FH, FY</td><td>DEFERRED_INCOME_NON_CURRENT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563683">Deferred tax assets</a></td><td>FQ, FH, FY</td><td>DEFERRED_TAX_ASSESTS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563536">Deferred tax liabilities</a></td><td>FQ, FH, FY</td><td>DEFERRED_TAX_LIABILITIES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563624">Dividends payable</a></td><td>FY</td><td>DIVIDENDS_PAYABLE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563688">Goodwill, net</a></td><td>FQ, FH, FY</td><td>GOODWILL</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563667">Gross property/plant/equipment</a></td><td>FQ, FH, FY</td><td>PPE_TOTAL_GROSS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563621">Income tax payable</a></td><td>FQ, FH, FY</td><td>INCOME_TAX_PAYABLE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563749">Inventories - finished goods</a></td><td>FQ, FH, FY</td><td>INVENTORY_FINISHED_GOODS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563748">Inventories - progress payments &amp; other</a></td><td>FQ, FH, FY</td><td>INVENTORY_PROGRESS_PAYMENTS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563753">Inventories - raw materials</a></td><td>FQ, FH, FY</td><td>INVENTORY_RAW_MATERIALS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563746">Inventories - work in progress</a></td><td>FQ, FH, FY</td><td>INVENTORY_WORK_IN_PROGRESS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563645">Investments in unconsolidated subsidiaries</a></td><td>FQ, FH, FY</td><td>INVESTMENTS_IN_UNCONCSOLIDATE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553621">Long term debt</a></td><td>FQ, FH, FY</td><td>LONG_TERM_DEBT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563521">Long term debt excl. lease liabilities</a></td><td>FQ, FH, FY</td><td>LONG_TERM_DEBT_EXCL_CAPITAL_LEASE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563639">Long term investments</a></td><td>FQ, FH, FY</td><td>LONG_TERM_INVESTMENTS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563884">Minority interest</a></td><td>FQ, FH, FY</td><td>MINORITY_INTEREST</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000665310">Net debt</a></td><td>FQ, FH, FY</td><td>NET_DEBT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563686">Net intangible assets</a></td><td>FQ, FH, FY</td><td>INTANGIBLES_NET</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563657">Net property/plant/equipment</a></td><td>FQ, FH, FY</td><td>PPE_TOTAL_NET</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563641">Note receivable - long term</a></td><td>FQ, FH, FY</td><td>LONG_TERM_NOTE_RECEIVABLE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563600">Notes payable</a></td><td>FY</td><td>NOTES_PAYABLE_SHORT_TERM_DEBT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563532">Operating lease liabilities</a></td><td>FQ, FH, FY</td><td>OPERATING_LEASE_LIABILITIES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563877">Other common equity</a></td><td>FQ, FH, FY</td><td>OTHER_COMMON_EQUITY</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563761">Other current assets, total</a></td><td>FQ, FH, FY</td><td>OTHER_CURRENT_ASSETS_TOTAL</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563635">Other current liabilities</a></td><td>FQ, FH, FY</td><td>OTHER_CURRENT_LIABILITIES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563689">Other intangibles, net</a></td><td>FQ, FH, FY</td><td>OTHER_INTANGIBLES_NET</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563649">Other investments</a></td><td>FQ, FH, FY</td><td>OTHER_INVESTMENTS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563693">Other long term assets, total</a></td><td>FQ, FH, FY</td><td>LONG_TERM_OTHER_ASSETS_TOTAL</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563545">Other non-current liabilities, total</a></td><td>FQ, FH, FY</td><td>OTHER_LIABILITIES_TOTAL</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563741">Other receivables</a></td><td>FQ, FH, FY</td><td>OTHER_RECEIVABLES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563614">Other short term debt</a></td><td>FY</td><td>OTHER_SHORT_TERM_DEBT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563871">Paid in capital</a></td><td>FQ, FH, FY</td><td>PAID_IN_CAPITAL</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563879">Preferred stock, carrying value</a></td><td>FQ, FH, FY</td><td>PREFERRED_STOCK_CARRYING_VALUE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563757">Prepaid expenses</a></td><td>FQ, FH, FY</td><td>PREPAID_EXPENSES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563535">Provision for risks &amp; charge</a></td><td>FQ, FH, FY</td><td>PROVISION_F_RISKS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563867">Retained earnings</a></td><td>FQ, FH, FY</td><td>RETAINED_EARNINGS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000557442">Shareholders’ equity</a></td><td>FQ, FH, FY</td><td>SHRHLDRS_EQUITY</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563554">Short term debt</a></td><td>FQ, FH, FY</td><td>SHORT_TERM_DEBT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563563">Short term debt excl. current portion of LT debt</a></td><td>FQ, FH, FY</td><td>SHORT_TERM_DEBT_EXCL_CURRENT_PORT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563716">Short term investments</a></td><td>FQ, FH, FY</td><td>SHORT_TERM_INVEST</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597072">Tangible book value per share</a></td><td>FQ, FH, FY</td><td>BOOK_TANGIBLE_PER_SHARE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553623">Total assets</a></td><td>FQ, FH, FY</td><td>TOTAL_ASSETS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000557441">Total current assets</a></td><td>FQ, FH, FY</td><td>TOTAL_CURRENT_ASSETS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000557437">Total current liabilities</a></td><td>FQ, FH, FY</td><td>TOTAL_CURRENT_LIABILITIES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553622">Total debt</a></td><td>FQ, FH, FY</td><td>TOTAL_DEBT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553625">Total equity</a></td><td>FQ, FH, FY</td><td>TOTAL_EQUITY</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563745">Total inventory</a></td><td>FQ, FH, FY</td><td>TOTAL_INVENTORY</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553624">Total liabilities</a></td><td>FQ, FH, FY</td><td>TOTAL_LIABILITIES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553626">Total liabilities &amp; shareholders’ equities</a></td><td>FQ, FH, FY</td><td>TOTAL_LIABILITIES_SHRHLDRS_EQUITY</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000557440">Total non-current assets</a></td><td>FQ, FH, FY</td><td>TOTAL_NON_CURRENT_ASSETS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000557436">Total non-current liabilities</a></td><td>FQ, FH, FY</td><td>TOTAL_NON_CURRENT_LIABILITIES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563738">Total receivables, net</a></td><td>FQ, FH, FY</td><td>TOTAL_RECEIVABLES_NET</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563875">Treasury stock - common</a></td><td>FQ, FH, FY</td><td>TREASURY_STOCK_COMMON</td></tr></tbody></table></details>
<h4 id="cash-flow" class="md-heading"><a href="#cash-flow">Cash <span class="fancy-wrap">flow<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p>This table lists the available metrics that provide information about
how cash flows through a company.</p>
<details open=""><summary><a>Click to show/hide</a></summary>










































































































































































































































<table><thead><tr><th>Financial</th><th><code dir="auto">period</code></th><th><code dir="auto">financial_id</code></th></tr></thead><tbody><tr><td><a href="https://www.tradingview.com/support/solutions/43000564143">Amortization</a></td><td>FQ, FH, FY, TTM</td><td>AMORTIZATION</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564166">Capital expenditures</a></td><td>FQ, FH, FY, TTM</td><td>CAPITAL_EXPENDITURES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564167">Capital expenditures - fixed assets</a></td><td>FQ, FH, FY, TTM</td><td>CAPITAL_EXPENDITURES_FIXED_ASSETS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564168">Capital expenditures - other assets</a></td><td>FQ, FH, FY, TTM</td><td>CAPITAL_EXPENDITURES_OTHER_ASSETS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553629">Cash from financing activities</a></td><td>FQ, FH, FY, TTM</td><td>CASH_F_FINANCING_ACTIVITIES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553628">Cash from investing activities</a></td><td>FQ, FH, FY, TTM</td><td>CASH_F_INVESTING_ACTIVITIES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553627">Cash from operating activities</a></td><td>FQ, FH, FY, TTM</td><td>CASH_F_OPERATING_ACTIVITIES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564150">Change in accounts payable</a></td><td>FQ, FH, FY, TTM</td><td>CHANGE_IN_ACCOUNTS_PAYABLE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564148">Change in accounts receivable</a></td><td>FQ, FH, FY, TTM</td><td>CHANGE_IN_ACCOUNTS_RECEIVABLE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564151">Change in accrued expenses</a></td><td>FQ, FH, FY, TTM</td><td>CHANGE_IN_ACCRUED_EXPENSES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564153">Change in inventories</a></td><td>FQ, FH, FY, TTM</td><td>CHANGE_IN_INVENTORIES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564154">Change in other assets/liabilities</a></td><td>FQ, FH, FY, TTM</td><td>CHANGE_IN_OTHER_ASSETS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564149">Change in taxes payable</a></td><td>FQ, FH, FY, TTM</td><td>CHANGE_IN_TAXES_PAYABLE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564147">Changes in working capital</a></td><td>FQ, FH, FY, TTM</td><td>CHANGES_IN_WORKING_CAPITAL</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564185">Common dividends paid</a></td><td>FQ, FH, FY, TTM</td><td>COMMON_DIVIDENDS_CASH_FLOW</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564144">Deferred taxes (cash flow)</a></td><td>FQ, FH, FY, TTM</td><td>CASH_FLOW_DEFERRED_TAXES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563892">Depreciation &amp; amortization (cash flow)</a></td><td>FQ, FH, FY, TTM</td><td>CASH_FLOW_DEPRECATION_N_AMORTIZATION</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564142">Depreciation/depletion</a></td><td>FQ, FH, FY, TTM</td><td>DEPRECIATION_DEPLETION</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564181">Financing activities - other sources</a></td><td>FQ, FH, FY, TTM</td><td>OTHER_FINANCING_CASH_FLOW_SOURCES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564182">Financing activities - other uses</a></td><td>FQ, FH, FY, TTM</td><td>OTHER_FINANCING_CASH_FLOW_USES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000553630">Free cash flow</a></td><td>FQ, FH, FY, TTM</td><td>FREE_CASH_FLOW</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563886">Funds from operations</a></td><td>FQ, FH, FY, TTM</td><td>FUNDS_F_OPERATIONS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564164">Investing activities - other sources</a></td><td>FQ, FH, FY, TTM</td><td>OTHER_INVESTING_CASH_FLOW_SOURCES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564165">Investing activities - other uses</a></td><td>FQ, FH, FY</td><td>OTHER_INVESTING_CASH_FLOW_USES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564176">Issuance of long term debt</a></td><td>FQ, FH, FY, TTM</td><td>SUPPLYING_OF_LONG_TERM_DEBT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564172">Issuance/retirement of debt, net</a></td><td>FQ, FH, FY, TTM</td><td>ISSUANCE_OF_DEBT_NET</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564175">Issuance/retirement of long term debt</a></td><td>FQ, FH, FY, TTM</td><td>ISSUANCE_OF_LONG_TERM_DEBT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564178">Issuance/retirement of other debt</a></td><td>FQ, FH, FY, TTM</td><td>ISSUANCE_OF_OTHER_DEBT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564173">Issuance/retirement of short term debt</a></td><td>FQ, FH, FY, TTM</td><td>ISSUANCE_OF_SHORT_TERM_DEBT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564169">Issuance/retirement of stock, net</a></td><td>FQ, FH, FY, TTM</td><td>ISSUANCE_OF_STOCK_NET</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000563888">Net income (cash flow)</a></td><td>FQ, FH, FY, TTM</td><td>NET_INCOME_STARTING_LINE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564146">Non-cash items</a></td><td>FQ, FH, FY, TTM</td><td>NON_CASH_ITEMS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564179">Other financing cash flow items, total</a></td><td>FQ, FH, FY, TTM</td><td>OTHER_FINANCING_CASH_FLOW_ITEMS_TOTAL</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564163">Other investing cash flow items, total</a></td><td>FQ, FH, FY</td><td>OTHER_INVESTING_CASH_FLOW_ITEMS_TOTAL</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564186">Preferred dividends paid</a></td><td>FQ, FH, FY</td><td>PREFERRED_DIVIDENDS_CASH_FLOW</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564162">Purchase of investments</a></td><td>FQ, FH, FY, TTM</td><td>PURCHASE_OF_INVESTMENTS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564159">Purchase/acquisition of business</a></td><td>FQ, FH, FY, TTM</td><td>PURCHASE_OF_BUSINESS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564156">Purchase/sale of business, net</a></td><td>FQ, FH, FY</td><td>PURCHASE_SALE_BUSINESS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564160">Purchase/sale of investments, net</a></td><td>FQ, FH, FY, TTM</td><td>PURCHASE_SALE_INVESTMENTS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564177">Reduction of long term debt</a></td><td>FQ, FH, FY, TTM</td><td>REDUCTION_OF_LONG_TERM_DEBT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564171">Repurchase of common &amp; preferred stock</a></td><td>FQ, FH, FY, TTM</td><td>PURCHASE_OF_STOCK</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564170">Sale of common &amp; preferred stock</a></td><td>FQ, FH, FY, TTM</td><td>SALE_OF_STOCK</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564158">Sale of fixed assets &amp; businesses</a></td><td>FQ, FH, FY, TTM</td><td>SALES_OF_BUSINESS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564161">Sale/maturity of investments</a></td><td>FQ, FH, FY</td><td>SALES_OF_INVESTMENTS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000564183">Total cash dividends paid</a></td><td>FQ, FH, FY, TTM</td><td>TOTAL_CASH_DIVIDENDS_PAID</td></tr></tbody></table></details>
<h4 id="statistics" class="md-heading"><a href="#statistics"> <span class="fancy-wrap">Statistics<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p>This table contains a variety of statistical metrics, including commonly
used financial ratios.</p>
<details open=""><summary><a>Click to show/hide</a></summary>

















































































































































































































































































































































































<table><thead><tr><th>Financial</th><th><code dir="auto">period</code></th><th><code dir="auto">financial_id</code></th></tr></thead><tbody><tr><td><a href="https://www.tradingview.com/support/solutions/43000597073">Accruals</a></td><td>FQ, FH, FY</td><td>ACCRUALS_RATIO</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597092">Altman Z-score</a></td><td>FQ, FH, FY</td><td>ALTMAN_Z_SCORE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597022">Asset turnover</a></td><td>FQ, FH, FY</td><td>ASSET_TURNOVER</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597835">Beneish M-score</a></td><td>FQ, FH, FY</td><td>BENEISH_M_SCORE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597088">Buyback yield %</a></td><td>FQ, FH, FY</td><td>BUYBACK_YIELD</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597026">COGS to revenue ratio</a></td><td>FQ, FH, FY</td><td>COGS_TO_REVENUE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597089">Cash conversion cycle</a></td><td>FQ, FY</td><td>CASH_CONVERSION_CYCLE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597023">Cash to debt ratio</a></td><td>FQ, FH, FY</td><td>CASH_TO_DEBT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597051">Current ratio</a></td><td>FQ, FH, FY</td><td>CURRENT_RATIO</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597028">Days inventory</a></td><td>FQ, FY</td><td>DAYS_INVENT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597029">Days payable</a></td><td>FQ, FY</td><td>DAYS_PAY</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597030">Days sales outstanding</a></td><td>FQ, FY</td><td>DAY_SALES_OUT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597032">Debt to EBITDA ratio</a></td><td>FQ, FH, FY</td><td>DEBT_TO_EBITDA</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597031">Debt to assets ratio</a></td><td>FQ, FH, FY</td><td>DEBT_TO_ASSET</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597078">Debt to equity ratio</a></td><td>FQ, FH, FY</td><td>DEBT_TO_EQUITY</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597033">Debt to revenue ratio</a></td><td>FQ, FH, FY</td><td>DEBT_TO_REVENUE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597738">Dividend payout ratio %</a></td><td>FQ, FH, FY, TTM</td><td>DIVIDEND_PAYOUT_RATIO</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597817">Dividend yield %</a></td><td>FQ, FH, FY</td><td>DIVIDENDS_YIELD</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000670334">Dividends per share - common stock primary issue</a></td><td>FQ, FH, FY, TTM</td><td>DPS_COMMON_STOCK_PRIM_ISSUE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597075">EBITDA margin %</a></td><td>FQ, FH, FY, TTM</td><td>EBITDA_MARGIN</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597069">EPS basic one year growth</a></td><td>FQ, FH, FY, TTM</td><td>EARNINGS_PER_SHARE_BASIC_ONE_YEAR_GROWTH</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597071">EPS diluted one year growth</a></td><td>FQ, FH, FY</td><td>EARNINGS_PER_SHARE_DILUTED_ONE_YEAR_GROWTH</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597066">EPS estimates</a></td><td>FQ, FH, FY</td><td>EARNINGS_ESTIMATE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597034">Effective interest rate on debt %</a></td><td>FQ, FH, FY</td><td>EFFECTIVE_INTEREST_RATE_ON_DEBT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597077">Enterprise value</a></td><td>FQ, FH, FY</td><td>ENTERPRISE_VALUE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597063">Enterprise value to EBIT ratio</a></td><td>FQ, FH, FY</td><td>EV_EBIT</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597064">Enterprise value to EBITDA ratio</a></td><td>FQ, FH, FY</td><td>ENTERPRISE_VALUE_EBITDA</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597065">Enterprise value to revenue ratio</a></td><td>FQ, FH, FY</td><td>EV_REVENUE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597035">Equity to assets ratio</a></td><td>FQ, FH, FY</td><td>EQUITY_TO_ASSET</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000670341">Float shares outstanding</a></td><td>FY</td><td>FLOAT_SHARES_OUTSTANDING</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597813">Free cash flow margin %</a></td><td>FQ, FH, FY</td><td>FREE_CASH_FLOW_MARGIN</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597847">Fulmer H factor</a></td><td>FQ, FY</td><td>FULMER_H_FACTOR</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597036">Goodwill to assets ratio</a></td><td>FQ, FH, FY</td><td>GOODWILL_TO_ASSET</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597084">Graham’s number</a></td><td>FQ, FY</td><td>GRAHAM_NUMBERS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597811">Gross margin %</a></td><td>FQ, FH, FY, TTM</td><td>GROSS_MARGIN</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597087">Gross profit to assets ratio</a></td><td>FQ, FY</td><td>GROSS_PROFIT_TO_ASSET</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597037">Interest coverage</a></td><td>FQ, FH, FY</td><td>INTERST_COVER</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597047">Inventory to revenue ratio</a></td><td>FQ, FH, FY</td><td>INVENT_TO_REVENUE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597046">Inventory turnover</a></td><td>FQ, FH, FY</td><td>INVENT_TURNOVER</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597844">KZ index</a></td><td>FY</td><td>KZ_INDEX</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597048">Long term debt to total assets ratio</a></td><td>FQ, FH, FY</td><td>LONG_TERM_DEBT_TO_ASSETS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597085">Net current asset value per share</a></td><td>FQ, FY</td><td>NCAVPS_RATIO</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597082">Net income per employee</a></td><td>FY</td><td>NET_INCOME_PER_EMPLOYEE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597074">Net margin %</a></td><td>FQ, FH, FY, TTM</td><td>NET_MARGIN</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597080">Number of employees</a></td><td>FY</td><td>NUMBER_OF_EMPLOYEES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000684072">Operating earnings yield %</a></td><td>FQ, FH, FY</td><td>OPERATING_EARNINGS_YIELD</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597076">Operating margin %</a></td><td>FQ, FH, FY</td><td>OPERATING_MARGIN</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597090">PEG ratio</a></td><td>FQ, FY</td><td>PEG_RATIO</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597734">Piotroski F-score</a></td><td>FQ, FH, FY</td><td>PIOTROSKI_F_SCORE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597831">Price earnings ratio forward</a></td><td>FQ, FY</td><td>PRICE_EARNINGS_FORWARD</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597832">Price sales ratio forward</a></td><td>FQ, FY</td><td>PRICE_SALES_FORWARD</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597086">Quality ratio</a></td><td>FQ, FH, FY</td><td>QUALITY_RATIO</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597050">Quick ratio</a></td><td>FQ, FH, FY</td><td>QUICK_RATIO</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597739">Research &amp; development to revenue ratio</a></td><td>FQ, FH, FY</td><td>RESEARCH_AND_DEVELOP_TO_REVENUE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597054">Return on assets %</a></td><td>FQ, FH, FY</td><td>RETURN_ON_ASSETS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000656797">Return on common equity %</a></td><td>FQ, FH, FY</td><td>RETURN_ON_COMMON_EQUITY</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597021">Return on equity %</a></td><td>FQ, FH, FY</td><td>RETURN_ON_EQUITY</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597055">Return on equity adjusted to book value %</a></td><td>FQ, FH, FY</td><td>RETURN_ON_EQUITY_ADJUST_TO_BOOK</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597056">Return on invested capital %</a></td><td>FQ, FH, FY</td><td>RETURN_ON_INVESTED_CAPITAL</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597052">Return on tangible assets %</a></td><td>FQ, FH, FY</td><td>RETURN_ON_TANG_ASSETS</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597053">Return on tangible equity %</a></td><td>FQ, FH, FY</td><td>RETURN_ON_TANG_EQUITY</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597067">Revenue estimates</a></td><td>FQ, FH, FY</td><td>SALES_ESTIMATES</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597068">Revenue one year growth</a></td><td>FQ, FH, FY, TTM</td><td>REVENUE_ONE_YEAR_GROWTH</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597081">Revenue per employee</a></td><td>FY</td><td>REVENUE_PER_EMPLOYEE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597057">Shares buyback ratio %</a></td><td>FQ, FH, FY</td><td>SHARE_BUYBACK_RATIO</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597058">Sloan ratio %</a></td><td>FQ, FH, FY</td><td>SLOAN_RATIO</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597848">Springate score</a></td><td>FQ, FY</td><td>SPRINGATE_SCORE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597736">Sustainable growth rate</a></td><td>FQ, FY</td><td>SUSTAINABLE_GROWTH_RATE</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597079">Tangible common equity ratio</a></td><td>FQ, FH, FY</td><td>TANGIBLE_COMMON_EQUITY_RATIO</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597834">Tobin’s Q (approximate)</a></td><td>FQ, FH, FY</td><td>TOBIN_Q_RATIO</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000670331">Total common shares outstanding</a></td><td>FQ, FH, FY</td><td>TOTAL_SHARES_OUTSTANDING</td></tr><tr><td><a href="https://www.tradingview.com/support/solutions/43000597850">Zmijewski score</a></td><td>FQ, FY</td><td>ZMIJEWSKI_SCORE</td></tr></tbody></table></details>
<h2 id="requesteconomic" class="md-heading"><a href="#requesteconomic"><span>​<code dir="auto">request.economic()</code>​</span><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></a></h2>
<p>The
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.economic">request.economic()</a>
function provides scripts with the ability to retrieve economic data for
a specified country or region, including information about the state of
the economy (GDP, inflation rate, etc.) or of a particular industry
(steel production, ICU beds, etc.).</p>
<p>Below is the signature for this function:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text" tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.economic(country_code, field, gaps, ignore_invalid_symbol) → series float</span></div></div></code></pre></figure></div>
<p>The <code dir="auto">country_code</code> parameter accepts a “string” value representing
the identifier of the country or region to request economic data for
(e.g., “US”, “EU”, etc.). See the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#countryregion-codes">Country/region codes</a> section for a complete list of codes this function supports.
Note that the economic metrics available depend on the country or region
specified in the function call.</p>
<p>The <code dir="auto">field</code> parameter accepts a “string” specifying the metric that the function requests.
The
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#field-codes">Field codes</a> section covers all accessible metrics and the
countries/regions they’re available for.</p>
<p>For a detailed explanation on the last two parameters of this function,
see the
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#common-characteristics">Common characteristics</a> section at the top of this page.</p>
<p>This simple example requests the growth rate of the Gross Domestic
Product (“GDPQQ”) for the United States (“US”) using
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.economic">request.economic()</a>,
then <a href="/pine-script-docs/visuals/plots/">plots</a> its value on the
chart with a <a href="concepts/colors/#colorfrom_gradient">gradient color</a>:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-economic-1.B5XiS4A4_2mUcAV.webp" alt="image" width="1342" height="588" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="2mk"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Requesting&nbsp;economic&nbsp;data&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;GDP&nbsp;growth&nbsp;rate&nbsp;for&nbsp;the&nbsp;US&nbsp;economy.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">gdpqq</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.economic</span><span class="mtk13">(</span><span class="mtk29">"US"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"GDPQQ"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;all-time&nbsp;maximum&nbsp;growth&nbsp;rate.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">maxRate</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.max</span><span class="mtk13">(</span><span class="mtk33">gdpqq</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;all-time&nbsp;minimum&nbsp;growth&nbsp;rate.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">minRate</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.min</span><span class="mtk13">(</span><span class="mtk33">gdpqq</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;color&nbsp;of&nbsp;the&nbsp;`gdpqq`&nbsp;plot.</span></span><br><span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">rateColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk18">switch</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">gdpqq</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.from_gradient</span><span class="mtk13">(</span><span class="mtk33">gdpqq</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">maxRate</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.blue</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">color.from_gradient</span><span class="mtk13">(</span><span class="mtk33">gdpqq</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">minRate</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.red</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;results.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">gdpqq</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"US&nbsp;GDP&nbsp;Growth&nbsp;Rate"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">rateColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_area</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>This example does not include a <code dir="auto">gaps</code> argument in the
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.economic">request.economic()</a>
call, so the function uses the default
<a href="https://www.tradingview.com/pine-script-reference/v6/#var_barmerge.gaps_off">barmerge.gaps_off</a>.
In other words, it returns the last retrieved value when new
data isn’t yet available.</li>
</ul>
<aside aria-label="Tip" class="tv-informer not-content" style="--informer-header-color:#089981;--informer-back-color-light:#DAF2EE;--informer-back-color-dark:#082621"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16Zm3.87-12.15c.36.2.49.66.28 1.02l-4 7a.75.75 0 0 1-1.18.16l-3-3a.75.75 0 1 1 1.06-1.06l2.3 2.3 3.52-6.14a.75.75 0 0 1 1.02-.28Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Tip</span>The tables in the sections below are rather large, because there are numerous <code dir="auto">country_code</code> and <code dir="auto">field</code> arguments available. Use the <strong>“Click to show/hide”</strong> option above each table to toggle its visibility.</p></div></aside>
<h3 id="countryregion-codes" class="md-heading"><a href="#countryregion-codes">Country/region <span class="fancy-wrap">codes<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The table in this section lists all country/region codes available for
use with
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.economic">request.economic()</a>.
The first column of the table contains the “string” values that
represent the country or region code, and the second column contains the
corresponding country/region names.</p>
<p>It’s important to note that the value used as the <code dir="auto">country_code</code>
argument determines which
<a href="/pine-script-docs/concepts/other-timeframes-and-data/#field-codes">field codes</a> are accessible to the function.</p>
<details open=""><summary><a>Click to show/hide</a></summary>












































































































































































































































































































































































































































































































































































































































































































































































































































<table><thead><tr><th><code dir="auto">country_code</code></th><th>Country/region name</th></tr></thead><tbody><tr><td>AF</td><td>Afghanistan</td></tr><tr><td>AL</td><td>Albania</td></tr><tr><td>DZ</td><td>Algeria</td></tr><tr><td>AD</td><td>Andorra</td></tr><tr><td>AO</td><td>Angola</td></tr><tr><td>AG</td><td>Antigua and Barbuda</td></tr><tr><td>AR</td><td>Argentina</td></tr><tr><td>AM</td><td>Armenia</td></tr><tr><td>AW</td><td>Aruba</td></tr><tr><td>AU</td><td>Australia</td></tr><tr><td>AT</td><td>Austria</td></tr><tr><td>AZ</td><td>Azerbaijan</td></tr><tr><td>BS</td><td>Bahamas</td></tr><tr><td>BH</td><td>Bahrain</td></tr><tr><td>BD</td><td>Bangladesh</td></tr><tr><td>BB</td><td>Barbados</td></tr><tr><td>BY</td><td>Belarus</td></tr><tr><td>BE</td><td>Belgium</td></tr><tr><td>BZ</td><td>Belize</td></tr><tr><td>BJ</td><td>Benin</td></tr><tr><td>BM</td><td>Bermuda</td></tr><tr><td>BT</td><td>Bhutan</td></tr><tr><td>BO</td><td>Bolivia</td></tr><tr><td>BA</td><td>Bosnia and Herzegovina</td></tr><tr><td>BW</td><td>Botswana</td></tr><tr><td>BR</td><td>Brazil</td></tr><tr><td>BN</td><td>Brunei</td></tr><tr><td>BG</td><td>Bulgaria</td></tr><tr><td>BF</td><td>Burkina Faso</td></tr><tr><td>BI</td><td>Burundi</td></tr><tr><td>KH</td><td>Cambodia</td></tr><tr><td>CM</td><td>Cameroon</td></tr><tr><td>CA</td><td>Canada</td></tr><tr><td>CV</td><td>Cape Verde</td></tr><tr><td>KY</td><td>Cayman Islands</td></tr><tr><td>CF</td><td>Central African Republic</td></tr><tr><td>TD</td><td>Chad</td></tr><tr><td>CL</td><td>Chile</td></tr><tr><td>CN</td><td>China</td></tr><tr><td>CO</td><td>Colombia</td></tr><tr><td>KM</td><td>Comoros</td></tr><tr><td>CG</td><td>Congo</td></tr><tr><td>CR</td><td>Costa Rica</td></tr><tr><td>HR</td><td>Croatia</td></tr><tr><td>CU</td><td>Cuba</td></tr><tr><td>CY</td><td>Cyprus</td></tr><tr><td>CZ</td><td>Czech Republic</td></tr><tr><td>DK</td><td>Denmark</td></tr><tr><td>DJ</td><td>Djibouti</td></tr><tr><td>DM</td><td>Dominica</td></tr><tr><td>DO</td><td>Dominican Republic</td></tr><tr><td>TL</td><td>East Timor</td></tr><tr><td>EC</td><td>Ecuador</td></tr><tr><td>EG</td><td>Egypt</td></tr><tr><td>SV</td><td>El Salvador</td></tr><tr><td>GQ</td><td>Equatorial Guinea</td></tr><tr><td>ER</td><td>Eritrea</td></tr><tr><td>EE</td><td>Estonia</td></tr><tr><td>ET</td><td>Ethiopia</td></tr><tr><td>EU</td><td>Euro area</td></tr><tr><td>FO</td><td>Faroe Islands</td></tr><tr><td>FJ</td><td>Fiji</td></tr><tr><td>FI</td><td>Finland</td></tr><tr><td>FR</td><td>France</td></tr><tr><td>GA</td><td>Gabon</td></tr><tr><td>GM</td><td>Gambia</td></tr><tr><td>GE</td><td>Georgia</td></tr><tr><td>DE</td><td>Germany</td></tr><tr><td>GH</td><td>Ghana</td></tr><tr><td>GR</td><td>Greece</td></tr><tr><td>GL</td><td>Greenland</td></tr><tr><td>GD</td><td>Grenada</td></tr><tr><td>GT</td><td>Guatemala</td></tr><tr><td>GN</td><td>Guinea</td></tr><tr><td>GW</td><td>Guinea Bissau</td></tr><tr><td>GY</td><td>Guyana</td></tr><tr><td>HT</td><td>Haiti</td></tr><tr><td>HN</td><td>Honduras</td></tr><tr><td>HK</td><td>Hong Kong</td></tr><tr><td>HU</td><td>Hungary</td></tr><tr><td>IS</td><td>Iceland</td></tr><tr><td>IN</td><td>India</td></tr><tr><td>ID</td><td>Indonesia</td></tr><tr><td>IR</td><td>Iran</td></tr><tr><td>IQ</td><td>Iraq</td></tr><tr><td>IE</td><td>Ireland</td></tr><tr><td>IM</td><td>Isle of Man</td></tr><tr><td>IL</td><td>Israel</td></tr><tr><td>IT</td><td>Italy</td></tr><tr><td>CI</td><td>Ivory Coast</td></tr><tr><td>JM</td><td>Jamaica</td></tr><tr><td>JP</td><td>Japan</td></tr><tr><td>JO</td><td>Jordan</td></tr><tr><td>KZ</td><td>Kazakhstan</td></tr><tr><td>KE</td><td>Kenya</td></tr><tr><td>KI</td><td>Kiribati</td></tr><tr><td>XK</td><td>Kosovo</td></tr><tr><td>KW</td><td>Kuwait</td></tr><tr><td>KG</td><td>Kyrgyzstan</td></tr><tr><td>LA</td><td>Laos</td></tr><tr><td>LV</td><td>Latvia</td></tr><tr><td>LB</td><td>Lebanon</td></tr><tr><td>LS</td><td>Lesotho</td></tr><tr><td>LR</td><td>Liberia</td></tr><tr><td>LY</td><td>Libya</td></tr><tr><td>LI</td><td>Liechtenstein</td></tr><tr><td>LT</td><td>Lithuania</td></tr><tr><td>LU</td><td>Luxembourg</td></tr><tr><td>MO</td><td>Macau</td></tr><tr><td>MK</td><td>Macedonia</td></tr><tr><td>MG</td><td>Madagascar</td></tr><tr><td>MW</td><td>Malawi</td></tr><tr><td>MY</td><td>Malaysia</td></tr><tr><td>MV</td><td>Maldives</td></tr><tr><td>ML</td><td>Mali</td></tr><tr><td>MT</td><td>Malta</td></tr><tr><td>MR</td><td>Mauritania</td></tr><tr><td>MU</td><td>Mauritius</td></tr><tr><td>MX</td><td>Mexico</td></tr><tr><td>MD</td><td>Moldova</td></tr><tr><td>MC</td><td>Monaco</td></tr><tr><td>MN</td><td>Mongolia</td></tr><tr><td>ME</td><td>Montenegro</td></tr><tr><td>MA</td><td>Morocco</td></tr><tr><td>MZ</td><td>Mozambique</td></tr><tr><td>MM</td><td>Myanmar</td></tr><tr><td>NA</td><td>Namibia</td></tr><tr><td>NP</td><td>Nepal</td></tr><tr><td>NL</td><td>Netherlands</td></tr><tr><td>NC</td><td>New Caledonia</td></tr><tr><td>NZ</td><td>New Zealand</td></tr><tr><td>NI</td><td>Nicaragua</td></tr><tr><td>NE</td><td>Niger</td></tr><tr><td>NG</td><td>Nigeria</td></tr><tr><td>KP</td><td>North Korea</td></tr><tr><td>NO</td><td>Norway</td></tr><tr><td>OM</td><td>Oman</td></tr><tr><td>PK</td><td>Pakistan</td></tr><tr><td>PS</td><td>Palestine</td></tr><tr><td>PA</td><td>Panama</td></tr><tr><td>PG</td><td>Papua New Guinea</td></tr><tr><td>PY</td><td>Paraguay</td></tr><tr><td>PE</td><td>Peru</td></tr><tr><td>PH</td><td>Philippines</td></tr><tr><td>PL</td><td>Poland</td></tr><tr><td>PT</td><td>Portugal</td></tr><tr><td>PR</td><td>Puerto Rico</td></tr><tr><td>QA</td><td>Qatar</td></tr><tr><td>CD</td><td>Republic of the Congo</td></tr><tr><td>RO</td><td>Romania</td></tr><tr><td>RU</td><td>Russia</td></tr><tr><td>RW</td><td>Rwanda</td></tr><tr><td>WS</td><td>Samoa</td></tr><tr><td>SM</td><td>San Marino</td></tr><tr><td>ST</td><td>Sao Tome and Principe</td></tr><tr><td>SA</td><td>Saudi Arabia</td></tr><tr><td>SN</td><td>Senegal</td></tr><tr><td>RS</td><td>Serbia</td></tr><tr><td>SC</td><td>Seychelles</td></tr><tr><td>SL</td><td>Sierra Leone</td></tr><tr><td>SG</td><td>Singapore</td></tr><tr><td>SK</td><td>Slovakia</td></tr><tr><td>SI</td><td>Slovenia</td></tr><tr><td>SB</td><td>Solomon Islands</td></tr><tr><td>SO</td><td>Somalia</td></tr><tr><td>ZA</td><td>South Africa</td></tr><tr><td>KR</td><td>South Korea</td></tr><tr><td>SS</td><td>South Sudan</td></tr><tr><td>ES</td><td>Spain</td></tr><tr><td>LK</td><td>Sri Lanka</td></tr><tr><td>LC</td><td>St Lucia</td></tr><tr><td>VC</td><td>St Vincent and the Grenadines</td></tr><tr><td>SD</td><td>Sudan</td></tr><tr><td>SR</td><td>Suriname</td></tr><tr><td>SZ</td><td>Swaziland</td></tr><tr><td>SE</td><td>Sweden</td></tr><tr><td>CH</td><td>Switzerland</td></tr><tr><td>SY</td><td>Syria</td></tr><tr><td>TW</td><td>Taiwan</td></tr><tr><td>TJ</td><td>Tajikistan</td></tr><tr><td>TZ</td><td>Tanzania</td></tr><tr><td>TH</td><td>Thailand</td></tr><tr><td>TG</td><td>Togo</td></tr><tr><td>TO</td><td>Tonga</td></tr><tr><td>TT</td><td>Trinidad and Tobago</td></tr><tr><td>TN</td><td>Tunisia</td></tr><tr><td>TR</td><td>Turkey</td></tr><tr><td>TM</td><td>Turkmenistan</td></tr><tr><td>UG</td><td>Uganda</td></tr><tr><td>UA</td><td>Ukraine</td></tr><tr><td>AE</td><td>United Arab Emirates</td></tr><tr><td>GB</td><td>United Kingdom</td></tr><tr><td>US</td><td>United States</td></tr><tr><td>UY</td><td>Uruguay</td></tr><tr><td>UZ</td><td>Uzbekistan</td></tr><tr><td>VU</td><td>Vanuatu</td></tr><tr><td>VE</td><td>Venezuela</td></tr><tr><td>VN</td><td>Vietnam</td></tr><tr><td>YE</td><td>Yemen</td></tr><tr><td>ZM</td><td>Zambia</td></tr><tr><td>ZW</td><td>Zimbabwe</td></tr></tbody></table></details>
<h3 id="field-codes" class="md-heading"><a href="#field-codes">Field <span class="fancy-wrap">codes<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The table in this section lists the field codes available for use with
<a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.economic">request.economic()</a>.
The first column contains the “string” values used as the <code dir="auto">field</code>
argument, and the second column contains names of each metric and links
to our Help Center with additional information, including the
countries/regions they’re available for.</p>
<details open=""><summary><a>Click to show/hide</a></summary>
































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































<table><thead><tr><th><code dir="auto">field</code></th><th>Metric</th></tr></thead><tbody><tr><td>AA</td><td><a href="https://www.tradingview.com/support/solutions/43000650926">Asylum Applications</a></td></tr><tr><td>ACR</td><td><a href="https://www.tradingview.com/support/solutions/43000650920">API Crude Runs</a></td></tr><tr><td>AE</td><td><a href="https://www.tradingview.com/support/solutions/43000650927">Auto Exports</a></td></tr><tr><td>AHE</td><td><a href="https://www.tradingview.com/support/solutions/43000650928">Average Hourly Earnings</a></td></tr><tr><td>AHO</td><td><a href="https://www.tradingview.com/support/solutions/43000650924">API Heating Oil</a></td></tr><tr><td>AWH</td><td><a href="https://www.tradingview.com/support/solutions/43000650929">Average Weekly Hours</a></td></tr><tr><td>BBS</td><td><a href="https://www.tradingview.com/support/solutions/43000650932">Banks Balance Sheet</a></td></tr><tr><td>BCLI</td><td><a href="https://www.tradingview.com/support/solutions/43000650935">Business Climate Indicator</a></td></tr><tr><td>BCOI</td><td><a href="https://www.tradingview.com/support/solutions/43000650936">Business Confidence Index</a></td></tr><tr><td>BI</td><td><a href="https://www.tradingview.com/support/solutions/43000650937">Business Inventories</a></td></tr><tr><td>BLR</td><td><a href="https://www.tradingview.com/support/solutions/43000650933">Bank Lending Rate</a></td></tr><tr><td>BOI</td><td><a href="https://www.tradingview.com/support/solutions/43000651133">NFIB Business Optimism Index</a></td></tr><tr><td>BOT</td><td><a href="https://www.tradingview.com/support/solutions/43000650930">Balance Of Trade</a></td></tr><tr><td>BP</td><td><a href="https://www.tradingview.com/support/solutions/43000650934">Building Permits</a></td></tr><tr><td>BR</td><td><a href="https://www.tradingview.com/support/solutions/43000650931">Bankruptcies</a></td></tr><tr><td>CA</td><td><a href="https://www.tradingview.com/support/solutions/43000650988">Current Account</a></td></tr><tr><td>CAG</td><td><a href="https://www.tradingview.com/support/solutions/43000650987">Current Account To GDP</a></td></tr><tr><td>CAP</td><td><a href="https://www.tradingview.com/support/solutions/43000650945">Car Production</a></td></tr><tr><td>CAR</td><td><a href="https://www.tradingview.com/support/solutions/43000650946">Car Registrations</a></td></tr><tr><td>CBBS</td><td><a href="https://www.tradingview.com/support/solutions/43000650952">Central Bank Balance Sheet</a></td></tr><tr><td>CCC</td><td><a href="https://www.tradingview.com/support/solutions/43000650959">Claimant Count Change</a></td></tr><tr><td>CCI</td><td><a href="https://www.tradingview.com/support/solutions/43000650966">Consumer Confidence Index</a></td></tr><tr><td>CCOS</td><td><a href="https://www.tradingview.com/support/solutions/43000650989">Cushing Crude Oil Stocks</a></td></tr><tr><td>CCP</td><td><a href="https://www.tradingview.com/support/solutions/43000650974">Core Consumer Prices</a></td></tr><tr><td>CCPI</td><td><a href="https://www.tradingview.com/support/solutions/43000650973">Core CPI</a></td></tr><tr><td>CCPT</td><td><a href="https://www.tradingview.com/support/solutions/43000650967">Consumer Confidence Price Trends</a></td></tr><tr><td>CCR</td><td><a href="https://www.tradingview.com/support/solutions/43000650968">Consumer Credit</a></td></tr><tr><td>CCS</td><td><a href="https://www.tradingview.com/support/solutions/43000650982">Credit Card Spending</a></td></tr><tr><td>CEP</td><td><a href="https://www.tradingview.com/support/solutions/43000650951">Cement Production</a></td></tr><tr><td>CF</td><td><a href="https://www.tradingview.com/support/solutions/43000650944">Capital Flows</a></td></tr><tr><td>CFNAI</td><td><a href="https://www.tradingview.com/support/solutions/43000650957">Chicago Fed National Activity Index</a></td></tr><tr><td>CI</td><td><a href="https://www.tradingview.com/support/solutions/43000650918">API Crude Imports</a></td></tr><tr><td>CIND</td><td><a href="https://www.tradingview.com/support/solutions/43000650960">Coincident Index</a></td></tr><tr><td>CIR</td><td><a href="https://www.tradingview.com/support/solutions/43000650975">Core Inflation Rate, YoY</a></td></tr><tr><td>CJC</td><td><a href="https://www.tradingview.com/support/solutions/43000650971">Continuing Jobless Claims</a></td></tr><tr><td>CN</td><td><a href="https://www.tradingview.com/support/solutions/43000650921">API Cushing Number</a></td></tr><tr><td>COI</td><td><a href="https://www.tradingview.com/support/solutions/43000650983">Crude Oil Imports</a></td></tr><tr><td>COIR</td><td><a href="https://www.tradingview.com/support/solutions/43000679670">Crude Oil Imports from Russia</a></td></tr><tr><td>CONSTS</td><td><a href="https://www.tradingview.com/support/solutions/43000650965">Construction Spending</a></td></tr><tr><td>COP</td><td><a href="https://www.tradingview.com/support/solutions/43000650984">Crude Oil Production</a></td></tr><tr><td>COR</td><td><a href="https://www.tradingview.com/support/solutions/43000650985">Crude Oil Rigs</a></td></tr><tr><td>CORD</td><td><a href="https://www.tradingview.com/support/solutions/43000650963">Construction Orders, YoY</a></td></tr><tr><td>CORPI</td><td><a href="https://www.tradingview.com/support/solutions/43000650980">Corruption Index</a></td></tr><tr><td>CORR</td><td><a href="https://www.tradingview.com/support/solutions/43000650981">Corruption Rank</a></td></tr><tr><td>COSC</td><td><a href="https://www.tradingview.com/support/solutions/43000650986">Crude Oil Stocks Change</a></td></tr><tr><td>COUT</td><td><a href="https://www.tradingview.com/support/solutions/43000650964">Construction Output, YoY</a></td></tr><tr><td>CP</td><td><a href="https://www.tradingview.com/support/solutions/43000650972">Copper Production</a></td></tr><tr><td>CPCEPI</td><td><a href="https://www.tradingview.com/support/solutions/43000650976">Core PCE Price Index</a></td></tr><tr><td>CPI</td><td><a href="https://www.tradingview.com/support/solutions/43000650969">Consumer Price Index</a></td></tr><tr><td>CPIHU</td><td><a href="https://www.tradingview.com/support/solutions/43000650939">CPI Housing Utilities</a></td></tr><tr><td>CPIM</td><td><a href="https://www.tradingview.com/support/solutions/43000650940">CPI Median</a></td></tr><tr><td>CPIT</td><td><a href="https://www.tradingview.com/support/solutions/43000650941">CPI Transportation</a></td></tr><tr><td>CPITM</td><td><a href="https://www.tradingview.com/support/solutions/43000650942">CPI Trimmed Mean</a></td></tr><tr><td>CPMI</td><td><a href="https://www.tradingview.com/support/solutions/43000650958">Chicago PMI</a></td></tr><tr><td>CPPI</td><td><a href="https://www.tradingview.com/support/solutions/43000650977">Core Producer Price Index</a></td></tr><tr><td>CPR</td><td><a href="https://www.tradingview.com/support/solutions/43000650978">Corporate Profits</a></td></tr><tr><td>CRLPI</td><td><a href="https://www.tradingview.com/support/solutions/43000679669">Cereals Price Index</a></td></tr><tr><td>CRR</td><td><a href="https://www.tradingview.com/support/solutions/43000650950">Cash Reserve Ratio</a></td></tr><tr><td>CS</td><td><a href="https://www.tradingview.com/support/solutions/43000650970">Consumer Spending</a></td></tr><tr><td>CSC</td><td><a href="https://www.tradingview.com/support/solutions/43000650919">API Crude Oil Stock Change</a></td></tr><tr><td>CSHPI</td><td><a href="https://www.tradingview.com/support/solutions/43000650947">Case Shiller Home Price Index</a></td></tr><tr><td>CSHPIMM</td><td><a href="https://www.tradingview.com/support/solutions/43000650948">Case Shiller Home Price Index, MoM</a></td></tr><tr><td>CSHPIYY</td><td><a href="https://www.tradingview.com/support/solutions/43000650949">Case Shiller Home Price Index, YoY</a></td></tr><tr><td>CSS</td><td><a href="https://www.tradingview.com/support/solutions/43000650954">Chain Store Sales</a></td></tr><tr><td>CTR</td><td><a href="https://www.tradingview.com/support/solutions/43000650979">Corporate Tax Rate</a></td></tr><tr><td>CU</td><td><a href="https://www.tradingview.com/support/solutions/43000650943">Capacity Utilization</a></td></tr><tr><td>DFMI</td><td><a href="https://www.tradingview.com/support/solutions/43000650990">Dallas Fed Manufacturing Index</a></td></tr><tr><td>DFP</td><td><a href="https://www.tradingview.com/support/solutions/43000650996">Distillate Fuel Production</a></td></tr><tr><td>DFS</td><td><a href="https://www.tradingview.com/support/solutions/43000650997">Distillate Stocks</a></td></tr><tr><td>DFSI</td><td><a href="https://www.tradingview.com/support/solutions/43000650991">Dallas Fed Services Index</a></td></tr><tr><td>DFSRI</td><td><a href="https://www.tradingview.com/support/solutions/43000650992">Dallas Fed Services Revenues Index</a></td></tr><tr><td>DG</td><td><a href="https://www.tradingview.com/support/solutions/43000650993">Deposit Growth</a></td></tr><tr><td>DGO</td><td><a href="https://www.tradingview.com/support/solutions/43000651000">Durable Goods Orders</a></td></tr><tr><td>DGOED</td><td><a href="https://www.tradingview.com/support/solutions/43000650998">Durable Goods Orders Excluding Defense</a></td></tr><tr><td>DGOET</td><td><a href="https://www.tradingview.com/support/solutions/43000650999">Durable Goods Orders Excluding Transportation</a></td></tr><tr><td>DIR</td><td><a href="https://www.tradingview.com/support/solutions/43000650994">Deposit Interest Rate</a></td></tr><tr><td>DPI</td><td><a href="https://www.tradingview.com/support/solutions/43000650995">Disposable Personal Income</a></td></tr><tr><td>DRPI</td><td><a href="https://www.tradingview.com/support/solutions/43000679668">Dairy Price Index</a></td></tr><tr><td>DS</td><td><a href="https://www.tradingview.com/support/solutions/43000650922">API Distillate Stocks</a></td></tr><tr><td>DT</td><td><a href="https://www.tradingview.com/support/solutions/43000650938">CBI Distributive Trades</a></td></tr><tr><td>EC</td><td><a href="https://www.tradingview.com/support/solutions/43000650917">ADP Employment Change</a></td></tr><tr><td>ED</td><td><a href="https://www.tradingview.com/support/solutions/43000651012">External Debt</a></td></tr><tr><td>EDBR</td><td><a href="https://www.tradingview.com/support/solutions/43000651001">Ease Of Doing Business Ranking</a></td></tr><tr><td>EHS</td><td><a href="https://www.tradingview.com/support/solutions/43000651009">Existing Home Sales</a></td></tr><tr><td>ELP</td><td><a href="https://www.tradingview.com/support/solutions/43000651004">Electricity Production</a></td></tr><tr><td>EMC</td><td><a href="https://www.tradingview.com/support/solutions/43000651006">Employment Change</a></td></tr><tr><td>EMCI</td><td><a href="https://www.tradingview.com/support/solutions/43000651007">Employment Cost Index</a></td></tr><tr><td>EMP</td><td><a href="https://www.tradingview.com/support/solutions/43000651005">Employed Persons</a></td></tr><tr><td>EMR</td><td><a href="https://www.tradingview.com/support/solutions/43000651008">Employment Rate</a></td></tr><tr><td>EOI</td><td><a href="https://www.tradingview.com/support/solutions/43000651002">Economic Optimism Index</a></td></tr><tr><td>EP</td><td><a href="https://www.tradingview.com/support/solutions/43000651011">Export Prices</a></td></tr><tr><td>ESI</td><td><a href="https://www.tradingview.com/support/solutions/43000651213">ZEW Economic Sentiment Index</a></td></tr><tr><td>EWS</td><td><a href="https://www.tradingview.com/support/solutions/43000651003">Economy Watchers Survey</a></td></tr><tr><td>EXP</td><td><a href="https://www.tradingview.com/support/solutions/43000651010">Exports</a></td></tr><tr><td>EXPYY</td><td><a href="https://www.tradingview.com/support/solutions/43000679671">Exports, YoY</a></td></tr><tr><td>FAI</td><td><a href="https://www.tradingview.com/support/solutions/43000651016">Fixed Asset Investment</a></td></tr><tr><td>FBI</td><td><a href="https://www.tradingview.com/support/solutions/43000651018">Foreign Bond Investment</a></td></tr><tr><td>FDI</td><td><a href="https://www.tradingview.com/support/solutions/43000651019">Foreign Direct Investment</a></td></tr><tr><td>FE</td><td><a href="https://www.tradingview.com/support/solutions/43000651015">Fiscal Expenditure</a></td></tr><tr><td>FER</td><td><a href="https://www.tradingview.com/support/solutions/43000651020">Foreign Exchange Reserves</a></td></tr><tr><td>FI</td><td><a href="https://www.tradingview.com/support/solutions/43000651017">Food Inflation, YoY</a></td></tr><tr><td>FO</td><td><a href="https://www.tradingview.com/support/solutions/43000651014">Factory Orders</a></td></tr><tr><td>FOET</td><td><a href="https://www.tradingview.com/support/solutions/43000651013">Factory Orders Excluding Transportation</a></td></tr><tr><td>FPI</td><td><a href="https://www.tradingview.com/support/solutions/43000679667">Food Price Index</a></td></tr><tr><td>FSI</td><td><a href="https://www.tradingview.com/support/solutions/43000651021">Foreign Stock Investment</a></td></tr><tr><td>FTE</td><td><a href="https://www.tradingview.com/support/solutions/43000651022">Full Time Employment</a></td></tr><tr><td>FYGDPG</td><td><a href="https://www.tradingview.com/support/solutions/43000679672">Full Year GDP Growth</a></td></tr><tr><td>GASP</td><td><a href="https://www.tradingview.com/support/solutions/43000651040">Gasoline Prices</a></td></tr><tr><td>GBP</td><td><a href="https://www.tradingview.com/support/solutions/43000651050">Government Budget</a></td></tr><tr><td>GBV</td><td><a href="https://www.tradingview.com/support/solutions/43000651049">Government Budget Value</a></td></tr><tr><td>GCI</td><td><a href="https://www.tradingview.com/support/solutions/43000650961">Competitiveness Index</a></td></tr><tr><td>GCR</td><td><a href="https://www.tradingview.com/support/solutions/43000650962">Competitiveness Rank</a></td></tr><tr><td>GD</td><td><a href="https://www.tradingview.com/support/solutions/43000651052">Government Debt</a></td></tr><tr><td>GDG</td><td><a href="https://www.tradingview.com/support/solutions/43000651051">Government Debt To GDP</a></td></tr><tr><td>GDP</td><td><a href="https://www.tradingview.com/support/solutions/43000651038">Gross Domestic Product</a></td></tr><tr><td>GDPA</td><td><a href="https://www.tradingview.com/support/solutions/43000651025">GDP From Agriculture</a></td></tr><tr><td>GDPC</td><td><a href="https://www.tradingview.com/support/solutions/43000651026">GDP From Construction</a></td></tr><tr><td>GDPCP</td><td><a href="https://www.tradingview.com/support/solutions/43000651023">GDP Constant Prices</a></td></tr><tr><td>GDPD</td><td><a href="https://www.tradingview.com/support/solutions/43000651024">GDP Deflator</a></td></tr><tr><td>GDPGA</td><td><a href="https://www.tradingview.com/support/solutions/43000651033">GDP Growth Annualized</a></td></tr><tr><td>GDPMAN</td><td><a href="https://www.tradingview.com/support/solutions/43000651027">GDP From Manufacturing</a></td></tr><tr><td>GDPMIN</td><td><a href="https://www.tradingview.com/support/solutions/43000651028">GDP From Mining</a></td></tr><tr><td>GDPPA</td><td><a href="https://www.tradingview.com/support/solutions/43000651029">GDP From Public Administration</a></td></tr><tr><td>GDPPC</td><td><a href="https://www.tradingview.com/support/solutions/43000651035">GDP Per Capita</a></td></tr><tr><td>GDPPCP</td><td><a href="https://www.tradingview.com/support/solutions/43000651036">GDP Per Capita, PPP</a></td></tr><tr><td>GDPQQ</td><td><a href="https://www.tradingview.com/support/solutions/43000651034">GDP Growth Rate</a></td></tr><tr><td>GDPS</td><td><a href="https://www.tradingview.com/support/solutions/43000651030">GDP From Services</a></td></tr><tr><td>GDPSA</td><td><a href="https://www.tradingview.com/support/solutions/43000651037">GDP Sales</a></td></tr><tr><td>GDPT</td><td><a href="https://www.tradingview.com/support/solutions/43000651031">GDP From Transport</a></td></tr><tr><td>GDPU</td><td><a href="https://www.tradingview.com/support/solutions/43000651032">GDP From Utilities</a></td></tr><tr><td>GDPYY</td><td><a href="https://www.tradingview.com/support/solutions/43000651039">GDP, YoY</a></td></tr><tr><td>GDTPI</td><td><a href="https://www.tradingview.com/support/solutions/43000651043">Global Dairy Trade Price Index</a></td></tr><tr><td>GFCF</td><td><a href="https://www.tradingview.com/support/solutions/43000651060">Gross Fixed Capital Formation</a></td></tr><tr><td>GNP</td><td><a href="https://www.tradingview.com/support/solutions/43000651061">Gross National Product</a></td></tr><tr><td>GP</td><td><a href="https://www.tradingview.com/support/solutions/43000651044">Gold Production</a></td></tr><tr><td>GPA</td><td><a href="https://www.tradingview.com/support/solutions/43000651053">Government Payrolls</a></td></tr><tr><td>GPRO</td><td><a href="https://www.tradingview.com/support/solutions/43000651041">Gasoline Production</a></td></tr><tr><td>GR</td><td><a href="https://www.tradingview.com/support/solutions/43000651054">Government Revenues</a></td></tr><tr><td>GRES</td><td><a href="https://www.tradingview.com/support/solutions/43000651045">Gold Reserves</a></td></tr><tr><td>GS</td><td><a href="https://www.tradingview.com/support/solutions/43000650923">API Gasoline Stocks</a></td></tr><tr><td>GSC</td><td><a href="https://www.tradingview.com/support/solutions/43000651057">Grain Stocks Corn</a></td></tr><tr><td>GSCH</td><td><a href="https://www.tradingview.com/support/solutions/43000651042">Gasoline Stocks Change</a></td></tr><tr><td>GSG</td><td><a href="https://www.tradingview.com/support/solutions/43000651055">Government Spending To GDP</a></td></tr><tr><td>GSP</td><td><a href="https://www.tradingview.com/support/solutions/43000651056">Government Spending</a></td></tr><tr><td>GSS</td><td><a href="https://www.tradingview.com/support/solutions/43000651058">Grain Stocks Soy</a></td></tr><tr><td>GSW</td><td><a href="https://www.tradingview.com/support/solutions/43000651059">Grain Stocks Wheat</a></td></tr><tr><td>GTB</td><td><a href="https://www.tradingview.com/support/solutions/43000651046">Goods Trade Balance</a></td></tr><tr><td>HB</td><td><a href="https://www.tradingview.com/support/solutions/43000651067">Hospital Beds</a></td></tr><tr><td>HDG</td><td><a href="https://www.tradingview.com/support/solutions/43000651068">Households Debt To GDP</a></td></tr><tr><td>HDI</td><td><a href="https://www.tradingview.com/support/solutions/43000651069">Households Debt To Income</a></td></tr><tr><td>HICP</td><td><a href="https://www.tradingview.com/support/solutions/43000651062">Harmonised Index of Consumer Prices</a></td></tr><tr><td>HIRMM</td><td><a href="https://www.tradingview.com/support/solutions/43000679673">Harmonised Inflation Rate, MoM</a></td></tr><tr><td>HIRYY</td><td><a href="https://www.tradingview.com/support/solutions/43000679674">Harmonised Inflation Rate, YoY</a></td></tr><tr><td>HMI</td><td><a href="https://www.tradingview.com/support/solutions/43000651132">NAHB Housing Market Index</a></td></tr><tr><td>HOR</td><td><a href="https://www.tradingview.com/support/solutions/43000651065">Home Ownership Rate</a></td></tr><tr><td>HOS</td><td><a href="https://www.tradingview.com/support/solutions/43000651063">Heating Oil Stocks</a></td></tr><tr><td>HOSP</td><td><a href="https://www.tradingview.com/support/solutions/43000651066">Hospitals</a></td></tr><tr><td>HPI</td><td><a href="https://www.tradingview.com/support/solutions/43000651071">House Price Index</a></td></tr><tr><td>HPIMM</td><td><a href="https://www.tradingview.com/support/solutions/43000679678">House Price Index, MoM</a></td></tr><tr><td>HPIYY</td><td><a href="https://www.tradingview.com/support/solutions/43000679679">House Price Index, YoY</a></td></tr><tr><td>HS</td><td><a href="https://www.tradingview.com/support/solutions/43000651064">Home Loans</a></td></tr><tr><td>HSP</td><td><a href="https://www.tradingview.com/support/solutions/43000651070">Household Spending</a></td></tr><tr><td>HST</td><td><a href="https://www.tradingview.com/support/solutions/43000651072">Housing Starts</a></td></tr><tr><td>IC</td><td><a href="https://www.tradingview.com/support/solutions/43000650956">Changes In Inventories</a></td></tr><tr><td>ICUB</td><td><a href="https://www.tradingview.com/support/solutions/43000651073">ICU Beds</a></td></tr><tr><td>IE</td><td><a href="https://www.tradingview.com/support/solutions/43000651081">Inflation Expectations</a></td></tr><tr><td>IFOCC</td><td><a href="https://www.tradingview.com/support/solutions/43000651074">IFO Assessment Of The Business Situation</a></td></tr><tr><td>IFOE</td><td><a href="https://www.tradingview.com/support/solutions/43000651075">IFO Business Developments Expectations</a></td></tr><tr><td>IJC</td><td><a href="https://www.tradingview.com/support/solutions/43000651084">Initial Jobless Claims</a></td></tr><tr><td>IMP</td><td><a href="https://www.tradingview.com/support/solutions/43000651076">Imports</a></td></tr><tr><td>IMPYY</td><td><a href="https://www.tradingview.com/support/solutions/43000679681">Imports, YoY</a></td></tr><tr><td>INBR</td><td><a href="https://www.tradingview.com/support/solutions/43000651085">Interbank Rate</a></td></tr><tr><td>INTR</td><td><a href="https://www.tradingview.com/support/solutions/43000651086">Interest Rate</a></td></tr><tr><td>IPA</td><td><a href="https://www.tradingview.com/support/solutions/43000651088">IP Addresses</a></td></tr><tr><td>IPMM</td><td><a href="https://www.tradingview.com/support/solutions/43000651078">Industrial Production, MoM</a></td></tr><tr><td>IPRI</td><td><a href="https://www.tradingview.com/support/solutions/43000651077">Import Prices</a></td></tr><tr><td>IPYY</td><td><a href="https://www.tradingview.com/support/solutions/43000651079">Industrial Production, YoY</a></td></tr><tr><td>IRMM</td><td><a href="https://www.tradingview.com/support/solutions/43000651082">Inflation Rate, MoM</a></td></tr><tr><td>IRYY</td><td><a href="https://www.tradingview.com/support/solutions/43000651083">Inflation Rate, YoY</a></td></tr><tr><td>IS</td><td><a href="https://www.tradingview.com/support/solutions/43000651080">Industrial Sentiment</a></td></tr><tr><td>ISP</td><td><a href="https://www.tradingview.com/support/solutions/43000651087">Internet Speed</a></td></tr><tr><td>JA</td><td><a href="https://www.tradingview.com/support/solutions/43000651091">Job Advertisements</a></td></tr><tr><td>JAR</td><td><a href="https://www.tradingview.com/support/solutions/43000651090">Jobs To Applications Ratio</a></td></tr><tr><td>JC</td><td><a href="https://www.tradingview.com/support/solutions/43000650955">Challenger Job Cuts</a></td></tr><tr><td>JC4W</td><td><a href="https://www.tradingview.com/support/solutions/43000651089">Jobless Claims, 4-Week Average</a></td></tr><tr><td>JO</td><td><a href="https://www.tradingview.com/support/solutions/43000651092">Job Offers</a></td></tr><tr><td>JV</td><td><a href="https://www.tradingview.com/support/solutions/43000651093">Job Vacancies</a></td></tr><tr><td>KFMI</td><td><a href="https://www.tradingview.com/support/solutions/43000651094">Kansas Fed Manufacturing Index</a></td></tr><tr><td>LB</td><td><a href="https://www.tradingview.com/support/solutions/43000651104">Loans To Banks</a></td></tr><tr><td>LC</td><td><a href="https://www.tradingview.com/support/solutions/43000651101">Labor Costs</a></td></tr><tr><td>LEI</td><td><a href="https://www.tradingview.com/support/solutions/43000651102">Leading Economic Index</a></td></tr><tr><td>LFPR</td><td><a href="https://www.tradingview.com/support/solutions/43000651100">Labor Force Participation Rate</a></td></tr><tr><td>LG</td><td><a href="https://www.tradingview.com/support/solutions/43000651106">Loan Growth, YoY</a></td></tr><tr><td>LIVRR</td><td><a href="https://www.tradingview.com/support/solutions/43000651103">Liquidity Injections Via Reverse Repo</a></td></tr><tr><td>LMIC</td><td><a href="https://www.tradingview.com/support/solutions/43000651096">LMI Logistics Managers Index Current</a></td></tr><tr><td>LMICI</td><td><a href="https://www.tradingview.com/support/solutions/43000651095">LMI Inventory Costs</a></td></tr><tr><td>LMIF</td><td><a href="https://www.tradingview.com/support/solutions/43000651097">LMI Logistics Managers Index Future</a></td></tr><tr><td>LMITP</td><td><a href="https://www.tradingview.com/support/solutions/43000651098">LMI Transportation Prices</a></td></tr><tr><td>LMIWP</td><td><a href="https://www.tradingview.com/support/solutions/43000651099">LMI Warehouse Prices</a></td></tr><tr><td>LPS</td><td><a href="https://www.tradingview.com/support/solutions/43000651105">Loans To Private Sector</a></td></tr><tr><td>LR</td><td><a href="https://www.tradingview.com/support/solutions/43000650953">Central Bank Lending Rate</a></td></tr><tr><td>LTUR</td><td><a href="https://www.tradingview.com/support/solutions/43000651107">Long Term Unemployment Rate</a></td></tr><tr><td>LWF</td><td><a href="https://www.tradingview.com/support/solutions/43000679691">Living Wage Family</a></td></tr><tr><td>LWI</td><td><a href="https://www.tradingview.com/support/solutions/43000679702">Living Wage Individual</a></td></tr><tr><td>M0</td><td><a href="https://www.tradingview.com/support/solutions/43000651125">Money Supply M0</a></td></tr><tr><td>M1</td><td><a href="https://www.tradingview.com/support/solutions/43000651126">Money Supply M1</a></td></tr><tr><td>M2</td><td><a href="https://www.tradingview.com/support/solutions/43000651127">Money Supply M2</a></td></tr><tr><td>M3</td><td><a href="https://www.tradingview.com/support/solutions/43000651128">Money Supply M3</a></td></tr><tr><td>MA</td><td><a href="https://www.tradingview.com/support/solutions/43000651130">Mortgage Approvals</a></td></tr><tr><td>MAPL</td><td><a href="https://www.tradingview.com/support/solutions/43000651129">Mortgage Applications</a></td></tr><tr><td>MCE</td><td><a href="https://www.tradingview.com/support/solutions/43000651119">Michigan Consumer Expectations</a></td></tr><tr><td>MCEC</td><td><a href="https://www.tradingview.com/support/solutions/43000651120">Michigan Current Economic Conditions</a></td></tr><tr><td>MD</td><td><a href="https://www.tradingview.com/support/solutions/43000651117">Medical Doctors</a></td></tr><tr><td>ME</td><td><a href="https://www.tradingview.com/support/solutions/43000651122">Military Expenditure</a></td></tr><tr><td>MGDPYY</td><td><a href="https://www.tradingview.com/support/solutions/43000679714">Monthly GDP, YoY</a></td></tr><tr><td>MIE1Y</td><td><a href="https://www.tradingview.com/support/solutions/43000651121">Michigan Inflation Expectations</a></td></tr><tr><td>MIE5Y</td><td><a href="https://www.tradingview.com/support/solutions/43000651118">Michigan 5 Year Inflation Expectations</a></td></tr><tr><td>MIP</td><td><a href="https://www.tradingview.com/support/solutions/43000651124">Mining Production, YoY</a></td></tr><tr><td>MMI</td><td><a href="https://www.tradingview.com/support/solutions/43000651108">MBA Mortgage Market Index</a></td></tr><tr><td>MO</td><td><a href="https://www.tradingview.com/support/solutions/43000651111">Machinery Orders</a></td></tr><tr><td>MP</td><td><a href="https://www.tradingview.com/support/solutions/43000651113">Manufacturing Payrolls</a></td></tr><tr><td>MPI</td><td><a href="https://www.tradingview.com/support/solutions/43000679666">Meat Price Index</a></td></tr><tr><td>MPRMM</td><td><a href="https://www.tradingview.com/support/solutions/43000651114">Manufacturing Production, MoM</a></td></tr><tr><td>MPRYY</td><td><a href="https://www.tradingview.com/support/solutions/43000651115">Manufacturing Production, YoY</a></td></tr><tr><td>MR</td><td><a href="https://www.tradingview.com/support/solutions/43000651131">Mortgage Rate</a></td></tr><tr><td>MRI</td><td><a href="https://www.tradingview.com/support/solutions/43000651109">MBA Mortgage Refinance Index</a></td></tr><tr><td>MS</td><td><a href="https://www.tradingview.com/support/solutions/43000651116">Manufacturing Sales</a></td></tr><tr><td>MTO</td><td><a href="https://www.tradingview.com/support/solutions/43000651112">Machine Tool Orders</a></td></tr><tr><td>MW</td><td><a href="https://www.tradingview.com/support/solutions/43000651123">Minimum Wages</a></td></tr><tr><td>NDCGOEA</td><td><a href="https://www.tradingview.com/support/solutions/43000651148">Orders For Non-defense Capital Goods Excluding Aircraft</a></td></tr><tr><td>NEGTB</td><td><a href="https://www.tradingview.com/support/solutions/43000651047">Goods Trade Deficit With Non-EU Countries</a></td></tr><tr><td>NFP</td><td><a href="https://www.tradingview.com/support/solutions/43000651141">Nonfarm Payrolls</a></td></tr><tr><td>NGI</td><td><a href="https://www.tradingview.com/support/solutions/43000679719">Natural Gas Imports</a></td></tr><tr><td>NGIR</td><td><a href="https://www.tradingview.com/support/solutions/43000679721">Natural Gas Imports from Russia</a></td></tr><tr><td>NGSC</td><td><a href="https://www.tradingview.com/support/solutions/43000651136">Natural Gas Stocks Change</a></td></tr><tr><td>NHPI</td><td><a href="https://www.tradingview.com/support/solutions/43000651135">Nationwide House Price Index</a></td></tr><tr><td>NHS</td><td><a href="https://www.tradingview.com/support/solutions/43000651137">New Home Sales</a></td></tr><tr><td>NHSMM</td><td><a href="https://www.tradingview.com/support/solutions/43000651138">New Home Sales, MoM</a></td></tr><tr><td>NMPMI</td><td><a href="https://www.tradingview.com/support/solutions/43000651143">Non-Manufacturing PMI</a></td></tr><tr><td>NO</td><td><a href="https://www.tradingview.com/support/solutions/43000651139">New Orders</a></td></tr><tr><td>NODXMM</td><td><a href="https://www.tradingview.com/support/solutions/43000651144">Non-Oil Domestic Exports, MoM</a></td></tr><tr><td>NODXYY</td><td><a href="https://www.tradingview.com/support/solutions/43000651145">Non-Oil Domestic Exports, YoY</a></td></tr><tr><td>NOE</td><td><a href="https://www.tradingview.com/support/solutions/43000651142">Non-Oil Exports</a></td></tr><tr><td>NPP</td><td><a href="https://www.tradingview.com/support/solutions/43000651140">Nonfarm Payrolls Private</a></td></tr><tr><td>NURS</td><td><a href="https://www.tradingview.com/support/solutions/43000651146">Nurses</a></td></tr><tr><td>NYESMI</td><td><a href="https://www.tradingview.com/support/solutions/43000651134">NY Empire State Manufacturing Index</a></td></tr><tr><td>OE</td><td><a href="https://www.tradingview.com/support/solutions/43000651147">Oil Exports</a></td></tr><tr><td>OPI</td><td><a href="https://www.tradingview.com/support/solutions/43000679665">Oils Price Index</a></td></tr><tr><td>PCEPI</td><td><a href="https://www.tradingview.com/support/solutions/43000651149">PCE Price Index</a></td></tr><tr><td>PDG</td><td><a href="https://www.tradingview.com/support/solutions/43000651160">Private Debt To GDP</a></td></tr><tr><td>PFMI</td><td><a href="https://www.tradingview.com/support/solutions/43000651158">Philadelphia Fed Manufacturing Index</a></td></tr><tr><td>PHSIMM</td><td><a href="https://www.tradingview.com/support/solutions/43000651152">Pending Home Sales Index, MoM</a></td></tr><tr><td>PHSIYY</td><td><a href="https://www.tradingview.com/support/solutions/43000651153">Pending Home Sales Index, YoY</a></td></tr><tr><td>PI</td><td><a href="https://www.tradingview.com/support/solutions/43000651155">Personal Income</a></td></tr><tr><td>PIN</td><td><a href="https://www.tradingview.com/support/solutions/43000651161">Private Investment</a></td></tr><tr><td>PIND</td><td><a href="https://www.tradingview.com/support/solutions/43000651110">MBA Purchase Index</a></td></tr><tr><td>PITR</td><td><a href="https://www.tradingview.com/support/solutions/43000651154">Personal Income Tax Rate</a></td></tr><tr><td>POP</td><td><a href="https://www.tradingview.com/support/solutions/43000651159">Population</a></td></tr><tr><td>PPI</td><td><a href="https://www.tradingview.com/support/solutions/43000651165">Producer Price Index</a></td></tr><tr><td>PPII</td><td><a href="https://www.tradingview.com/support/solutions/43000651164">Producer Price Index Input</a></td></tr><tr><td>PPIMM</td><td><a href="https://www.tradingview.com/support/solutions/43000679724">Producer Price Inflation, MoM</a></td></tr><tr><td>PPIYY</td><td><a href="https://www.tradingview.com/support/solutions/43000651163">Producer Prices Index, YoY</a></td></tr><tr><td>PRI</td><td><a href="https://www.tradingview.com/support/solutions/43000650925">API Product Imports</a></td></tr><tr><td>PROD</td><td><a href="https://www.tradingview.com/support/solutions/43000651166">Productivity</a></td></tr><tr><td>PS</td><td><a href="https://www.tradingview.com/support/solutions/43000651156">Personal Savings</a></td></tr><tr><td>PSC</td><td><a href="https://www.tradingview.com/support/solutions/43000651162">Private Sector Credit</a></td></tr><tr><td>PSP</td><td><a href="https://www.tradingview.com/support/solutions/43000651157">Personal Spending</a></td></tr><tr><td>PTE</td><td><a href="https://www.tradingview.com/support/solutions/43000651151">Part Time Employment</a></td></tr><tr><td>PUAC</td><td><a href="https://www.tradingview.com/support/solutions/43000651150">Pandemic Unemployment Assistance Claims</a></td></tr><tr><td>RAM</td><td><a href="https://www.tradingview.com/support/solutions/43000651177">Retirement Age Men</a></td></tr><tr><td>RAW</td><td><a href="https://www.tradingview.com/support/solutions/43000651178">Retirement Age Women</a></td></tr><tr><td>RCR</td><td><a href="https://www.tradingview.com/support/solutions/43000651168">Refinery Crude Runs</a></td></tr><tr><td>REM</td><td><a href="https://www.tradingview.com/support/solutions/43000651169">Remittances</a></td></tr><tr><td>RFMI</td><td><a href="https://www.tradingview.com/support/solutions/43000651181">Richmond Fed Manufacturing Index</a></td></tr><tr><td>RFMSI</td><td><a href="https://www.tradingview.com/support/solutions/43000651182">Richmond Fed Manufacturing Shipments Index</a></td></tr><tr><td>RFSI</td><td><a href="https://www.tradingview.com/support/solutions/43000651183">Richmond Fed Services Index</a></td></tr><tr><td>RI</td><td><a href="https://www.tradingview.com/support/solutions/43000651167">Redbook Index</a></td></tr><tr><td>RIEA</td><td><a href="https://www.tradingview.com/support/solutions/43000651171">Retail Inventories Excluding Autos</a></td></tr><tr><td>RPI</td><td><a href="https://www.tradingview.com/support/solutions/43000651172">Retail Price Index</a></td></tr><tr><td>RR</td><td><a href="https://www.tradingview.com/support/solutions/43000651170">Repo Rate</a></td></tr><tr><td>RRR</td><td><a href="https://www.tradingview.com/support/solutions/43000651180">Reverse Repo Rate</a></td></tr><tr><td>RSEA</td><td><a href="https://www.tradingview.com/support/solutions/43000651173">Retail Sales Excluding Autos</a></td></tr><tr><td>RSEF</td><td><a href="https://www.tradingview.com/support/solutions/43000651174">Retail Sales Excluding Fuel</a></td></tr><tr><td>RSMM</td><td><a href="https://www.tradingview.com/support/solutions/43000651175">Retail Sales, MoM</a></td></tr><tr><td>RSYY</td><td><a href="https://www.tradingview.com/support/solutions/43000651176">Retail Sales, YoY</a></td></tr><tr><td>RTI</td><td><a href="https://www.tradingview.com/support/solutions/43000651179">Reuters Tankan Index</a></td></tr><tr><td>SBSI</td><td><a href="https://www.tradingview.com/support/solutions/43000651187">Small Business Sentiment Index</a></td></tr><tr><td>SFHP</td><td><a href="https://www.tradingview.com/support/solutions/43000651186">Single Family Home Prices</a></td></tr><tr><td>SP</td><td><a href="https://www.tradingview.com/support/solutions/43000651191">Steel Production</a></td></tr><tr><td>SPI</td><td><a href="https://www.tradingview.com/support/solutions/43000679563">Sugar Price Index</a></td></tr><tr><td>SS</td><td><a href="https://www.tradingview.com/support/solutions/43000651185">Services Sentiment</a></td></tr><tr><td>SSR</td><td><a href="https://www.tradingview.com/support/solutions/43000651190">Social Security Rate</a></td></tr><tr><td>SSRC</td><td><a href="https://www.tradingview.com/support/solutions/43000651188">Social Security Rate For Companies</a></td></tr><tr><td>SSRE</td><td><a href="https://www.tradingview.com/support/solutions/43000651189">Social Security Rate For Employees</a></td></tr><tr><td>STR</td><td><a href="https://www.tradingview.com/support/solutions/43000651184">Sales Tax Rate</a></td></tr><tr><td>TA</td><td><a href="https://www.tradingview.com/support/solutions/43000651199">Tourist Arrivals</a></td></tr><tr><td>TAXR</td><td><a href="https://www.tradingview.com/support/solutions/43000651192">Tax Revenue</a></td></tr><tr><td>TCB</td><td><a href="https://www.tradingview.com/support/solutions/43000651200">Treasury Cash Balance</a></td></tr><tr><td>TCPI</td><td><a href="https://www.tradingview.com/support/solutions/43000651196">Tokyo CPI</a></td></tr><tr><td>TI</td><td><a href="https://www.tradingview.com/support/solutions/43000651194">Terrorism Index</a></td></tr><tr><td>TII</td><td><a href="https://www.tradingview.com/support/solutions/43000651195">Tertiary Industry Index</a></td></tr><tr><td>TOT</td><td><a href="https://www.tradingview.com/support/solutions/43000651193">Terms Of Trade</a></td></tr><tr><td>TR</td><td><a href="https://www.tradingview.com/support/solutions/43000651198">Tourism Revenues</a></td></tr><tr><td>TVS</td><td><a href="https://www.tradingview.com/support/solutions/43000651197">Total Vehicle Sales</a></td></tr><tr><td>UC</td><td><a href="https://www.tradingview.com/support/solutions/43000651202">Unemployment Change</a></td></tr><tr><td>UP</td><td><a href="https://www.tradingview.com/support/solutions/43000651201">Unemployed Persons</a></td></tr><tr><td>UR</td><td><a href="https://www.tradingview.com/support/solutions/43000651203">Unemployment Rate</a></td></tr><tr><td>WAG</td><td><a href="https://www.tradingview.com/support/solutions/43000651205">Wages</a></td></tr><tr><td>WES</td><td><a href="https://www.tradingview.com/support/solutions/43000651207">Weapons Sales</a></td></tr><tr><td>WG</td><td><a href="https://www.tradingview.com/support/solutions/43000651206">Wage Growth, YoY</a></td></tr><tr><td>WHS</td><td><a href="https://www.tradingview.com/support/solutions/43000679725">Wages High Skilled</a></td></tr><tr><td>WI</td><td><a href="https://www.tradingview.com/support/solutions/43000651208">Wholesale Inventories</a></td></tr><tr><td>WLS</td><td><a href="https://www.tradingview.com/support/solutions/43000679727">Wages Low Skilled</a></td></tr><tr><td>WM</td><td><a href="https://www.tradingview.com/support/solutions/43000651204">Wages In Manufacturing</a></td></tr><tr><td>WPI</td><td><a href="https://www.tradingview.com/support/solutions/43000651209">Wholesale Price Index</a></td></tr><tr><td>WS</td><td><a href="https://www.tradingview.com/support/solutions/43000651210">Wholesale Sales</a></td></tr><tr><td>YUR</td><td><a href="https://www.tradingview.com/support/solutions/43000651211">Youth Unemployment Rate</a></td></tr><tr><td>ZCC</td><td><a href="https://www.tradingview.com/support/solutions/43000651212">ZEW Current Conditions</a></td></tr></tbody></table></details>
<h2 id="requestseed" class="md-heading"><a href="#requestseed"><span>​<code dir="auto">request.seed()</code>​</span><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></a></h2>
<p>TradingView aggregates a vast amount of data from its many providers, including price and volume information on tradable instruments, financials, economic data, and more, which users can retrieve in Pine Script using the functions discussed in the sections above, as well as multiple built-in variables.</p>
<p>To further expand the horizons of possible data one can analyze on TradingView, we have <a href="https://github.com/tradingview-pine-seeds/docs" rel="nofollow">Pine Seeds</a>, which allows users to supply custom <em>user-maintained</em> EOD data feeds via GitHub for use on TradingView charts and within Pine Script code.</p>
<aside aria-label="Notice" class="tv-informer not-content" style="--informer-header-color:#FF9800;--informer-back-color-light:#FFF3E0;--informer-back-color-dark:#33261A"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path fill-rule="evenodd" d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM9 4c-.79 0-1.38.7-1.25 1.48l.67 4.03a.59.59 0 0 0 1.16 0l.67-4.03A1.27 1.27 0 0 0 9 4Zm0 8a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Notice</span>The creation of <em>new</em> Pine Seeds repositories is currently <strong>unavailable</strong>. However, the data feeds from <em>existing</em> repositories are still accessible to charts and scripts. The <a href="https://github.com/tradingview-pine-seeds/docs/blob/main/README.md" rel="nofollow">Pine Seeds documentation</a> on GitHub provides in-depth information about Pine Seeds functionality and instructions for requesting the return of full Pine Seeds support.</p></div></aside>
<p>To retrieve data from a Pine Seeds data feed within a script, use the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.seed">request.seed()</a> function. Below is the function’s signature:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text" tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">request.seed(source, symbol, expression, ignore_invalid_symbol, calc_bars_count) → series &lt;type&gt;</span></div></div></code></pre></figure></div>
<p>The <code dir="auto">source</code> parameter specifies the unique name of the user-maintained GitHub repository that contains the data feed.</p>
<p>The <code dir="auto">symbol</code> parameter represents the file name from the “data/” directory of the <code dir="auto">source</code> repository, excluding the “.csv” file extension. See <a href="https://github.com/tradingview-pine-seeds/docs/blob/main/data.md" rel="nofollow">this page</a> for information about the structure of the data stored in repositories.</p>
<p>The <code dir="auto">expression</code> parameter is the series to evaluate using data extracted from the requested context. It is similar to the equivalent in <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security_lower_tf">request.security_lower_tf()</a>. Data feeds stored in user-maintained repos contain <a href="https://www.tradingview.com/pine-script-reference/v6/#var_time">time</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#var_open">open</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#var_high">high</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#var_low">low</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a>, and <a href="https://www.tradingview.com/pine-script-reference/v6/#var_volume">volume</a> information, meaning the <code dir="auto">expression</code> argument can use the corresponding built-in variables, including variables derived from them (e.g., <a href="https://www.tradingview.com/pine-script-reference/v6/#var_bar_index">bar_index</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#var_ohlc4">ohlc4</a>, etc.) to request their values from the context of the custom data.</p>
<p>The script below visualizes sample data from the <a href="https://github.com/tradingview-pine-seeds/seed_crypto_santiment" rel="nofollow">seed_crypto_santiment</a> demo repository. It uses two calls to <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.seed">request.seed()</a> to retrieve the <a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a> values from the repository’s <a href="https://github.com/tradingview-pine-seeds/seed_crypto_santiment/blob/master/data/BTC_SENTIMENT_POSITIVE_TOTAL.csv" rel="nofollow">BTC_SENTIMENT_POSITIVE_TOTAL</a> and <a href="https://github.com/tradingview-pine-seeds/seed_crypto_santiment/blob/master/data/BTC_SENTIMENT_NEGATIVE_TOTAL.csv" rel="nofollow">BTC_SENTIMENT_NEGATIVE_TOTAL</a> data feeds and <a href="/pine-script-docs/visuals/plots/">plots</a> the results on the chart as step lines:</p>
<p><img src="/pine-script-docs/_astro/Other-timeframes-and-data-Request-seed-1.8Jb0VyN__ZS6XAH.webp" alt="image" width="1342" height="570" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="21y"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Pine&nbsp;Seeds&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">format</span><span class="mtk18">=</span><span class="mtk11">format.volume</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;total&nbsp;positive&nbsp;sentiment&nbsp;for&nbsp;BTC&nbsp;extracted&nbsp;fr</span><span class="mtk9">om&nbsp;the&nbsp;"seed_crypto_santiment"&nbsp;repository.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">positiveTotal</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.seed</span><span class="mtk13">(</span><span class="mtk29">"seed_crypto_santiment"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"BTC_SENTIMENT_POSITIVE_TOTAL"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;total&nbsp;negative&nbsp;sentiment&nbsp;for&nbsp;BTC&nbsp;extracted&nbsp;fr</span><span class="mtk9">om&nbsp;the&nbsp;"seed_crypto_santiment"&nbsp;repository.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">negativeTotal</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.seed</span><span class="mtk13">(</span><span class="mtk29">"seed_crypto_santiment"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"BTC_SENTIMENT_NEGATIVE_TOTAL"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;data.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">positiveTotal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Positive&nbsp;sentiment"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_stepline</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">negativeTotal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Negative&nbsp;sentiment"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.maroon</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_stepline</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>This example requests data from the repository highlighted in the <a href="https://github.com/tradingview-pine-seeds/docs/blob/main/README.md" rel="nofollow">Pine Seeds documentation</a>. It exists solely for example purposes, and its data <em>does not</em> update on a regular basis.</li>
<li>Unlike most other <code dir="auto">request.*()</code> functions, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.seed">request.seed()</a> does not have a <code dir="auto">gaps</code> parameter. It always returns <a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a> values when no new data exists.</li>
<li>Pine Seeds data is searchable from the chart’s symbol search bar. To load a data feed on the chart, enter the <em>“Repo:File” pair</em>, similar to searching for an “Exchange:Symbol” pair.</li>
</ul>      </div> <div class="pagination-buttons not-content" data-astro-cid-xgirumru=""> <a href="/pine-script-docs/concepts/non-standard-charts-data" class="pagination-card" data-pagefind-ignore="" data-astro-cid-assl6cvf=""> <p data-astro-cid-assl6cvf="">Previous</p> <h4 class="pagination-card-header" data-astro-cid-assl6cvf=""> <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-assl6cvf="" data-icon="theme/arrow-back">  <use xlink:href="#ai:local:theme/arrow-back"></use>  </svg> Non-standard charts data  </h4> </a>  <a href="/pine-script-docs/concepts/repainting" class="pagination-card" data-pagefind-ignore="" data-astro-cid-assl6cvf=""> <p data-astro-cid-assl6cvf="">Next</p> <h4 class="pagination-card-header" data-astro-cid-assl6cvf="">  Repainting <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-assl6cvf="" data-icon="theme/arrow">  <symbol id="ai:local:theme/arrow"><path fill="none" stroke="var(--arrow-fill-color, #131722)" d="m11 8 6 6-6 6"></path></symbol><use xlink:href="#ai:local:theme/arrow"></use>  </svg> </h4> </a>  </div>  </main>   <div id="toc" data-pagefind-ignore="all" data-astro-cid-oor6cujd=""><aside class="document-toc-container ml-4 w-48" data-astro-cid-oor6cujd=""><section id="toc-scroll-section" class="slick-scroll" data-astro-cid-oor6cujd=""><header data-astro-cid-oor6cujd=""><h2 class="toc-header" data-astro-cid-oor6cujd="">On this page</h2></header><ul class="" id="toc-entries" data-astro-cid-oor6cujd=""><a href="#introduction" aria-current="true" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-current="" data-astro-cid-oor6cujd="">Introduction</li></a><a href="#common-characteristics" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">Common characteristics</li></a><a href="#behavior" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Behavior</li></a><a href="#gaps" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><code>gaps</code></li></a><a href="#ignore_invalid_symbol" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><code>ignore_invalid_symbol</code></li></a><a href="#currency" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><code>currency</code></li></a><a href="#lookahead" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><code>lookahead</code></li></a><a href="#dynamic-requests" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Dynamic requests</li></a><a href="#series-arguments" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">”series” arguments</li></a><a href="#in-local-scopes" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">In local scopes</li></a><a href="#in-libraries" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">In libraries</li></a><a href="#nested-requests" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">Nested requests</li></a><a href="#data-feeds" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">Data feeds</li></a><a href="#requestsecurity" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd=""><code>request.security()</code></li></a><a href="#timeframes" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Timeframes</li></a><a href="#higher-timeframes" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">Higher timeframes</li></a><a href="#lower-timeframes" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">Lower timeframes</li></a><a href="#requestable-data" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Requestable data</li></a><a href="#built-in-variables-and-functions" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">Built-in variables and functions</li></a><a href="#declared-variables" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">Declared variables</li></a><a href="#tuples" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">Tuples</li></a><a href="#user-defined-functions" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">User-defined functions</li></a><a href="#chart-points" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">Chart points</li></a><a href="#collections" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">Collections</li></a><a href="#user-defined-types" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">User-defined types</li></a><a href="#requestsecurity_lower_tf" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd=""><code>request.security_lower_tf()</code></li></a><a href="#requesting-intrabar-data" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Requesting intrabar data</li></a><a href="#intrabar-data-arrays" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Intrabar data arrays</li></a><a href="#tuples-of-intrabar-data" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Tuples of intrabar data</li></a><a href="#requesting-collections" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Requesting collections</li></a><a href="#custom-contexts" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">Custom contexts</li></a><a href="#historical-and-realtime-behavior" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">Historical and realtime behavior</li></a><a href="#avoiding-repainting" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Avoiding repainting</li></a><a href="#higher-timeframe-data" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">Higher-timeframe data</li></a><a href="#lower-timeframe-data" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">Lower-timeframe data</li></a><a href="#requestcurrency_rate" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd=""><code>request.currency_rate()</code></li></a><a href="#requestdividends-requestsplits-and-requestearnings" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd=""><code>request.dividends()</code>, <code>request.splits()</code>, and <code>request.earnings()</code></li></a><a href="#requestfinancial" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd=""><code>request.financial()</code></li></a><a href="#calculating-financial-metrics" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Calculating financial metrics</li></a><a href="#financial-ids" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Financial IDs</li></a><a href="#income-statements" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">Income statements</li></a><a href="#balance-sheet" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">Balance sheet</li></a><a href="#cash-flow" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">Cash flow</li></a><a href="#statistics" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">Statistics</li></a><a href="#requesteconomic" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd=""><code>request.economic()</code></li></a><a href="#countryregion-codes" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Country/region codes</li></a><a href="#field-codes" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Field codes</li></a><a href="#requestseed" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd=""><code>request.seed()</code></li></a></ul></section><div class="toc-bottom-fade" data-astro-cid-oor6cujd=""></div><div class="back-top-space" data-astro-cid-oor6cujd=""><div class="not-content" style="" data-astro-cid-pkzv2hgs=""> <a id="back-top-button" title="Back to top" href="#top" data-astro-cid-pkzv2hgs="" class="floating-button not-content stvb-base stvb-pointer stvb-gray stvb-medium stvb-secondary stvb-icon stvb-icon-force-color stvb-force-no-border"> <svg width="18" height="18" viewBox="0 0 18 18" data-astro-cid-oor6cujd="" data-icon="theme/arrow-up">  <symbol id="ai:local:theme/arrow-up"><g fill="none"><g clip-path="url(#a)"><path fill="currentColor" fill-rule="evenodd" d="m9 3.5.5.44 4 3.5-1 1.12-2.75-2.4V14h-1.5V6.15L5.49 8.56l-.98-1.12 4-3.5z" clip-rule="evenodd"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h18v18H0z"></path></clipPath></defs></g></symbol><use xlink:href="#ai:local:theme/arrow-up"></use>  </svg> </a> </div> </div></aside></div> </main> </div>   <footer data-astro-cid-b6pf7ola=""> <div class="footer-content" data-astro-cid-b6pf7ola="">  <ul data-astro-cid-b6pf7ola=""> <li data-astro-cid-b6pf7ola=""> <a href="https://www.tradingview.com/chat/#BfmVowG1TZkKO235" data-astro-cid-b6pf7ola="">Pine Q&amp;A chat</a>  </li><li data-astro-cid-b6pf7ola=""> <a href="https://stackoverflow.com/questions/tagged/pine-script" data-astro-cid-b6pf7ola="">Stack Overflow</a>  ↗ </li><li data-astro-cid-b6pf7ola=""> <a href="https://t.me/PineCodersQA" data-astro-cid-b6pf7ola="">Telegram</a>  ↗ </li><li data-astro-cid-b6pf7ola=""> <a href="https://www.reddit.com/r/TradingView/" data-astro-cid-b6pf7ola="">Reddit</a>  ↗ </li> </ul> <div class="flex" data-astro-cid-b6pf7ola=""></div> <div class="copyright" data-astro-cid-b6pf7ola="">Copyright © 2025 TradingView, Inc.</div> </div> </footer>         </body></html>
<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><script data-astro-exec="">
			const url = window.location.href;
			const expectedUrl = url.replace(
				/^https:\/\/(?!beta)(\w+\.)?tradingview\.com/,
				'https://www.tradingview.com',
			);
			if (url !== expectedUrl) {
				window.location.replace(expectedUrl);
			}
		</script><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="none"><link rel="icon" href="https://static.tradingview.com/static/images/favicon.ico"><link rel="icon" type="image/svg+xml" href="/pine-script-docs/favicon.svg"><title>Language / User-defined functions</title><meta name="og:title" content="Language / User-defined functions"><meta name="twitter:title" content="Language / User-defined functions"><meta name="description" content="Everything you need to know about Pine Script®."><meta name="og:description" content="Everything you need to know about Pine Script®."><meta name="twitter:description" content="Everything you need to know about Pine Script®."><meta name="keywords" content="tradingview, pine, script, indicators, strategies"><meta name="og:image" content="/pine-script-docs/meta-image.png?1"><meta name="twitter:image" content="/pine-script-docs/meta-image.png?1"><meta name="og:image:width" content="1200"><meta name="og:image:height" content="630"><meta name="og:url" content="https://www.tradingview.com/pine-script-docs/language/user-defined-functions/"><meta name="twitter:url" content="https://www.tradingview.com/pine-script-docs/language/user-defined-functions/"><meta name="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@TradingView"><link rel="canonical" href="https://www.tradingview.com/pine-script-docs/language/user-defined-functions/"><link rel="sitemap" href="/pine-script-docs/sitemap-index.xml"><link rel="stylesheet" href="/pine-script-docs/_astro/index.DfaRTfPD.css">
<link rel="stylesheet" href="/pine-script-docs/_astro/index.B9ah8c5K.css">
<style>.tv-spinner{display:none;position:absolute;margin:0 auto;border:0 solid rgb(149 152 161 / 20%);border-radius:50%;border-top-color:var(--tv-spinner-color, #2962ff);border-left-color:var(--tv-spinner-color, #2962ff);animation:tv-spinner-container-rotate .9s linear infinite}.tv-spinner-shown{display:block}.tv-spinner-size-large{top:calc(50% - 32px);left:calc(50% - 32px);width:56px;height:56px;border-width:4px}@keyframes tv-spinner-container-rotate{to{transform:rotate(360deg)}}:root{--page-background-color: #fff;background-color:var(--page-background-color)}:root[data-theme=dark]{--page-background-color: #000}body{background-color:var(--page-background-color)}#redirect-link{display:flex;position:absolute;inset:0;align-items:center;justify-content:center}#spinner{display:block;position:absolute;opacity:1;transition:opacity .2s}
.twitter-tweet:not(.twitter-tweet-rendered){padding:var(--tc-padding, 1em);border:1px solid var(--tc-border-color, #cfd9de)}.twitter-tweet:not(.twitter-tweet-rendered)>:first-child{margin-top:0}.twitter-tweet:not(.twitter-tweet-rendered)>:last-child{margin-bottom:0}lite-youtube{background-color:#000;position:relative;display:block;contain:content;background-position:center center;background-size:cover;cursor:pointer;max-width:720px}lite-youtube:before{content:attr(data-title);display:block;position:absolute;top:0;background-image:linear-gradient(180deg,#000000ab,#0000008a 14%,#00000026 54%,#0000000d 72%,#0000 94%);height:99px;width:100%;font-family:YouTube Noto,Roboto,Arial,Helvetica,sans-serif;color:#eee;text-shadow:0 0 2px rgba(0,0,0,.5);font-size:18px;padding:25px 20px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box}lite-youtube:hover:before{color:#fff}lite-youtube:after{content:"";display:block;padding-bottom:56.25%}lite-youtube>iframe{width:100%;height:100%;position:absolute;top:0;left:0;border:0}lite-youtube>.lty-playbtn{display:block;width:100%;height:100%;background:no-repeat center/68px 48px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/><path d="M45 24 27 14v20" fill="white"/></svg>');position:absolute;cursor:pointer;z-index:1;filter:grayscale(100%);transition:filter .1s cubic-bezier(0,0,.2,1);border:0}lite-youtube:hover>.lty-playbtn,lite-youtube .lty-playbtn:focus{filter:none}lite-youtube.lyt-activated{cursor:unset}lite-youtube.lyt-activated:before,lite-youtube.lyt-activated>.lty-playbtn{opacity:0;pointer-events:none}.lyt-visually-hidden{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}lite-youtube>iframe{all:unset!important;width:100%!important;height:100%!important;position:absolute!important;inset:0!important;border:0!important}lite-vimeo{font-size:10px;background-color:#000;position:relative;display:block;contain:content;background-position:center center;background-size:cover}lite-vimeo:after{content:"";display:block;padding-bottom:56.25%}lite-vimeo>iframe{all:unset!important;width:100%!important;height:100%!important;position:absolute!important;inset:0!important;border:0!important}lite-vimeo>.ltv-playbtn{content:"";position:absolute;inset:0;width:100%;background:transparent;outline:0;border:0;cursor:pointer}lite-vimeo>.ltv-playbtn:before{width:6.5em;height:4em;background:#172322bf;opacity:.8;border-radius:.25rem;transition:all .2s cubic-bezier(0,0,.2,1)}lite-vimeo>.ltv-playbtn:focus:before{outline:auto}lite-vimeo:hover>.ltv-playbtn:before{background-color:#00adef;background-color:var(--ltv-color, #00adef);opacity:1}lite-vimeo>.ltv-playbtn:after{border-style:solid;border-width:1em 0 1em 1.7em;border-color:transparent transparent transparent #fff}lite-vimeo>.ltv-playbtn:before,lite-vimeo>.ltv-playbtn:after{content:"";position:absolute;top:50%;left:50%;transform:translate3d(-50%,-50%,0)}lite-vimeo.ltv-activated:before,lite-vimeo.ltv-activated>.ltv-playbtn{cursor:unset;opacity:0;pointer-events:none}
</style><script type="module" src="/pine-script-docs/_astro/hoisted.wfEHaJbk.js" data-astro-exec=""></script><style id="tv-pine-light" type="text/css" media="screen">.monaco-editor-tv-pine-light { 
.mtk1 { color: #131722; }
.mtk2 { color: #ffffff; }
.mtk3 { color: #808080; }
.mtk4 { color: #ff0000; }
.mtk5 { color: #0451a5; }
.mtk6 { color: #0000ff; }
.mtk7 { color: #098658; }
.mtk8 { color: #008000; }
.mtk9 { color: #9598a1; }
.mtk10 { color: #dd0000; }
.mtk11 { color: #cc2929; }
.mtk12 { color: #f57f17; }
.mtk13 { color: #000000; }
.mtk14 { color: #383838; }
.mtk15 { color: #0c3299; }
.mtk16 { color: #2962ff; }
.mtk17 { color: #8e24aa; }
.mtk18 { color: #22ab94; }
.mtk19 { color: #cd3131; }
.mtk20 { color: #863b00; }
.mtk21 { color: #af00db; }
.mtk22 { color: #800000; }
.mtk23 { color: #e00000; }
.mtk24 { color: #3030c0; }
.mtk25 { color: #666666; }
.mtk26 { color: #778899; }
.mtk27 { color: #c700c7; }
.mtk28 { color: #a31515; }
.mtk29 { color: #388e3c; }
.mtk30 { color: #4f76ac; }
.mtk31 { color: #008080; }
.mtk32 { color: #001188; }
.mtk33 { color: #2a2e39; }
.mtk34 { color: #4864aa; }
.mtki { font-style: italic; }
.mtkb { font-weight: bold; }
.mtku { text-decoration: underline; text-underline-position: under; }
.mtks { text-decoration: line-through; }
.mtks.mtku { text-decoration: underline line-through; text-underline-position: under; } }</style></head> <body> <div id="search-content-blur" hidden=""></div> <script data-astro-exec="">
	/* eslint-disable @typescript-eslint/typedef */
	window.ThemeProvider = (() => {
		function getCurrent() {
			return (
				// eslint-disable-next-line no-restricted-syntax
				typeof localStorage !== 'undefined' &&
				localStorage.getItem('tv-docs-theme')
			);
		}
		const storedTheme = getCurrent();
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ?
				'light'
			:	'dark');
		document.documentElement.dataset.theme =
			theme === 'light' ? 'light' : 'dark';
		document.documentElement.classList.toggle(
			'theme-dark',
			theme === 'dark',
		); // add support for ui-lib themes
		document.documentElement.classList.toggle(
			'sl-theme-dark',
			theme === 'dark',
		); // add support for shoelace themes

		return {
			updatePickers(themeArg = storedTheme || 'auto') {
				let currentTheme = themeArg;
				if (currentTheme === 'unknown') {
					currentTheme = getCurrent() || 'auto';
				}
				document
					.querySelectorAll('docs-theme-select')
					.forEach((picker) => {
						const select = picker.querySelector('select');
						if (select) select.value = currentTheme;
						/** @type {HTMLTemplateElement | null} */
						const tmpl = document.querySelector(`#theme-icons`);
						const newIcon =
							tmpl &&
							tmpl.content.querySelector('.' + currentTheme);
						if (newIcon) {
							const oldIcon =
								picker.querySelector('svg.label-icon');
							if (oldIcon) {
								oldIcon.replaceChildren(
									...newIcon.cloneNode(true).childNodes,
								);
							}
						}
					});
			},
		};
	})();
	/* eslint-enable @typescript-eslint/typedef */
</script><template id="theme-icons"><svg width="16" height="16" viewBox="0 0 28 28" class="light" data-icon="theme/sun-28">  <symbol id="ai:local:theme/sun-28"><g fill="currentColor"><path d="M14 3h1.5v5H14zm0 18h1.5v5H14zm12-5.5V14h-5v1.5zM8 14v1.5H3V14zm15.3-7-1-1-3.6 3.6 1.1 1 3.5-3.5ZM9.5 18.7l1.1 1.1-3.5 3.5-1-1zM22 23.3l1-1-3.6-3.6-1 1.1 3.5 3.5ZM10.3 9.6l-1.1 1-3.5-3.5 1-1z"></path><path fill-rule="evenodd" d="M19 14.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0m-1.5 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0" clip-rule="evenodd"></path></g></symbol><use xlink:href="#ai:local:theme/sun-28"></use>  </svg><svg width="16" height="16" viewBox="0 0 28 28" class="dark" data-icon="theme/moon-28">  <symbol id="ai:local:theme/moon-28"><path fill="currentColor" fill-rule="evenodd" d="M21 7.02A9.23 9.23 0 0 0 15.2 5 9.1 9.1 0 0 0 6 14c0 4.97 4.12 9 9.2 9a9.33 9.33 0 0 0 5.8-2.02A7 7 0 0 1 14.36 14 7 7 0 0 1 21 7.02m-3.95-.3a8 8 0 0 0-1.85-.22A7.6 7.6 0 0 0 7.5 14a7.6 7.6 0 0 0 7.7 7.5 8 8 0 0 0 1.85-.22A8.46 8.46 0 0 1 12.86 14c0-3.1 1.69-5.8 4.19-7.28" clip-rule="evenodd"></path></symbol><use xlink:href="#ai:local:theme/moon-28"></use>  </svg><svg width="16" height="16" viewBox="0 0 28 28" class="auto" data-icon="theme/system-28">  <symbol id="ai:local:theme/system-28"><path fill="currentColor" d="M8 4h1v2H8zm0 9v2h1v-2zm6-3V9h-2v1zM3 9v1h2V9zm5.5 3a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5m4.2-6-.7-.7-1.4 1.4.7.7zM5 13.7l-.7-.7 1.4-1.4.7.7zm7.7-.7-.7.7-1.4-1.4.7-.7zM4.3 6l.7-.7 1.4 1.4-.7.7zm3 17 14-14 .8.7L8 23.7zm17.2-.1a3.5 3.5 0 0 1-3.4-5.9H21a4 4 0 1 0 3.5 5.9"></path></symbol><use xlink:href="#ai:local:theme/system-28"></use>  </svg></template> <div class="backdrop" data-mobile-menu-backdrop="" data-astro-cid-h2irkosh=""></div> <div class="menu-container" data-astro-cid-h2irkosh=""> <div class="header" data-astro-cid-h2irkosh=""> <div class="header-group" data-astro-cid-h2irkosh=""> <div id="version-select" data-astro-cid-kx7qoxgq=""> <label style="--sl-select-width: undefined; --sl-label-icon-size: 16px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq="">Version</span>  <select value="v6" data-has-border="" no-icon="true" data-astro-cid-lmznfliq=""> <option value="v6" selected="true" data-astro-cid-lmznfliq="">Version 6</option><option value="v5" data-astro-cid-lmznfliq="">Version 5</option><option value="v4" data-astro-cid-lmznfliq="">Version 4</option><option value="v3" data-astro-cid-lmznfliq="">Version 3</option> </select> <svg width="16" height="16" viewBox="0 0 24 24" class="icon caret" data-astro-cid-lmznfliq="" data-icon="theme/down-caret">  <symbol id="ai:local:theme/down-caret"><path fill="currentColor" d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1 1 0 0 0 1.42 0L17 10.59a1 1 0 0 0 0-1.42"></path></symbol><use xlink:href="#ai:local:theme/down-caret"></use>  </svg> </label>  </div>   <docs-theme-select class="" data-astro-cid-3wpspbi7=""> <label style="--sl-select-width: 48px; --sl-label-icon-size: 28px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq="">Theme</span> <svg width="28" height="28" viewBox="0 0 28 28" class="icon label-icon" data-button="" data-round="" data-astro-cid-lmznfliq="" data-icon="theme/system-28">  <symbol id="ai:local:theme/system-28"><path fill="currentColor" d="M8 4h1v2H8zm0 9v2h1v-2zm6-3V9h-2v1zM3 9v1h2V9zm5.5 3a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5m4.2-6-.7-.7-1.4 1.4.7.7zM5 13.7l-.7-.7 1.4-1.4.7.7zm7.7-.7-.7.7-1.4-1.4.7-.7zM4.3 6l.7-.7 1.4 1.4-.7.7zm3 17 14-14 .8.7L8 23.7zm17.2-.1a3.5 3.5 0 0 1-3.4-5.9H21a4 4 0 1 0 3.5 5.9"></path></symbol><use xlink:href="#ai:local:theme/system-28"></use>  </svg> <select value="auto" data-button="" data-astro-cid-lmznfliq=""> <option value="dark" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Dark&nbsp;&nbsp;</option><option value="light" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Light&nbsp;&nbsp;</option><option value="auto" selected="true" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Auto&nbsp;&nbsp;</option> </select>  </label>  </docs-theme-select>   <script data-astro-exec="">
	ThemeProvider.updatePickers('unknown');
</script>  </div> <div class="header-group" data-astro-cid-h2irkosh="">  <div class="not-content" style="stroke-width:2px" data-astro-cid-pkzv2hgs=""> <button id="mobile-menu-back-button" title="Close menu" data-astro-cid-pkzv2hgs="" class="not-content stvb-base stvb-pointer stvb-gray stvb-medium stvb-primary stvb-icon">  <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-h2irkosh="" data-icon="theme/arrow-back">  <symbol id="ai:local:theme/arrow-back"><g fill="none"><g clip-path="url(#a)"><path stroke="var(--arrow-fill-color, #131722)" d="m17 20-6-6 6-6"></path></g><defs><clipPath id="a"><path fill="#fff" d="M28 28H0V0h28z"></path></clipPath></defs></g></symbol><use xlink:href="#ai:local:theme/arrow-back"></use>  </svg>  </button> </div>  </div> </div> <aside id="nav" class="keep-visible" style="--navbar-right-border-width: 0px" data-astro-cid-sa57sq6l=""> <div class="sidebar-viewport slick-scroll" data-astro-cid-sa57sq6l=""> <div class="sidebar" data-mobile="" data-astro-cid-sa57sq6l=""> <ul class="toc" aria-label="Docs sidebar" data-astro-cid-sa57sq6l=""> <li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/welcome" data-astro-cid-omxx3dey="">Welcome to Pine Script® v6</a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Pine Script® primer</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-steps" data-astro-cid-omxx3dey="">First steps</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-indicator" data-astro-cid-omxx3dey="">First indicator</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/next-steps" data-astro-cid-omxx3dey="">Next steps</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details open="" data-is-parent="" data-is-on-path="" data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Language</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/execution-model" data-astro-cid-omxx3dey="">Execution model</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/type-system" data-astro-cid-omxx3dey="">Type system</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/script-structure" data-astro-cid-omxx3dey="">Script structure</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/identifiers" data-astro-cid-omxx3dey="">Identifiers</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/variable-declarations" data-astro-cid-omxx3dey="">Variable declarations</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/operators" data-astro-cid-omxx3dey="">Operators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/conditional-structures" data-astro-cid-omxx3dey="">Conditional structures</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/loops" data-astro-cid-omxx3dey="">Loops</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/built-ins" data-astro-cid-omxx3dey="">Built-ins</a></li><li class="item" data-current="" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/user-defined-functions" data-astro-cid-omxx3dey="">User-defined functions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/objects" data-astro-cid-omxx3dey="">Objects</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/enums" data-astro-cid-omxx3dey="">Enums</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/methods" data-astro-cid-omxx3dey="">Methods</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/arrays" data-astro-cid-omxx3dey="">Arrays</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/matrices" data-astro-cid-omxx3dey="">Matrices</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/maps" data-astro-cid-omxx3dey="">Maps</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Visuals</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/overview" data-astro-cid-omxx3dey="">Overview</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/backgrounds" data-astro-cid-omxx3dey="">Backgrounds</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/bar-coloring" data-astro-cid-omxx3dey="">Bar coloring</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/bar-plotting" data-astro-cid-omxx3dey="">Bar plotting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/colors" data-astro-cid-omxx3dey="">Colors</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/fills" data-astro-cid-omxx3dey="">Fills</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/levels" data-astro-cid-omxx3dey="">Levels</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/lines-and-boxes" data-astro-cid-omxx3dey="">Lines and boxes</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/plots" data-astro-cid-omxx3dey="">Plots</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/tables" data-astro-cid-omxx3dey="">Tables</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/text-and-shapes" data-astro-cid-omxx3dey="">Text and shapes</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Concepts</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/alerts" data-astro-cid-omxx3dey="">Alerts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-states" data-astro-cid-omxx3dey="">Bar states</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/chart-information" data-astro-cid-omxx3dey="">Chart information</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/inputs" data-astro-cid-omxx3dey="">Inputs</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/libraries" data-astro-cid-omxx3dey="">Libraries</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/non-standard-charts-data" data-astro-cid-omxx3dey="">Non-standard charts data</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/other-timeframes-and-data" data-astro-cid-omxx3dey="">Other timeframes and data</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/repainting" data-astro-cid-omxx3dey="">Repainting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/sessions" data-astro-cid-omxx3dey="">Sessions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strategies" data-astro-cid-omxx3dey="">Strategies</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strings" data-astro-cid-omxx3dey="">Strings</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/time" data-astro-cid-omxx3dey="">Time</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/timeframes" data-astro-cid-omxx3dey="">Timeframes</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Writing scripts</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/style-guide" data-astro-cid-omxx3dey="">Style guide</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/debugging" data-astro-cid-omxx3dey="">Debugging</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/profiling-and-optimization" data-astro-cid-omxx3dey="">Profiling and optimization</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/publishing" data-astro-cid-omxx3dey="">Publishing scripts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/limitations" data-astro-cid-omxx3dey="">Limitations</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">FAQ</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/general" data-astro-cid-omxx3dey="">General</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/alerts" data-astro-cid-omxx3dey="">Alerts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/data-structures" data-astro-cid-omxx3dey="">Data structures</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/functions" data-astro-cid-omxx3dey="">Functions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/indicators" data-astro-cid-omxx3dey="">Indicators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/other-data-and-timeframes" data-astro-cid-omxx3dey="">Other data and timeframes</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/programming" data-astro-cid-omxx3dey="">Programming</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/strategies" data-astro-cid-omxx3dey="">Strategies</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/strings-and-formatting" data-astro-cid-omxx3dey="">Strings and formatting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/techniques" data-astro-cid-omxx3dey="">Techniques</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/times-dates-and-sessions" data-astro-cid-omxx3dey="">Times, dates, and sessions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/variables-and-operators" data-astro-cid-omxx3dey="">Variables and operators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/visuals" data-astro-cid-omxx3dey="">Visuals</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/error-messages" data-astro-cid-omxx3dey="">Error messages</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/release-notes" data-astro-cid-omxx3dey="">Release notes</a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Migration guides</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/overview" data-astro-cid-omxx3dey="">Overview</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-6" data-astro-cid-omxx3dey="">To Pine Script® version 6</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-5" data-astro-cid-omxx3dey="">To Pine Script® version 5</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-4" data-astro-cid-omxx3dey="">To Pine Script® version 4</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-3" data-astro-cid-omxx3dey="">To Pine Script® version 3</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-2" data-astro-cid-omxx3dey="">To Pine Script® version 2</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/where-can-i-get-more-information" data-astro-cid-omxx3dey="">Where can I get more information?</a></li> </ul> <div class="toc-bottom" data-astro-cid-sa57sq6l=""></div> </div> </div> </aside>  </div>   <header class="header" data-astro-cid-d74r2unp=""> <nav role="navigation" aria-label="Main Navigation" data-astro-cid-d74r2unp=""> <mobile-menu-button id="mobile-menu-button-wc" data-astro-cid-oojooh3d=""> <!-- Annoyingly I need to wrap this. TODO: improve this --> <div id="mobile-menu-button-header" data-astro-cid-oojooh3d=""> <div class="not-content" style="" data-astro-cid-pkzv2hgs=""> <button title="Open navigation menu" data-astro-cid-pkzv2hgs="" class="not-content stvb-base stvb-pointer stvb-gray stvb-medium stvb-secondary stvb-icon stvb-icon-force-color stvb-force-no-border">  <svg width="28" height="28" viewBox="0 0 24 24" data-astro-cid-oojooh3d="" data-icon="theme/bars">  <symbol id="ai:local:theme/bars"><path fill="currentColor" d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2m18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2m0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2"></path></symbol><use xlink:href="#ai:local:theme/bars"></use>  </svg>  </button> </div>  </div> </mobile-menu-button>   <div data-hide-when-search="" data-astro-cid-d74r2unp=""> <div class="header-logo" data-astro-cid-tycb33lk=""> <a href="/pine-script-docs/" aria-label="Home button" data-astro-cid-tycb33lk=""> <div class="documentation-logo logo" data-astro-cid-tycb33lk=""><!-- Old Christmas icon -->
<!-- 
<svg width="184" height="44" viewBox="0 0 184 44" fill="none" xmlns="http://www.w3.org/2000/svg">
	<path fill-rule="evenodd" clip-rule="evenodd" d="M33.8209 5.1219C33.885 4.95937 34.115 4.95937 34.1791 5.1219L35.2253 7.77465L37.8781 8.82088C38.0406 8.88499 38.0406 9.11501 37.8781 9.17912L35.2253 10.2253L34.1791 12.8781C34.115 13.0406 33.885 13.0406 33.8209 12.8781L32.7747 10.2253L30.1219 9.17912C29.9594 9.11501 29.9594 8.88499 30.1219 8.82088L32.7747 7.77465L33.8209 5.1219Z" fill="#F9A825"/>
    <path d="M5.30092 15.1478C5.37479 14.9605 5.63986 14.9605 5.71373 15.1478L6.60557 17.4091L8.86685 18.3009C9.05415 18.3748 9.05415 18.6399 8.86685 18.7137L6.60557 19.6056L5.71373 21.8669C5.63986 22.0541 5.37479 22.0541 5.30092 21.8669L4.40908 19.6056L2.1478 18.7137C1.9605 18.6399 1.9605 18.3748 2.1478 18.3009L4.40908 17.4091L5.30092 15.1478Z" fill="#F9A825"/>
    <path d="M11.8231 3.12041C11.8864 2.95986 12.1136 2.95986 12.1769 3.12041L12.9414 5.05865L14.8796 5.82308C15.0401 5.8864 15.0401 6.1136 14.8796 6.17692L12.9414 6.94135L12.1769 8.87959C12.1136 9.04014 11.8864 9.04014 11.8231 8.87959L11.0586 6.94135L9.12041 6.17692C8.95986 6.1136 8.95986 5.8864 9.12041 5.82308L11.0586 5.05865L11.8231 3.12041Z" fill="#F9A825"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M22.6478 7.35459L34.7627 21.6923C35.1531 22.1543 35.0472 22.8544 34.5376 23.1802L26.9989 28.0001L18.4281 20.7531L11.3382 23.2611C10.402 23.5923 9.60771 22.5041 10.2085 21.7134L21.0877 7.39502C21.4749 6.88536 22.2346 6.86567 22.6478 7.35459ZM33.432 28.0842L38.3592 34.7471C38.7427 35.2657 38.3724 36 37.7274 36H6.27248C5.62746 36 5.25722 35.2657 5.64074 34.7471L10.8523 27.6996C10.9484 27.5697 11.0822 27.4725 11.2356 27.4214L17.6878 25.2707C17.9285 25.1904 18.1932 25.2314 18.3984 25.3806L26.2854 31.1166C26.5445 31.3051 26.8922 31.3173 27.1639 31.1475L32.3838 27.885C32.7316 27.6677 33.1881 27.7544 33.432 28.0842Z" fill="#089981"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M17.6363 11.9375C20.7386 12.451 23.1213 11.505 24.9187 10.0422L25.8869 11.1881C23.6236 13.0379 20.553 14.1584 16.6261 13.267L17.6363 11.9375ZM34.0572 20.8573C30.0669 21.363 26.2864 20.8179 23.1264 19.7076C20.7393 18.8689 18.6873 17.7013 17.155 16.3997C16.5283 15.8674 15.9767 15.3021 15.5241 14.7174L16.4708 13.4713C16.8706 14.0544 17.4225 14.6588 18.1262 15.2565C19.5001 16.4237 21.3856 17.5061 23.6236 18.2924C26.3235 19.241 29.5087 19.7493 32.8863 19.4716L34.0572 20.8573ZM9.06812 30.1123C15.4775 33.3909 23.0493 33.8897 29.0345 32.0941C31.0827 31.4796 32.9275 30.6019 34.4713 29.4897L35.3633 30.6959C33.6586 31.9268 31.6497 32.8756 29.4655 33.5309C23.053 35.4546 14.9758 34.8964 8.16479 31.3339L9.06812 30.1123Z" fill="#45E5CB"/>
    <path d="M55.56 13.96C59.016 13.96 61.536 16.456 61.536 19.696C61.536 22.936 59.016 25.432 55.56 25.432H53.376V31H49.896V13.96H55.56ZM55.512 22.168C57.096 22.168 58.152 21.088 58.152 19.696C58.152 18.304 57.096 17.224 55.512 17.224H53.376V22.168H55.512ZM66.8636 14.944C66.8636 16.096 65.9276 17.032 64.7516 17.032C63.6236 17.032 62.6636 16.096 62.6636 14.944C62.6636 13.792 63.6236 12.856 64.7516 12.856C65.9276 12.856 66.8636 13.792 66.8636 14.944ZM63.1196 31V19H66.4076V31H63.1196ZM69.0849 31V19H72.3729V20.368C72.9969 19.408 74.2449 18.736 75.8049 18.736C78.7089 18.736 80.4369 20.848 80.4369 23.968V31H77.1489V24.52C77.1489 22.792 76.4049 21.736 75.0369 21.736C73.5249 21.736 72.3729 22.84 72.3729 25.144V31H69.0849ZM82.2041 25C82.2041 21.448 84.8681 18.736 88.5161 18.736C91.6601 18.736 94.4201 20.752 94.4201 24.64C94.4201 24.928 94.4201 25.264 94.3721 25.768H85.3961C85.5881 27.376 87.0041 28.264 88.5881 28.264C90.0761 28.264 91.1561 27.568 91.6841 26.752L94.1321 28.576C93.0281 30.184 91.0841 31.264 88.5641 31.264C84.9881 31.264 82.2041 28.792 82.2041 25ZM88.4201 21.448C87.1961 21.448 85.8281 22.072 85.5161 23.536H91.1321C90.8441 22.12 89.6441 21.448 88.4201 21.448ZM100.412 28.24L103.076 26.008C103.916 27.28 105.38 28.024 106.772 28.024C108.14 28.024 109.052 27.352 109.052 26.368C109.052 25.408 108.356 24.736 106.676 24.16L105.236 23.656C102.5 22.696 101.036 21.112 101.036 18.784C101.036 15.568 103.484 13.672 106.796 13.672C108.884 13.672 110.708 14.392 112.172 16.024L109.868 18.4C109.052 17.416 107.996 16.936 106.82 16.936C105.644 16.936 104.54 17.44 104.54 18.448C104.54 19.48 105.38 19.936 107.18 20.584L108.548 21.088C111.044 22 112.604 23.584 112.604 26.152C112.58 29.2 110.156 31.288 106.628 31.288C103.916 31.288 101.636 30.112 100.412 28.24ZM125.859 27.808C124.827 29.872 122.667 31.264 120.171 31.264C116.619 31.264 113.811 28.624 113.811 25C113.811 21.376 116.619 18.736 120.171 18.736C122.667 18.736 124.827 20.128 125.859 22.192L123.003 23.728C122.523 22.624 121.491 21.808 120.171 21.808C118.443 21.808 117.123 23.152 117.123 25C117.123 26.848 118.443 28.192 120.171 28.192C121.491 28.192 122.523 27.376 123.003 26.272L125.859 27.808ZM127.482 31V19H130.77V20.92C131.178 19.744 132.402 18.856 133.746 18.856C134.082 18.856 134.442 18.88 134.85 19V22.336C134.346 22.168 133.89 22.072 133.362 22.072C131.802 22.072 130.77 23.296 130.77 25.264V31H127.482ZM140.215 14.944C140.215 16.096 139.279 17.032 138.103 17.032C136.975 17.032 136.015 16.096 136.015 14.944C136.015 13.792 136.975 12.856 138.103 12.856C139.279 12.856 140.215 13.792 140.215 14.944ZM136.471 31V19H139.759V31H136.471ZM142.436 36.016V19H145.724V20.344C146.276 19.576 147.548 18.736 149.204 18.736C152.396 18.736 154.844 21.592 154.844 25C154.844 28.408 152.396 31.264 149.204 31.264C147.548 31.264 146.276 30.424 145.724 29.656V36.016H142.436ZM151.508 25C151.508 23.128 150.284 21.736 148.484 21.736C146.684 21.736 145.46 23.128 145.46 25C145.46 26.872 146.684 28.264 148.484 28.264C150.284 28.264 151.508 26.872 151.508 25ZM164.407 30.88C163.879 31.048 163.231 31.144 162.319 31.144C159.775 31.144 157.735 29.728 157.735 26.8V21.88H155.311V19H157.735V15.664H161.023V19H164.407V21.88H161.023V26.152C161.023 27.616 161.647 28.192 163.063 28.192C163.591 28.192 164.023 28.12 164.407 27.976V30.88ZM173.626 22.648V13.96H175.978L177.874 16.888L179.746 13.96H182.122V22.648H179.698V18.184L177.874 20.968L176.026 18.136V22.648H173.626ZM167.386 22.648V16.456H165.058V13.96H172.258V16.456H169.93V22.648H167.386Z" fill="currentColor"/>
</svg> -->



<!-- Regular icon -->

<svg width="177" height="44" viewBox="0 0 177 44" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M17.6876 25.2705C17.9283 25.1902 18.1933 25.2316 18.3985 25.3808L26.2852 31.1162C26.5444 31.3047 26.8924 31.3173 27.1641 31.1474L32.3839 27.8847C32.7316 27.6675 33.1878 27.7545 33.4317 28.084L38.3594 34.7471C38.7428 35.2656 38.3725 35.9999 37.7276 36H6.27253C5.62754 36 5.25723 35.2657 5.64069 34.7471L10.8526 27.6992C10.9486 27.5695 11.0824 27.4729 11.2354 27.4219L17.6876 25.2705ZM21.088 7.39451C21.4752 6.88532 22.2345 6.8659 22.6475 7.35448L34.7628 21.6924C35.1531 22.1544 35.0468 22.8548 34.5372 23.1806L26.9991 28L18.4278 20.7529L11.338 23.2607C10.4021 23.5917 9.60809 22.5044 10.2081 21.7139L21.088 7.39451ZM13.8243 20.2597L17.7608 18.8672C18.4309 18.6301 19.1771 18.7667 19.7198 19.2256L27.1641 25.5205L32.4981 22.1103L21.9259 9.59862L13.8243 20.2597Z" fill="currentColor"></path>
<path d="M147.308 16.959C150.499 16.959 152.948 19.8149 152.948 23.2227C152.948 26.6307 150.5 29.4873 147.308 29.4873C145.652 29.4872 144.38 28.6469 143.828 27.8789V34.2393H140.54V17.2227H143.828V18.5674C144.38 17.7994 145.652 16.9591 147.308 16.959ZM104.9 11.8955C106.988 11.8956 108.812 12.6152 110.276 14.2471L107.972 16.623C107.156 15.6392 106.1 15.1592 104.924 15.1592C103.748 15.1592 102.645 15.6631 102.645 16.6709C102.645 17.7029 103.484 18.1596 105.284 18.8076L106.652 19.3115C109.148 20.2235 110.708 21.8072 110.708 24.375C110.684 27.4229 108.26 29.5106 104.732 29.5107C102.02 29.5107 99.7396 28.3349 98.5156 26.4629L101.18 24.2314C102.02 25.5034 103.484 26.247 104.876 26.2471C106.244 26.2471 107.156 25.5748 107.156 24.5908C107.156 23.631 106.46 22.9587 104.78 22.3828L103.34 21.8789C100.604 20.9189 99.1396 19.3348 99.1396 17.0068C99.1398 13.791 101.588 11.8955 104.9 11.8955ZM86.6201 16.959C89.7641 16.959 92.5244 18.9753 92.5244 22.8633C92.5244 23.1513 92.5246 23.4873 92.4766 23.9912H83.5C83.692 25.5992 85.1084 26.4873 86.6924 26.4873C88.18 26.4872 89.26 25.7914 89.7881 24.9756L92.2363 26.7988C91.1323 28.4068 89.188 29.4873 86.668 29.4873C83.092 29.4872 80.3086 27.0146 80.3086 23.2227C80.3088 19.6709 82.9723 16.959 86.6201 16.959ZM118.275 16.959C120.771 16.9591 122.931 18.3512 123.963 20.415L121.107 21.9512C120.627 20.8473 119.595 20.0314 118.275 20.0312C116.548 20.0312 115.227 21.3749 115.227 23.2227C115.227 25.0707 116.547 26.415 118.275 26.415C119.595 26.4149 120.627 25.599 121.107 24.4951L123.963 26.0312C122.931 28.0951 120.771 29.4872 118.275 29.4873C114.723 29.4873 111.915 26.8467 111.915 23.2227C111.915 19.5989 114.724 16.959 118.275 16.959ZM159.127 17.2227H162.511V20.1035H159.127V24.375C159.127 25.839 159.751 26.415 161.167 26.415C161.695 26.415 162.127 26.3432 162.511 26.1992V29.1035C161.983 29.2715 161.335 29.3672 160.423 29.3672C157.879 29.3672 155.839 27.9512 155.839 25.0234V20.1035H153.415V17.2227H155.839V13.8867H159.127V17.2227ZM53.6641 12.1836C57.12 12.1836 59.6395 14.6791 59.6396 17.9189C59.6396 21.1589 57.12 23.6552 53.6641 23.6553H51.4805V29.2227H48V12.1836H53.6641ZM64.5117 29.2227H61.2236V17.2227H64.5117V29.2227ZM73.9092 16.959C76.813 16.9591 78.541 19.0715 78.541 22.1914V29.2227H75.2529V22.7432C75.2529 21.0152 74.5086 19.959 73.1406 19.959C71.6288 19.9591 70.4766 21.0633 70.4766 23.3672V29.2227H67.1885V17.2227H70.4766V18.5908C71.1006 17.6308 72.3492 16.959 73.9092 16.959ZM131.85 17.0791C132.186 17.0791 132.546 17.1027 132.954 17.2227V20.5596C132.45 20.3916 131.994 20.2949 131.466 20.2949C129.906 20.2949 128.874 21.5193 128.874 23.4873V29.2227H125.586V17.2227H128.874V19.1436C129.282 17.9676 130.506 17.0792 131.85 17.0791ZM137.862 29.2227H134.574V17.2227H137.862V29.2227ZM146.588 19.959C144.788 19.959 143.564 21.3509 143.563 23.2227C143.563 25.0947 144.788 26.4873 146.588 26.4873C148.388 26.4873 149.612 25.0947 149.612 23.2227C149.612 21.3509 148.388 19.959 146.588 19.959ZM169.993 9.76074C170.876 9.76079 171.697 9.9237 172.455 10.25C173.213 10.5764 173.881 11.0326 174.457 11.6182C175.043 12.1942 175.499 12.8617 175.825 13.6201C176.151 14.3783 176.314 15.1991 176.314 16.082C176.314 16.9556 176.152 17.7769 175.825 18.5449C175.499 19.3032 175.043 19.975 174.457 20.5605C173.881 21.1365 173.208 21.5877 172.44 21.9141C171.682 22.2404 170.867 22.4042 169.993 22.4043C169.12 22.4043 168.298 22.2405 167.53 21.9141C166.772 21.5877 166.1 21.1365 165.515 20.5605C164.939 19.975 164.488 19.3032 164.161 18.5449C163.835 17.7769 163.671 16.9556 163.671 16.082C163.671 15.2086 163.835 14.393 164.161 13.6348C164.488 12.8668 164.939 12.1942 165.515 11.6182C166.1 11.0327 166.772 10.5764 167.53 10.25C168.298 9.92362 169.12 9.76074 169.993 9.76074ZM86.5244 19.6709C85.3005 19.6709 83.9323 20.295 83.6201 21.7588H89.2363C88.9482 20.3431 87.7482 19.671 86.5244 19.6709ZM169.993 11.1865C169.312 11.1865 168.672 11.3109 168.077 11.5605C167.492 11.8101 166.974 12.1612 166.522 12.6123C166.071 13.0635 165.72 13.5865 165.471 14.1816C165.221 14.7671 165.097 15.4006 165.097 16.082C165.097 16.7634 165.221 17.402 165.471 17.9971C165.72 18.5827 166.071 19.1015 166.522 19.5527C166.974 20.0038 167.492 20.3539 168.077 20.6035C168.672 20.8531 169.312 20.9785 169.993 20.9785C170.675 20.9785 171.308 20.8531 171.894 20.6035C172.489 20.3539 173.012 20.0038 173.463 19.5527C173.914 19.1015 174.265 18.5827 174.515 17.9971C174.764 17.402 174.889 16.7634 174.889 16.082C174.889 15.4006 174.764 14.7671 174.515 14.1816C174.265 13.5865 173.914 13.0635 173.463 12.6123C173.012 12.1611 172.489 11.8101 171.894 11.5605C171.308 11.311 170.675 11.1866 169.993 11.1865ZM51.4805 20.3916H53.6162C55.2001 20.3915 56.2559 19.3109 56.2559 17.9189C56.2558 16.5271 55.2 15.4474 53.6162 15.4473H51.4805V20.3916ZM169.878 13.2314C170.406 13.2315 170.838 13.2932 171.174 13.418C171.519 13.5332 171.773 13.7163 171.937 13.9658C172.1 14.2154 172.182 14.5271 172.182 14.9014C172.182 15.2469 172.09 15.5494 171.908 15.8086C171.726 16.0581 171.481 16.2646 171.174 16.4277L172.815 18.9336H171.217L169.964 16.8027H169.445V18.9336H168.034V13.2314H169.878ZM169.445 15.751H169.849C170.127 15.751 170.348 15.6932 170.511 15.5781C170.674 15.4533 170.756 15.247 170.756 14.959C170.756 14.7383 170.684 14.5703 170.54 14.4551C170.396 14.3399 170.165 14.2822 169.849 14.2822H169.445V15.751ZM62.8555 11.0791C64.0314 11.0791 64.9677 12.0151 64.9678 13.167C64.9678 14.319 64.0315 15.2549 62.8555 15.2549C61.7275 15.2548 60.7676 14.3189 60.7676 13.167C60.7677 12.0151 61.7276 11.0792 62.8555 11.0791ZM136.207 11.0791C137.383 11.0793 138.318 12.0152 138.318 13.167C138.318 14.3188 137.383 15.2546 136.207 15.2549C135.079 15.2549 134.118 14.319 134.118 13.167C134.118 12.0151 135.079 11.0791 136.207 11.0791Z" fill="currentColor"></path>
</svg>
</div> </a> </div>  </div> <div class="flex" data-astro-cid-d74r2unp=""></div> <div class="flex" data-astro-cid-d74r2unp=""> <div class="search-container" data-astro-cid-fg37foga=""> <div class="search-wrapper" data-astro-cid-fg37foga=""> <input class="search-input" type="text" placeholder="Search docs" name="s" value="" data-astro-cid-fg37foga="" data-has-input-listener="true"> <svg width="28" height="28" viewBox="0 0 28 28" class="search-button" data-astro-cid-fg37foga="" data-icon="theme/search">  <symbol id="ai:local:theme/search"><path fill="currentColor" fill-rule="evenodd" d="M18.5 12.5a6 6 0 1 1-12 0 6 6 0 0 1 12 0m-1.25 5.8a7.5 7.5 0 1 1 1.06-1.06l4.22 4.23.53.53L22 23.06l-.53-.53-4.22-4.22Z" clip-rule="evenodd"></path></symbol><use xlink:href="#ai:local:theme/search"></use>  </svg> <button class="search-clear" type="button" title="Reset" data-search-clear="" data-astro-cid-fg37foga="">Clear</button> <span class="divider" data-astro-cid-fg37foga=""></span> <button class="search-close" type="button" title="Close" data-search-close="" data-astro-cid-fg37foga=""> <svg width="18" height="18" viewBox="0 0 18 18" data-astro-cid-fg37foga="" data-icon="theme/cross-18">  <use xlink:href="#ai:local:theme/cross-18"></use>  </svg> </button> </div> <div id="search-results-wrapper" data-astro-cid-fg37foga=""> <aside id="search-results" hidden="" data-astro-cid-fg37foga="" data-has-button-listener="true"> <!-- Don't use h1 because when built it will be used as the first heading on the page --> <div class="heading" data-astro-cid-fg37foga="">Search results</div> <div id="search-results-contents" data-astro-cid-fg37foga=""></div> </aside> </div> </div>   </div> <ul class="links" data-astro-cid-d74r2unp="">  </ul> <div class="flex" data-astro-cid-d74r2unp=""></div> <div data-hide-when-search="" data-astro-cid-d74r2unp=""> <div id="version-select" data-hideable="true" data-astro-cid-kx7qoxgq=""> <label style="--sl-select-width: undefined; --sl-label-icon-size: 16px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq="">Version</span>  <select value="v6" data-has-border="" no-icon="true" data-astro-cid-lmznfliq=""> <option value="v6" selected="true" data-astro-cid-lmznfliq="">Version 6</option><option value="v5" data-astro-cid-lmznfliq="">Version 5</option><option value="v4" data-astro-cid-lmznfliq="">Version 4</option><option value="v3" data-astro-cid-lmznfliq="">Version 3</option> </select> <svg width="16" height="16" viewBox="0 0 24 24" class="icon caret" data-astro-cid-lmznfliq="" data-icon="theme/down-caret">  <use xlink:href="#ai:local:theme/down-caret"></use>  </svg> </label>  </div>   </div> <button id="search-button" data-astro-cid-6zeqadij="" data-has-listener="true"> <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-6zeqadij="" data-icon="theme/search">  <use xlink:href="#ai:local:theme/search"></use>  </svg> </button>  <script data-base-url="/pine-script-docs" data-astro-exec="">
	async function loadPageFind() {
		const base = document.currentScript.getAttribute('data-base-url');
		const pageFindBundleUrl = `${base}/pagefind/`;
		const pagefind = await import(`${pageFindBundleUrl}pagefind.js`);
		await pagefind.options({
			bundlePath: pageFindBundleUrl,
		});
		window.pagefind = pagefind;
	}
	loadPageFind().catch();
</script>  <docs-theme-select class="hide-with-breakpoint-568" data-astro-cid-3wpspbi7=""> <label style="--sl-select-width: 48px; --sl-label-icon-size: 28px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq="">Theme</span> <svg width="28" height="28" viewBox="0 0 28 28" class="icon label-icon" data-button="" data-round="" data-astro-cid-lmznfliq="" data-icon="theme/system-28">  <symbol id="ai:local:theme/system-28"><path fill="currentColor" d="M8 4h1v2H8zm0 9v2h1v-2zm6-3V9h-2v1zM3 9v1h2V9zm5.5 3a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5m4.2-6-.7-.7-1.4 1.4.7.7zM5 13.7l-.7-.7 1.4-1.4.7.7zm7.7-.7-.7.7-1.4-1.4.7-.7zM4.3 6l.7-.7 1.4 1.4-.7.7zm3 17 14-14 .8.7L8 23.7zm17.2-.1a3.5 3.5 0 0 1-3.4-5.9H21a4 4 0 1 0 3.5 5.9"></path></symbol><use xlink:href="#ai:local:theme/system-28"></use>  </svg> <select value="auto" data-button="" data-astro-cid-lmznfliq=""> <option value="dark" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Dark&nbsp;&nbsp;</option><option value="light" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Light&nbsp;&nbsp;</option><option value="auto" selected="true" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Auto&nbsp;&nbsp;</option> </select>  </label>  </docs-theme-select>   <script data-astro-exec="">
	ThemeProvider.updatePickers('unknown');
</script>  </nav> </header>        <div id="image-lightbox" class="not-content" hidden="" data-astro-cid-kws7taxh=""> <div class="button-wrapper" data-astro-cid-kws7taxh=""> <div class="not-content" style="" data-astro-cid-pkzv2hgs=""> <button id="lightbox-close-button" title="Close image preview" data-astro-cid-pkzv2hgs="" class="not-content stvb-base stvb-pointer stvb-black stvb-medium stvb-secondary stvb-icon stvb-force-no-border">  <svg width="24" height="24" viewBox="0 0 18 18" data-astro-cid-kws7taxh="" data-icon="theme/cross-18">  <symbol id="ai:local:theme/cross-18"><g fill="none"><g clip-path="url(#a)"><path fill="currentColor" fill-rule="evenodd" d="M5.53 4.47 4.47 5.53 7.94 9l-3.47 3.47 1.06 1.06L9 10.06l3.47 3.47 1.06-1.06L10.06 9l3.47-3.47-1.06-1.06L9 7.94z" clip-rule="evenodd"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h18v18H0z"></path></clipPath></defs></g></symbol><use xlink:href="#ai:local:theme/cross-18"></use>  </svg>  </button> </div>  </div> <img id="lightbox-image" src="" data-astro-cid-kws7taxh=""> </div>   <div id="page-container" data-astro-cid-xgirumru=""> <aside id="nav" class="" style="" data-astro-cid-sa57sq6l=""> <div class="sidebar-viewport slick-scroll" data-astro-cid-sa57sq6l=""> <div class="sidebar" data-astro-cid-sa57sq6l=""> <ul class="toc" aria-label="Docs sidebar" data-astro-cid-sa57sq6l=""> <li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/welcome" data-astro-cid-omxx3dey="">Welcome to Pine Script® v6</a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Pine Script® primer</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <symbol id="ai:local:theme/right-caret"><path fill="currentColor" d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1 1 0 0 0 0-1.42"></path></symbol><use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-steps" data-astro-cid-omxx3dey="">First steps</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-indicator" data-astro-cid-omxx3dey="">First indicator</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/next-steps" data-astro-cid-omxx3dey="">Next steps</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details open="" data-is-parent="" data-is-on-path="" data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Language</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/execution-model" data-astro-cid-omxx3dey="">Execution model</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/type-system" data-astro-cid-omxx3dey="">Type system</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/script-structure" data-astro-cid-omxx3dey="">Script structure</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/identifiers" data-astro-cid-omxx3dey="">Identifiers</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/variable-declarations" data-astro-cid-omxx3dey="">Variable declarations</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/operators" data-astro-cid-omxx3dey="">Operators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/conditional-structures" data-astro-cid-omxx3dey="">Conditional structures</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/loops" data-astro-cid-omxx3dey="">Loops</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/built-ins" data-astro-cid-omxx3dey="">Built-ins</a></li><li class="item" data-current="" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/user-defined-functions" data-astro-cid-omxx3dey="">User-defined functions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/objects" data-astro-cid-omxx3dey="">Objects</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/enums" data-astro-cid-omxx3dey="">Enums</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/methods" data-astro-cid-omxx3dey="">Methods</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/arrays" data-astro-cid-omxx3dey="">Arrays</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/matrices" data-astro-cid-omxx3dey="">Matrices</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/maps" data-astro-cid-omxx3dey="">Maps</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Visuals</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/overview" data-astro-cid-omxx3dey="">Overview</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/backgrounds" data-astro-cid-omxx3dey="">Backgrounds</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/bar-coloring" data-astro-cid-omxx3dey="">Bar coloring</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/bar-plotting" data-astro-cid-omxx3dey="">Bar plotting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/colors" data-astro-cid-omxx3dey="">Colors</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/fills" data-astro-cid-omxx3dey="">Fills</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/levels" data-astro-cid-omxx3dey="">Levels</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/lines-and-boxes" data-astro-cid-omxx3dey="">Lines and boxes</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/plots" data-astro-cid-omxx3dey="">Plots</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/tables" data-astro-cid-omxx3dey="">Tables</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/text-and-shapes" data-astro-cid-omxx3dey="">Text and shapes</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Concepts</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/alerts" data-astro-cid-omxx3dey="">Alerts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-states" data-astro-cid-omxx3dey="">Bar states</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/chart-information" data-astro-cid-omxx3dey="">Chart information</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/inputs" data-astro-cid-omxx3dey="">Inputs</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/libraries" data-astro-cid-omxx3dey="">Libraries</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/non-standard-charts-data" data-astro-cid-omxx3dey="">Non-standard charts data</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/other-timeframes-and-data" data-astro-cid-omxx3dey="">Other timeframes and data</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/repainting" data-astro-cid-omxx3dey="">Repainting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/sessions" data-astro-cid-omxx3dey="">Sessions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strategies" data-astro-cid-omxx3dey="">Strategies</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strings" data-astro-cid-omxx3dey="">Strings</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/time" data-astro-cid-omxx3dey="">Time</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/timeframes" data-astro-cid-omxx3dey="">Timeframes</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Writing scripts</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/style-guide" data-astro-cid-omxx3dey="">Style guide</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/debugging" data-astro-cid-omxx3dey="">Debugging</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/profiling-and-optimization" data-astro-cid-omxx3dey="">Profiling and optimization</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/publishing" data-astro-cid-omxx3dey="">Publishing scripts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/limitations" data-astro-cid-omxx3dey="">Limitations</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">FAQ</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/general" data-astro-cid-omxx3dey="">General</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/alerts" data-astro-cid-omxx3dey="">Alerts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/data-structures" data-astro-cid-omxx3dey="">Data structures</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/functions" data-astro-cid-omxx3dey="">Functions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/indicators" data-astro-cid-omxx3dey="">Indicators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/other-data-and-timeframes" data-astro-cid-omxx3dey="">Other data and timeframes</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/programming" data-astro-cid-omxx3dey="">Programming</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/strategies" data-astro-cid-omxx3dey="">Strategies</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/strings-and-formatting" data-astro-cid-omxx3dey="">Strings and formatting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/techniques" data-astro-cid-omxx3dey="">Techniques</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/times-dates-and-sessions" data-astro-cid-omxx3dey="">Times, dates, and sessions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/variables-and-operators" data-astro-cid-omxx3dey="">Variables and operators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/visuals" data-astro-cid-omxx3dey="">Visuals</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/error-messages" data-astro-cid-omxx3dey="">Error messages</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/release-notes" data-astro-cid-omxx3dey="">Release notes</a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Migration guides</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/overview" data-astro-cid-omxx3dey="">Overview</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-6" data-astro-cid-omxx3dey="">To Pine Script® version 6</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-5" data-astro-cid-omxx3dey="">To Pine Script® version 5</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-4" data-astro-cid-omxx3dey="">To Pine Script® version 4</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-3" data-astro-cid-omxx3dey="">To Pine Script® version 3</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-2" data-astro-cid-omxx3dey="">To Pine Script® version 2</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/where-can-i-get-more-information" data-astro-cid-omxx3dey="">Where can I get more information?</a></li> </ul> <div class="toc-bottom" data-astro-cid-sa57sq6l=""></div> </div> </div> </aside>  <main class="main-pane" data-page-type="md" data-astro-cid-xgirumru=""> <a id="top" data-astro-cid-xgirumru=""></a> <main class="content" data-toc-shown="" data-astro-cid-ju3wuhkz="">  <div class="content-width" data-astro-cid-xgirumru=""> <div class="breadcrumbs" data-pagefind-ignore="" data-astro-cid-wlavna2o=""> <a href="/pine-script-docs" aria-label="Return back to the documentation home page." data-astro-cid-wlavna2o=""> <span data-astro-cid-wlavna2o="">User Manual</span>  </a>  <span class="divider" data-astro-cid-wlavna2o="">/</span> <a href="/pine-script-docs/language/execution-model" data-astro-cid-wlavna2o="">Language</a> <span class="divider" data-astro-cid-wlavna2o="">/</span> <span class="current-item" data-astro-cid-wlavna2o="">User-defined functions</span> </div>     </div> <div id="slot-container" data-astro-cid-xgirumru=""> <h1 id="user-defined-functions" class="md-heading"><a href="#user-defined-functions">User-defined <span class="fancy-wrap">functions<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h1>
<h2 id="introduction" class="md-heading"><a href="#introduction"> <span class="fancy-wrap">Introduction<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p><em>User-defined functions</em> are functions written by programmers, as opposed to the <a href="/pine-script-docs/language/built-ins/#built-in-functions">built-in functions</a> provided by Pine Script®. They help to encapsulate custom calculations that scripts perform conditionally or repeatedly, or to isolate logic in a single location for modularity and readability. Programmers often write functions to extend the capabilities of their scripts when no existing built-ins fit their needs.</p>
<p>A function definition consists of two main parts: a <em>header</em> and a <em>body</em>.</p>
<p><strong>Header</strong></p>
<p class="spacer-wrapper"><spacer></spacer>The header declares the function’s <em>signature</em>, i.e., its <em>name</em> and <em>parameters</em>. A script <em>calls</em> the function by creating an expression containing the function’s name followed by parentheses (e.g., <code dir="auto">f()</code>). If the function has declared parameters, calls to the function list <em>arguments</em> (values or references) for those parameters within the parentheses (e.g., <code dir="auto">f(x = 1)</code>).</p>
<p><strong>Body</strong></p>
<p class="spacer-wrapper"><spacer></spacer>The function’s body is the code that follows the header. Each <em>call</em> to the function performs the tasks defined by the expressions and statements in the function’s body.</p>
<p>Function definitions in Pine can use either of the following formats:</p>
<ul>
<li><a href="/pine-script-docs/language/user-defined-functions/#single-line-functions">Single-line</a> format, where the function’s header and body occupy only <em>one</em> line of code. This format is best suited for defining compact functions containing only minimal statements or expressions.</li>
<li><a href="/pine-script-docs/language/user-defined-functions/#multiline-functions">Multiline</a> format, where the <em>first</em> line defines the function’s header, and all <em>indented</em> lines that follow define the function’s body. This format is optimal for functions that require <a href="/pine-script-docs/language/conditional-structures/">conditional structures</a>, <a href="/pine-script-docs/language/loops/">loops</a>, or multiple other statements.</li>
</ul>
<p>Programmers can define functions for use only in a specific script, or create <em>library functions</em> for use in other scripts. Refer to our <a href="/pine-script-docs/writing/style-guide/">Style guide</a> for recommendations on where to include function definitions in a source code. To learn more about library functions and their unique requirements, see the <a href="/pine-script-docs/concepts/libraries/">Libraries</a> page.</p>
<p>Regardless of format, location, or use, several common characteristics and <a href="/pine-script-docs/language/user-defined-functions/#limitations">limitations</a> apply to every user-defined function, including the following:</p>
<ul>
<li>The function’s definition must be in the <a href="/pine-script-docs/faq/programming/#what-does-scope-mean">global scope</a>. Programmers cannot define functions inside the body of another function or the local blocks of any other structure.</li>
<li>The function cannot modify its declared parameters or any global variables.</li>
<li>The function can include calls to most other functions within its body, but it <em>cannot</em> include calls to <em>itself</em> or to functions that must be called from the <em>global scope</em>.</li>
<li>Each written call to the function must have consistent parameter <a href="/pine-script-docs/language/type-system/#types">types</a>, and therefore consistent <em>argument</em> types, across all executions.</li>
<li>Each call returns the result of evaluating the <em>final</em> statement or separate expression defined in the function’s body, and that result inherits the <em>strongest</em> <a href="/pine-script-docs/language/type-system/#qualifiers">type qualifier</a> used in the call’s calculations. As with parameter types, the call’s returned types must be consistent across executions.</li>
<li>Each written call to the function establishes a <em>new scope</em> from the function’s definition. The parameters, variables, and expressions created in that scope are <em>unique</em> and have an <em>independent</em> history; other calls to the function do not directly affect them.</li>
</ul>
<h2 id="structure-and-syntax" class="md-heading"><a href="#structure-and-syntax">Structure and <span class="fancy-wrap">syntax<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>A function definition can occupy a single line of code or multiple lines, depending on the expressions and statements that the function requires. The single-line and multiline formats are similar, with the key difference being the placement of the function’s <em>body</em>.</p>
<p>Single-line functions define their header and body on the same line of code:</p>
<div class="expressive-code not-content"><link rel="stylesheet" href="/pine-script-docs/_astro/ec.dtidy.css"><script type="module" src="/pine-script-docs/_astro/ec.qopfj.js" data-astro-exec=""></script><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">&lt;functionHeader&gt; =&gt; &lt;functionBody&gt;</span></div></div></code></pre></figure></div>
<p>In contrast, multiline functions define the body on separate lines of code following the header. The code block following the header line has an indentation of <em>four spaces</em> or a single tab:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">&lt;functionHeader&gt; =&gt;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#e1e4e8;--1:#24292e">    </span></span><span style="--0:#e1e4e8;--1:#24292e">&lt;functionBody&gt;</span></div></div></code></pre></figure></div>
<p>Both formats use the following syntax for defining the function’s <em>header</em>:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text" tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">[export ]&lt;functionName&gt;([[[paramQualifier ]&lt;paramType&gt; ]&lt;paramName&gt;[ = defaultValue], …]) =&gt;</span></div></div></code></pre></figure></div>
<p>Where:</p>
<ul>
<li>All parts within square brackets (<code dir="auto">[]</code>) represent <em>optional</em> syntax, and all parts within angle brackets (<code dir="auto">&lt;&gt;</code>) represent <em>required</em> syntax.</li>
<li><a href="https://www.tradingview.com/pine-script-reference/v6/#kw_export">export</a> is the optional keyword for exporting the function from a library, enabling its use in other scripts. See the <a href="/pine-script-docs/concepts/libraries/">Libraries</a> page to learn more.</li>
<li><code dir="auto">functionName</code> is the function’s identifier (name). The script calls the function by referencing this identifier, followed by parentheses.</li>
<li><code dir="auto">paramName</code> is the identifier for a declared <em>parameter</em>. The script can supply a specific <em>argument</em> (value or reference) to the parameter in each function call. A function header can contain zero or more parameter declarations.</li>
<li><code dir="auto">defaultValue</code> is the parameter’s default argument. If not specified, each call to the function requires an argument for the parameter. Otherwise, supplying an argument is optional.</li>
<li><code dir="auto">paramQualifier</code> and <code dir="auto">paramType</code> are qualifier and type <em>keywords</em>, which together specify the parameter’s <a href="/pine-script-docs/language/type-system/">qualified type</a>. Using these keywords is optional in most cases. If the declaration does not include them, the compiler determines the parameter’s type information automatically. See the <a href="/pine-script-docs/language/user-defined-functions/#declaring-parameter-types">Declaring parameter types</a> section to learn more.</li>
</ul>
<aside aria-label="Tip" class="tv-informer not-content" style="--informer-header-color:#089981;--informer-back-color-light:#DAF2EE;--informer-back-color-dark:#082621"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16Zm3.87-12.15c.36.2.49.66.28 1.02l-4 7a.75.75 0 0 1-1.18.16l-3-3a.75.75 0 1 1 1.06-1.06l2.3 2.3 3.52-6.14a.75.75 0 0 1 1.02-.28Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Tip</span>Programmers can also place the <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_method">method</a> keyword immediately before a function’s name to declare the function as a <em>method</em> for a <em>specific type</em>. All methods must include at least <em>one</em> parameter, and the first parameter <em>requires</em> a declared type. Refer to the <a href="/pine-script-docs/language/methods/">Methods</a> page for more information.</p></div></aside>
<p>Below is an example of a simple function header. The header declares that the function’s name is <code dir="auto">myFunction</code>, and that the function has two parameters named <code dir="auto">param1</code> and <code dir="auto">param2</code>:</p>
<div class="pine-colorizer not-content colorized" data-id="eh"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk15">myFunction</span><span class="mtk13">(</span><span class="mtk33">param1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">param2</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>Neither parameter has a <em>default</em> argument. Therefore, the script must supply arguments to these parameters in <em>every</em> <code dir="auto">myFunction()</code> call.</li>
<li>Because the function’s parameters do not include <a href="/pine-script-docs/language/user-defined-functions/#type-keywords">type keywords</a>, they inherit the <em>same</em> qualified type as their argument in each separate call.</li>
</ul>
<p>The following two sections explain the body structure of single-line and multiline functions.</p>
<h3 id="single-line-functions" class="md-heading"><a href="#single-line-functions">Single-line <span class="fancy-wrap">functions<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>A single-line function’s body begins and ends on the <em>same</em> line of code as the header. This format is convenient for defining compact functions that execute only simple statements and do not use <a href="/pine-script-docs/language/conditional-structures/">conditional structures</a> or <a href="/pine-script-docs/language/loops/">loops</a>. The syntax to define a single-line function is as follows:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">&lt;functionHeader&gt; =&gt; {statement, }&lt;returnExpression&gt;</span></div></div></code></pre></figure></div>
<p>Where:</p>
<ul>
<li><code dir="auto">functionHeader</code> declares the function’s <em>name</em> and <em>parameters</em>, as explained in the <a href="/pine-script-docs/language/user-defined-functions/#structure-and-syntax">previous section</a>.</li>
<li><code dir="auto">statement</code>, in curly brackets, represents zero or more statements or expressions that the function evaluates <em>before</em> returning a result. The function must separate all individual statements in its body with <em>commas</em>.</li>
<li><code dir="auto">returnExpression</code> is the <em>final</em> expression, variable, or <a href="/pine-script-docs/language/type-system/#tuples">tuple</a> in the function’s body. Each function call <em>returns</em> the result of evaluating this code.</li>
</ul>
<p>The following example defines an <code dir="auto">add()</code> function in single-line format. The function includes two parameters named <code dir="auto">val1</code> and <code dir="auto">val2</code>. The body of the function contains a single <a href="https://www.tradingview.com/pine-script-reference/v6/#op_+">+</a> operation that <em>adds</em> or <a href="/pine-script-docs/concepts/strings/#concatenation">concatenates</a> the parameter values, depending on their <a href="/pine-script-docs/language/type-system/#types">types</a>. Each call to the function returns the result of that operation:</p>
<div class="pine-colorizer not-content colorized" data-id="7pn"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk15">add</span><span class="mtk13">(</span><span class="mtk33">val1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">val2</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">val1</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">val2</span></span><br></code></div>
<p>A script that includes this function definition can call <code dir="auto">add()</code> with different arguments for <code dir="auto">val1</code> and <code dir="auto">val2</code>. The type of value returned by each call depends on these arguments. For example, the script below executes a few calls to <code dir="auto">add()</code>, then passes their results to the <code dir="auto">series</code>, <code dir="auto">title</code>, and <code dir="auto">linewidth</code> parameters in a call to <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plot">plot()</a>:</p>
<p><img src="/pine-script-docs/_astro/User-defined-functions-Structure-and-syntax-Single-line-functions-1.ZUSKhP6e_ZKc48j.webp" alt="image" width="2650" height="1140" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="4v6"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Simple&nbsp;single-line&nbsp;function&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk15">add</span><span class="mtk13">(</span><span class="mtk33">val1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">val2</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">val1</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">val2</span></span><br><span><span></span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">add</span><span class="mtk13">(</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;`open&nbsp;+&nbsp;close`&nbsp;&nbsp;("series&nbsp;float")</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">b</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">add</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;`bar_index&nbsp;+&nbsp;1`&nbsp;("series&nbsp;int")</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">c</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">add</span><span class="mtk13">(</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("const&nbsp;int")</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">d</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">add</span><span class="mtk13">(</span><span class="mtk33">add</span><span class="mtk13">(</span><span class="mtk29">"Test"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"&nbsp;"</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"plot"</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk9">//&nbsp;`"Test&nbsp;plot"`&nbsp;&nbsp;&nbsp;("const&nbsp;string")</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Create&nbsp;a&nbsp;plot&nbsp;using&nbsp;the&nbsp;`a`,&nbsp;`b`,&nbsp;`c`,&nbsp;and&nbsp;`d`&nbsp;</span><span class="mtk9">values.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">title</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">d</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">linewidth</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">c</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The <code dir="auto">val1</code> and <code dir="auto">val2</code> parameters automatically <em>inherit</em> the qualified types of their arguments in each <code dir="auto">add()</code> call, because the function’s header does not <a href="/pine-script-docs/language/user-defined-functions/#declaring-parameter-types">declare their types</a> using type and qualifier keywords.</li>
<li>Although the parameters accept arguments of any type, except for <a href="/pine-script-docs/language/type-system/#void">void</a>, an <code dir="auto">add()</code> function call compiles successfully only if the arguments have types that are <em>compatible</em> with the <a href="https://www.tradingview.com/pine-script-reference/v6/#op_+">+</a> operator, such as “int”, “float”, or “string”. As shown above, if the arguments are numbers (“int” or “float” values), the function performs <em>addition</em>. If they are strings, the function performs <em>concatenation</em>.</li>
<li>The value returned by each <code dir="auto">add()</code> call inherits the <em>strongest</em> <a href="/pine-script-docs/language/type-system/#qualifiers">type qualifier</a> used in the calculation. The first two calls return “series” results because both use at least one “series” value. In contrast, the other calls return “const” results, because all values in their calculations are <em>constants</em>.</li>
</ul>
<p>The body of a single-line function can contain a <em>comma-separated list</em> of statements and expressions. Each call to the function evaluates the list from left to right, treating each item as a separate line of code. The call returns the result of evaluating the <em>final</em> expression or statement in the list.</p>
<p>For example, the following script contains a <code dir="auto">zScore()</code> function defined in single-line format. The function computes the <a href="https://en.wikipedia.org/wiki/Standard_score" rel="nofollow">z-score</a> of a <code dir="auto">source</code> series over <code dir="auto">length</code> bars. Its body declares two variables, <code dir="auto">mean</code> and <code dir="auto">sd</code>, to hold the average and standard deviation of the series. The final expression in the body uses these variables to calculate the function’s returned value. On each bar, the script calls the <code dir="auto">zScore()</code> function using <a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a> as the <code dir="auto">source</code> argument and 20 as the <code dir="auto">length</code> argument, then plots the result:</p>
<p><img src="/pine-script-docs/_astro/User-defined-functions-Structure-and-syntax-Single-line-functions-2.BetlAr8S_1ryqEl.webp" alt="image" width="2652" height="1108" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="631"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Single-line&nbsp;function&nbsp;with&nbsp;more&nbsp;than&nbsp;one&nbsp;statement</span><span class="mtk29">&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Calculates&nbsp;the&nbsp;z-score&nbsp;of&nbsp;a&nbsp;`source`&nbsp;series&nbsp;over&nbsp;</span><span class="mtk9">`length`&nbsp;bars.</span></span><br><span><span class="mtk15">zScore</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">mean</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">sd</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.stdev</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk33">mean</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk33">sd</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;20-bar&nbsp;z-score&nbsp;of&nbsp;`close`&nbsp;values.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">osc</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">zScore</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`osc`&nbsp;series&nbsp;as&nbsp;color-coded&nbsp;columns.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">osc</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Z-score"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">osc</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.green</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.red</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_columns</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The <code dir="auto">source</code> parameter requires an “int” or “float” value because its declaration includes the <a href="https://www.tradingview.com/pine-script-reference/v6/#type_float">float</a> keyword. The <code dir="auto">length</code> parameter requires an “int” value because its declaration uses the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_int">int</a> keyword. See the <a href="/pine-script-docs/language/user-defined-functions/#declaring-parameter-types">Declaring parameter types</a> section to learn more.</li>
<li>The <code dir="auto">//@variable</code> and <code dir="auto">//@function</code> comments are <a href="/pine-script-docs/language/script-structure/#compiler-annotations">annotations</a> that document identifiers in the code. The <code dir="auto">//@function</code> annotation provides documentation for the <code dir="auto">zScore()</code> function. Users can hover over the function’s name in the Pine Editor, or write a function call, to view the annotation’s formatted text in a pop-up window. See the <a href="/pine-script-docs/language/user-defined-functions/#documenting-functions">Documenting functions</a> section for more information.</li>
</ul>
<aside aria-label="Tip" class="tv-informer not-content" style="--informer-header-color:#089981;--informer-back-color-light:#DAF2EE;--informer-back-color-dark:#082621"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16Zm3.87-12.15c.36.2.49.66.28 1.02l-4 7a.75.75 0 0 1-1.18.16l-3-3a.75.75 0 1 1 1.06-1.06l2.3 2.3 3.52-6.14a.75.75 0 0 1 1.02-.28Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Tip</span>Although it is possible to write single-line functions containing multiple statements, as shown above, using the <a href="/pine-script-docs/language/user-defined-functions/#multiline-functions">multiline</a> format is often preferred for readability. Programmers can list the statements on separate lines and add comments for each one.</p></div></aside>
<h3 id="multiline-functions" class="md-heading"><a href="#multiline-functions">Multiline <span class="fancy-wrap">functions<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>A multiline function defines its body using a <em>block</em> of code following the header line. The general syntax is as follows:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">&lt;functionHeader&gt; =&gt;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#e1e4e8;--1:#24292e">    </span></span><span style="--0:#e1e4e8;--1:#24292e">[statements]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#e1e4e8;--1:#24292e">    </span></span><span style="--0:#e1e4e8;--1:#24292e">…</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#e1e4e8;--1:#24292e">    </span></span><span style="--0:#e1e4e8;--1:#24292e">&lt;returnExpression&gt;</span></div></div></code></pre></figure></div>
<p>Where:</p>
<ul>
<li><code dir="auto">functionHeader</code> declares the function’s <em>name</em> and <em>parameters</em>. See the <a href="/pine-script-docs/language/user-defined-functions/#structure-and-syntax">Structure and syntax</a> section above to learn the syntax for function headers.</li>
<li><code dir="auto">statements</code> is an optional block of statements and expressions that the function evaluates <em>before</em> returning a result. Single lines in the body can also contain <em>multiple</em> statements separated by commas.</li>
<li><code dir="auto">returnExpression</code> is the <em>final</em> statement, expression, variable, or tuple at the end of the body. Each call to the function returns the result of this code. If the end of the function’s body is a comma-separated list of statements or expressions, <code dir="auto">returnExpression</code> is the code at the end of that list. If the final statement is a <a href="/pine-script-docs/language/conditional-structures/">conditional structure</a> or <a href="/pine-script-docs/language/loops/">loop</a>, the function returns that structure’s result.</li>
<li>Each line of code following the function’s header has an indentation of <em>four spaces</em> or a tab, signifying that it belongs to the function’s scope. The function’s body ends on the final indented line; all non-indented code following the definition belongs to the <em>global</em> scope.</li>
</ul>
<p>The multiline format is well-suited for defining functions that perform multiple tasks. Programmers can organize all the function’s statements across different lines and document them with comments for readability.</p>
<p>In the following example, we modified the second script from the <a href="/pine-script-docs/language/user-defined-functions/#single-line-functions">Single-line functions</a> section to define an equivalent <code dir="auto">zScore()</code> function using the multiline format. The function’s <a href="/pine-script-docs/language/variable-declarations/">variable declarations</a> and return expression are now on <em>separate</em> indented lines, and we’ve added comments inside the body to describe the function’s calculations:</p>
<div class="pine-colorizer not-content colorized" data-id="6wt"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Multiline&nbsp;function&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Calculates&nbsp;the&nbsp;z-score&nbsp;of&nbsp;a&nbsp;`source`&nbsp;series&nbsp;over&nbsp;</span><span class="mtk9">`length`&nbsp;bars.</span></span><br><span><span class="mtk15">zScore</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Calculate&nbsp;the&nbsp;mean&nbsp;and&nbsp;standard&nbsp;deviation&nbsp;of&nbsp;th</span><span class="mtk9">e&nbsp;series.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">mean</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">sd</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.stdev</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Compute&nbsp;the&nbsp;z-score&nbsp;using&nbsp;the&nbsp;`mean`&nbsp;and&nbsp;`sd`&nbsp;v</span><span class="mtk9">alues,&nbsp;and&nbsp;return&nbsp;the&nbsp;result.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk33">mean</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk33">sd</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;20-bar&nbsp;z-score&nbsp;of&nbsp;`close`&nbsp;values.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">osc</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">zScore</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`osc`&nbsp;series&nbsp;as&nbsp;color-coded&nbsp;columns.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">osc</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Z-score"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">osc</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.green</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.red</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_columns</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>We added the <a href="https://www.tradingview.com/pine-script-reference/v6/#type_float">float</a> keyword to the <code dir="auto">mean</code> and <code dir="auto">sd</code> declarations to declare their <a href="/pine-script-docs/language/type-system/#types">types</a> in the code. The keyword is <em>optional</em> in both variable declarations because the compiler can determine the correct types from the assigned values, but including it helps promote readability.</li>
</ul>
<p>Programmers often define multiline functions to encapsulate complex or logical tasks involving <a href="/pine-script-docs/language/loops/">loops</a> or <a href="/pine-script-docs/language/conditional-structures/">conditional structures</a>. If the final part of a function’s body contains one of these structures, a call to the function returns the result of evaluating that structure.</p>
<p>For example, the <code dir="auto">smoothMedian()</code> function in the script below calculates the median of a <code dir="auto">source</code> series over <code dir="auto">length</code> bars, then smooths the result using a moving average specified by the <code dir="auto">avgType</code> parameter. The function compares the <code dir="auto">avgType</code> value in a <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_switch">switch</a> statement to select the type of average that it returns. The script calls the function to calculate the median of <a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a> values over 10 bars, smoothed by an <a href="https://www.tradingview.com/support/solutions/43000592270-exponential-moving-average/">EMA</a> with the same length, and then plots the result on the chart:</p>
<p><img src="/pine-script-docs/_astro/User-defined-functions-Structure-and-syntax-Multiline-functions-1.BxkB4CE1_Zoo4No.webp" alt="image" width="2654" height="1050" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="4ua"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Multiline&nbsp;function&nbsp;with&nbsp;conditional&nbsp;structure&nbsp;dem</span><span class="mtk29">o"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">behind_chart</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">false</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Calculates&nbsp;the&nbsp;median&nbsp;of&nbsp;`source`&nbsp;over&nbsp;`length`&nbsp;b</span><span class="mtk9">ars,&nbsp;then&nbsp;returns&nbsp;a&nbsp;moving&nbsp;average&nbsp;of&nbsp;the&nbsp;median.</span></span><br><span><span class="mtk15">smoothMedian</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">avgType</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"ema"</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;median&nbsp;of&nbsp;the&nbsp;`source`&nbsp;series.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">median</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.median</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Calculate&nbsp;the&nbsp;EMA,&nbsp;SMA,&nbsp;and&nbsp;WMA&nbsp;of&nbsp;`median`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">ema</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.ema</span><span class="mtk13">(</span><span class="mtk33">median</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">sma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk33">median</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">wma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.wma</span><span class="mtk13">(</span><span class="mtk33">median</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Return&nbsp;`ema`,&nbsp;`sma`,&nbsp;or&nbsp;`wma`,&nbsp;depending&nbsp;on&nbsp;the</span><span class="mtk9">&nbsp;`avgType`&nbsp;value.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">switch</span><span class="mtk1">&nbsp;</span><span class="mtk33">avgType</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"ema"</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">ema</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"sma"</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">sma</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"wma"</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">wma</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;EMA&nbsp;of&nbsp;the&nbsp;10-bar&nbsp;median&nbsp;of&nbsp;`close`&nbsp;values.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">medSmooth</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">smoothMedian</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`medSmooth`&nbsp;series&nbsp;as&nbsp;a&nbsp;color-coded&nbsp;li</span><span class="mtk9">ne.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">medSmooth</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Smoothed&nbsp;median"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">medSmooth</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.maroon</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The <code dir="auto">smoothMedian()</code> call in this example does not supply an argument to the <code dir="auto">avgType</code> parameter. Specifying an argument is <em>optional</em>, because the parameter declaration includes a <em>default argument</em> (<code dir="auto">"ema"</code>).</li>
<li>We included empty lines between each section for readability. The lines that follow an empty line are considered part of the function as long as they are indented correctly.</li>
</ul>
<h2 id="functions-that-return-multiple-results" class="md-heading"><a href="#functions-that-return-multiple-results">Functions that return multiple <span class="fancy-wrap">results<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>Sometimes, a function must perform multiple calculations and return separate results for each one. Programmers can write functions that return <em>multiple</em> values or references by using a <a href="/pine-script-docs/language/type-system/#tuples">tuple</a> as the <em>final statement</em> in the function’s body. A tuple is a comma-separated list of expressions enclosed in square brackets (<code dir="auto">[]</code>). Every call to a function with a tuple at the end of its body returns the result of evaluating each listed expression in order.</p>
<p>For example, the <code dir="auto">sumDiff()</code> function below calculates both the sum and difference of the values passed to its <code dir="auto">val1</code> and <code dir="auto">val2</code> parameters. Its body consists of a two-item tuple containing the addition and subtraction <a href="/pine-script-docs/language/operators/">operations</a>:</p>
<div class="pine-colorizer not-content colorized" data-id="61b"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Returns&nbsp;a&nbsp;tuple&nbsp;containing&nbsp;the&nbsp;sum&nbsp;and&nbsp;difference</span><span class="mtk9">&nbsp;between&nbsp;the&nbsp;`val1`&nbsp;and&nbsp;`val2`&nbsp;values,&nbsp;respectivel</span><span class="mtk9">y.</span></span><br><span><span class="mtk15">sumDiff</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">val1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">val2</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">[</span><span class="mtk33">val1</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">val2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">val1</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk33">val2</span><span class="mtk13">]</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The <code dir="auto">val1</code> and <code dir="auto">val2</code> parameters include the <a href="https://www.tradingview.com/pine-script-reference/v6/#type_float">float</a> keyword in their declarations. Therefore, both parameters are of the type “float”, and they accept only “float” or “int” arguments. See the <a href="/pine-script-docs/language/user-defined-functions/#declaring-parameter-types">Declaring parameter types</a> section for more information.</li>
</ul>
<p>Because the end of the function’s body is a two-item tuple, each call to the function always returns two separate values. To assign the function’s results to variables, the script must use a <a href="/pine-script-docs/language/variable-declarations/#tuple-declarations">tuple declaration</a> containing one <em>new</em> variable for each returned item. It is <em>not</em> possible to reassign existing tuples or to use previously declared variables within them.</p>
<p>The following example calls <code dir="auto">sumDiff()</code> to calculate the sum and difference between two pseudorandom values. The script uses a tuple declaration containing two variables, <code dir="auto">sum</code> and <code dir="auto">diff</code>, to store the values returned by the call. Then, it plots the values of those variables on the chart:</p>
<p><img src="/pine-script-docs/_astro/User-defined-functions-Functions-that-return-multiple-results-1.CVZCb-PO_15cSiL.webp" alt="image" width="2654" height="1046" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="212"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Functions&nbsp;that&nbsp;return&nbsp;multiple&nbsp;results&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Returns&nbsp;a&nbsp;tuple&nbsp;containing&nbsp;the&nbsp;sum&nbsp;and&nbsp;difference</span><span class="mtk9">&nbsp;between&nbsp;the&nbsp;`val1`&nbsp;and&nbsp;`val2`&nbsp;values,&nbsp;respectivel</span><span class="mtk9">y.</span></span><br><span><span class="mtk15">sumDiff</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">val1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">val2</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">[</span><span class="mtk33">val1</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">val2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">val1</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk33">val2</span><span class="mtk13">]</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Call&nbsp;`sumDiff()`&nbsp;with&nbsp;two&nbsp;pseudorandom&nbsp;argument</span><span class="mtk9">s,&nbsp;and&nbsp;use&nbsp;a&nbsp;tuple&nbsp;declaration&nbsp;with&nbsp;one&nbsp;variable&nbsp;f</span><span class="mtk9">or&nbsp;each&nbsp;separate&nbsp;result.</span></span><br><span><span class="mtk13">[</span><span class="mtk33">sum</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">diff</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">sumDiff</span><span class="mtk13">(</span><span class="mtk16">math.random</span><span class="mtk13">()</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.random</span><span class="mtk13">())</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`sum`&nbsp;and&nbsp;`diff`&nbsp;series.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">sum</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk29">"Sum"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">diff</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Difference"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.maroon</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<p>In some cases, a script might not require <em>all</em> the results from the tuple returned by a function call. Instead of writing unique identifiers for every variable in the tuple declaration, programmers can <a href="/pine-script-docs/language/variable-declarations/#using-an-underscore-_-as-an-identifier">use an underscore</a> as the identifier for each variable that the script does not require. All variables with the name <code dir="auto">_</code> are <em>not usable</em> in the script’s calculations.</p>
<p>For example, if we change <code dir="auto">sum</code> to <code dir="auto">_</code> in the previous script’s tuple declaration, the first value returned by the <code dir="auto">sumDiff()</code> call is <em>inaccessible</em> to the script. Attempting to use the identifier elsewhere in the code causes a <em>compilation error</em>, as shown by the first <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plot">plot()</a> call in the script version below:</p>
<div class="pine-colorizer not-content colorized" data-id="3nx"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Using&nbsp;`_`&nbsp;in&nbsp;a&nbsp;tuple&nbsp;declaration&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Returns&nbsp;a&nbsp;tuple&nbsp;containing&nbsp;the&nbsp;sum&nbsp;and&nbsp;difference</span><span class="mtk9">&nbsp;between&nbsp;the&nbsp;`val1`&nbsp;and&nbsp;`val2`&nbsp;values,&nbsp;respectivel</span><span class="mtk9">y.</span></span><br><span><span class="mtk15">sumDiff</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">val1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">val2</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">[</span><span class="mtk33">val1</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">val2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">val1</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk33">val2</span><span class="mtk13">]</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Declare&nbsp;a&nbsp;tuple&nbsp;with&nbsp;`_`&nbsp;as&nbsp;the&nbsp;first&nbsp;identifie</span><span class="mtk9">r,&nbsp;meaning&nbsp;the&nbsp;first&nbsp;item&nbsp;returned&nbsp;by&nbsp;`sumDiff()`&nbsp;</span><span class="mtk9">(the&nbsp;sum)&nbsp;is</span></span><br><span><span class="mtk9">//&nbsp;inaccessible&nbsp;to&nbsp;the&nbsp;script.</span></span><br><span><span class="mtk13">[</span><span class="mtk33">_</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">diff</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">sumDiff</span><span class="mtk13">(</span><span class="mtk16">math.random</span><span class="mtk13">()</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.random</span><span class="mtk13">())</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;The&nbsp;first&nbsp;`plot()`&nbsp;call&nbsp;now&nbsp;causes&nbsp;an&nbsp;error,&nbsp;be</span><span class="mtk9">cause&nbsp;all&nbsp;`_`&nbsp;variables&nbsp;are&nbsp;*not&nbsp;usable*&nbsp;in&nbsp;a&nbsp;scri</span><span class="mtk9">pt's&nbsp;calculations.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">_</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"Sum"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">diff</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Difference"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.maroon</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<aside aria-label="Note" class="tv-informer not-content" style="--informer-header-color:#6A6D78;--informer-back-color-light:#F0F3FA;--informer-back-color-dark:#2A2E39"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM8 6a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 2c.49 0 1 .59 1 1v3.01c0 .42-.51.99-1 .99s-1-.57-1-.99V9c0-.41.51-1 1-1Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Note</span>The items in a function’s returned tuple can have <em>different</em> <a href="/pine-script-docs/language/type-system/#types">types</a>. However, functions <em>cannot</em> return multiple results with different <a href="/pine-script-docs/language/type-system/#qualifiers">type qualifiers</a>. Therefore, <em>all</em> items in a returned tuple automatically inherit the <em>same qualifier</em>. If the tuple does not rely on a “series” value, all the items in the tuple typically inherit the <em>“simple”</em> qualifier. Otherwise, all items inherit the <em>“series”</em> qualifier. See the <a href="/pine-script-docs/language/type-system/#tuples">Tuples</a> section of the <a href="/pine-script-docs/language/type-system/">Type system</a> page for an example.</p></div></aside>
<h2 id="declaring-parameter-types" class="md-heading"><a href="#declaring-parameter-types">Declaring parameter <span class="fancy-wrap">types<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>User-defined function definitions can prefix each parameter declaration with type and qualifier <em>keywords</em>, enabling strict control over the qualified types that a script can pass to the parameter in any function call. If a declaration does not include these keywords, the compiler automatically determines the parameter’s qualified type based on its arguments and the function’s structure.</p>
<p>The sections below explain how type and qualifier keywords affect the behavior of function parameters. For detailed information about Pine’s types and qualifiers, refer to the <a href="/pine-script-docs/language/type-system/">Type system</a> page.</p>
<h3 id="type-keywords" class="md-heading"><a href="#type-keywords">Type <span class="fancy-wrap">keywords<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>Parameter declarations prefixed by <em>type keywords</em> — such as <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_int">int</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#type_float">float</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#type_string">string</a>, or <a href="https://www.tradingview.com/pine-script-reference/v6/#type_label">label</a> — declare the <a href="/pine-script-docs/language/type-system/#types">types</a> of data that the parameters represent in any function call. If a parameter declaration includes a type keyword, it accepts only arguments of that type, or arguments that Pine can automatically <a href="/pine-script-docs/language/type-system/#type-casting">cast</a> to that type.</p>
<p>If a function parameter does <em>not</em> have a type keyword in its declaration, its type is initially <em>undefined</em>. In each separate call to the function, the parameter automatically inherits the <em>same</em> type as its specified argument. In other words, the parameter can take on <em>any type</em>, except for <a href="/pine-script-docs/language/type-system/#void">void</a>, depending on the function call.</p>
<p>The following example demonstrates this behavior. The user-defined <code dir="auto">pass()</code> function in the script below returns the value of the <code dir="auto">source</code> parameter without performing additional calculations. The parameter’s declaration does not include a type keyword. The script executes five calls to the function with different argument types and then uses their results in code that accepts those types. This script compiles successfully, because each call’s version of the <code dir="auto">source</code> parameter inherits its argument’s type:</p>
<p><img src="/pine-script-docs/_astro/User-defined-functions-Declaring-parameter-types-Type-keywords-1.zDkkXyfc_9KdIq.webp" alt="image" width="2652" height="870" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="37o"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Undefined&nbsp;parameter&nbsp;types&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;`source`&nbsp;argument&nbsp;withou</span><span class="mtk9">t&nbsp;modification.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Each&nbsp;written&nbsp;call&nbsp;to&nbsp;the&nbsp;function&nbsp;can&nbsp;</span><span class="mtk9">accept&nbsp;an&nbsp;argument&nbsp;of&nbsp;*any*&nbsp;type&nbsp;except&nbsp;for&nbsp;"void"</span><span class="mtk9">.</span></span><br><span><span class="mtk15">pass</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">source</span></span><br><span><span></span></span><br><span><span class="mtk33">plotSeries</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">pass</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk13">)</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;"series&nbsp;int"</span></span><br><span><span class="mtk33">lineWidth</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">pass</span><span class="mtk13">(</span><span class="mtk12">3</span><span class="mtk13">)</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;"const&nbsp;int"</span></span><br><span><span class="mtk33">plotTitle</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">pass</span><span class="mtk13">(</span><span class="mtk29">"Test&nbsp;plot"</span><span class="mtk13">)</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;"const&nbsp;string"</span></span><br><span><span class="mtk33">plotColor</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">pass</span><span class="mtk13">(</span><span class="mtk11">chart.fg_color</span><span class="mtk13">)</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;"input&nbsp;color"</span></span><br><span><span class="mtk33">plotDisplay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">pass</span><span class="mtk13">(</span><span class="mtk11">display.all</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk11">display.status_line</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk9">//&nbsp;"const&nbsp;plot_display"</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Create&nbsp;a&nbsp;plot&nbsp;using&nbsp;the&nbsp;values&nbsp;from&nbsp;the&nbsp;five&nbsp;`p</span><span class="mtk9">ass()`&nbsp;calls.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">plotSeries</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotTitle</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lineWidth</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">display</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotDisplay</span><span class="mtk13">)</span></span><br></code></div>
<p>We can restrict the <code dir="auto">source</code> parameter’s type, and thus the arguments it can accept, by including a type keyword in its declaration. For example, in the modified script below, we added the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_int">int</a> keyword to the declaration to specify that the parameter’s type is “int”. With this change, the last three <code dir="auto">pass()</code> calls now cause a compilation error, because the parameter no longer allows “string”, “color”, or “plot_display” arguments:</p>
<div class="pine-colorizer not-content colorized" data-id="2gt"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Declared&nbsp;parameter&nbsp;type&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;`source`&nbsp;argument.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;argument&nbsp;in&nbsp;each&nbsp;call&nbsp;must&nbsp;be&nbsp;an&nbsp;i</span><span class="mtk9">nteger.&nbsp;No&nbsp;other&nbsp;type&nbsp;is&nbsp;allowed.</span></span><br><span><span class="mtk15">pass</span><span class="mtk13">(</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">source</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;These&nbsp;two&nbsp;calls&nbsp;are&nbsp;valid,&nbsp;because&nbsp;their&nbsp;argume</span><span class="mtk9">nts&nbsp;are&nbsp;"int"&nbsp;values.</span></span><br><span><span class="mtk33">plotSeries</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">pass</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk13">)</span></span><br><span><span class="mtk33">lineWidth</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">pass</span><span class="mtk13">(</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;These&nbsp;three&nbsp;calls&nbsp;cause&nbsp;an&nbsp;error,&nbsp;because&nbsp;the&nbsp;`</span><span class="mtk9">pass()`&nbsp;function&nbsp;no&nbsp;longer&nbsp;allows&nbsp;non-integer&nbsp;argu</span><span class="mtk9">ments.</span></span><br><span><span class="mtk33">plotTitle</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">pass</span><span class="mtk13">(</span><span class="mtk29">"Test&nbsp;plot"</span><span class="mtk13">)</span></span><br><span><span class="mtk33">plotColor</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">pass</span><span class="mtk13">(</span><span class="mtk11">chart.fg_color</span><span class="mtk13">)</span></span><br><span><span class="mtk33">plotDisplay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">pass</span><span class="mtk13">(</span><span class="mtk11">display.all</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk11">display.status_line</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Create&nbsp;a&nbsp;plot&nbsp;using&nbsp;the&nbsp;values&nbsp;from&nbsp;the&nbsp;five&nbsp;`p</span><span class="mtk9">ass()`&nbsp;calls.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">plotSeries</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotTitle</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lineWidth</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">display</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotDisplay</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>If a parameter declaration includes a type keyword <em>without</em> a qualifier keyword, such as <a href="https://www.tradingview.com/pine-script-reference/v6/#type_const">const</a> or <a href="https://www.tradingview.com/pine-script-reference/v6/#type_simple">simple</a>, the compiler automatically sets the qualifier to <em>“series”</em> or <em>“simple”</em>, depending on the function’s calculations. In this example, the <code dir="auto">source</code> parameter’s type is “series int”, because the function’s logic does not require a “simple” or weaker qualifier. See the <a href="/pine-script-docs/language/user-defined-functions/#qualifier-keywords">Qualifier keywords</a> section to learn more.</li>
</ul>
<p>In most cases, type keywords are <em>optional</em> in parameter declarations. However, specifying a parameter’s type is <em>required</em> if:</p>
<ul>
<li>The parameter’s default argument is an <a href="language/type-system/#na-value"><code dir="auto">na</code> value</a>.</li>
<li>The parameter declaration includes a <em>qualifier keyword</em>.</li>
<li>The function definition includes the <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_export">export</a> keyword. Exported functions require declared types for <em>every</em> parameter. See the <a href="/pine-script-docs/concepts/libraries/">Libraries</a> page to learn more.</li>
<li>The function definition includes the <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_method">method</a> keyword, and the parameter is the <em>first</em> one listed in the header. See the <a href="/pine-script-docs/language/methods/#user-defined-methods">User-defined methods</a> section of the <a href="/pine-script-docs/language/methods/">Methods</a> page for more information.</li>
</ul>
<aside aria-label="Tip" class="tv-informer not-content" style="--informer-header-color:#089981;--informer-back-color-light:#DAF2EE;--informer-back-color-dark:#082621"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16Zm3.87-12.15c.36.2.49.66.28 1.02l-4 7a.75.75 0 0 1-1.18.16l-3-3a.75.75 0 1 1 1.06-1.06l2.3 2.3 3.52-6.14a.75.75 0 0 1 1.02-.28Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Tip</span>Even when not required, we recommend declaring parameter types where possible. Type keywords help promote readability, and they enable the Pine Editor to provide relevant code suggestions. Additionally, parameters with declared types help prevent <em>unintended</em> arguments in function calls.</p></div></aside>
<h3 id="qualifier-keywords" class="md-heading"><a href="#qualifier-keywords">Qualifier <span class="fancy-wrap">keywords<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>A <em>qualifier keyword</em> (<a href="https://www.tradingview.com/pine-script-reference/v6/#type_const">const</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#type_simple">simple</a>, or <a href="https://www.tradingview.com/pine-script-reference/v6/#type_series">series</a>) preceding a <a href="/pine-script-docs/language/user-defined-functions/#type-keywords">type keyword</a> in a parameter declaration specifies the parameter’s <a href="/pine-script-docs/language/type-system/#qualifiers">type qualifier</a>. The keyword also indicates when the <em>argument</em> for the parameter must be accessible, and whether that argument can <em>change</em> across bars:</p>
<p><code dir="auto">const</code></p>
<p class="spacer-wrapper"><spacer></spacer>The parameter has the “const” qualifier. Its argument must be available at <em>compile time</em>, and that argument cannot change during any execution. Only the parameters of <em>non-exported</em> functions can use the <a href="https://www.tradingview.com/pine-script-reference/v6/#type_const">const</a> keyword.</p>
<p><code dir="auto">simple</code></p>
<p class="spacer-wrapper"><spacer></spacer>The parameter has the “simple” qualifier. Its argument must be a “simple” value or a value with a <em>weaker</em> qualifier (“input” or “const”). The value cannot change after the <em>first bar</em>.</p>
<p><code dir="auto">series</code></p>
<p class="spacer-wrapper"><spacer></spacer>The parameter has the “series” qualifier. It can accept an argument with <em>any</em> type qualifier, because “series” is the <em>highest</em> one in Pine’s <a href="/pine-script-docs/language/type-system/#qualifiers">qualifier hierarchy</a>. The argument for the parameter in each function call <em>can change</em> on any execution.</p>
<aside aria-label="Note" class="tv-informer not-content" style="--informer-header-color:#6A6D78;--informer-back-color-light:#F0F3FA;--informer-back-color-dark:#2A2E39"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM8 6a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 2c.49 0 1 .59 1 1v3.01c0 .42-.51.99-1 .99s-1-.57-1-.99V9c0-.41.51-1 1-1Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Note</span>Qualifier keywords affect only the parameters that accept <a href="/pine-script-docs/language/type-system/#value-types">value types</a>. They <strong>do not</strong> affect those that accept <a href="/pine-script-docs/language/type-system/#reference-types">reference types</a>. Instances of reference types <em>always</em> have the “series” qualifier, regardless of how the script uses them. Therefore, all parameters of these types automatically inherit the “series” qualifier. See the <a href="/pine-script-docs/language/type-system/">Type system</a> page to learn more.</p></div></aside>
<p>Qualifier keywords are always <em>optional</em> in parameter declarations. If a declaration does not include a qualifier keyword, the compiler uses the following logic to assign a qualifier to the parameter:</p>
<ul>
<li>If the declaration does <em>not</em> include a type keyword, the compiler assigns the parameter the <em>same</em> qualifier <em>and</em> type as its argument in each written function call. For example, if the script passes a “const int” argument in one function call, the parameter of that call inherits the type “const int”. If it uses a “series float” value in another call to the function, the parameter of that call inherits the type “series float”.</li>
<li>If the declaration <em>does</em> include a type keyword, the compiler first tests whether the parameter can use the <em>“series”</em> qualifier. If the function contains a call to another function in its body, and that call <em>cannot</em> accept a “series” value, the compiler then checks whether the <em>“simple”</em> qualifier works. If neither the “series” nor “simple” qualifier is compatible with the function’s calculations, a <em>compilation error</em> occurs.</li>
</ul>
<p>To demonstrate these behaviors, let’s revisit the <code dir="auto">pass()</code> function from the <a href="/pine-script-docs/language/user-defined-functions/#type-keywords">Type keywords</a> section. The function returns the value of its <code dir="auto">source</code> parameter without additional calculations. If the parameter does not include <em>any</em> keywords in its declaration, its qualified type is that of its <em>argument</em> in each separate function call:</p>
<div class="pine-colorizer not-content colorized" data-id="3oq"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;`source`&nbsp;argument&nbsp;withou</span><span class="mtk9">t&nbsp;modification.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Each&nbsp;written&nbsp;call&nbsp;to&nbsp;the&nbsp;function&nbsp;can&nbsp;</span><span class="mtk9">accept&nbsp;an&nbsp;argument&nbsp;of&nbsp;*any*&nbsp;type&nbsp;except&nbsp;for&nbsp;"void"</span><span class="mtk9">.</span></span><br><span><span class="mtk15">pass</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">source</span></span><br></code></div>
<p>The script below calls <code dir="auto">pass()</code> using an “int” value with the “const” qualifier, then uses the returned value as the <code dir="auto">length</code> argument in a call to <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ta.ema">ta.ema()</a> and plots the result. This script compiles successfully because our <code dir="auto">pass()</code> call returns the same qualified type as its argument (“const int”), and the <code dir="auto">length</code> parameter of <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ta.ema">ta.ema()</a> can accept a value of that type:</p>
<p><img src="/pine-script-docs/_astro/User-defined-functions-Declaring-parameter-types-Qualifier-keywords-1.UmWjQFYB_Z1fknjB.webp" alt="image" width="2652" height="1002" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="pf"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Qualifier&nbsp;inheritance&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;`source`&nbsp;argument&nbsp;withou</span><span class="mtk9">t&nbsp;modification.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Each&nbsp;written&nbsp;call&nbsp;to&nbsp;the&nbsp;function&nbsp;can&nbsp;</span><span class="mtk9">accept&nbsp;an&nbsp;argument&nbsp;of&nbsp;*any*&nbsp;type&nbsp;except&nbsp;for&nbsp;"void"</span><span class="mtk9">.</span></span><br><span><span class="mtk15">pass</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">source</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;EMA&nbsp;smoothing&nbsp;length.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;`pass()`&nbsp;call's&nbsp;`source`&nbsp;paramete</span><span class="mtk9">r&nbsp;automatically&nbsp;inherits&nbsp;the&nbsp;"const"&nbsp;qualifier&nbsp;fro</span><span class="mtk9">m&nbsp;its&nbsp;argument.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Therefore,&nbsp;the&nbsp;returned&nbsp;type&nbsp;is&nbsp;"const</span><span class="mtk9">&nbsp;int".</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">lengthVal</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">pass</span><span class="mtk13">(</span><span class="mtk12">14</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;EMA&nbsp;of&nbsp;`close&nbsp;-&nbsp;open`.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;call&nbsp;works&nbsp;as&nbsp;expected,&nbsp;because&nbsp;t</span><span class="mtk9">he&nbsp;`length`&nbsp;parameter&nbsp;of&nbsp;`ta.ema()`&nbsp;can&nbsp;accept&nbsp;"in</span><span class="mtk9">t"&nbsp;values&nbsp;with</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"simple"&nbsp;or&nbsp;weaker&nbsp;qualifiers.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">emaDiff</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.ema</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">lengthVal</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`emaDiff`&nbsp;series.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">emaDiff</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Smoothed&nbsp;difference"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<p>If we add <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_int">int</a> to the <code dir="auto">source</code> declaration, the parameter then requires an “int” value, but it <strong>does not</strong> directly inherit the <em>same</em> type qualifier as its argument. Instead, the compiler first checks if it can assign <em>“series”</em> to the parameter, then tries using <em>“simple”</em> if “series” does not work.</p>
<p>Our <code dir="auto">pass()</code> function does not use the <code dir="auto">source</code> parameter in any local function calls that require a “simple int” value, so the compiler sets its qualifier to <strong>“series”</strong>. Consequently, the function’s returned type is always <em>“series int”</em>, even if the <code dir="auto">source</code> argument is a “const” value. Adding this change to the previous script thus causes a <em>compilation error</em>, because the <code dir="auto">length</code> parameter of <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ta.ema">ta.ema()</a> cannot accept a “series” argument; only “simple” or weaker qualifiers are allowed:</p>
<div class="pine-colorizer not-content colorized" data-id="3j5"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Qualifier&nbsp;promotion&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;`source`&nbsp;parameter.&nbsp;Requ</span><span class="mtk9">ires&nbsp;an&nbsp;integer.</span></span><br><span><span class="mtk15">pass</span><span class="mtk13">(</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">source</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;EMA&nbsp;smoothing&nbsp;length.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;`pass()`&nbsp;call's&nbsp;`source`&nbsp;paramete</span><span class="mtk9">r&nbsp;**does&nbsp;not**&nbsp;inherit&nbsp;the&nbsp;"const"&nbsp;qualifier.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Its&nbsp;type&nbsp;is&nbsp;promoted&nbsp;to&nbsp;"series&nbsp;int".</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">lengthVal</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">pass</span><span class="mtk13">(</span><span class="mtk12">14</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;This&nbsp;call&nbsp;causes&nbsp;a&nbsp;*compilation&nbsp;error*.&nbsp;The&nbsp;`le</span><span class="mtk9">ngth`&nbsp;parameter&nbsp;cannot&nbsp;accept&nbsp;a&nbsp;"series&nbsp;int"&nbsp;value</span><span class="mtk9">.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">emaDiff</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.ema</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">lengthVal</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`emaDiff`&nbsp;series.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">emaDiff</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Smoothed&nbsp;difference"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<p>We can restrict the type qualifier of our function’s <code dir="auto">source</code> parameter by adding a <em>qualifier keyword</em> to its declaration. In the script version below, we prefixed the declaration with the <a href="https://www.tradingview.com/pine-script-reference/v6/#type_simple">simple</a> keyword. Now, the <code dir="auto">source</code> parameter’s type is <em>“simple int”</em> instead of “series int”. With this change, the script <em>does not</em> cause an error, because the <code dir="auto">pass()</code> function’s returned type is now compatible with the <code dir="auto">length</code> parameter of <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_ta.ema">ta.ema()</a>:</p>
<p><img src="/pine-script-docs/_astro/User-defined-functions-Declaring-parameter-types-Qualifier-keywords-2.3l-V8A-N_Z29evjm.webp" alt="image" width="2652" height="1006" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="xw"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Declared&nbsp;parameter&nbsp;qualifier&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;`source`&nbsp;argument.&nbsp;Requi</span><span class="mtk9">res&nbsp;an&nbsp;"int"&nbsp;value&nbsp;with</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"simple"&nbsp;or&nbsp;a&nbsp;weaker&nbsp;qualifier.</span></span><br><span><span class="mtk15">pass</span><span class="mtk13">(</span><span class="mtk18 mtkb">simple</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">source</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;EMA&nbsp;smoothing&nbsp;length.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;`pass()`&nbsp;call's&nbsp;result&nbsp;is&nbsp;a&nbsp;"simp</span><span class="mtk9">le&nbsp;int"&nbsp;value,&nbsp;because&nbsp;the&nbsp;function&nbsp;definition&nbsp;exp</span><span class="mtk9">licitly</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;declares&nbsp;that&nbsp;the&nbsp;`source`&nbsp;parameter's</span><span class="mtk9">&nbsp;qualifier&nbsp;is&nbsp;"simple".</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">lengthVal</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">pass</span><span class="mtk13">(</span><span class="mtk12">14</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;This&nbsp;call&nbsp;does&nbsp;not&nbsp;cause&nbsp;an&nbsp;error.&nbsp;The&nbsp;qualifie</span><span class="mtk9">d&nbsp;type&nbsp;of&nbsp;`lengthVal`&nbsp;matches&nbsp;the&nbsp;`length`&nbsp;paramet</span><span class="mtk9">er's&nbsp;type.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">emaDiff</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.ema</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">lengthVal</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`emaDiff`&nbsp;series.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">emaDiff</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Smoothed&nbsp;difference"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<p>For some types of calculations, using “series” values might not cause a compilation error, but if the values do not remain consistent across all bars, the calculations produce incorrect or unintended results. When wrapping such calculations in a function, declaring the relevant parameters with the <a href="https://www.tradingview.com/pine-script-reference/v6/#type_simple">simple</a> keyword — or <a href="https://www.tradingview.com/pine-script-reference/v6/#type_const">const</a> when appropriate — ensures that only <em>unchanging</em> arguments are allowed in each call, preventing unintended behavior.</p>
<p>Let’s look at an example. The following <code dir="auto">calcAvg()</code> function calculates a moving average of a <code dir="auto">source</code> series over <code dir="auto">length</code> bars. The function compares the value of its <code dir="auto">avgType</code> parameter in a <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_switch">switch</a> statement to select a built-in <code dir="auto">ta.*()</code> call to use for the average calculation:</p>
<div class="pine-colorizer not-content colorized" data-id="11q"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Calculates&nbsp;a&nbsp;moving&nbsp;average&nbsp;of&nbsp;a&nbsp;`source`&nbsp;series&nbsp;</span><span class="mtk9">over&nbsp;`length`&nbsp;bars.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;selected&nbsp;average&nbsp;calculation&nbsp;depen</span><span class="mtk9">ds&nbsp;on&nbsp;the&nbsp;`avgType`&nbsp;value.</span></span><br><span><span class="mtk15">calcAvg</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">avgType</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">switch</span><span class="mtk1">&nbsp;</span><span class="mtk33">avgType</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"ema"</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.ema</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"sma"</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"wma"</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.wma</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"hma"</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.hma</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br></code></div>
<p>The compiler raises a <em>warning</em> about this function’s structure inside the Pine Editor, because using <code dir="auto">calcAvg()</code> with a <em>dynamic</em> <code dir="auto">avgType</code> argument can cause <em>unintended results</em>. If the <code dir="auto">ta.*()</code> call executed by the function changes on any bar, it affects the <em>history</em> of values used in the average calculations. See the <a href="/pine-script-docs/language/execution-model/#time-series-in-scopes">Time series in scopes</a> section of the <a href="/pine-script-docs/language/execution-model/">Execution model</a> page for advanced details about this behavior.</p>
<p>The script below executes two <code dir="auto">calcAvg()</code> calls and plots their returned values. The first call consistently uses <code dir="auto">"ema"</code> as its <code dir="auto">avgType</code> argument, and the other alternates between using <code dir="auto">"ema"</code> and <code dir="auto">"sma"</code> as the argument. The second call’s result <em>does not</em> often align with the first call’s result, even on the bars where its <code dir="auto">avgType</code> argument is <code dir="auto">"ema"</code>, because both <code dir="auto">ta.*()</code> calls require <em>consistent</em> evaluation to calculate the averages for <em>consecutive</em> bars:</p>
<p><img src="/pine-script-docs/_astro/User-defined-functions-Declaring-parameter-types-Qualifier-keywords-3.CmT8Y_eI_IzVCv.webp" alt="image" width="2654" height="932" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="mi"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Inconsistent&nbsp;behavior&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">behind_chart</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">false</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Calculates&nbsp;a&nbsp;moving&nbsp;average&nbsp;of&nbsp;a&nbsp;`source`&nbsp;series&nbsp;</span><span class="mtk9">over&nbsp;`length`&nbsp;bars.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;selected&nbsp;average&nbsp;calculation&nbsp;depen</span><span class="mtk9">ds&nbsp;on&nbsp;the&nbsp;`avgType`&nbsp;value.</span></span><br><span><span class="mtk15">calcAvg</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">avgType</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">switch</span><span class="mtk1">&nbsp;</span><span class="mtk33">avgType</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"ema"</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.ema</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"sma"</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"wma"</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.wma</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"hma"</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.hma</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;10-bar&nbsp;EMA&nbsp;of&nbsp;*consecutive*&nbsp;`close`&nbsp;values.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">avg1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">calcAvg</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"ema"</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;EMA&nbsp;of&nbsp;`close`&nbsp;values&nbsp;from&nbsp;*even*&nbsp;bar&nbsp;indices</span><span class="mtk9">,&nbsp;or&nbsp;the&nbsp;SMA&nbsp;of&nbsp;values&nbsp;from&nbsp;*odd*&nbsp;bar&nbsp;indices.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Either&nbsp;average&nbsp;uses&nbsp;only&nbsp;the&nbsp;values&nbsp;fr</span><span class="mtk9">om&nbsp;*every&nbsp;other&nbsp;bar*&nbsp;in&nbsp;its&nbsp;calculation,&nbsp;**not**&nbsp;c</span><span class="mtk9">onsecutive&nbsp;bars.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">avg2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">calcAvg</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">bar_index</span><span class="mtk1">&nbsp;</span><span class="mtk18">%</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk1">&nbsp;</span><span class="mtk18">==</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk29">"ema"</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk29">"sma"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;`avg1`&nbsp;and&nbsp;`avg2`&nbsp;for&nbsp;comparison.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">avg1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Consistent&nbsp;EMA"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.blue</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">avg2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Inconsistent&nbsp;EMA/SMA"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<p>To ensure that any <code dir="auto">calcAvg()</code> call calculates consistent averages without modifying the function’s logic, we can prevent it from using <em>dynamic</em> <code dir="auto">avgType</code> arguments by prefixing the parameter declaration with the <a href="https://www.tradingview.com/pine-script-reference/v6/#type_simple">simple</a> keyword. With this change, the compiler does <em>not</em> raise a warning about the function — as long as the script evaluates calls to the function on <em>every bar</em> — because any <code dir="auto">calcAvg()</code> call must always use the same <code dir="auto">ta.*()</code> function. Now, if the script attempts to pass a “series string” value to <code dir="auto">avgType</code>, a compilation error occurs:</p>
<div class="pine-colorizer not-content colorized" data-id="6aq"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Promoting&nbsp;consistency&nbsp;with&nbsp;qualifier&nbsp;keywords&nbsp;dem</span><span class="mtk29">o"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">behind_chart</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">false</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Calculates&nbsp;a&nbsp;moving&nbsp;average&nbsp;of&nbsp;a&nbsp;`source`&nbsp;series&nbsp;</span><span class="mtk9">over&nbsp;`length`&nbsp;bars.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;selected&nbsp;average&nbsp;calculation&nbsp;depen</span><span class="mtk9">ds&nbsp;on&nbsp;the&nbsp;`avgType`&nbsp;value.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;average&nbsp;type&nbsp;*cannot&nbsp;change*&nbsp;acros</span><span class="mtk9">s&nbsp;bars.</span></span><br><span><span class="mtk15">calcAvg</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">simple</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">avgType</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">switch</span><span class="mtk1">&nbsp;</span><span class="mtk33">avgType</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"ema"</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.ema</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"sma"</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"wma"</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.wma</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"hma"</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.hma</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;This&nbsp;`calcAvg()`&nbsp;call&nbsp;works&nbsp;successfully,&nbsp;becau</span><span class="mtk9">se&nbsp;the&nbsp;`avgType`&nbsp;argument&nbsp;is&nbsp;a&nbsp;"const&nbsp;string"&nbsp;valu</span><span class="mtk9">e.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">avg1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">calcAvg</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"ema"</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;This&nbsp;`calcAvg()`&nbsp;call&nbsp;now&nbsp;causes&nbsp;an&nbsp;error,&nbsp;beca</span><span class="mtk9">use&nbsp;a&nbsp;dynamic&nbsp;`avgType`&nbsp;argument&nbsp;is&nbsp;*not&nbsp;allowed*.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">avg2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">calcAvg</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">bar_index</span><span class="mtk1">&nbsp;</span><span class="mtk18">%</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk1">&nbsp;</span><span class="mtk18">==</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk29">"ema"</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk29">"sma"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;`avg1`&nbsp;and&nbsp;`avg2`&nbsp;for&nbsp;comparison.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">avg1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Consistent&nbsp;EMA"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.blue</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">avg2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Inconsistent&nbsp;EMA/SMA"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<h2 id="documenting-functions" class="md-heading"><a href="#documenting-functions">Documenting <span class="fancy-wrap">functions<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>Pine Script features <a href="/pine-script-docs/language/script-structure/#compiler-annotations">annotations</a> that programmers can use to document a function, its parameters, and its result directly in the source code. Annotations are <em>comments</em> that issue special <em>instructions</em> to the compiler or the Pine Editor. The editor can display the formatted text from function annotations in a pop-up window as users work with the function in their code. Additionally, the “Publish script” window uses the text from function annotations to generate default descriptions for <a href="/pine-script-docs/concepts/libraries/">libraries</a>.</p>
<p>To annotate a function, add comment lines containing valid annotation syntax directly above the function’s header. Each annotation comment must start with <code dir="auto">@</code>, immediately followed by the keyword that indicates its purpose. Below is the syntax for all annotations that apply exclusively to function and <a href="/pine-script-docs/language/methods/#user-defined-methods">method</a> definitions:</p>
<p><code dir="auto">//@function &lt;description&gt;</code></p>
<p class="spacer-wrapper"><spacer></spacer>The <a href="https://www.tradingview.com/pine-script-reference/v6/#an_@function">//@function</a> annotation defines the <em>main description</em> of the function or method. This annotation is where the programmer documents the function’s purpose and key behaviors. The Pine Editor displays the formatted <code dir="auto">description</code> text in its pop-up window while the user hovers over the function’s name or writes a function call.</p>
<p><code dir="auto">//@param &lt;parameterName&gt; &lt;description&gt;</code></p>
<p class="spacer-wrapper"><spacer></spacer>The <a href="https://www.tradingview.com/pine-script-reference/v6/#an_@function">//@param</a> annotation defines the description of a specific function <em>parameter</em>. The Pine Editor displays the <code dir="auto">description</code> text beneath the parameter’s type in its pop-up window while the user <em>writes an argument</em> for that parameter in a function call.</p>
<p class="spacer-wrapper"><spacer></spacer>In this syntax, <code dir="auto">parameterName</code> is the name of one of the function’s <em>parameters</em>. If the annotation does not include a parameter name, or if the specified name does not match one of the listed parameters, the annotation is <em>ignored</em>.</p>
<p><code dir="auto">//@returns &lt;description&gt;</code></p>
<p class="spacer-wrapper"><spacer></spacer>The <a href="https://www.tradingview.com/pine-script-reference/v6/#an_@returns">//@returns</a> annotation defines the description of the function’s <em>returned data</em>. The Pine Editor displays the <code dir="auto">description</code> text at the bottom of the pop-up window that appears while the user hovers over the function’s name.</p>
<aside aria-label="Note" class="tv-informer not-content" style="--informer-header-color:#6A6D78;--informer-back-color-light:#F0F3FA;--informer-back-color-dark:#2A2E39"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM8 6a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 2c.49 0 1 .59 1 1v3.01c0 .42-.51.99-1 .99s-1-.57-1-.99V9c0-.41.51-1 1-1Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Note</span>Redundant annotations are automatically <em>ignored</em>. If two or more <code dir="auto">//@function</code> or <code dir="auto">//@returns</code> annotations are above a function header, only the <strong>last</strong> one adds a description to the function or its return expression. If two or more <code dir="auto">//@param</code> annotations above the header share the same parameter name, only the <strong>first</strong> one defines the corresponding parameter’s description.</p></div></aside>
<p>The following code block defines a <code dir="auto">mixEMA()</code> function, which calculates an EMA of a <code dir="auto">source</code> series and then mixes the EMA with that series by a specified amount (<code dir="auto">mix</code>). Above the function definition, we included <code dir="auto">//@function</code>, <code dir="auto">//@param</code>, and <code dir="auto">//@returns</code> annotations to document its purpose, parameters, and result, respectively. Users can view the formatted text from these annotations by hovering over the <code dir="auto">mixEMA</code> identifier in the Pine Editor or writing a <code dir="auto">mixEMA()</code> function call:</p>
<div class="pine-colorizer not-content colorized" data-id="75"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calculates&nbsp;an&nbsp;EMA&nbsp;of&nbsp;a&nbsp;source&nbsp;series,&nbsp;and</span><span class="mtk9">&nbsp;mixes&nbsp;it&nbsp;with&nbsp;the&nbsp;`source`&nbsp;value.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;source&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;series&nbsp;of&nbsp;values&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;length&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;length&nbsp;of&nbsp;the&nbsp;EMA's&nbsp;smoothing&nbsp;para</span><span class="mtk9">meter.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;mix&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Optional.&nbsp;The&nbsp;mix&nbsp;ratio.&nbsp;Requires&nbsp;a&nbsp;va</span><span class="mtk9">lue&nbsp;from&nbsp;0&nbsp;to&nbsp;1.&nbsp;The&nbsp;default&nbsp;is&nbsp;1.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;mixture&nbsp;between&nbsp;the&nbsp;`source`&nbsp;value&nbsp;a</span><span class="mtk9">nd&nbsp;its&nbsp;EMA.</span></span><br><span><span class="mtk15">mixEMA</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">mix</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1.0</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Raise&nbsp;an&nbsp;error&nbsp;if&nbsp;the&nbsp;`mix`&nbsp;value&nbsp;is&nbsp;outside&nbsp;th</span><span class="mtk9">e&nbsp;supported&nbsp;range.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">mix</span><span class="mtk1">&nbsp;</span><span class="mtk18">&lt;</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">or</span><span class="mtk1">&nbsp;</span><span class="mtk33">mix</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">runtime.error</span><span class="mtk13">(</span><span class="mtk29">"The&nbsp;`mix`&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;number&nbsp;between&nbsp;0&nbsp;and&nbsp;1.</span><span class="mtk29">"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Calculate&nbsp;the&nbsp;EMA&nbsp;of&nbsp;`source`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">ma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.ema</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Mix&nbsp;the&nbsp;`source`&nbsp;and&nbsp;`ma`&nbsp;values&nbsp;and&nbsp;return&nbsp;the</span><span class="mtk9">&nbsp;result.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">result</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk13">(</span><span class="mtk12">1.0</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk33">mix</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">mix</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">ma</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The pop-up window that shows annotation text automatically <em>removes</em> most leading or repeated whitespaces in its formatted result.</li>
</ul>
<p>The description attached to any function annotation can occupy <em>more than one</em> comment line in the source code, but only if there are <em>no blank lines</em> between each comment line. For example, the following code block contains <code dir="auto">//@function</code> and <code dir="auto">//@param</code> annotations that both define descriptions across <em>three</em> comment lines:</p>
<div class="pine-colorizer not-content colorized" data-id="6f9"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calculates&nbsp;an&nbsp;EMA&nbsp;of&nbsp;a&nbsp;source&nbsp;series&nbsp;with</span><span class="mtk9">&nbsp;a&nbsp;specified&nbsp;`length`,&nbsp;and&nbsp;then</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;computes&nbsp;a&nbsp;mixture&nbsp;between&nbsp;the</span><span class="mtk9">&nbsp;EMA&nbsp;and&nbsp;the&nbsp;original&nbsp;value&nbsp;based&nbsp;on&nbsp;the&nbsp;`mix`&nbsp;val</span><span class="mtk9">ue.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;consistency,&nbsp;calls&nbsp;to&nbsp;this</span><span class="mtk9">&nbsp;function&nbsp;should&nbsp;execute&nbsp;on&nbsp;every&nbsp;bar.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;source&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;series&nbsp;of&nbsp;values&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;length&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;length&nbsp;of&nbsp;the&nbsp;EMA's&nbsp;smoothing&nbsp;para</span><span class="mtk9">meter.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;mix&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Optional.&nbsp;The&nbsp;mix&nbsp;ratio.&nbsp;Requires&nbsp;a&nbsp;va</span><span class="mtk9">lue&nbsp;from&nbsp;0&nbsp;to&nbsp;1.&nbsp;If&nbsp;0,&nbsp;the&nbsp;result&nbsp;is&nbsp;the&nbsp;`source`&nbsp;</span><span class="mtk9">value.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;1,&nbsp;the&nbsp;result&nbsp;is&nbsp;the&nbsp;EMA.&nbsp;I</span><span class="mtk9">f&nbsp;between&nbsp;0&nbsp;and&nbsp;1,&nbsp;the&nbsp;result&nbsp;is&nbsp;a&nbsp;mixture&nbsp;between</span><span class="mtk9">&nbsp;the&nbsp;two&nbsp;values.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;default&nbsp;is&nbsp;1.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;mixture&nbsp;between&nbsp;the&nbsp;`source`&nbsp;value&nbsp;a</span><span class="mtk9">nd&nbsp;its&nbsp;EMA.</span></span><br><span><span class="mtk15">mixEMA</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">mix</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1.0</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Raise&nbsp;an&nbsp;error&nbsp;if&nbsp;the&nbsp;`mix`&nbsp;value&nbsp;is&nbsp;out&nbsp;of&nbsp;the</span><span class="mtk9">&nbsp;supported&nbsp;range.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">mix</span><span class="mtk1">&nbsp;</span><span class="mtk18">&lt;</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">or</span><span class="mtk1">&nbsp;</span><span class="mtk33">mix</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">runtime.error</span><span class="mtk13">(</span><span class="mtk29">"The&nbsp;`mix`&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;number&nbsp;between&nbsp;0&nbsp;and&nbsp;1.</span><span class="mtk29">"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Calculate&nbsp;the&nbsp;EMA&nbsp;of&nbsp;`source`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">ma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.ema</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Mix&nbsp;the&nbsp;`source`&nbsp;and&nbsp;`ma`&nbsp;values&nbsp;and&nbsp;return&nbsp;the</span><span class="mtk9">&nbsp;result.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">result</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk13">(</span><span class="mtk12">1.0</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk33">mix</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">mix</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">ma</span></span><br></code></div>
<p>Note that each separate comment line in an annotation block <em>does not</em> typically create a new line of text in the displayed description. Programmers can create annotations with <em>multiline</em> descriptions by adding <em>empty</em> comment lines to the annotation block. For example:</p>
<div class="pine-colorizer not-content colorized" data-id="79s"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calculates&nbsp;an&nbsp;EMA&nbsp;of&nbsp;a&nbsp;source&nbsp;series&nbsp;with</span><span class="mtk9">&nbsp;a&nbsp;specified&nbsp;`length`,&nbsp;and&nbsp;then</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;computes&nbsp;a&nbsp;mixture&nbsp;between&nbsp;the</span><span class="mtk9">&nbsp;EMA&nbsp;and&nbsp;the&nbsp;original&nbsp;value&nbsp;based&nbsp;on&nbsp;the&nbsp;`mix`&nbsp;val</span><span class="mtk9">ue.</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(**New&nbsp;text&nbsp;line**)&nbsp;For&nbsp;consis</span><span class="mtk9">tency,&nbsp;calls&nbsp;to&nbsp;this&nbsp;function&nbsp;should&nbsp;execute&nbsp;on&nbsp;ev</span><span class="mtk9">ery&nbsp;bar.</span></span><br><span><span class="mtk15">mixEMA</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">mix</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1.0</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Raise&nbsp;an&nbsp;error&nbsp;if&nbsp;the&nbsp;`mix`&nbsp;value&nbsp;is&nbsp;out&nbsp;of&nbsp;the</span><span class="mtk9">&nbsp;supported&nbsp;range.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">mix</span><span class="mtk1">&nbsp;</span><span class="mtk18">&lt;</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">or</span><span class="mtk1">&nbsp;</span><span class="mtk33">mix</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">runtime.error</span><span class="mtk13">(</span><span class="mtk29">"The&nbsp;`mix`&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;number&nbsp;between&nbsp;0&nbsp;and&nbsp;1.</span><span class="mtk29">"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Calculate&nbsp;the&nbsp;EMA&nbsp;of&nbsp;`source`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">ma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.ema</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Mix&nbsp;the&nbsp;`source`&nbsp;and&nbsp;`ma`&nbsp;values&nbsp;and&nbsp;return&nbsp;the</span><span class="mtk9">&nbsp;result.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">result</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk13">(</span><span class="mtk12">1.0</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk33">mix</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">mix</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">ma</span></span><br></code></div>
<p>Annotations support a limited range of <a href="https://en.wikipedia.org/wiki/Markdown#Examples" rel="nofollow">Markdown</a> syntax, which enables <em>custom text formats</em> in the Pine Editor’s pop-up window. The example below shows some of the syntax that the window can render. To view the annotation’s results, copy the code and hover over the <code dir="auto">f</code> identifier inside the Pine Editor:</p>
<div class="pine-colorizer not-content colorized" data-id="6a3"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;This&nbsp;annotation&nbsp;shows&nbsp;some&nbsp;common&nbsp;Markdown&nbsp;syntax</span><span class="mtk9">&nbsp;that&nbsp;the&nbsp;Pine&nbsp;Editor&nbsp;can&nbsp;render&nbsp;in&nbsp;its&nbsp;pop-up&nbsp;win</span><span class="mtk9">dow.</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;---</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;`Monospace&nbsp;with&nbsp;gray&nbsp;background`</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;*Italic&nbsp;text*</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;**Bold&nbsp;text**</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;***Bold&nbsp;and&nbsp;italic***</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;~Strikethrough~</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;---</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;&gt;&nbsp;Block&nbsp;quotation</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;---</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;Bulleted&nbsp;list:</span></span><br><span><span class="mtk9">//&nbsp;-&nbsp;Item&nbsp;1</span></span><br><span><span class="mtk9">//&nbsp;-&nbsp;Item&nbsp;2</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;---</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;Numbered&nbsp;list:</span></span><br><span><span class="mtk9">//&nbsp;1.&nbsp;Item&nbsp;1</span></span><br><span><span class="mtk9">//&nbsp;1.&nbsp;Item&nbsp;2</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;---</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;```</span></span><br><span><span class="mtk9">//&nbsp;//&nbsp;Code&nbsp;block&nbsp;format</span></span><br><span><span class="mtk9">//&nbsp;float&nbsp;x&nbsp;=&nbsp;1.5</span></span><br><span><span class="mtk9">//&nbsp;```</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;---</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;Hyperlink:</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;The&nbsp;[@function](https://www.tradingview.com/pin</span><span class="mtk9">e-script-reference/v6/#an_@function)&nbsp;annotation&nbsp;is</span><span class="mtk9">&nbsp;very&nbsp;flexible.</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;---</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;#&nbsp;Heading&nbsp;1</span></span><br><span><span class="mtk9">//&nbsp;##&nbsp;Heading&nbsp;2</span></span><br><span><span class="mtk9">//&nbsp;###&nbsp;Heading&nbsp;3</span></span><br><span><span class="mtk9">//</span></span><br><span><span class="mtk9">//&nbsp;---</span></span><br><span><span class="mtk33">f</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">int</span><span class="mtk13">(</span><span class="mtk11">na</span><span class="mtk13">)</span></span><br></code></div>
<aside aria-label="Note" class="tv-informer not-content" style="--informer-header-color:#6A6D78;--informer-back-color-light:#F0F3FA;--informer-back-color-dark:#2A2E39"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM8 6a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 2c.49 0 1 .59 1 1v3.01c0 .42-.51.99-1 .99s-1-.57-1-.99V9c0-.41.51-1 1-1Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Note</span>The annotation syntax in the above example affects only the appearance of text displayed by the Pine Editor’s autosuggest feature; it <strong>does not</strong> affect text formatting in <em>script publications</em>. See the <a href="/pine-script-docs/writing/publishing/#title-and-description">Title and description</a> section of the <a href="/pine-script-docs/writing/publishing/">Publishing scripts</a> page to learn the formatting syntax for publication descriptions.</p></div></aside>
<h2 id="function-scopes" class="md-heading"><a href="#function-scopes">Function <span class="fancy-wrap">scopes<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>All variables, expressions, and statements have a designated <a href="/pine-script-docs/faq/programming/#what-does-scope-mean">scope</a>, which refers to the part of the script where they are defined and accessible. Every script has one <em>global</em> scope and zero or more <em>local</em> scopes.</p>
<p>Each function definition creates a distinct local scope. All code written in the function’s header and body belongs exclusively to that definition; no code outside the function can access its declared variables or parameters.</p>
<p>For example, the following script defines a function named <code dir="auto">myFun()</code>. The function’s body contains a variable named <code dir="auto">result</code>. The script attempts to use a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plot">plot()</a> call, in the global scope, to display the value of that variable. This script causes a compilation error, because the global scope <em>cannot</em> access the function’s <em>local</em> identifiers, and there is no global variable named <code dir="auto">result</code>:</p>
<div class="pine-colorizer not-content colorized" data-id="1n3"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Inaccessible&nbsp;scope&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Multiplies&nbsp;`x`&nbsp;by&nbsp;a&nbsp;pseudorandom&nbsp;value&nbsp;and&nbsp;return</span><span class="mtk9">s&nbsp;the&nbsp;result.</span></span><br><span><span class="mtk15">myFun</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">x</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;This&nbsp;variable&nbsp;belongs&nbsp;to&nbsp;the&nbsp;function&nbsp;definitio</span><span class="mtk9">n;&nbsp;other&nbsp;scopes&nbsp;cannot&nbsp;access&nbsp;it.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">result</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.random</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">x</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;This&nbsp;`plot()`&nbsp;call&nbsp;causes&nbsp;a&nbsp;compilation&nbsp;error.&nbsp;</span><span class="mtk9">There&nbsp;is&nbsp;no&nbsp;*global*&nbsp;`result`&nbsp;variable&nbsp;available&nbsp;f</span><span class="mtk9">or&nbsp;plotting.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">result</span><span class="mtk13">)</span></span><br></code></div>
<p>The only way for the script to use the function’s code is to execute a <em>function call</em>. Additionally, because the code in the function definition is <em>inaccessible</em> to other scopes, the script can declare separate variables in other parts of the code with the <em>same</em> identifiers as the function’s local variables and parameters. For example, the following script executes a call to the <code dir="auto">myFun()</code> function and assigns its returned value to a new, <em>global</em> variable <em>also</em> named <code dir="auto">result</code>. The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plot">plot()</a> call in this script does not cause an error, because only the global <code dir="auto">result</code> variable is available to that call:</p>
<p><img src="/pine-script-docs/_astro/User-defined-functions-Function-scopes-1.WDscmOKC_ZNJHOw.webp" alt="image" width="2652" height="828" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="2s0"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Function&nbsp;variable&nbsp;vs.&nbsp;global&nbsp;variable&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Multiplies&nbsp;`x`&nbsp;by&nbsp;a&nbsp;pseudorandom&nbsp;value&nbsp;and&nbsp;return</span><span class="mtk9">s&nbsp;the&nbsp;result.</span></span><br><span><span class="mtk15">myFun</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">x</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;This&nbsp;variable&nbsp;belongs&nbsp;to&nbsp;the&nbsp;function&nbsp;definitio</span><span class="mtk9">n;&nbsp;other&nbsp;scopes&nbsp;cannot&nbsp;access&nbsp;it.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">result</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.random</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">x</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;This&nbsp;variable&nbsp;stores&nbsp;the&nbsp;result&nbsp;returned&nbsp;by&nbsp;a&nbsp;`</span><span class="mtk9">myFun()`&nbsp;call.</span></span><br><span><span class="mtk9">//&nbsp;Although&nbsp;it&nbsp;shares&nbsp;the&nbsp;same&nbsp;name&nbsp;as&nbsp;the&nbsp;variabl</span><span class="mtk9">e&nbsp;in&nbsp;`myFun()`,&nbsp;it&nbsp;is&nbsp;a&nbsp;completely&nbsp;separate&nbsp;variab</span><span class="mtk9">le&nbsp;declared</span></span><br><span><span class="mtk9">//&nbsp;in&nbsp;the&nbsp;global&nbsp;scope,&nbsp;after&nbsp;the&nbsp;function&nbsp;definit</span><span class="mtk9">ion.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">result</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">myFun</span><span class="mtk13">()</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;This&nbsp;`plot()`&nbsp;call&nbsp;does&nbsp;not&nbsp;cause&nbsp;an&nbsp;error,&nbsp;bec</span><span class="mtk9">ause&nbsp;`result`&nbsp;refers&nbsp;to&nbsp;the&nbsp;*global*&nbsp;variable.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">result</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Global&nbsp;`result`&nbsp;series"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">linewidth</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<p>All local scopes in a script, including the scope of a function definition, are embedded into the script’s global scope. Therefore, while the global scope cannot access any variables within a function’s scope, the function <em>can</em> access any global variables declared <em>above</em> its definition.</p>
<p>For instance, the following script declares a <code dir="auto">globalVar</code> variable before defining the <code dir="auto">myFun()</code> function, then uses that variable in the function’s body. This script compiles successfully, because the function definition has access to any global variables declared before its location in the code:</p>
<p><img src="/pine-script-docs/_astro/User-defined-functions-Function-scopes-2.CcNLbFZI_7foTM.webp" alt="image" width="2654" height="832" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="4t9"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Global&nbsp;variables&nbsp;in&nbsp;functions&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;global&nbsp;variable&nbsp;that&nbsp;holds&nbsp;a&nbsp;pseudorandom&nbsp;value</span><span class="mtk9">.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">globalVar</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.random</span><span class="mtk13">()</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Multiplies&nbsp;`x`&nbsp;by&nbsp;a&nbsp;pseudorandom&nbsp;value,&nbsp;adds&nbsp;the&nbsp;</span><span class="mtk9">value&nbsp;of&nbsp;`globalVar`,&nbsp;then&nbsp;returns&nbsp;the&nbsp;result.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;function&nbsp;can&nbsp;use&nbsp;`globalVar`&nbsp;in&nbsp;i</span><span class="mtk9">ts&nbsp;body&nbsp;because&nbsp;the&nbsp;script&nbsp;declares&nbsp;the&nbsp;variable&nbsp;*</span><span class="mtk9">first*.</span></span><br><span><span class="mtk15">myFun</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">x</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">math.random</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">x</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">globalVar</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Assign&nbsp;the&nbsp;result&nbsp;of&nbsp;a&nbsp;default&nbsp;`myFun()`&nbsp;call&nbsp;t</span><span class="mtk9">o&nbsp;a&nbsp;new&nbsp;variable.&nbsp;The&nbsp;call&nbsp;uses&nbsp;`globalVar`&nbsp;intern</span><span class="mtk9">ally.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">result</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">myFun</span><span class="mtk13">()</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`result`&nbsp;series.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">result</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"`result`&nbsp;series"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<p>It’s important to note that all global variables used in a function’s body cannot change their assigned values or references during any execution of a function call. Therefore, although user-defined functions can <em>access</em> some global variables, they <em>cannot modify</em> those variables using the reassignment or compound assignment <a href="/pine-script-docs/language/operators/">operators</a>. Similarly, a function cannot reassign its declared parameters, because the parameters of each function call must always hold the same values or references passed to them from the scope where that call occurs.</p>
<p>The example script below demonstrates this limitation. It declares a global variable named <code dir="auto">counter</code> with an initial value of 0. Then, it defines an <code dir="auto">increment()</code> function that uses the <a href="https://www.tradingview.com/pine-script-reference/v6/#op_+=">+=</a> operator to change the <code dir="auto">counter</code> variable’s assigned value, causing a compilation error:</p>
<div class="pine-colorizer not-content colorized" data-id="3af"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Cannot&nbsp;modify&nbsp;global&nbsp;variables&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;global&nbsp;variable&nbsp;to&nbsp;hold&nbsp;a&nbsp;counter&nbsp;value.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">counter</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Attempts&nbsp;to&nbsp;use&nbsp;`+=`&nbsp;to&nbsp;increment&nbsp;the&nbsp;global&nbsp;`cou</span><span class="mtk9">nter`&nbsp;value&nbsp;by&nbsp;the&nbsp;value&nbsp;of&nbsp;`amountToAdd`.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;definition&nbsp;causes&nbsp;an&nbsp;error,&nbsp;becau</span><span class="mtk9">se&nbsp;global&nbsp;variables&nbsp;cannot&nbsp;be&nbsp;modified</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;during&nbsp;the&nbsp;execution&nbsp;of&nbsp;a&nbsp;user-defined</span><span class="mtk9">&nbsp;function&nbsp;call.</span></span><br><span><span class="mtk15">increment</span><span class="mtk13">(</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">amountToAdd</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">counter</span><span class="mtk1">&nbsp;</span><span class="mtk18">+=</span><span class="mtk1">&nbsp;</span><span class="mtk33">amountToAdd</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">increment</span><span class="mtk13">())</span></span><br></code></div>
<aside aria-label="Tip" class="tv-informer not-content" style="--informer-header-color:#089981;--informer-back-color-light:#DAF2EE;--informer-back-color-dark:#082621"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16Zm3.87-12.15c.36.2.49.66.28 1.02l-4 7a.75.75 0 0 1-1.18.16l-3-3a.75.75 0 1 1 1.06-1.06l2.3 2.3 3.52-6.14a.75.75 0 0 1 1.02-.28Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Tip</span>It is possible to modify the data accessed by a global variable from inside a function’s scope if that variable is of a <a href="/pine-script-docs/language/type-system/#reference-types">reference type</a>, such as a <a href="/pine-script-docs/language/type-system/#collections">collection type</a> or <a href="/pine-script-docs/language/type-system/#user-defined-types">user-defined type</a>. Instead of reassigning the variable, the script can use <em>setter functions</em> or <em>field reassignments</em>, depending on the type, to modify the <em>object</em> that the variable <em>refers</em> to. For examples of this advanced technique, see the <a href="/pine-script-docs/writing/debugging/#extracting-data-from-local-scopes">Extracting data from local scopes</a> section of the <a href="/pine-script-docs/writing/debugging/">Debugging</a> page and the scope-related sections of the <a href="/pine-script-docs/language/arrays/">Arrays</a>, <a href="/pine-script-docs/language/matrices/">Matrices</a>, and <a href="/pine-script-docs/language/maps/">Maps</a> pages.</p></div></aside>
<h3 id="scope-of-a-function-call" class="md-heading"><a href="#scope-of-a-function-call">Scope of a function <span class="fancy-wrap">call<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>A function’s definition acts as a <em>template</em> for each function call. Every call <em>written</em> in the source code establishes a <em>separate</em> local scope using that definition. The parameters, variables, and expressions created for each function call are <em>unique</em> to that call, and they leave <em>independent</em> historical trails in the script’s <a href="/pine-script-docs/language/execution-model/#time-series">time series</a>. Because each written call has a separate scope, with an independent history, no two calls to the same function directly affect each other.</p>
<p>For example, the script below contains a user-defined function named <code dir="auto">accumulate()</code>. The function’s structure declares a <em>persistent</em> variable named <code dir="auto">total</code> with an initial value of 0, then adds the value of its <code dir="auto">source</code> parameter to that variable and returns the result. The script uses two separate <code dir="auto">accumulate()</code> calls inside a <a href="/pine-script-docs/language/operators/#-ternary-operator">ternary operation</a>, and then plots the result returned by that expression. The operation triggers the first written call on every <em>third</em> bar, and the second on all other bars. Both calls use a value of 1 as their <code dir="auto">source</code> argument:</p>
<div class="pine-colorizer not-content colorized" data-id="4cd"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Independent&nbsp;call&nbsp;scopes&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Accumulates&nbsp;the&nbsp;values&nbsp;from&nbsp;a&nbsp;`source`&nbsp;series&nbsp;acr</span><span class="mtk9">oss&nbsp;executions.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Each&nbsp;written&nbsp;call&nbsp;to&nbsp;this&nbsp;function&nbsp;def</span><span class="mtk9">ines&nbsp;a&nbsp;*separate*&nbsp;scope&nbsp;with&nbsp;unique&nbsp;versions&nbsp;of&nbsp;`s</span><span class="mtk9">ource`&nbsp;and&nbsp;`total`.</span></span><br><span><span class="mtk15">accumulate</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;*persistent*&nbsp;variable&nbsp;declared&nbsp;on&nbsp;only&nbsp;one&nbsp;bar,</span><span class="mtk9">&nbsp;initialized&nbsp;with&nbsp;a&nbsp;value&nbsp;of&nbsp;0.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">total</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0.0</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Add&nbsp;the&nbsp;`source`&nbsp;value&nbsp;to&nbsp;`total`&nbsp;and&nbsp;return&nbsp;th</span><span class="mtk9">e&nbsp;variable's&nbsp;new&nbsp;value.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">total</span><span class="mtk1">&nbsp;</span><span class="mtk18">+=</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Use&nbsp;two&nbsp;calls&nbsp;to&nbsp;`accumulate()`&nbsp;with&nbsp;the&nbsp;same&nbsp;`</span><span class="mtk9">source`&nbsp;argument&nbsp;inside&nbsp;a&nbsp;ternary&nbsp;expression.</span></span><br><span><span class="mtk9">//&nbsp;Each&nbsp;call&nbsp;has&nbsp;its&nbsp;own&nbsp;version&nbsp;of&nbsp;`total`,&nbsp;which</span><span class="mtk9">&nbsp;updates&nbsp;only&nbsp;on&nbsp;bars&nbsp;where&nbsp;the&nbsp;script&nbsp;*evaluates*</span><span class="mtk9">&nbsp;that&nbsp;call.</span></span><br><span><span class="mtk9">//&nbsp;These&nbsp;two&nbsp;calls&nbsp;thus&nbsp;return&nbsp;**different**&nbsp;resul</span><span class="mtk9">ts,&nbsp;because&nbsp;the&nbsp;script&nbsp;does&nbsp;not&nbsp;evaluate&nbsp;both&nbsp;of&nbsp;t</span><span class="mtk9">hem&nbsp;on&nbsp;the</span></span><br><span><span class="mtk9">//&nbsp;*same*&nbsp;number&nbsp;of&nbsp;bars.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">altCallSeries</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">bar_index</span><span class="mtk1">&nbsp;</span><span class="mtk18">%</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk1">&nbsp;</span><span class="mtk18">==</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk33">accumulate</span><span class="mtk13">(</span><span class="mtk12">1</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk33">accumulate</span><span class="mtk13">(</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">altCallSeries</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Alternating&nbsp;call&nbsp;results"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The <code dir="auto">total</code> variable and its assigned value <em>persist</em> across bars because the variable declaration includes the <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_var">var</a> keyword. See the <a href="/pine-script-docs/language/variable-declarations/#declaration-modes">Declaration modes</a> section of the <a href="/pine-script-docs/language/variable-declarations/">Variable declarations</a> page to learn more.</li>
</ul>
<p>Both <code dir="auto">accumulate()</code> calls in this script might seem identical. However, each one has a <em>separate</em> scope with distinct versions of the <code dir="auto">source</code> parameter and the <code dir="auto">total</code> variable. The first call <strong>does not</strong> affect the second, and vice versa. As shown below, the script’s plotted value <em>decreases</em> on every third bar before increasing again on subsequent bars. This behavior occurs because each <code dir="auto">accumulate()</code> call’s version of <code dir="auto">total</code> increases its value only on bars where the script <em>evaluates</em> that call, and the script evaluates the first call on about <em>half</em> as many bars as the second:</p>
<p><img src="/pine-script-docs/_astro/User-defined-functions-Function-scopes-Scope-of-a-function-call-1.BvL7oJKj_1893SS.webp" alt="image" width="2656" height="1046" loading="lazy" decoding="async"></p>
<p>It is crucial to emphasize that each function call <em>written</em> in the source code has <strong>one</strong> unique scope created from the function’s definition. Repeated evaluations of the same written call <strong>do not</strong> create additional scopes with separate local variables and history. For example, a function call written in the body of a <a href="/pine-script-docs/language/loops/">loop</a> performs calculations using the <em>same</em> local series on <em>every</em> iteration; it does <em>not</em> calculate on different versions of those series for each separate iteration.</p>
<p>The following script demonstrates this behavior. The source code includes two written calls to our previous <code dir="auto">accumulate()</code> function. The script evaluates the first call in the global scope, and the second inside the body of a <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_for">for</a> loop that performs 10 iterations per execution. It then plots the results of both calls in a separate pane:</p>
<div class="pine-colorizer not-content colorized" data-id="2ad"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Written&nbsp;call&nbsp;scopes&nbsp;in&nbsp;structures&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Accumulates&nbsp;the&nbsp;values&nbsp;from&nbsp;a&nbsp;`source`&nbsp;series&nbsp;acr</span><span class="mtk9">oss&nbsp;executions.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Each&nbsp;written&nbsp;call&nbsp;to&nbsp;this&nbsp;function&nbsp;def</span><span class="mtk9">ines&nbsp;a&nbsp;**separate**&nbsp;scope&nbsp;with&nbsp;unique&nbsp;versions&nbsp;of&nbsp;</span><span class="mtk9">`source`&nbsp;and&nbsp;`total`.</span></span><br><span><span class="mtk15">accumulate</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;*persistent*&nbsp;variable&nbsp;declared&nbsp;on&nbsp;only&nbsp;one&nbsp;bar,</span><span class="mtk9">&nbsp;initialized&nbsp;with&nbsp;a&nbsp;value&nbsp;of&nbsp;0.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">total</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0.0</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Add&nbsp;the&nbsp;`source`&nbsp;value&nbsp;to&nbsp;`total`&nbsp;and&nbsp;return&nbsp;th</span><span class="mtk9">e&nbsp;variable's&nbsp;new&nbsp;value.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">total</span><span class="mtk1">&nbsp;</span><span class="mtk18">+=</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Holds&nbsp;the&nbsp;result&nbsp;of&nbsp;evaluating&nbsp;`accumulate(1)`&nbsp;in</span><span class="mtk9">&nbsp;the&nbsp;global&nbsp;scope.&nbsp;The&nbsp;value&nbsp;increases&nbsp;by&nbsp;*one*&nbsp;on</span><span class="mtk9">&nbsp;each&nbsp;bar.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">globalCallRes</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">accumulate</span><span class="mtk13">(</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Initialized&nbsp;with&nbsp;`na`,&nbsp;then&nbsp;reassigned&nbsp;the&nbsp;result</span><span class="mtk9">&nbsp;of&nbsp;an&nbsp;`accumulate()`&nbsp;call&nbsp;within&nbsp;a&nbsp;loop.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">loopedCallRes</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span></span><br><span><span></span></span><br><span><span class="mtk18">for</span><span class="mtk1">&nbsp;</span><span class="mtk33">_</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk1">&nbsp;</span><span class="mtk18">to</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Reassign&nbsp;the&nbsp;`loopedCallRes`&nbsp;variable&nbsp;using&nbsp;the</span><span class="mtk9">&nbsp;result&nbsp;of&nbsp;`accumulate(1)`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;This&nbsp;written&nbsp;call&nbsp;establishes&nbsp;**one**&nbsp;new&nbsp;scope</span><span class="mtk9">&nbsp;with&nbsp;a&nbsp;unique&nbsp;version&nbsp;of&nbsp;the&nbsp;`total`&nbsp;variable.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;The&nbsp;script&nbsp;evaluates&nbsp;that&nbsp;scope&nbsp;on&nbsp;every&nbsp;loop&nbsp;i</span><span class="mtk9">teration,&nbsp;thus&nbsp;adding&nbsp;1&nbsp;to&nbsp;the&nbsp;*same*&nbsp;version&nbsp;of&nbsp;`</span><span class="mtk9">total`</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;*10&nbsp;times*&nbsp;per&nbsp;bar.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">loopedCallRes</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk33">accumulate</span><span class="mtk13">(</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;results&nbsp;of&nbsp;global&nbsp;and&nbsp;looped&nbsp;calls&nbsp;for</span><span class="mtk9">&nbsp;comparison.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">globalCallRes</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Global&nbsp;call&nbsp;result"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">loopedCallRes</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Looped&nbsp;call&nbsp;result"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.red</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<p>A newcomer to Pine might expect the results of both <code dir="auto">accumulate()</code> calls to be equal. However, the result of the call inside the loop is <em>10 times</em> that of the call evaluated in the global scope. This difference occurs because the call written in the loop does not have separate scopes for each iteration; every evaluation of that call modifies the <em>same</em> version of the persistent <code dir="auto">total</code> variable. Consequently, the value returned by the loop’s <code dir="auto">accumulate()</code> call increases by <strong>10</strong> instead of one on each bar:</p>
<p><img src="/pine-script-docs/_astro/User-defined-functions-Function-scopes-Scope-of-a-function-call-2.BKLDlUMm_HXY3e.webp" alt="image" width="2654" height="922" loading="lazy" decoding="async"></p>
<p>Note that:</p>
<ul>
<li>Both <code dir="auto">accumulate()</code> calls return the <em>same</em> result if we remove <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_var">var</a> from the <code dir="auto">total</code> variable declaration. Without the keyword, each call’s version of the <code dir="auto">total</code> variable no longer <em>persists</em>. Instead, every evaluation of the call <em>re-declares</em> the variable and initializes it to 0 before adding the value of the <code dir="auto">source</code> argument.</li>
</ul>
<h2 id="function-overloading" class="md-heading"><a href="#function-overloading">Function <span class="fancy-wrap">overloading<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>Function <em>overloads</em> are <em>unique versions</em> of a function that share the same name but differ in their required <a href="/pine-script-docs/language/user-defined-functions/#declaring-parameter-types">parameter types</a>. Overloading enables function calls using the same identifier to perform <em>different tasks</em> based on their specified arguments. Programmers often write overloads to group similar calculations for specific types under a single function name, offering a convenient alternative to defining several related functions with unique names.</p>
<p>In Pine Script, a function overload is valid only if its definition satisfies one of the following conditions:</p>
<ul>
<li>It has a different number of <em>required</em> parameters (parameters <em>without</em> default arguments) than that of any other defined overload.</li>
<li>It has the same number of required parameters as another overload, but at least <em>one</em> required parameter has a different <a href="/pine-script-docs/language/type-system/">qualified type</a> than the one declared at the <em>same position</em> in the other overload’s header.</li>
</ul>
<p>The following code block defines three overloads of a custom <code dir="auto">negate()</code> function. Each overload has a different parameter type and performs a distinct task. The first overload uses the <a href="https://www.tradingview.com/pine-script-reference/v6/#op_-">-</a> operator to negate a “float” or “int” value; the second uses the <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_not">not</a> operator to negate a “bool” value; and the third calculates the sRGB negative of a “color” value using the built-in <code dir="auto">color.*()</code> functions:</p>
<div class="pine-colorizer not-content colorized" data-id="6py"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;1)&nbsp;Changes&nbsp;the&nbsp;sign&nbsp;of&nbsp;a&nbsp;number.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value&nbsp;&nbsp;The&nbsp;"float"&nbsp;or&nbsp;"int"&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;negated&nbsp;number.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">-</span><span class="mtk33">value</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;2)&nbsp;Negates&nbsp;a&nbsp;Boolean&nbsp;value.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value&nbsp;&nbsp;The&nbsp;"bool"&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`false`&nbsp;if&nbsp;the&nbsp;value&nbsp;is&nbsp;`true`,&nbsp;or&nbsp;`true`&nbsp;if</span><span class="mtk9">&nbsp;the&nbsp;value&nbsp;is&nbsp;`false`.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">not</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;3)&nbsp;Calculates&nbsp;the&nbsp;sRGB&nbsp;negative&nbsp;(i.</span><span class="mtk9">e.,&nbsp;complement)&nbsp;of&nbsp;a&nbsp;color.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value&nbsp;&nbsp;The&nbsp;"color"&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;"color"&nbsp;value&nbsp;whose&nbsp;red,&nbsp;green,&nbsp;and&nbsp;blue</span><span class="mtk9">&nbsp;components&nbsp;are&nbsp;opposites&nbsp;of&nbsp;the&nbsp;`value`&nbsp;color's&nbsp;c</span><span class="mtk9">omponents</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;sRGB&nbsp;color&nbsp;space.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">color.rgb</span><span class="mtk13">(</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.r</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.g</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.b</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.t</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">))</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The <code dir="auto">value</code> parameter of each <code dir="auto">negate()</code> overload automatically inherits the <em>“series”</em> qualifier, because its declaration includes a <a href="/pine-script-docs/language/user-defined-functions/#type-keywords">type keyword</a> <em>without</em> a <a href="/pine-script-docs/language/user-defined-functions/#qualifier-keywords">qualifier keyword</a>, and the overload does not use the parameter in a local function call that requires a “simple” or weaker qualifier.</li>
<li>We included <a href="/pine-script-docs/language/script-structure/#compiler-annotations">annotations</a> to <a href="/pine-script-docs/language/user-defined-functions/#documenting-functions">document</a> each separate overload. As a user writes a <code dir="auto">negate()</code> call, the Pine Editor shows the documentation for <em>one</em> of the overloads in a pop-up window. While the window is open, the user can view the documentation for the <em>other</em> overloads by using the Up and Down arrow keys.</li>
</ul>
<p>With our function overloads defined, we can use <code dir="auto">negate()</code> calls for different type-specific tasks. The script below uses a call to each overload. First, it uses the second overload to calculate the opposite of the condition <code dir="auto">close &gt; open</code>. It then uses the negated condition to determine the value of a plotted series. The plotted value is the result of <code dir="auto">negate(close)</code> if the condition is <code dir="auto">true</code>, and the value of <a href="https://www.tradingview.com/pine-script-reference/v6/#var_close">close</a> otherwise. The script colors the plot using the negative of the chart’s background color (<code dir="auto">negate(chart.bg_color)</code>):</p>
<p><img src="/pine-script-docs/_astro/User-defined-functions-Function-overloading-1.BTe80Gur_Z1svM3v.webp" alt="image" width="2652" height="1108" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="2fh"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Function&nbsp;overloading&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;1)&nbsp;Changes&nbsp;the&nbsp;sign&nbsp;of&nbsp;a&nbsp;number.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value&nbsp;&nbsp;The&nbsp;"float"&nbsp;or&nbsp;"int"&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;negated&nbsp;number.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">-</span><span class="mtk33">value</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;2)&nbsp;Negates&nbsp;a&nbsp;Boolean&nbsp;value.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value&nbsp;&nbsp;The&nbsp;"bool"&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`false`&nbsp;if&nbsp;the&nbsp;value&nbsp;is&nbsp;`true`,&nbsp;or&nbsp;`true`&nbsp;if</span><span class="mtk9">&nbsp;the&nbsp;value&nbsp;is&nbsp;`false`.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">not</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;3)&nbsp;Calculates&nbsp;the&nbsp;sRGB&nbsp;negative&nbsp;(i.</span><span class="mtk9">e.,&nbsp;complement)&nbsp;of&nbsp;a&nbsp;color.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value&nbsp;&nbsp;The&nbsp;"color"&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;"color"&nbsp;value&nbsp;whose&nbsp;red,&nbsp;green,&nbsp;and&nbsp;blue</span><span class="mtk9">&nbsp;components&nbsp;are&nbsp;opposites&nbsp;of&nbsp;the&nbsp;`value`&nbsp;color's&nbsp;c</span><span class="mtk9">omponents</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;sRGB&nbsp;color&nbsp;space.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">color.rgb</span><span class="mtk13">(</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.r</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.g</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.b</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.t</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;`true`&nbsp;if&nbsp;the&nbsp;current&nbsp;`close`&nbsp;value&nbsp;is&nbsp;*not*&nbsp;grea</span><span class="mtk9">ter&nbsp;than&nbsp;the&nbsp;value&nbsp;of&nbsp;`open`.&nbsp;Otherwise,&nbsp;`false`.</span></span><br><span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">notUpBar</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">negate</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`-close`&nbsp;value&nbsp;if&nbsp;the&nbsp;`notUpBar`&nbsp;condition&nbsp;is</span><span class="mtk9">&nbsp;`true`,&nbsp;or&nbsp;the&nbsp;`close`&nbsp;value&nbsp;if&nbsp;the&nbsp;condition&nbsp;is&nbsp;</span><span class="mtk9">`false`.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotSeries</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">notUpBar</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk33">negate</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;sRGB&nbsp;negative&nbsp;of&nbsp;the&nbsp;chart's&nbsp;background&nbsp;color</span><span class="mtk9">.</span></span><br><span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">negate</span><span class="mtk13">(</span><span class="mtk11">chart.bg_color</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;value&nbsp;of&nbsp;`plotSeries`&nbsp;and&nbsp;color&nbsp;it&nbsp;usi</span><span class="mtk9">ng&nbsp;`plotColor`.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">plotSeries</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Test&nbsp;plot"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_area</span><span class="mtk13">)</span></span><br></code></div>
<p>It’s important to emphasize that a function overload is valid only if its signature contains a <em>unique</em> set of qualified types for its <em>required</em> parameters. Differences in <em>optional</em> parameters (the parameters that have default arguments) <strong>do not</strong> affect the validity of overloads. The compiler raises an <em>error</em> if two overloads share the same required parameter types and differ only in optional parameters, because it cannot determine which overload to use for <em>all</em> possible function calls.</p>
<p>For example, the following code block defines a fourth <code dir="auto">negate()</code> overload with two “float” parameters. The overload’s first parameter requires an argument, but the second one <em>does not</em> because it has a default value. With this addition, any <code dir="auto">negate()</code> call with a single “float” argument becomes <em>ambiguous</em>. Such a call might refer to the first overload or the fourth, and the compiler <em>cannot</em> confirm which one to use in that case. Therefore, the extra overload causes a compilation error:</p>
<div class="pine-colorizer not-content colorized" data-id="dy"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;1)&nbsp;Changes&nbsp;the&nbsp;sign&nbsp;of&nbsp;a&nbsp;number.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value&nbsp;&nbsp;The&nbsp;"float"&nbsp;or&nbsp;"int"&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;negated&nbsp;number.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">-</span><span class="mtk33">value</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;2)&nbsp;Negates&nbsp;a&nbsp;Boolean&nbsp;value.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value&nbsp;&nbsp;The&nbsp;"bool"&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`false`&nbsp;if&nbsp;the&nbsp;value&nbsp;is&nbsp;`true`,&nbsp;or&nbsp;`true`&nbsp;if</span><span class="mtk9">&nbsp;the&nbsp;value&nbsp;is&nbsp;`false`.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">not</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;3)&nbsp;Calculates&nbsp;the&nbsp;sRGB&nbsp;negative&nbsp;(i.</span><span class="mtk9">e.,&nbsp;complement)&nbsp;of&nbsp;a&nbsp;color.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value&nbsp;&nbsp;The&nbsp;"color"&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;"color"&nbsp;value&nbsp;whose&nbsp;red,&nbsp;green,&nbsp;and&nbsp;blue</span><span class="mtk9">&nbsp;components&nbsp;are&nbsp;opposites&nbsp;of&nbsp;the&nbsp;`value`&nbsp;color's&nbsp;c</span><span class="mtk9">omponents</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;sRGB&nbsp;color&nbsp;space.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">color.rgb</span><span class="mtk13">(</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.r</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.g</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.b</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.t</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;This&nbsp;overload&nbsp;is&nbsp;**invalid**.</span></span><br><span><span class="mtk9">//&nbsp;Although&nbsp;the&nbsp;function&nbsp;has&nbsp;two&nbsp;parameters,&nbsp;`scal</span><span class="mtk9">e`&nbsp;has&nbsp;a&nbsp;default&nbsp;argument.&nbsp;The&nbsp;only&nbsp;parameter&nbsp;that</span><span class="mtk9">&nbsp;requires&nbsp;an</span></span><br><span><span class="mtk9">//&nbsp;argument&nbsp;is&nbsp;`value`,&nbsp;and&nbsp;that&nbsp;parameter&nbsp;shares&nbsp;</span><span class="mtk9">the&nbsp;same&nbsp;type&nbsp;as&nbsp;the&nbsp;required&nbsp;parameter&nbsp;in&nbsp;Overloa</span><span class="mtk9">d&nbsp;1.</span></span><br><span><span class="mtk9">//&nbsp;Any&nbsp;`negate()`&nbsp;call&nbsp;with&nbsp;a&nbsp;single&nbsp;"float"&nbsp;argum</span><span class="mtk9">ent&nbsp;is&nbsp;*ambiguous*&nbsp;in&nbsp;this&nbsp;case,&nbsp;so&nbsp;the&nbsp;compiler&nbsp;r</span><span class="mtk9">aises&nbsp;an&nbsp;error.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">scale</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1.0</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">-</span><span class="mtk33">value</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">scale</span></span><br></code></div>
<p>Another crucial limitation to note is that the <em>names</em> of parameters <strong>do not</strong> affect the validity of overloads. The compiler validates overloads by analyzing only the <em>qualified types</em> of their required parameters at each <em>position</em> in the function headers, because function calls can use <em>positional</em> or <em>named</em> arguments for each parameter. Named arguments specify the parameter to which they apply. For example, <code dir="auto">f(x = 10)</code> passes the value 10 to the <code dir="auto">x</code> parameter of the <code dir="auto">f()</code> call. In contrast, positional arguments omit names and apply to the parameters in order: the first argument to the first parameter, the second to the second parameter, and so on.</p>
<p>If two overloads have the same parameter types but different parameter names, a compilation error occurs, because any call that uses positional arguments is ambiguous. For example, the code block below defines a separate <code dir="auto">negate()</code> overload with a single “float” parameter named <code dir="auto">comparedValue</code>. That overload causes a compilation error, as the required parameter’s qualified type matches that of the <code dir="auto">value</code> parameter in the first overload:</p>
<div class="pine-colorizer not-content colorized" data-id="1ij"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;1)&nbsp;Changes&nbsp;the&nbsp;sign&nbsp;of&nbsp;a&nbsp;number.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value&nbsp;&nbsp;The&nbsp;"float"&nbsp;or&nbsp;"int"&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;negated&nbsp;number.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">-</span><span class="mtk33">value</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;2)&nbsp;Negates&nbsp;a&nbsp;Boolean&nbsp;value.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value&nbsp;&nbsp;The&nbsp;"bool"&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`false`&nbsp;if&nbsp;the&nbsp;value&nbsp;is&nbsp;`true`,&nbsp;or&nbsp;`true`&nbsp;if</span><span class="mtk9">&nbsp;the&nbsp;value&nbsp;is&nbsp;`false`.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">not</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;3)&nbsp;Calculates&nbsp;the&nbsp;sRGB&nbsp;negative&nbsp;(i.</span><span class="mtk9">e.,&nbsp;complement)&nbsp;of&nbsp;a&nbsp;color.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value&nbsp;&nbsp;The&nbsp;"color"&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;"color"&nbsp;value&nbsp;whose&nbsp;red,&nbsp;green,&nbsp;and&nbsp;blue</span><span class="mtk9">&nbsp;components&nbsp;are&nbsp;opposites&nbsp;of&nbsp;the&nbsp;`value`&nbsp;color's&nbsp;c</span><span class="mtk9">omponents</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;sRGB&nbsp;color&nbsp;space.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">color.rgb</span><span class="mtk13">(</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.r</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.g</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.b</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.t</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;This&nbsp;overload&nbsp;is&nbsp;**invalid**.</span></span><br><span><span class="mtk9">//&nbsp;Although&nbsp;the&nbsp;required&nbsp;parameter&nbsp;has&nbsp;a&nbsp;different</span><span class="mtk9">&nbsp;name&nbsp;from&nbsp;that&nbsp;of&nbsp;Overload&nbsp;1,&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;c</span><span class="mtk9">all&nbsp;the</span></span><br><span><span class="mtk9">//&nbsp;function&nbsp;using&nbsp;a&nbsp;*positional*&nbsp;argument.&nbsp;The&nbsp;com</span><span class="mtk9">piler&nbsp;cannot&nbsp;determine&nbsp;whether&nbsp;calls&nbsp;such&nbsp;as&nbsp;`nega</span><span class="mtk9">te(close)`</span></span><br><span><span class="mtk9">//&nbsp;should&nbsp;refer&nbsp;to&nbsp;the&nbsp;first&nbsp;overload&nbsp;or&nbsp;this&nbsp;one,</span><span class="mtk9">&nbsp;so&nbsp;it&nbsp;raises&nbsp;an&nbsp;error.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">comparedValue</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">not</span><span class="mtk1">&nbsp;</span><span class="mtk13">(</span><span class="mtk33">comparedValue</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk13">)</span></span><br></code></div>
<p>In Pine, function overloads can contain calls to overloads with the <em>same</em> function name in their bodies, but only if those overloads are defined first. However, just like non-overloaded functions, an overload <em>cannot</em> use calls to <em>itself</em> within its body.</p>
<p>For example, the script version below defines a fourth <code dir="auto">negate()</code> overload with two required “float” parameters. The new overload calculates the product of its arguments, then calls the <em>first</em> overload of <code dir="auto">negate()</code> to change the result’s sign. This script compiles successfully, because the fourth overload uses a <em>separate</em> <code dir="auto">negate()</code> implementation in its scope, <em>not</em> a call to itself:</p>
<p><img src="/pine-script-docs/_astro/User-defined-functions-Function-overloading-2.CU45Rhl7_ZRpVfS.webp" alt="image" width="2656" height="1108" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="7h3"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Overloads&nbsp;calling&nbsp;other&nbsp;overloads&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;1)&nbsp;Changes&nbsp;the&nbsp;sign&nbsp;of&nbsp;a&nbsp;number.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value&nbsp;&nbsp;&nbsp;The&nbsp;"float"&nbsp;or&nbsp;"int"&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;negated&nbsp;number.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">-</span><span class="mtk33">value</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;2)&nbsp;Negates&nbsp;a&nbsp;Boolean&nbsp;value.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value&nbsp;&nbsp;&nbsp;The&nbsp;"bool"&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`false`&nbsp;if&nbsp;the&nbsp;value&nbsp;is&nbsp;`true`,&nbsp;or&nbsp;`true`&nbsp;i</span><span class="mtk9">f&nbsp;the&nbsp;value&nbsp;is&nbsp;`false`.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">not</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;3)&nbsp;Calculates&nbsp;the&nbsp;sRGB&nbsp;negative&nbsp;(i</span><span class="mtk9">.e.,&nbsp;complement)&nbsp;of&nbsp;a&nbsp;color.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value&nbsp;&nbsp;&nbsp;The&nbsp;"color"&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;"color"&nbsp;value&nbsp;whose&nbsp;red,&nbsp;green,&nbsp;and&nbsp;blu</span><span class="mtk9">e&nbsp;components&nbsp;are&nbsp;opposites&nbsp;of&nbsp;the&nbsp;`value`&nbsp;color's&nbsp;</span><span class="mtk9">components</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;sRGB&nbsp;color&nbsp;space.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">color.rgb</span><span class="mtk13">(</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.r</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.g</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.b</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.t</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Overload&nbsp;4)&nbsp;Changes&nbsp;the&nbsp;sign&nbsp;of&nbsp;the&nbsp;product</span><span class="mtk9">&nbsp;of&nbsp;two&nbsp;numbers.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value1&nbsp;&nbsp;The&nbsp;first&nbsp;"float"&nbsp;or&nbsp;"int"&nbsp;value&nbsp;to&nbsp;proce</span><span class="mtk9">ss.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@param</span><span class="mtk9">&nbsp;value2&nbsp;&nbsp;The&nbsp;second&nbsp;value&nbsp;to&nbsp;process.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@returns</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;negated&nbsp;product.</span></span><br><span><span class="mtk15">negate</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">value1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">value2</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Using&nbsp;this&nbsp;call&nbsp;in&nbsp;the&nbsp;overload's&nbsp;body&nbsp;does&nbsp;not</span><span class="mtk9">&nbsp;cause&nbsp;an&nbsp;error,&nbsp;because&nbsp;it&nbsp;is&nbsp;*non-recursive*.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;It&nbsp;refers&nbsp;to&nbsp;the&nbsp;*first*&nbsp;`negate()`&nbsp;implementat</span><span class="mtk9">ion,&nbsp;not&nbsp;the&nbsp;fourth.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">negate</span><span class="mtk13">(</span><span class="mtk33">value1</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">value2</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;`true`&nbsp;if&nbsp;the&nbsp;current&nbsp;`close`&nbsp;value&nbsp;is&nbsp;*not*&nbsp;grea</span><span class="mtk9">ter&nbsp;than&nbsp;the&nbsp;value&nbsp;of&nbsp;`open`.&nbsp;Otherwise,&nbsp;`false`.</span></span><br><span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">notUpBar</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">negate</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;`-close&nbsp;*&nbsp;2`&nbsp;if&nbsp;the&nbsp;`notUpBar`&nbsp;condition&nbsp;is&nbsp;`true</span><span class="mtk9">`,&nbsp;or&nbsp;`close&nbsp;*&nbsp;2`&nbsp;if&nbsp;the&nbsp;condition&nbsp;is&nbsp;`false`.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotSeries</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">notUpBar</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk33">negate</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk33">negate</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">-2</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;sRGB&nbsp;negative&nbsp;of&nbsp;`color.green`.</span></span><br><span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">negate</span><span class="mtk13">(</span><span class="mtk11">color.green</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;value&nbsp;of&nbsp;`plotSeries`&nbsp;and&nbsp;color&nbsp;it&nbsp;usi</span><span class="mtk9">ng&nbsp;`plotColor`.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">plotSeries</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Test&nbsp;plot"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_area</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>If we change the fourth overload to use a <code dir="auto">negate()</code> call with <em>two</em> “float” arguments, a compilation error occurs because the overload calls <em>itself</em> in that case. Even if Pine allowed recursive functions, using such an overload would cause an error because it creates the equivalent of an <em>infinite loop</em>, where a single call activates a second call, the second call activates a third one, and so on.</li>
</ul>
<h2 id="limitations" class="md-heading"><a href="#limitations"> <span class="fancy-wrap">Limitations<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>This section explains several key limitations common to all user-defined functions. These same limitations also apply to <a href="/pine-script-docs/language/methods/#user-defined-methods">user-defined methods</a>.</p>
<h3 id="no-global-only-built-in-function-calls" class="md-heading"><a href="#no-global-only-built-in-function-calls">No global-only built-in function <span class="fancy-wrap">calls<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The body of a user-defined function can contain calls to most other functions or <a href="/pine-script-docs/language/methods/">methods</a>, or previously defined <a href="/pine-script-docs/language/user-defined-functions/#function-overloading">overloads</a> with the same function name. However, a function <em>cannot</em> use calls to the following <em>built-in</em> functions inside its scope:</p>
<ul>
<li>Declaration statements: <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_indicator">indicator()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_strategy">strategy()</a>, and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_library">library()</a>.</li>
<li>Plot-related functions: <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plot">plot()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_hline">hline()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_fill">fill()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plotshape">plotshape()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plotchar">plotchar()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plotarrow">plotarrow()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plotbar">plotbar()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_plotcandle">plotcandle()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_barcolor">barcolor()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_bgcolor">bgcolor()</a>, and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_alertcondition">alertcondition()</a>.</li>
</ul>
<p>Global variables can be assigned values returned by functions in order to be used in calls to the above functions. However, the calls to these functions are allowed only in the script’s <a href="/pine-script-docs/faq/programming/#what-does-scope-mean">global scope</a>, outside the operands of <a href="/pine-script-docs/language/operators/#-ternary-operator">ternary operations</a> or other conditional expressions.</p>
<h3 id="consistent-types-for-each-call" class="md-heading"><a href="#consistent-types-for-each-call">Consistent types for each <span class="fancy-wrap">call<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>Each written call to a user-defined function must have <em>consistent</em> parameter types and return types during each evaluation of that call. The call <em>cannot</em> accept varying argument types throughout the script’s runtime, nor can it change its return type. Similar limitations also apply to other structures and expressions, including <a href="/pine-script-docs/language/loops/">loops</a>, <a href="/pine-script-docs/language/conditional-structures/">conditional structures</a>, and ternary operations.</p>
<h3 id="cannot-modify-global-variables-or-parameters" class="md-heading"><a href="#cannot-modify-global-variables-or-parameters">Cannot modify global variables or <span class="fancy-wrap">parameters<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The body of a user-defined function cannot use the <em>reassignment</em> or <em>compound assignment</em> <a href="/pine-script-docs/language/operators/">operators</a> to modify variables declared in the <em>global scope</em>. Likewise, it cannot use these operators to reassign function <em>parameters</em>. The value or reference assigned to a global variable or the parameter of a function call <em>cannot change</em> while the script evaluates the call. See the <a href="/pine-script-docs/language/user-defined-functions/#function-scopes">Function scopes</a> section for an example.</p>
<h3 id="no-nested-definitions" class="md-heading"><a href="#no-nested-definitions">No nested <span class="fancy-wrap">definitions<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The body of a user-defined function <em>cannot</em> contain the definition of another user-defined function. Likewise, <a href="/pine-script-docs/language/loops/">loops</a> and <a href="/pine-script-docs/language/conditional-structures/">conditional structures</a> cannot include function definitions in their local blocks. Function and <a href="/pine-script-docs/language/methods/#user-defined-methods">method</a> definitions are allowed only in the script’s <em>global scope</em>.</p>
<p>For example, the following <code dir="auto">f()</code> function definition causes a compilation error, because it attempts to define another function, <code dir="auto">g()</code>, within its body:</p>
<div class="pine-colorizer not-content colorized" data-id="3om"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Invalid&nbsp;nested&nbsp;definition&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk33">f</span><span class="mtk13">(</span><span class="mtk33">x</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">y</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Defining&nbsp;a&nbsp;separate&nbsp;function&nbsp;inside&nbsp;the&nbsp;body&nbsp;of</span><span class="mtk9">&nbsp;`f()`&nbsp;is&nbsp;not&nbsp;allowed.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">g</span><span class="mtk13">(</span><span class="mtk33">a</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.sqrt</span><span class="mtk13">(</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">g</span><span class="mtk13">(</span><span class="mtk33">x</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">y</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk13">(</span><span class="mtk33">x</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">y</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">f</span><span class="mtk13">(</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">))</span></span><br></code></div>
<p>Instead of attempting to define <code dir="auto">g()</code> within the scope of <code dir="auto">f()</code>, we can move the definition of <code dir="auto">g()</code> above <code dir="auto">f()</code> in the global scope:</p>
<div class="pine-colorizer not-content colorized" data-id="26g"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Moving&nbsp;nested&nbsp;definitions&nbsp;to&nbsp;the&nbsp;global&nbsp;scope&nbsp;dem</span><span class="mtk29">o"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;If&nbsp;we&nbsp;move&nbsp;`g()`&nbsp;to&nbsp;the&nbsp;global&nbsp;scope,&nbsp;above&nbsp;`f(</span><span class="mtk9">)`,&nbsp;the&nbsp;`f()`&nbsp;function&nbsp;can&nbsp;use&nbsp;it,&nbsp;and&nbsp;no&nbsp;error&nbsp;oc</span><span class="mtk9">curs.</span></span><br><span><span class="mtk33">g</span><span class="mtk13">(</span><span class="mtk33">a</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.sqrt</span><span class="mtk13">(</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk33">f</span><span class="mtk13">(</span><span class="mtk33">x</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">y</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">g</span><span class="mtk13">(</span><span class="mtk33">x</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">y</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk13">(</span><span class="mtk33">x</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">y</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">f</span><span class="mtk13">(</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">))</span></span><br></code></div>
<h3 id="no-recursive-functions" class="md-heading"><a href="#no-recursive-functions">No recursive <span class="fancy-wrap">functions<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>In contrast to functions in some programming languages, user-defined functions in Pine Script <em>cannot</em> contain calls to <em>themselves</em> within their bodies. Instead of using recursive function structures, programmers can replace those structures with equivalent <a href="/pine-script-docs/language/loops/">loop</a> calculations.</p>
<p>For instance, the following <code dir="auto">gcd()</code> function causes a compilation error because it includes a <code dir="auto">gcd()</code> call within its body:</p>
<div class="pine-colorizer not-content colorized" data-id="2rt"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Invalid&nbsp;recursive&nbsp;function&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk15">gcd</span><span class="mtk13">(</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">x</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">y</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;This&nbsp;expression&nbsp;causes&nbsp;an&nbsp;error.&nbsp;`gcd()`&nbsp;cannot</span><span class="mtk9">&nbsp;call&nbsp;itself.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">y</span><span class="mtk1">&nbsp;</span><span class="mtk18">==</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk33">x</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk33">gcd</span><span class="mtk13">(</span><span class="mtk33">y</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">x</span><span class="mtk1">&nbsp;</span><span class="mtk18">%</span><span class="mtk1">&nbsp;</span><span class="mtk33">y</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">gcd</span><span class="mtk13">(</span><span class="mtk12">15</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk13">))</span></span><br></code></div>
<p>Instead of attempting to use recursion, we can reformat the function’s structure to perform the necessary calculations using <em>iteration</em>. The example version below achieves our intended calculations using a <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_while">while</a> loop and no recursive <code dir="auto">gcd()</code> calls:</p>
<div class="pine-colorizer not-content colorized" data-id="11p"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Replacing&nbsp;recursion&nbsp;with&nbsp;loops&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;This&nbsp;function&nbsp;performs&nbsp;the&nbsp;same&nbsp;intended&nbsp;calcul</span><span class="mtk9">ations&nbsp;as&nbsp;the&nbsp;invalid&nbsp;recursive&nbsp;structure.</span></span><br><span><span class="mtk9">//&nbsp;It&nbsp;uses&nbsp;separate&nbsp;local&nbsp;variables&nbsp;to&nbsp;track&nbsp;value</span><span class="mtk9">s,&nbsp;and&nbsp;modifies&nbsp;those&nbsp;variables&nbsp;in&nbsp;a&nbsp;`while`&nbsp;loop</span></span><br><span><span class="mtk9">//&nbsp;until&nbsp;it&nbsp;finds&nbsp;the&nbsp;greatest&nbsp;common&nbsp;divisor&nbsp;for&nbsp;</span><span class="mtk9">two&nbsp;positive&nbsp;integers.</span></span><br><span><span class="mtk15">gcd</span><span class="mtk13">(</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">x</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">y</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">x</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">y</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">while</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span><span class="mtk1">&nbsp;</span><span class="mtk18">!=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">remainder</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">%</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">b</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk33">remainder</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">a</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">gcd</span><span class="mtk13">(</span><span class="mtk12">15</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk13">))</span></span><br></code></div>      </div> <div class="pagination-buttons not-content" data-astro-cid-xgirumru=""> <a href="/pine-script-docs/language/built-ins" class="pagination-card" data-pagefind-ignore="" data-astro-cid-assl6cvf=""> <p data-astro-cid-assl6cvf="">Previous</p> <h4 class="pagination-card-header" data-astro-cid-assl6cvf=""> <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-assl6cvf="" data-icon="theme/arrow-back">  <use xlink:href="#ai:local:theme/arrow-back"></use>  </svg> Built-ins  </h4> </a>  <a href="/pine-script-docs/language/objects" class="pagination-card" data-pagefind-ignore="" data-astro-cid-assl6cvf=""> <p data-astro-cid-assl6cvf="">Next</p> <h4 class="pagination-card-header" data-astro-cid-assl6cvf="">  Objects <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-assl6cvf="" data-icon="theme/arrow">  <symbol id="ai:local:theme/arrow"><path fill="none" stroke="var(--arrow-fill-color, #131722)" d="m11 8 6 6-6 6"></path></symbol><use xlink:href="#ai:local:theme/arrow"></use>  </svg> </h4> </a>  </div>  </main>   <div id="toc" data-pagefind-ignore="all" data-astro-cid-oor6cujd=""><aside class="document-toc-container ml-4 w-48" data-astro-cid-oor6cujd=""><section id="toc-scroll-section" class="slick-scroll" data-astro-cid-oor6cujd=""><header data-astro-cid-oor6cujd=""><h2 class="toc-header" data-astro-cid-oor6cujd="">On this page</h2></header><ul class="" id="toc-entries" data-astro-cid-oor6cujd=""><a href="#introduction" aria-current="true" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-current="" data-astro-cid-oor6cujd="">Introduction</li></a><a href="#structure-and-syntax" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">Structure and syntax</li></a><a href="#single-line-functions" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Single-line functions</li></a><a href="#multiline-functions" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Multiline functions</li></a><a href="#functions-that-return-multiple-results" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">Functions that return multiple results</li></a><a href="#declaring-parameter-types" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">Declaring parameter types</li></a><a href="#type-keywords" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Type keywords</li></a><a href="#qualifier-keywords" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Qualifier keywords</li></a><a href="#documenting-functions" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">Documenting functions</li></a><a href="#function-scopes" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">Function scopes</li></a><a href="#scope-of-a-function-call" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Scope of a function call</li></a><a href="#function-overloading" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">Function overloading</li></a><a href="#limitations" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">Limitations</li></a><a href="#no-global-only-built-in-function-calls" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">No global-only built-in function calls</li></a><a href="#consistent-types-for-each-call" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Consistent types for each call</li></a><a href="#cannot-modify-global-variables-or-parameters" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Cannot modify global variables or parameters</li></a><a href="#no-nested-definitions" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">No nested definitions</li></a><a href="#no-recursive-functions" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">No recursive functions</li></a></ul></section><div class="toc-bottom-fade" data-astro-cid-oor6cujd=""></div><div class="back-top-space" data-astro-cid-oor6cujd=""><div class="not-content" style="" data-astro-cid-pkzv2hgs=""> <a id="back-top-button" title="Back to top" href="#top" data-astro-cid-pkzv2hgs="" class="floating-button not-content stvb-base stvb-pointer stvb-gray stvb-medium stvb-secondary stvb-icon stvb-icon-force-color stvb-force-no-border"> <svg width="18" height="18" viewBox="0 0 18 18" data-astro-cid-oor6cujd="" data-icon="theme/arrow-up">  <symbol id="ai:local:theme/arrow-up"><g fill="none"><g clip-path="url(#a)"><path fill="currentColor" fill-rule="evenodd" d="m9 3.5.5.44 4 3.5-1 1.12-2.75-2.4V14h-1.5V6.15L5.49 8.56l-.98-1.12 4-3.5z" clip-rule="evenodd"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h18v18H0z"></path></clipPath></defs></g></symbol><use xlink:href="#ai:local:theme/arrow-up"></use>  </svg> </a> </div> </div></aside></div> </main> </div>   <footer data-astro-cid-b6pf7ola=""> <div class="footer-content" data-astro-cid-b6pf7ola="">  <ul data-astro-cid-b6pf7ola=""> <li data-astro-cid-b6pf7ola=""> <a href="https://www.tradingview.com/chat/#BfmVowG1TZkKO235" data-astro-cid-b6pf7ola="">Pine Q&amp;A chat</a>  </li><li data-astro-cid-b6pf7ola=""> <a href="https://stackoverflow.com/questions/tagged/pine-script" data-astro-cid-b6pf7ola="">Stack Overflow</a>  ↗ </li><li data-astro-cid-b6pf7ola=""> <a href="https://t.me/PineCodersQA" data-astro-cid-b6pf7ola="">Telegram</a>  ↗ </li><li data-astro-cid-b6pf7ola=""> <a href="https://www.reddit.com/r/TradingView/" data-astro-cid-b6pf7ola="">Reddit</a>  ↗ </li> </ul> <div class="flex" data-astro-cid-b6pf7ola=""></div> <div class="copyright" data-astro-cid-b6pf7ola="">Copyright © 2025 TradingView, Inc.</div> </div> </footer>         </body></html>
<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><script data-astro-exec="">
			const url = window.location.href;
			const expectedUrl = url.replace(
				/^https:\/\/(?!beta)(\w+\.)?tradingview\.com/,
				'https://www.tradingview.com',
			);
			if (url !== expectedUrl) {
				window.location.replace(expectedUrl);
			}
		</script><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="none"><link rel="icon" href="https://static.tradingview.com/static/images/favicon.ico"><link rel="icon" type="image/svg+xml" href="/pine-script-docs/favicon.svg"><title>Concepts / Strings</title><meta name="og:title" content="Concepts / Strings"><meta name="twitter:title" content="Concepts / Strings"><meta name="description" content="Everything you need to know about Pine Script®."><meta name="og:description" content="Everything you need to know about Pine Script®."><meta name="twitter:description" content="Everything you need to know about Pine Script®."><meta name="keywords" content="tradingview, pine, script, indicators, strategies"><meta name="og:image" content="/pine-script-docs/meta-image.png?1"><meta name="twitter:image" content="/pine-script-docs/meta-image.png?1"><meta name="og:image:width" content="1200"><meta name="og:image:height" content="630"><meta name="og:url" content="https://www.tradingview.com/pine-script-docs/concepts/strings/"><meta name="twitter:url" content="https://www.tradingview.com/pine-script-docs/concepts/strings/"><meta name="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@TradingView"><link rel="canonical" href="https://www.tradingview.com/pine-script-docs/concepts/strings/"><link rel="sitemap" href="/pine-script-docs/sitemap-index.xml"><link rel="stylesheet" href="/pine-script-docs/_astro/index.DfaRTfPD.css">
<link rel="stylesheet" href="/pine-script-docs/_astro/index.B9ah8c5K.css">
<style>.tv-spinner{display:none;position:absolute;margin:0 auto;border:0 solid rgb(149 152 161 / 20%);border-radius:50%;border-top-color:var(--tv-spinner-color, #2962ff);border-left-color:var(--tv-spinner-color, #2962ff);animation:tv-spinner-container-rotate .9s linear infinite}.tv-spinner-shown{display:block}.tv-spinner-size-large{top:calc(50% - 32px);left:calc(50% - 32px);width:56px;height:56px;border-width:4px}@keyframes tv-spinner-container-rotate{to{transform:rotate(360deg)}}:root{--page-background-color: #fff;background-color:var(--page-background-color)}:root[data-theme=dark]{--page-background-color: #000}body{background-color:var(--page-background-color)}#redirect-link{display:flex;position:absolute;inset:0;align-items:center;justify-content:center}#spinner{display:block;position:absolute;opacity:1;transition:opacity .2s}
.twitter-tweet:not(.twitter-tweet-rendered){padding:var(--tc-padding, 1em);border:1px solid var(--tc-border-color, #cfd9de)}.twitter-tweet:not(.twitter-tweet-rendered)>:first-child{margin-top:0}.twitter-tweet:not(.twitter-tweet-rendered)>:last-child{margin-bottom:0}lite-youtube{background-color:#000;position:relative;display:block;contain:content;background-position:center center;background-size:cover;cursor:pointer;max-width:720px}lite-youtube:before{content:attr(data-title);display:block;position:absolute;top:0;background-image:linear-gradient(180deg,#000000ab,#0000008a 14%,#00000026 54%,#0000000d 72%,#0000 94%);height:99px;width:100%;font-family:YouTube Noto,Roboto,Arial,Helvetica,sans-serif;color:#eee;text-shadow:0 0 2px rgba(0,0,0,.5);font-size:18px;padding:25px 20px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box}lite-youtube:hover:before{color:#fff}lite-youtube:after{content:"";display:block;padding-bottom:56.25%}lite-youtube>iframe{width:100%;height:100%;position:absolute;top:0;left:0;border:0}lite-youtube>.lty-playbtn{display:block;width:100%;height:100%;background:no-repeat center/68px 48px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/><path d="M45 24 27 14v20" fill="white"/></svg>');position:absolute;cursor:pointer;z-index:1;filter:grayscale(100%);transition:filter .1s cubic-bezier(0,0,.2,1);border:0}lite-youtube:hover>.lty-playbtn,lite-youtube .lty-playbtn:focus{filter:none}lite-youtube.lyt-activated{cursor:unset}lite-youtube.lyt-activated:before,lite-youtube.lyt-activated>.lty-playbtn{opacity:0;pointer-events:none}.lyt-visually-hidden{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}lite-youtube>iframe{all:unset!important;width:100%!important;height:100%!important;position:absolute!important;inset:0!important;border:0!important}lite-vimeo{font-size:10px;background-color:#000;position:relative;display:block;contain:content;background-position:center center;background-size:cover}lite-vimeo:after{content:"";display:block;padding-bottom:56.25%}lite-vimeo>iframe{all:unset!important;width:100%!important;height:100%!important;position:absolute!important;inset:0!important;border:0!important}lite-vimeo>.ltv-playbtn{content:"";position:absolute;inset:0;width:100%;background:transparent;outline:0;border:0;cursor:pointer}lite-vimeo>.ltv-playbtn:before{width:6.5em;height:4em;background:#172322bf;opacity:.8;border-radius:.25rem;transition:all .2s cubic-bezier(0,0,.2,1)}lite-vimeo>.ltv-playbtn:focus:before{outline:auto}lite-vimeo:hover>.ltv-playbtn:before{background-color:#00adef;background-color:var(--ltv-color, #00adef);opacity:1}lite-vimeo>.ltv-playbtn:after{border-style:solid;border-width:1em 0 1em 1.7em;border-color:transparent transparent transparent #fff}lite-vimeo>.ltv-playbtn:before,lite-vimeo>.ltv-playbtn:after{content:"";position:absolute;top:50%;left:50%;transform:translate3d(-50%,-50%,0)}lite-vimeo.ltv-activated:before,lite-vimeo.ltv-activated>.ltv-playbtn{cursor:unset;opacity:0;pointer-events:none}
</style><script type="module" src="/pine-script-docs/_astro/hoisted.wfEHaJbk.js" data-astro-exec=""></script><style id="tv-pine-light" type="text/css" media="screen">.monaco-editor-tv-pine-light { 
.mtk1 { color: #131722; }
.mtk2 { color: #ffffff; }
.mtk3 { color: #808080; }
.mtk4 { color: #ff0000; }
.mtk5 { color: #0451a5; }
.mtk6 { color: #0000ff; }
.mtk7 { color: #098658; }
.mtk8 { color: #008000; }
.mtk9 { color: #9598a1; }
.mtk10 { color: #dd0000; }
.mtk11 { color: #cc2929; }
.mtk12 { color: #f57f17; }
.mtk13 { color: #000000; }
.mtk14 { color: #383838; }
.mtk15 { color: #0c3299; }
.mtk16 { color: #2962ff; }
.mtk17 { color: #8e24aa; }
.mtk18 { color: #22ab94; }
.mtk19 { color: #cd3131; }
.mtk20 { color: #863b00; }
.mtk21 { color: #af00db; }
.mtk22 { color: #800000; }
.mtk23 { color: #e00000; }
.mtk24 { color: #3030c0; }
.mtk25 { color: #666666; }
.mtk26 { color: #778899; }
.mtk27 { color: #c700c7; }
.mtk28 { color: #a31515; }
.mtk29 { color: #388e3c; }
.mtk30 { color: #4f76ac; }
.mtk31 { color: #008080; }
.mtk32 { color: #001188; }
.mtk33 { color: #2a2e39; }
.mtk34 { color: #4864aa; }
.mtki { font-style: italic; }
.mtkb { font-weight: bold; }
.mtku { text-decoration: underline; text-underline-position: under; }
.mtks { text-decoration: line-through; }
.mtks.mtku { text-decoration: underline line-through; text-underline-position: under; } }</style></head> <body> <div id="search-content-blur" hidden=""></div> <script data-astro-exec="">
	/* eslint-disable @typescript-eslint/typedef */
	window.ThemeProvider = (() => {
		function getCurrent() {
			return (
				// eslint-disable-next-line no-restricted-syntax
				typeof localStorage !== 'undefined' &&
				localStorage.getItem('tv-docs-theme')
			);
		}
		const storedTheme = getCurrent();
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ?
				'light'
			:	'dark');
		document.documentElement.dataset.theme =
			theme === 'light' ? 'light' : 'dark';
		document.documentElement.classList.toggle(
			'theme-dark',
			theme === 'dark',
		); // add support for ui-lib themes
		document.documentElement.classList.toggle(
			'sl-theme-dark',
			theme === 'dark',
		); // add support for shoelace themes

		return {
			updatePickers(themeArg = storedTheme || 'auto') {
				let currentTheme = themeArg;
				if (currentTheme === 'unknown') {
					currentTheme = getCurrent() || 'auto';
				}
				document
					.querySelectorAll('docs-theme-select')
					.forEach((picker) => {
						const select = picker.querySelector('select');
						if (select) select.value = currentTheme;
						/** @type {HTMLTemplateElement | null} */
						const tmpl = document.querySelector(`#theme-icons`);
						const newIcon =
							tmpl &&
							tmpl.content.querySelector('.' + currentTheme);
						if (newIcon) {
							const oldIcon =
								picker.querySelector('svg.label-icon');
							if (oldIcon) {
								oldIcon.replaceChildren(
									...newIcon.cloneNode(true).childNodes,
								);
							}
						}
					});
			},
		};
	})();
	/* eslint-enable @typescript-eslint/typedef */
</script><template id="theme-icons"><svg width="16" height="16" viewBox="0 0 28 28" class="light" data-icon="theme/sun-28">  <symbol id="ai:local:theme/sun-28"><g fill="currentColor"><path d="M14 3h1.5v5H14zm0 18h1.5v5H14zm12-5.5V14h-5v1.5zM8 14v1.5H3V14zm15.3-7-1-1-3.6 3.6 1.1 1 3.5-3.5ZM9.5 18.7l1.1 1.1-3.5 3.5-1-1zM22 23.3l1-1-3.6-3.6-1 1.1 3.5 3.5ZM10.3 9.6l-1.1 1-3.5-3.5 1-1z"></path><path fill-rule="evenodd" d="M19 14.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0m-1.5 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0" clip-rule="evenodd"></path></g></symbol><use xlink:href="#ai:local:theme/sun-28"></use>  </svg><svg width="16" height="16" viewBox="0 0 28 28" class="dark" data-icon="theme/moon-28">  <symbol id="ai:local:theme/moon-28"><path fill="currentColor" fill-rule="evenodd" d="M21 7.02A9.23 9.23 0 0 0 15.2 5 9.1 9.1 0 0 0 6 14c0 4.97 4.12 9 9.2 9a9.33 9.33 0 0 0 5.8-2.02A7 7 0 0 1 14.36 14 7 7 0 0 1 21 7.02m-3.95-.3a8 8 0 0 0-1.85-.22A7.6 7.6 0 0 0 7.5 14a7.6 7.6 0 0 0 7.7 7.5 8 8 0 0 0 1.85-.22A8.46 8.46 0 0 1 12.86 14c0-3.1 1.69-5.8 4.19-7.28" clip-rule="evenodd"></path></symbol><use xlink:href="#ai:local:theme/moon-28"></use>  </svg><svg width="16" height="16" viewBox="0 0 28 28" class="auto" data-icon="theme/system-28">  <symbol id="ai:local:theme/system-28"><path fill="currentColor" d="M8 4h1v2H8zm0 9v2h1v-2zm6-3V9h-2v1zM3 9v1h2V9zm5.5 3a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5m4.2-6-.7-.7-1.4 1.4.7.7zM5 13.7l-.7-.7 1.4-1.4.7.7zm7.7-.7-.7.7-1.4-1.4.7-.7zM4.3 6l.7-.7 1.4 1.4-.7.7zm3 17 14-14 .8.7L8 23.7zm17.2-.1a3.5 3.5 0 0 1-3.4-5.9H21a4 4 0 1 0 3.5 5.9"></path></symbol><use xlink:href="#ai:local:theme/system-28"></use>  </svg></template> <div class="backdrop" data-mobile-menu-backdrop="" data-astro-cid-h2irkosh=""></div> <div class="menu-container" data-astro-cid-h2irkosh=""> <div class="header" data-astro-cid-h2irkosh=""> <div class="header-group" data-astro-cid-h2irkosh=""> <div id="version-select" data-astro-cid-kx7qoxgq=""> <label style="--sl-select-width: undefined; --sl-label-icon-size: 16px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq="">Version</span>  <select value="v6" data-has-border="" no-icon="true" data-astro-cid-lmznfliq=""> <option value="v6" selected="true" data-astro-cid-lmznfliq="">Version 6</option><option value="v5" data-astro-cid-lmznfliq="">Version 5</option><option value="v4" data-astro-cid-lmznfliq="">Version 4</option><option value="v3" data-astro-cid-lmznfliq="">Version 3</option> </select> <svg width="16" height="16" viewBox="0 0 24 24" class="icon caret" data-astro-cid-lmznfliq="" data-icon="theme/down-caret">  <symbol id="ai:local:theme/down-caret"><path fill="currentColor" d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1 1 0 0 0 1.42 0L17 10.59a1 1 0 0 0 0-1.42"></path></symbol><use xlink:href="#ai:local:theme/down-caret"></use>  </svg> </label>  </div>   <docs-theme-select class="" data-astro-cid-3wpspbi7=""> <label style="--sl-select-width: 48px; --sl-label-icon-size: 28px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq="">Theme</span> <svg width="28" height="28" viewBox="0 0 28 28" class="icon label-icon" data-button="" data-round="" data-astro-cid-lmznfliq="" data-icon="theme/system-28">  <symbol id="ai:local:theme/system-28"><path fill="currentColor" d="M8 4h1v2H8zm0 9v2h1v-2zm6-3V9h-2v1zM3 9v1h2V9zm5.5 3a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5m4.2-6-.7-.7-1.4 1.4.7.7zM5 13.7l-.7-.7 1.4-1.4.7.7zm7.7-.7-.7.7-1.4-1.4.7-.7zM4.3 6l.7-.7 1.4 1.4-.7.7zm3 17 14-14 .8.7L8 23.7zm17.2-.1a3.5 3.5 0 0 1-3.4-5.9H21a4 4 0 1 0 3.5 5.9"></path></symbol><use xlink:href="#ai:local:theme/system-28"></use>  </svg> <select value="auto" data-button="" data-astro-cid-lmznfliq=""> <option value="dark" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Dark&nbsp;&nbsp;</option><option value="light" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Light&nbsp;&nbsp;</option><option value="auto" selected="true" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Auto&nbsp;&nbsp;</option> </select>  </label>  </docs-theme-select>   <script data-astro-exec="">
	ThemeProvider.updatePickers('unknown');
</script>  </div> <div class="header-group" data-astro-cid-h2irkosh="">  <div class="not-content" style="stroke-width:2px" data-astro-cid-pkzv2hgs=""> <button id="mobile-menu-back-button" title="Close menu" data-astro-cid-pkzv2hgs="" class="not-content stvb-base stvb-pointer stvb-gray stvb-medium stvb-primary stvb-icon">  <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-h2irkosh="" data-icon="theme/arrow-back">  <symbol id="ai:local:theme/arrow-back"><g fill="none"><g clip-path="url(#a)"><path stroke="var(--arrow-fill-color, #131722)" d="m17 20-6-6 6-6"></path></g><defs><clipPath id="a"><path fill="#fff" d="M28 28H0V0h28z"></path></clipPath></defs></g></symbol><use xlink:href="#ai:local:theme/arrow-back"></use>  </svg>  </button> </div>  </div> </div> <aside id="nav" class="keep-visible" style="--navbar-right-border-width: 0px" data-astro-cid-sa57sq6l=""> <div class="sidebar-viewport slick-scroll" data-astro-cid-sa57sq6l=""> <div class="sidebar" data-mobile="" data-astro-cid-sa57sq6l=""> <ul class="toc" aria-label="Docs sidebar" data-astro-cid-sa57sq6l=""> <li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/welcome" data-astro-cid-omxx3dey="">Welcome to Pine Script® v6</a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Pine Script® primer</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-steps" data-astro-cid-omxx3dey="">First steps</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-indicator" data-astro-cid-omxx3dey="">First indicator</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/next-steps" data-astro-cid-omxx3dey="">Next steps</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Language</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/execution-model" data-astro-cid-omxx3dey="">Execution model</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/type-system" data-astro-cid-omxx3dey="">Type system</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/script-structure" data-astro-cid-omxx3dey="">Script structure</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/identifiers" data-astro-cid-omxx3dey="">Identifiers</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/variable-declarations" data-astro-cid-omxx3dey="">Variable declarations</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/operators" data-astro-cid-omxx3dey="">Operators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/conditional-structures" data-astro-cid-omxx3dey="">Conditional structures</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/loops" data-astro-cid-omxx3dey="">Loops</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/built-ins" data-astro-cid-omxx3dey="">Built-ins</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/user-defined-functions" data-astro-cid-omxx3dey="">User-defined functions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/objects" data-astro-cid-omxx3dey="">Objects</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/enums" data-astro-cid-omxx3dey="">Enums</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/methods" data-astro-cid-omxx3dey="">Methods</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/arrays" data-astro-cid-omxx3dey="">Arrays</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/matrices" data-astro-cid-omxx3dey="">Matrices</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/maps" data-astro-cid-omxx3dey="">Maps</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Visuals</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/overview" data-astro-cid-omxx3dey="">Overview</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/backgrounds" data-astro-cid-omxx3dey="">Backgrounds</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/bar-coloring" data-astro-cid-omxx3dey="">Bar coloring</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/bar-plotting" data-astro-cid-omxx3dey="">Bar plotting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/colors" data-astro-cid-omxx3dey="">Colors</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/fills" data-astro-cid-omxx3dey="">Fills</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/levels" data-astro-cid-omxx3dey="">Levels</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/lines-and-boxes" data-astro-cid-omxx3dey="">Lines and boxes</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/plots" data-astro-cid-omxx3dey="">Plots</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/tables" data-astro-cid-omxx3dey="">Tables</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/text-and-shapes" data-astro-cid-omxx3dey="">Text and shapes</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details open="" data-is-parent="" data-is-on-path="" data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Concepts</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/alerts" data-astro-cid-omxx3dey="">Alerts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-states" data-astro-cid-omxx3dey="">Bar states</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/chart-information" data-astro-cid-omxx3dey="">Chart information</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/inputs" data-astro-cid-omxx3dey="">Inputs</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/libraries" data-astro-cid-omxx3dey="">Libraries</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/non-standard-charts-data" data-astro-cid-omxx3dey="">Non-standard charts data</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/other-timeframes-and-data" data-astro-cid-omxx3dey="">Other timeframes and data</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/repainting" data-astro-cid-omxx3dey="">Repainting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/sessions" data-astro-cid-omxx3dey="">Sessions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strategies" data-astro-cid-omxx3dey="">Strategies</a></li><li class="item" data-current="" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strings" data-astro-cid-omxx3dey="">Strings</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/time" data-astro-cid-omxx3dey="">Time</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/timeframes" data-astro-cid-omxx3dey="">Timeframes</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Writing scripts</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/style-guide" data-astro-cid-omxx3dey="">Style guide</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/debugging" data-astro-cid-omxx3dey="">Debugging</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/profiling-and-optimization" data-astro-cid-omxx3dey="">Profiling and optimization</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/publishing" data-astro-cid-omxx3dey="">Publishing scripts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/limitations" data-astro-cid-omxx3dey="">Limitations</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">FAQ</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/general" data-astro-cid-omxx3dey="">General</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/alerts" data-astro-cid-omxx3dey="">Alerts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/data-structures" data-astro-cid-omxx3dey="">Data structures</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/functions" data-astro-cid-omxx3dey="">Functions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/indicators" data-astro-cid-omxx3dey="">Indicators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/other-data-and-timeframes" data-astro-cid-omxx3dey="">Other data and timeframes</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/programming" data-astro-cid-omxx3dey="">Programming</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/strategies" data-astro-cid-omxx3dey="">Strategies</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/strings-and-formatting" data-astro-cid-omxx3dey="">Strings and formatting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/techniques" data-astro-cid-omxx3dey="">Techniques</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/times-dates-and-sessions" data-astro-cid-omxx3dey="">Times, dates, and sessions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/variables-and-operators" data-astro-cid-omxx3dey="">Variables and operators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/visuals" data-astro-cid-omxx3dey="">Visuals</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/error-messages" data-astro-cid-omxx3dey="">Error messages</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/release-notes" data-astro-cid-omxx3dey="">Release notes</a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Migration guides</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/overview" data-astro-cid-omxx3dey="">Overview</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-6" data-astro-cid-omxx3dey="">To Pine Script® version 6</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-5" data-astro-cid-omxx3dey="">To Pine Script® version 5</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-4" data-astro-cid-omxx3dey="">To Pine Script® version 4</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-3" data-astro-cid-omxx3dey="">To Pine Script® version 3</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-2" data-astro-cid-omxx3dey="">To Pine Script® version 2</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/where-can-i-get-more-information" data-astro-cid-omxx3dey="">Where can I get more information?</a></li> </ul> <div class="toc-bottom" data-astro-cid-sa57sq6l=""></div> </div> </div> </aside>  </div>   <header class="header" data-astro-cid-d74r2unp=""> <nav role="navigation" aria-label="Main Navigation" data-astro-cid-d74r2unp=""> <mobile-menu-button id="mobile-menu-button-wc" data-astro-cid-oojooh3d=""> <!-- Annoyingly I need to wrap this. TODO: improve this --> <div id="mobile-menu-button-header" data-astro-cid-oojooh3d=""> <div class="not-content" style="" data-astro-cid-pkzv2hgs=""> <button title="Open navigation menu" data-astro-cid-pkzv2hgs="" class="not-content stvb-base stvb-pointer stvb-gray stvb-medium stvb-secondary stvb-icon stvb-icon-force-color stvb-force-no-border">  <svg width="28" height="28" viewBox="0 0 24 24" data-astro-cid-oojooh3d="" data-icon="theme/bars">  <symbol id="ai:local:theme/bars"><path fill="currentColor" d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2m18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2m0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2"></path></symbol><use xlink:href="#ai:local:theme/bars"></use>  </svg>  </button> </div>  </div> </mobile-menu-button>   <div data-hide-when-search="" data-astro-cid-d74r2unp=""> <div class="header-logo" data-astro-cid-tycb33lk=""> <a href="/pine-script-docs/" aria-label="Home button" data-astro-cid-tycb33lk=""> <div class="documentation-logo logo" data-astro-cid-tycb33lk=""><!-- Old Christmas icon -->
<!-- 
<svg width="184" height="44" viewBox="0 0 184 44" fill="none" xmlns="http://www.w3.org/2000/svg">
	<path fill-rule="evenodd" clip-rule="evenodd" d="M33.8209 5.1219C33.885 4.95937 34.115 4.95937 34.1791 5.1219L35.2253 7.77465L37.8781 8.82088C38.0406 8.88499 38.0406 9.11501 37.8781 9.17912L35.2253 10.2253L34.1791 12.8781C34.115 13.0406 33.885 13.0406 33.8209 12.8781L32.7747 10.2253L30.1219 9.17912C29.9594 9.11501 29.9594 8.88499 30.1219 8.82088L32.7747 7.77465L33.8209 5.1219Z" fill="#F9A825"/>
    <path d="M5.30092 15.1478C5.37479 14.9605 5.63986 14.9605 5.71373 15.1478L6.60557 17.4091L8.86685 18.3009C9.05415 18.3748 9.05415 18.6399 8.86685 18.7137L6.60557 19.6056L5.71373 21.8669C5.63986 22.0541 5.37479 22.0541 5.30092 21.8669L4.40908 19.6056L2.1478 18.7137C1.9605 18.6399 1.9605 18.3748 2.1478 18.3009L4.40908 17.4091L5.30092 15.1478Z" fill="#F9A825"/>
    <path d="M11.8231 3.12041C11.8864 2.95986 12.1136 2.95986 12.1769 3.12041L12.9414 5.05865L14.8796 5.82308C15.0401 5.8864 15.0401 6.1136 14.8796 6.17692L12.9414 6.94135L12.1769 8.87959C12.1136 9.04014 11.8864 9.04014 11.8231 8.87959L11.0586 6.94135L9.12041 6.17692C8.95986 6.1136 8.95986 5.8864 9.12041 5.82308L11.0586 5.05865L11.8231 3.12041Z" fill="#F9A825"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M22.6478 7.35459L34.7627 21.6923C35.1531 22.1543 35.0472 22.8544 34.5376 23.1802L26.9989 28.0001L18.4281 20.7531L11.3382 23.2611C10.402 23.5923 9.60771 22.5041 10.2085 21.7134L21.0877 7.39502C21.4749 6.88536 22.2346 6.86567 22.6478 7.35459ZM33.432 28.0842L38.3592 34.7471C38.7427 35.2657 38.3724 36 37.7274 36H6.27248C5.62746 36 5.25722 35.2657 5.64074 34.7471L10.8523 27.6996C10.9484 27.5697 11.0822 27.4725 11.2356 27.4214L17.6878 25.2707C17.9285 25.1904 18.1932 25.2314 18.3984 25.3806L26.2854 31.1166C26.5445 31.3051 26.8922 31.3173 27.1639 31.1475L32.3838 27.885C32.7316 27.6677 33.1881 27.7544 33.432 28.0842Z" fill="#089981"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M17.6363 11.9375C20.7386 12.451 23.1213 11.505 24.9187 10.0422L25.8869 11.1881C23.6236 13.0379 20.553 14.1584 16.6261 13.267L17.6363 11.9375ZM34.0572 20.8573C30.0669 21.363 26.2864 20.8179 23.1264 19.7076C20.7393 18.8689 18.6873 17.7013 17.155 16.3997C16.5283 15.8674 15.9767 15.3021 15.5241 14.7174L16.4708 13.4713C16.8706 14.0544 17.4225 14.6588 18.1262 15.2565C19.5001 16.4237 21.3856 17.5061 23.6236 18.2924C26.3235 19.241 29.5087 19.7493 32.8863 19.4716L34.0572 20.8573ZM9.06812 30.1123C15.4775 33.3909 23.0493 33.8897 29.0345 32.0941C31.0827 31.4796 32.9275 30.6019 34.4713 29.4897L35.3633 30.6959C33.6586 31.9268 31.6497 32.8756 29.4655 33.5309C23.053 35.4546 14.9758 34.8964 8.16479 31.3339L9.06812 30.1123Z" fill="#45E5CB"/>
    <path d="M55.56 13.96C59.016 13.96 61.536 16.456 61.536 19.696C61.536 22.936 59.016 25.432 55.56 25.432H53.376V31H49.896V13.96H55.56ZM55.512 22.168C57.096 22.168 58.152 21.088 58.152 19.696C58.152 18.304 57.096 17.224 55.512 17.224H53.376V22.168H55.512ZM66.8636 14.944C66.8636 16.096 65.9276 17.032 64.7516 17.032C63.6236 17.032 62.6636 16.096 62.6636 14.944C62.6636 13.792 63.6236 12.856 64.7516 12.856C65.9276 12.856 66.8636 13.792 66.8636 14.944ZM63.1196 31V19H66.4076V31H63.1196ZM69.0849 31V19H72.3729V20.368C72.9969 19.408 74.2449 18.736 75.8049 18.736C78.7089 18.736 80.4369 20.848 80.4369 23.968V31H77.1489V24.52C77.1489 22.792 76.4049 21.736 75.0369 21.736C73.5249 21.736 72.3729 22.84 72.3729 25.144V31H69.0849ZM82.2041 25C82.2041 21.448 84.8681 18.736 88.5161 18.736C91.6601 18.736 94.4201 20.752 94.4201 24.64C94.4201 24.928 94.4201 25.264 94.3721 25.768H85.3961C85.5881 27.376 87.0041 28.264 88.5881 28.264C90.0761 28.264 91.1561 27.568 91.6841 26.752L94.1321 28.576C93.0281 30.184 91.0841 31.264 88.5641 31.264C84.9881 31.264 82.2041 28.792 82.2041 25ZM88.4201 21.448C87.1961 21.448 85.8281 22.072 85.5161 23.536H91.1321C90.8441 22.12 89.6441 21.448 88.4201 21.448ZM100.412 28.24L103.076 26.008C103.916 27.28 105.38 28.024 106.772 28.024C108.14 28.024 109.052 27.352 109.052 26.368C109.052 25.408 108.356 24.736 106.676 24.16L105.236 23.656C102.5 22.696 101.036 21.112 101.036 18.784C101.036 15.568 103.484 13.672 106.796 13.672C108.884 13.672 110.708 14.392 112.172 16.024L109.868 18.4C109.052 17.416 107.996 16.936 106.82 16.936C105.644 16.936 104.54 17.44 104.54 18.448C104.54 19.48 105.38 19.936 107.18 20.584L108.548 21.088C111.044 22 112.604 23.584 112.604 26.152C112.58 29.2 110.156 31.288 106.628 31.288C103.916 31.288 101.636 30.112 100.412 28.24ZM125.859 27.808C124.827 29.872 122.667 31.264 120.171 31.264C116.619 31.264 113.811 28.624 113.811 25C113.811 21.376 116.619 18.736 120.171 18.736C122.667 18.736 124.827 20.128 125.859 22.192L123.003 23.728C122.523 22.624 121.491 21.808 120.171 21.808C118.443 21.808 117.123 23.152 117.123 25C117.123 26.848 118.443 28.192 120.171 28.192C121.491 28.192 122.523 27.376 123.003 26.272L125.859 27.808ZM127.482 31V19H130.77V20.92C131.178 19.744 132.402 18.856 133.746 18.856C134.082 18.856 134.442 18.88 134.85 19V22.336C134.346 22.168 133.89 22.072 133.362 22.072C131.802 22.072 130.77 23.296 130.77 25.264V31H127.482ZM140.215 14.944C140.215 16.096 139.279 17.032 138.103 17.032C136.975 17.032 136.015 16.096 136.015 14.944C136.015 13.792 136.975 12.856 138.103 12.856C139.279 12.856 140.215 13.792 140.215 14.944ZM136.471 31V19H139.759V31H136.471ZM142.436 36.016V19H145.724V20.344C146.276 19.576 147.548 18.736 149.204 18.736C152.396 18.736 154.844 21.592 154.844 25C154.844 28.408 152.396 31.264 149.204 31.264C147.548 31.264 146.276 30.424 145.724 29.656V36.016H142.436ZM151.508 25C151.508 23.128 150.284 21.736 148.484 21.736C146.684 21.736 145.46 23.128 145.46 25C145.46 26.872 146.684 28.264 148.484 28.264C150.284 28.264 151.508 26.872 151.508 25ZM164.407 30.88C163.879 31.048 163.231 31.144 162.319 31.144C159.775 31.144 157.735 29.728 157.735 26.8V21.88H155.311V19H157.735V15.664H161.023V19H164.407V21.88H161.023V26.152C161.023 27.616 161.647 28.192 163.063 28.192C163.591 28.192 164.023 28.12 164.407 27.976V30.88ZM173.626 22.648V13.96H175.978L177.874 16.888L179.746 13.96H182.122V22.648H179.698V18.184L177.874 20.968L176.026 18.136V22.648H173.626ZM167.386 22.648V16.456H165.058V13.96H172.258V16.456H169.93V22.648H167.386Z" fill="currentColor"/>
</svg> -->



<!-- Regular icon -->

<svg width="177" height="44" viewBox="0 0 177 44" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M17.6876 25.2705C17.9283 25.1902 18.1933 25.2316 18.3985 25.3808L26.2852 31.1162C26.5444 31.3047 26.8924 31.3173 27.1641 31.1474L32.3839 27.8847C32.7316 27.6675 33.1878 27.7545 33.4317 28.084L38.3594 34.7471C38.7428 35.2656 38.3725 35.9999 37.7276 36H6.27253C5.62754 36 5.25723 35.2657 5.64069 34.7471L10.8526 27.6992C10.9486 27.5695 11.0824 27.4729 11.2354 27.4219L17.6876 25.2705ZM21.088 7.39451C21.4752 6.88532 22.2345 6.8659 22.6475 7.35448L34.7628 21.6924C35.1531 22.1544 35.0468 22.8548 34.5372 23.1806L26.9991 28L18.4278 20.7529L11.338 23.2607C10.4021 23.5917 9.60809 22.5044 10.2081 21.7139L21.088 7.39451ZM13.8243 20.2597L17.7608 18.8672C18.4309 18.6301 19.1771 18.7667 19.7198 19.2256L27.1641 25.5205L32.4981 22.1103L21.9259 9.59862L13.8243 20.2597Z" fill="currentColor"></path>
<path d="M147.308 16.959C150.499 16.959 152.948 19.8149 152.948 23.2227C152.948 26.6307 150.5 29.4873 147.308 29.4873C145.652 29.4872 144.38 28.6469 143.828 27.8789V34.2393H140.54V17.2227H143.828V18.5674C144.38 17.7994 145.652 16.9591 147.308 16.959ZM104.9 11.8955C106.988 11.8956 108.812 12.6152 110.276 14.2471L107.972 16.623C107.156 15.6392 106.1 15.1592 104.924 15.1592C103.748 15.1592 102.645 15.6631 102.645 16.6709C102.645 17.7029 103.484 18.1596 105.284 18.8076L106.652 19.3115C109.148 20.2235 110.708 21.8072 110.708 24.375C110.684 27.4229 108.26 29.5106 104.732 29.5107C102.02 29.5107 99.7396 28.3349 98.5156 26.4629L101.18 24.2314C102.02 25.5034 103.484 26.247 104.876 26.2471C106.244 26.2471 107.156 25.5748 107.156 24.5908C107.156 23.631 106.46 22.9587 104.78 22.3828L103.34 21.8789C100.604 20.9189 99.1396 19.3348 99.1396 17.0068C99.1398 13.791 101.588 11.8955 104.9 11.8955ZM86.6201 16.959C89.7641 16.959 92.5244 18.9753 92.5244 22.8633C92.5244 23.1513 92.5246 23.4873 92.4766 23.9912H83.5C83.692 25.5992 85.1084 26.4873 86.6924 26.4873C88.18 26.4872 89.26 25.7914 89.7881 24.9756L92.2363 26.7988C91.1323 28.4068 89.188 29.4873 86.668 29.4873C83.092 29.4872 80.3086 27.0146 80.3086 23.2227C80.3088 19.6709 82.9723 16.959 86.6201 16.959ZM118.275 16.959C120.771 16.9591 122.931 18.3512 123.963 20.415L121.107 21.9512C120.627 20.8473 119.595 20.0314 118.275 20.0312C116.548 20.0312 115.227 21.3749 115.227 23.2227C115.227 25.0707 116.547 26.415 118.275 26.415C119.595 26.4149 120.627 25.599 121.107 24.4951L123.963 26.0312C122.931 28.0951 120.771 29.4872 118.275 29.4873C114.723 29.4873 111.915 26.8467 111.915 23.2227C111.915 19.5989 114.724 16.959 118.275 16.959ZM159.127 17.2227H162.511V20.1035H159.127V24.375C159.127 25.839 159.751 26.415 161.167 26.415C161.695 26.415 162.127 26.3432 162.511 26.1992V29.1035C161.983 29.2715 161.335 29.3672 160.423 29.3672C157.879 29.3672 155.839 27.9512 155.839 25.0234V20.1035H153.415V17.2227H155.839V13.8867H159.127V17.2227ZM53.6641 12.1836C57.12 12.1836 59.6395 14.6791 59.6396 17.9189C59.6396 21.1589 57.12 23.6552 53.6641 23.6553H51.4805V29.2227H48V12.1836H53.6641ZM64.5117 29.2227H61.2236V17.2227H64.5117V29.2227ZM73.9092 16.959C76.813 16.9591 78.541 19.0715 78.541 22.1914V29.2227H75.2529V22.7432C75.2529 21.0152 74.5086 19.959 73.1406 19.959C71.6288 19.9591 70.4766 21.0633 70.4766 23.3672V29.2227H67.1885V17.2227H70.4766V18.5908C71.1006 17.6308 72.3492 16.959 73.9092 16.959ZM131.85 17.0791C132.186 17.0791 132.546 17.1027 132.954 17.2227V20.5596C132.45 20.3916 131.994 20.2949 131.466 20.2949C129.906 20.2949 128.874 21.5193 128.874 23.4873V29.2227H125.586V17.2227H128.874V19.1436C129.282 17.9676 130.506 17.0792 131.85 17.0791ZM137.862 29.2227H134.574V17.2227H137.862V29.2227ZM146.588 19.959C144.788 19.959 143.564 21.3509 143.563 23.2227C143.563 25.0947 144.788 26.4873 146.588 26.4873C148.388 26.4873 149.612 25.0947 149.612 23.2227C149.612 21.3509 148.388 19.959 146.588 19.959ZM169.993 9.76074C170.876 9.76079 171.697 9.9237 172.455 10.25C173.213 10.5764 173.881 11.0326 174.457 11.6182C175.043 12.1942 175.499 12.8617 175.825 13.6201C176.151 14.3783 176.314 15.1991 176.314 16.082C176.314 16.9556 176.152 17.7769 175.825 18.5449C175.499 19.3032 175.043 19.975 174.457 20.5605C173.881 21.1365 173.208 21.5877 172.44 21.9141C171.682 22.2404 170.867 22.4042 169.993 22.4043C169.12 22.4043 168.298 22.2405 167.53 21.9141C166.772 21.5877 166.1 21.1365 165.515 20.5605C164.939 19.975 164.488 19.3032 164.161 18.5449C163.835 17.7769 163.671 16.9556 163.671 16.082C163.671 15.2086 163.835 14.393 164.161 13.6348C164.488 12.8668 164.939 12.1942 165.515 11.6182C166.1 11.0327 166.772 10.5764 167.53 10.25C168.298 9.92362 169.12 9.76074 169.993 9.76074ZM86.5244 19.6709C85.3005 19.6709 83.9323 20.295 83.6201 21.7588H89.2363C88.9482 20.3431 87.7482 19.671 86.5244 19.6709ZM169.993 11.1865C169.312 11.1865 168.672 11.3109 168.077 11.5605C167.492 11.8101 166.974 12.1612 166.522 12.6123C166.071 13.0635 165.72 13.5865 165.471 14.1816C165.221 14.7671 165.097 15.4006 165.097 16.082C165.097 16.7634 165.221 17.402 165.471 17.9971C165.72 18.5827 166.071 19.1015 166.522 19.5527C166.974 20.0038 167.492 20.3539 168.077 20.6035C168.672 20.8531 169.312 20.9785 169.993 20.9785C170.675 20.9785 171.308 20.8531 171.894 20.6035C172.489 20.3539 173.012 20.0038 173.463 19.5527C173.914 19.1015 174.265 18.5827 174.515 17.9971C174.764 17.402 174.889 16.7634 174.889 16.082C174.889 15.4006 174.764 14.7671 174.515 14.1816C174.265 13.5865 173.914 13.0635 173.463 12.6123C173.012 12.1611 172.489 11.8101 171.894 11.5605C171.308 11.311 170.675 11.1866 169.993 11.1865ZM51.4805 20.3916H53.6162C55.2001 20.3915 56.2559 19.3109 56.2559 17.9189C56.2558 16.5271 55.2 15.4474 53.6162 15.4473H51.4805V20.3916ZM169.878 13.2314C170.406 13.2315 170.838 13.2932 171.174 13.418C171.519 13.5332 171.773 13.7163 171.937 13.9658C172.1 14.2154 172.182 14.5271 172.182 14.9014C172.182 15.2469 172.09 15.5494 171.908 15.8086C171.726 16.0581 171.481 16.2646 171.174 16.4277L172.815 18.9336H171.217L169.964 16.8027H169.445V18.9336H168.034V13.2314H169.878ZM169.445 15.751H169.849C170.127 15.751 170.348 15.6932 170.511 15.5781C170.674 15.4533 170.756 15.247 170.756 14.959C170.756 14.7383 170.684 14.5703 170.54 14.4551C170.396 14.3399 170.165 14.2822 169.849 14.2822H169.445V15.751ZM62.8555 11.0791C64.0314 11.0791 64.9677 12.0151 64.9678 13.167C64.9678 14.319 64.0315 15.2549 62.8555 15.2549C61.7275 15.2548 60.7676 14.3189 60.7676 13.167C60.7677 12.0151 61.7276 11.0792 62.8555 11.0791ZM136.207 11.0791C137.383 11.0793 138.318 12.0152 138.318 13.167C138.318 14.3188 137.383 15.2546 136.207 15.2549C135.079 15.2549 134.118 14.319 134.118 13.167C134.118 12.0151 135.079 11.0791 136.207 11.0791Z" fill="currentColor"></path>
</svg>
</div> </a> </div>  </div> <div class="flex" data-astro-cid-d74r2unp=""></div> <div class="flex" data-astro-cid-d74r2unp=""> <div class="search-container" data-astro-cid-fg37foga=""> <div class="search-wrapper" data-astro-cid-fg37foga=""> <input class="search-input" type="text" placeholder="Search docs" name="s" value="" data-astro-cid-fg37foga="" data-has-input-listener="true"> <svg width="28" height="28" viewBox="0 0 28 28" class="search-button" data-astro-cid-fg37foga="" data-icon="theme/search">  <symbol id="ai:local:theme/search"><path fill="currentColor" fill-rule="evenodd" d="M18.5 12.5a6 6 0 1 1-12 0 6 6 0 0 1 12 0m-1.25 5.8a7.5 7.5 0 1 1 1.06-1.06l4.22 4.23.53.53L22 23.06l-.53-.53-4.22-4.22Z" clip-rule="evenodd"></path></symbol><use xlink:href="#ai:local:theme/search"></use>  </svg> <button class="search-clear" type="button" title="Reset" data-search-clear="" data-astro-cid-fg37foga="">Clear</button> <span class="divider" data-astro-cid-fg37foga=""></span> <button class="search-close" type="button" title="Close" data-search-close="" data-astro-cid-fg37foga=""> <svg width="18" height="18" viewBox="0 0 18 18" data-astro-cid-fg37foga="" data-icon="theme/cross-18">  <use xlink:href="#ai:local:theme/cross-18"></use>  </svg> </button> </div> <div id="search-results-wrapper" data-astro-cid-fg37foga=""> <aside id="search-results" hidden="" data-astro-cid-fg37foga="" data-has-button-listener="true"> <!-- Don't use h1 because when built it will be used as the first heading on the page --> <div class="heading" data-astro-cid-fg37foga="">Search results</div> <div id="search-results-contents" data-astro-cid-fg37foga=""></div> </aside> </div> </div>   </div> <ul class="links" data-astro-cid-d74r2unp="">  </ul> <div class="flex" data-astro-cid-d74r2unp=""></div> <div data-hide-when-search="" data-astro-cid-d74r2unp=""> <div id="version-select" data-hideable="true" data-astro-cid-kx7qoxgq=""> <label style="--sl-select-width: undefined; --sl-label-icon-size: 16px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq="">Version</span>  <select value="v6" data-has-border="" no-icon="true" data-astro-cid-lmznfliq=""> <option value="v6" selected="true" data-astro-cid-lmznfliq="">Version 6</option><option value="v5" data-astro-cid-lmznfliq="">Version 5</option><option value="v4" data-astro-cid-lmznfliq="">Version 4</option><option value="v3" data-astro-cid-lmznfliq="">Version 3</option> </select> <svg width="16" height="16" viewBox="0 0 24 24" class="icon caret" data-astro-cid-lmznfliq="" data-icon="theme/down-caret">  <use xlink:href="#ai:local:theme/down-caret"></use>  </svg> </label>  </div>   </div> <button id="search-button" data-astro-cid-6zeqadij="" data-has-listener="true"> <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-6zeqadij="" data-icon="theme/search">  <use xlink:href="#ai:local:theme/search"></use>  </svg> </button>  <script data-base-url="/pine-script-docs" data-astro-exec="">
	async function loadPageFind() {
		const base = document.currentScript.getAttribute('data-base-url');
		const pageFindBundleUrl = `${base}/pagefind/`;
		const pagefind = await import(`${pageFindBundleUrl}pagefind.js`);
		await pagefind.options({
			bundlePath: pageFindBundleUrl,
		});
		window.pagefind = pagefind;
	}
	loadPageFind().catch();
</script>  <docs-theme-select class="hide-with-breakpoint-568" data-astro-cid-3wpspbi7=""> <label style="--sl-select-width: 48px; --sl-label-icon-size: 28px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq="">Theme</span> <svg width="28" height="28" viewBox="0 0 28 28" class="icon label-icon" data-button="" data-round="" data-astro-cid-lmznfliq="" data-icon="theme/system-28">  <symbol id="ai:local:theme/system-28"><path fill="currentColor" d="M8 4h1v2H8zm0 9v2h1v-2zm6-3V9h-2v1zM3 9v1h2V9zm5.5 3a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5m4.2-6-.7-.7-1.4 1.4.7.7zM5 13.7l-.7-.7 1.4-1.4.7.7zm7.7-.7-.7.7-1.4-1.4.7-.7zM4.3 6l.7-.7 1.4 1.4-.7.7zm3 17 14-14 .8.7L8 23.7zm17.2-.1a3.5 3.5 0 0 1-3.4-5.9H21a4 4 0 1 0 3.5 5.9"></path></symbol><use xlink:href="#ai:local:theme/system-28"></use>  </svg> <select value="auto" data-button="" data-astro-cid-lmznfliq=""> <option value="dark" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Dark&nbsp;&nbsp;</option><option value="light" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Light&nbsp;&nbsp;</option><option value="auto" selected="true" data-astro-cid-lmznfliq="">&nbsp;&nbsp;Auto&nbsp;&nbsp;</option> </select>  </label>  </docs-theme-select>   <script data-astro-exec="">
	ThemeProvider.updatePickers('unknown');
</script>  </nav> </header>        <div id="image-lightbox" class="not-content" hidden="" data-astro-cid-kws7taxh=""> <div class="button-wrapper" data-astro-cid-kws7taxh=""> <div class="not-content" style="" data-astro-cid-pkzv2hgs=""> <button id="lightbox-close-button" title="Close image preview" data-astro-cid-pkzv2hgs="" class="not-content stvb-base stvb-pointer stvb-black stvb-medium stvb-secondary stvb-icon stvb-force-no-border">  <svg width="24" height="24" viewBox="0 0 18 18" data-astro-cid-kws7taxh="" data-icon="theme/cross-18">  <symbol id="ai:local:theme/cross-18"><g fill="none"><g clip-path="url(#a)"><path fill="currentColor" fill-rule="evenodd" d="M5.53 4.47 4.47 5.53 7.94 9l-3.47 3.47 1.06 1.06L9 10.06l3.47 3.47 1.06-1.06L10.06 9l3.47-3.47-1.06-1.06L9 7.94z" clip-rule="evenodd"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h18v18H0z"></path></clipPath></defs></g></symbol><use xlink:href="#ai:local:theme/cross-18"></use>  </svg>  </button> </div>  </div> <img id="lightbox-image" src="" data-astro-cid-kws7taxh=""> </div>   <div id="page-container" data-astro-cid-xgirumru=""> <aside id="nav" class="" style="" data-astro-cid-sa57sq6l=""> <div class="sidebar-viewport slick-scroll" data-astro-cid-sa57sq6l=""> <div class="sidebar" data-astro-cid-sa57sq6l=""> <ul class="toc" aria-label="Docs sidebar" data-astro-cid-sa57sq6l=""> <li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/welcome" data-astro-cid-omxx3dey="">Welcome to Pine Script® v6</a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Pine Script® primer</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <symbol id="ai:local:theme/right-caret"><path fill="currentColor" d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1 1 0 0 0 0-1.42"></path></symbol><use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-steps" data-astro-cid-omxx3dey="">First steps</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-indicator" data-astro-cid-omxx3dey="">First indicator</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/next-steps" data-astro-cid-omxx3dey="">Next steps</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Language</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/execution-model" data-astro-cid-omxx3dey="">Execution model</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/type-system" data-astro-cid-omxx3dey="">Type system</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/script-structure" data-astro-cid-omxx3dey="">Script structure</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/identifiers" data-astro-cid-omxx3dey="">Identifiers</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/variable-declarations" data-astro-cid-omxx3dey="">Variable declarations</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/operators" data-astro-cid-omxx3dey="">Operators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/conditional-structures" data-astro-cid-omxx3dey="">Conditional structures</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/loops" data-astro-cid-omxx3dey="">Loops</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/built-ins" data-astro-cid-omxx3dey="">Built-ins</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/user-defined-functions" data-astro-cid-omxx3dey="">User-defined functions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/objects" data-astro-cid-omxx3dey="">Objects</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/enums" data-astro-cid-omxx3dey="">Enums</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/methods" data-astro-cid-omxx3dey="">Methods</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/arrays" data-astro-cid-omxx3dey="">Arrays</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/matrices" data-astro-cid-omxx3dey="">Matrices</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/maps" data-astro-cid-omxx3dey="">Maps</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Visuals</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/overview" data-astro-cid-omxx3dey="">Overview</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/backgrounds" data-astro-cid-omxx3dey="">Backgrounds</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/bar-coloring" data-astro-cid-omxx3dey="">Bar coloring</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/bar-plotting" data-astro-cid-omxx3dey="">Bar plotting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/colors" data-astro-cid-omxx3dey="">Colors</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/fills" data-astro-cid-omxx3dey="">Fills</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/levels" data-astro-cid-omxx3dey="">Levels</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/lines-and-boxes" data-astro-cid-omxx3dey="">Lines and boxes</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/plots" data-astro-cid-omxx3dey="">Plots</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/tables" data-astro-cid-omxx3dey="">Tables</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/visuals/text-and-shapes" data-astro-cid-omxx3dey="">Text and shapes</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details open="" data-is-parent="" data-is-on-path="" data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Concepts</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/alerts" data-astro-cid-omxx3dey="">Alerts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-states" data-astro-cid-omxx3dey="">Bar states</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/chart-information" data-astro-cid-omxx3dey="">Chart information</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/inputs" data-astro-cid-omxx3dey="">Inputs</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/libraries" data-astro-cid-omxx3dey="">Libraries</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/non-standard-charts-data" data-astro-cid-omxx3dey="">Non-standard charts data</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/other-timeframes-and-data" data-astro-cid-omxx3dey="">Other timeframes and data</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/repainting" data-astro-cid-omxx3dey="">Repainting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/sessions" data-astro-cid-omxx3dey="">Sessions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strategies" data-astro-cid-omxx3dey="">Strategies</a></li><li class="item" data-current="" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strings" data-astro-cid-omxx3dey="">Strings</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/time" data-astro-cid-omxx3dey="">Time</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/timeframes" data-astro-cid-omxx3dey="">Timeframes</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Writing scripts</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/style-guide" data-astro-cid-omxx3dey="">Style guide</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/debugging" data-astro-cid-omxx3dey="">Debugging</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/profiling-and-optimization" data-astro-cid-omxx3dey="">Profiling and optimization</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/publishing" data-astro-cid-omxx3dey="">Publishing scripts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/limitations" data-astro-cid-omxx3dey="">Limitations</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">FAQ</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/general" data-astro-cid-omxx3dey="">General</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/alerts" data-astro-cid-omxx3dey="">Alerts</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/data-structures" data-astro-cid-omxx3dey="">Data structures</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/functions" data-astro-cid-omxx3dey="">Functions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/indicators" data-astro-cid-omxx3dey="">Indicators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/other-data-and-timeframes" data-astro-cid-omxx3dey="">Other data and timeframes</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/programming" data-astro-cid-omxx3dey="">Programming</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/strategies" data-astro-cid-omxx3dey="">Strategies</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/strings-and-formatting" data-astro-cid-omxx3dey="">Strings and formatting</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/techniques" data-astro-cid-omxx3dey="">Techniques</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/times-dates-and-sessions" data-astro-cid-omxx3dey="">Times, dates, and sessions</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/variables-and-operators" data-astro-cid-omxx3dey="">Variables and operators</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq/visuals" data-astro-cid-omxx3dey="">Visuals</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/error-messages" data-astro-cid-omxx3dey="">Error messages</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/release-notes" data-astro-cid-omxx3dey="">Release notes</a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey="">Migration guides</div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/overview" data-astro-cid-omxx3dey="">Overview</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-6" data-astro-cid-omxx3dey="">To Pine Script® version 6</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-5" data-astro-cid-omxx3dey="">To Pine Script® version 5</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-4" data-astro-cid-omxx3dey="">To Pine Script® version 4</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-3" data-astro-cid-omxx3dey="">To Pine Script® version 3</a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-2" data-astro-cid-omxx3dey="">To Pine Script® version 2</a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/where-can-i-get-more-information" data-astro-cid-omxx3dey="">Where can I get more information?</a></li> </ul> <div class="toc-bottom" data-astro-cid-sa57sq6l=""></div> </div> </div> </aside>  <main class="main-pane" data-page-type="md" data-astro-cid-xgirumru=""> <a id="top" data-astro-cid-xgirumru=""></a> <main class="content" data-toc-shown="" data-astro-cid-ju3wuhkz="">  <div class="content-width" data-astro-cid-xgirumru=""> <div class="breadcrumbs" data-pagefind-ignore="" data-astro-cid-wlavna2o=""> <a href="/pine-script-docs" aria-label="Return back to the documentation home page." data-astro-cid-wlavna2o=""> <span data-astro-cid-wlavna2o="">User Manual</span>  </a>  <span class="divider" data-astro-cid-wlavna2o="">/</span> <a href="/pine-script-docs/concepts/alerts" data-astro-cid-wlavna2o="">Concepts</a> <span class="divider" data-astro-cid-wlavna2o="">/</span> <span class="current-item" data-astro-cid-wlavna2o="">Strings</span> </div>     </div> <div id="slot-container" data-astro-cid-xgirumru=""> <h1 id="strings" class="md-heading"><a href="#strings"> <span class="fancy-wrap">Strings<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h1>
<h2 id="introduction" class="md-heading"><a href="#introduction"> <span class="fancy-wrap">Introduction<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>Pine Script® strings are immutable values containing sequences of up to 40,960 encoded characters, such as letters, digits, symbols, spaces, control characters, or other Unicode characters and code points. Strings allow scripts to represent a wide range of data as character patterns and human-readable text.</p>
<p>Pine scripts use strings for several purposes, such as defining titles, expressing symbol and timeframe information, setting the contexts of data requests, creating alert and debug messages, and displaying text on the chart. The specialized functions in the <code dir="auto">str.*</code> namespace provide convenient ways to construct strings, create modified copies of other strings, and inspect or extract substrings.</p>
<p>This page explains how Pine strings work, and how to construct, inspect, and modify strings using the available <code dir="auto">str.*()</code> functions.</p>
<aside aria-label="Note" class="tv-informer not-content" style="--informer-header-color:#6A6D78;--informer-back-color-light:#F0F3FA;--informer-back-color-dark:#2A2E39"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM8 6a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 2c.49 0 1 .59 1 1v3.01c0 .42-.51.99-1 .99s-1-.57-1-.99V9c0-.41.51-1 1-1Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Note</span>We use the format <em>“U+XXXX”</em> throughout our documentation when referring to characters and code points in the <a href="https://en.wikipedia.org/wiki/Unicode" rel="nofollow">Unicode Standard</a>.</p></div></aside>
<h2 id="literal-strings" class="md-heading"><a href="#literal-strings">Literal <span class="fancy-wrap">strings<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>Literal strings in Pine are character sequences enclosed by two <em>ASCII</em> quotation marks (<code dir="auto">"</code>) or apostrophes (<code dir="auto">'</code>). For example, this code snippet declares two variables with equivalent literal strings containing the text <code dir="auto">Hello world!</code>:</p>
<div class="pine-colorizer not-content colorized" data-id="32s"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;literal&nbsp;string&nbsp;containing&nbsp;`Hello&nbsp;world!`.&nbsp;Uses&nbsp;</span><span class="mtk9">the&nbsp;`"`&nbsp;character&nbsp;as&nbsp;the&nbsp;enclosing&nbsp;delimiter.&nbsp;</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">hello1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Hello&nbsp;world!"</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;literal&nbsp;string&nbsp;containing&nbsp;`Hello&nbsp;world!`.&nbsp;Uses&nbsp;</span><span class="mtk9">the&nbsp;`'`&nbsp;character&nbsp;as&nbsp;the&nbsp;enclosing&nbsp;delimiter.&nbsp;</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">hello2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">'Hello&nbsp;world!'</span></span><br></code></div>
<p>The <code dir="auto">"</code> or <code dir="auto">'</code> enclosing delimiters in a literal string definition are <em>not</em> parts of the specified character sequence. They only mark the sequence’s start and end boundaries in the code. These characters <em>do not</em> appear in outputs of <a href="/pine-script-docs/writing/debugging/#pine-logs">Pine Logs</a> or <a href="/pine-script-docs/language/type-system/#drawing-types">drawing objects</a> that display “string” values.</p>
<p>This example calls the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_log.info">log.info()</a> function on the first bar to display the contents of the literal value <code dir="auto">"Hello world!"</code> in the Pine Logs pane. The message in the pane displays the <code dir="auto">Hello world!</code> text only, without the <code dir="auto">"</code> characters:</p>
<p><img src="/pine-script-docs/_astro/Strings-Literal-strings-1.UPGL89sk_Z1kHuDV.webp" alt="image" width="2400" height="744" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="25m"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Literal&nbsp;strings&nbsp;demo"</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk9">//&nbsp;The&nbsp;script's&nbsp;displayed&nbsp;title&nbsp;does&nbsp;not&nbsp;include&nbsp;t</span><span class="mtk9">he&nbsp;quotation&nbsp;marks.</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Log&nbsp;"Hello&nbsp;world!"&nbsp;on&nbsp;the&nbsp;first&nbsp;bar.&nbsp;The&nbsp;logged</span><span class="mtk9">&nbsp;text&nbsp;does&nbsp;not&nbsp;include&nbsp;`"`&nbsp;characters.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk29">"Hello&nbsp;world!"</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The script also uses a literal string to define the <code dir="auto">title</code> argument of the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_indicator">indicator()</a> declaration statement.</li>
<li>Only the <code dir="auto">"</code> and <code dir="auto">'</code> ASCII characters are valid enclosing delimiters for literal strings. Other Unicode characters, such as U+FF02 (Fullwidth Quotation Mark), are not allowed as enclosing delimiters.</li>
<li>The timestamp in square brackets (<code dir="auto">[</code> and <code dir="auto">]</code>) at the start of the logged message is an <em>automatic prefix</em> showing the log’s time in the chart’s <a href="/pine-script-docs/concepts/time/#time-zones">time zone</a>. For more information, refer to the <a href="/pine-script-docs/writing/debugging/#pine-logs">Pine Logs</a> section of the <a href="/pine-script-docs/writing/debugging/">Debugging</a> page.</li>
</ul>
<aside aria-label="Notice" class="tv-informer not-content" style="--informer-header-color:#FF9800;--informer-back-color-light:#FFF3E0;--informer-back-color-dark:#33261A"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path fill-rule="evenodd" d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM9 4c-.79 0-1.38.7-1.25 1.48l.67 4.03a.59.59 0 0 0 1.16 0l.67-4.03A1.27 1.27 0 0 0 9 4Zm0 8a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Notice</span></p><p>In Pine v6, programmers can use <em>line wrapping</em> to define a single literal string across multiple code lines. Each new wrapped line within the string can be indented by <em>any</em> number of spaces, including multiples of four. Regardless of the indentation length, each wrapped line adds exactly <strong>one</strong> space to the beginning of its character sequence.</p><br><p>However, this behavior is <em>deprecated</em>; future versions of Pine Script might not support it. Instead of wrapping a single literal string across multiple lines, programmers can split that string into smaller strings, then <a href="/pine-script-docs/concepts/strings/#concatenation">concatenate</a> them in a line-wrapped expression using the <a href="https://www.tradingview.com/pine-script-reference/v6/#op_+">+</a> operator. See the <a href="/pine-script-docs/writing/style-guide/#line-wrapping">Line wrapping</a> section of our <a href="/pine-script-docs/writing/style-guide/">Style guide</a> for an example.</p><p></p></div></aside>
<h2 id="escape-sequences" class="md-heading"><a href="#escape-sequences">Escape <span class="fancy-wrap">sequences<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>The backslash character (<code dir="auto">\</code>), also known as the Reverse Solidus in Unicode (U+005C), is an <em>escape character</em> in Pine strings. This character forms an <em>escape sequence</em> when it precedes another character, signaling that the following character has a potentially <em>different</em> meaning than usual.</p>
<p>Characters with a special meaning in “string” value definitions, such as quotation marks and backslashes, become <em>literal</em> characters when prefixed by a backslash (e.g., <code dir="auto">\\</code> includes a single <code dir="auto">\</code> in the character sequence).</p>
<p>This simple script declares a variable with an assigned literal “string” value enclosed in apostrophes (<code dir="auto">'</code>) and displays the value’s contents in the <a href="/pine-script-docs/writing/debugging/#pine-logs">Pine Logs</a> pane. It uses the <code dir="auto">\</code> character to escape an extra apostrophe and another backslash, making them literal characters in the displayed text:</p>
<p><img src="/pine-script-docs/_astro/Strings-Escape-sequences-1.BXm3Bx6T_ZF0kjn.webp" alt="image" width="2506" height="732" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="1l7"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Escaping&nbsp;special&nbsp;characters&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;string&nbsp;containing&nbsp;escaped&nbsp;`\`&nbsp;and&nbsp;`'`&nbsp;character</span><span class="mtk9">s.&nbsp;</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayText</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">'The&nbsp;backslash&nbsp;(\\)&nbsp;can&nbsp;change&nbsp;another&nbsp;character\'</span><span class="mtk29">s&nbsp;meaning&nbsp;in&nbsp;Pine&nbsp;strings.'</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk33">displayText</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>This example must prefix the <code dir="auto">'</code> character with a backslash in the string’s sequence because it also uses that character to mark its start and end boundaries. Without the backslash, it causes a <em>compilation error</em>. The script does not need to escape the apostrophe if we change the literal string’s enclosing characters to quotation marks (<code dir="auto">"</code>).</li>
</ul>
<p>The ASCII characters <code dir="auto">n</code> and <code dir="auto">t</code> usually have a literal meaning in Pine strings. However, when prefixed by the backslash character, they form escape sequences representing <em>control characters</em>. The <code dir="auto">\n</code> sequence represents the newline character (U+000A), a line terminator for multiline text. The <code dir="auto">\t</code> sequence represents the horizontal tab character (U+0009), which is helpful for indentation.</p>
<p>The script below creates a “string” value with multiline text on a single line of code, which it displays in a <a href="https://www.tradingview.com/pine-script-reference/v6/#type_label">label</a> on the last historical bar. The defined value contains several <code dir="auto">\n</code> and <code dir="auto">\t</code> escape sequences to include line terminators and tab spaces in the displayed text:</p>
<p><img src="/pine-script-docs/_astro/Strings-Escape-sequences-2.Cg3hFdcW_J8QOA.webp" alt="image" width="2596" height="920" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="29n"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Control&nbsp;characters&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.islastconfirmedhistory</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;string&nbsp;containing&nbsp;`\n`&nbsp;and&nbsp;`\t`&nbsp;escape&nbsp;sequence</span><span class="mtk9">s.&nbsp;Renders&nbsp;as&nbsp;multiline&nbsp;text&nbsp;with&nbsp;indentation.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayText</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"\This\n\tis\n\t\tmultiline\n\t\t\ttext\n\t\t\t\tw</span><span class="mtk29">ith\n\t\t\t\t\ttab&nbsp;spaces."</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Draw&nbsp;a&nbsp;label&nbsp;showing&nbsp;the&nbsp;`displayText`&nbsp;at&nbsp;the&nbsp;b</span><span class="mtk9">ar's&nbsp;`high`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">label.new</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayText</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">label.style_label_left</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">24</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">textalign</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">text.align_left</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The “string” value also includes <code dir="auto">\</code> before the <code dir="auto">T</code> character. However, that character still appears <em>literally</em> in the displayed text. If a backslash applied to a character does not form a supported escape sequence, the character’s meaning <em>does not change</em>.</li>
</ul>
<h2 id="concatenation" class="md-heading"><a href="#concatenation"> <span class="fancy-wrap">Concatenation<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#op_+">+</a> and <a href="https://www.tradingview.com/pine-script-reference/v6/#op_+=">+=</a> operators signify <em>concatenation</em> when the operands are strings. A concatenation operation appends the second operand’s character sequence to the first operand’s sequence to form a new, <em>combined</em> “string” value.</p>
<p>For example, this script declares a <code dir="auto">concatString</code> variable that holds the result of a concatenation operation. After declaring the variable, it uses the <a href="https://www.tradingview.com/pine-script-reference/v6/#op_+=">+=</a> operator to concatenate additional strings and reassign the variable’s value. Then, the script calls <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_log.info">log.info()</a> to show the result in the <a href="/pine-script-docs/writing/debugging/#pine-logs">Pine Logs</a> pane:</p>
<p><img src="/pine-script-docs/_astro/Strings-Concatenation-1.NzTI46eF_ZvFdsr.webp" alt="image" width="2594" height="976" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="21q"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Concatenation&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Declare&nbsp;two&nbsp;variables&nbsp;that&nbsp;hold&nbsp;concatenated&nbsp;li</span><span class="mtk9">teral&nbsp;strings.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">value1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"\n\nThis&nbsp;'string'&nbsp;is&nbsp;"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk29">"the&nbsp;result&nbsp;"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">value2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"of&nbsp;multiple&nbsp;"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk29">"concatenation&nbsp;operations."</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;string&nbsp;produced&nbsp;by&nbsp;concatenating&nbsp;`value1`,&nbsp;`val</span><span class="mtk9">ue2`,&nbsp;and&nbsp;four&nbsp;literal&nbsp;strings.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayText</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">value1</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">value2</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk29">"\n"</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Use&nbsp;two&nbsp;concatenation&nbsp;assignments&nbsp;to&nbsp;create&nbsp;new</span><span class="mtk9">&nbsp;strings&nbsp;from&nbsp;`displayText`&nbsp;and&nbsp;literal&nbsp;strings.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">displayText</span><span class="mtk1">&nbsp;</span><span class="mtk18">+=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"\nEach&nbsp;operation&nbsp;creates&nbsp;a&nbsp;new&nbsp;'string'&nbsp;in&nbsp;memory</span><span class="mtk29">&nbsp;that"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk29">"&nbsp;combines&nbsp;the&nbsp;character&nbsp;sequences&nbsp;of&nbsp;the&nbsp;operands</span><span class="mtk29">"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">displayText</span><span class="mtk1">&nbsp;</span><span class="mtk18">+=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"&nbsp;without&nbsp;modifying&nbsp;the&nbsp;original&nbsp;values."</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Log&nbsp;the&nbsp;`displayText`&nbsp;in&nbsp;the&nbsp;Pine&nbsp;Logs&nbsp;pane.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk33">displayText</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>Strings are immutable and cannot change. Therefore, every concatenation operation creates a <em>new</em> “string” value in memory. The operation does <strong>not</strong> modify either “string” operand directly.</li>
<li>Another, more advanced way to combine strings is to collect them inside an <a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a> and use the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_array.join">array.join()</a> function. For more information, see the <a href="/pine-script-docs/language/arrays/#joining">Joining</a> section of the <a href="/pine-script-docs/language/arrays/">Arrays</a> page.</li>
<li>In many cases, programmers can efficiently create <em>formatted strings</em> with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> instead of combining individual strings with concatenation or joining. See the <a href="/pine-script-docs/concepts/strings/#formatting-strings">Formatting strings</a> section to learn more.</li>
</ul>
<h2 id="string-conversion-and-formatting" class="md-heading"><a href="#string-conversion-and-formatting">String conversion and <span class="fancy-wrap">formatting<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>Programmers can use strings to represent data of virtually any type as human-readable character sequences. Converting data to strings allows scripts to perform many helpful tasks, including:</p>
<ul>
<li>Displaying dynamic prices and calculations as text inside <a href="/pine-script-docs/visuals/text-and-shapes/#labels">labels</a>, <a href="/pine-script-docs/visuals/tables/">tables</a>, or <a href="/pine-script-docs/visuals/lines-and-boxes/#boxes">boxes</a>.</li>
<li>Creating <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_alert">alert</a> messages containing realtime market and indicator information.</li>
<li>Logging <a href="/pine-script-docs/writing/debugging/">debug</a> messages containing calculated script information in the <a href="/pine-script-docs/writing/debugging/#pine-logs">Pine Logs</a> pane.</li>
<li>Performing custom calculations and logic, such as constructing symbol or timeframe strings for <a href="/pine-script-docs/concepts/other-timeframes-and-data/">data requests</a>.</li>
</ul>
<h3 id="converting-values-to-strings" class="md-heading"><a href="#converting-values-to-strings">Converting values to <span class="fancy-wrap">strings<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The simplest way to convert data to strings is to call the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.tostring">str.tostring()</a> function. The function can represent values of several types as strings, based on predefined or custom formats. It has the following two signatures:</p>
<div class="expressive-code not-content"><link rel="stylesheet" href="/pine-script-docs/_astro/ec.dtidy.css"><script type="module" src="/pine-script-docs/_astro/ec.qopfj.js" data-astro-exec=""></script><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.tostring(value) → string</span></div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.tostring(value, format) → string</span></div></div></code></pre></figure></div>
<p>The function’s <code dir="auto">value</code> parameter accepts any “int”, “float”, “bool”, or “string” value; the reference of an <a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a> or <a href="https://www.tradingview.com/pine-script-reference/v6/#type_matrix">matrix</a> containing values of these types; or a member of an <a href="/pine-script-docs/language/type-system/#enum-types">enum type</a>.</p>
<p>For example, this line of code creates a string representing the “float” value <code dir="auto">123.456</code>, with default formatting. The result is usable in “string” operations and any script outputs that display <em>dynamic</em> text, such as labels and tables:</p>
<div class="pine-colorizer not-content colorized" data-id="6t1"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Holds&nbsp;the&nbsp;"string"&nbsp;value&nbsp;`"123.456"`.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">numString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk12">123.456</span><span class="mtk13">)</span></span><br></code></div>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.tostring">str.tostring()</a> function’s <code dir="auto">format</code> parameter determines the <em>numeric format</em> for converted “int” and “float” values, <a href="/pine-script-docs/language/arrays/">arrays</a>, and <a href="/pine-script-docs/language/matrices/">matrices</a>. It can use one of the following <code dir="auto">format.*</code> constants: <a href="https://www.tradingview.com/pine-script-reference/v6/#const_format.mintick">format.mintick</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#const_format.percent">format.percent</a>, or <a href="https://www.tradingview.com/pine-script-reference/v6/#const_format.volume">format.volume</a>. Alternatively, programmers can use strings containing <code dir="auto">#</code> (number sign), <code dir="auto">0</code> (zero), <code dir="auto">.</code> (period), <code dir="auto">,</code> (comma), and <code dir="auto">%</code> (percent sign) tokens for customized <em>formatting patterns</em> with specific decimal precision. The default numeric format is <code dir="auto">"#.########"</code>, which rounds fractional digits to eight decimal places without trailing zeros.</p>
<p>The script below uses the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.tostring">str.tostring()</a> function to convert numeric values, a “bool” value, arrays, and a matrix into strings and displays the results in a <a href="https://www.tradingview.com/pine-script-reference/v6/#type_table">table</a> on the last bar. The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.tostring">str.tostring()</a> calls that convert numeric values and <a href="/pine-script-docs/language/type-system/#collections">collections</a> contain different <code dir="auto">format</code> arguments to demonstrate how various formatting patterns affect the results:</p>
<p><img src="/pine-script-docs/_astro/Strings-String-conversion-and-formatting-Converting-values-to-strings-1.DbfJ2rm8_zI2Ay.webp" alt="image" width="2596" height="1140" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="mu"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"String&nbsp;conversion&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;2-row,&nbsp;15-column&nbsp;table&nbsp;showing&nbsp;"string"&nbsp;represe</span><span class="mtk9">ntations&nbsp;of&nbsp;numbers,&nbsp;"bool"&nbsp;values,&nbsp;and&nbsp;collection</span><span class="mtk9">s.&nbsp;</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">table</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayTable</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">table.new</span><span class="mtk13">(</span><span class="mtk11">position.middle_center</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">15</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">frame_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">frame_width</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Initializes&nbsp;a&nbsp;row&nbsp;to&nbsp;show&nbsp;two&nbsp;specified&nbsp;strings&nbsp;i</span><span class="mtk9">n&nbsp;the&nbsp;display&nbsp;table.</span></span><br><span><span class="mtk15">makeRow</span><span class="mtk13">(</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">row</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">str0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">str1</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">bgColor</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">row</span><span class="mtk1">&nbsp;</span><span class="mtk18">==</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.bg_color</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">textColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">row</span><span class="mtk1">&nbsp;</span><span class="mtk18">==</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.bg_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">displayTable</span><span class="mtk1">.</span><span class="mtk15">cell</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">row</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">str0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">textColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_halign</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">text.align_left</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">bgcolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">bgColor</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">displayTable</span><span class="mtk1">.</span><span class="mtk15">cell</span><span class="mtk13">(</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">row</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">str1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">textColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_halign</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">text.align_left</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">bgcolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">bgColor</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Initialize&nbsp;the&nbsp;header&nbsp;row&nbsp;for&nbsp;the&nbsp;`displayTable</span><span class="mtk9">`&nbsp;on&nbsp;the&nbsp;first&nbsp;bar.&nbsp;</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Variable"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"'string'&nbsp;value"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Compute&nbsp;several&nbsp;"string"&nbsp;conversions&nbsp;and&nbsp;popula</span><span class="mtk9">te&nbsp;the&nbsp;`displayTable`&nbsp;with&nbsp;the&nbsp;results&nbsp;on&nbsp;the&nbsp;last</span><span class="mtk9">&nbsp;bar.&nbsp;</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.islast</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;`ta.vwap`&nbsp;with&nbsp;the&nbsp;default&nbsp;numeric&nbsp;for</span><span class="mtk9">mat&nbsp;(`#.########`).</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">numberRepr1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk11">ta.vwap</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;`ta.vwap`&nbsp;rounded&nbsp;to&nbsp;the&nbsp;minimum&nbsp;tick&nbsp;</span><span class="mtk9">without&nbsp;trailing&nbsp;zeros.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">numberRepr2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk11">ta.vwap</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">format.mintick</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;`ta.vwap`&nbsp;rounded&nbsp;to&nbsp;three&nbsp;fractional&nbsp;</span><span class="mtk9">digits&nbsp;without&nbsp;trailing&nbsp;zeros.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">numberRepr3</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk11">ta.vwap</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"#.###"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;`ta.vwap`&nbsp;rounded&nbsp;to&nbsp;five&nbsp;fractional&nbsp;d</span><span class="mtk9">igits&nbsp;with&nbsp;trailing&nbsp;zeros.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">numberRepr4</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk11">ta.vwap</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"0.00000"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;the&nbsp;`ta.vwap`&nbsp;as&nbsp;an&nbsp;integer.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">numberRepr5</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk11">ta.vwap</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"#"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;`ta.vwap`&nbsp;as&nbsp;an&nbsp;integer&nbsp;with&nbsp;leading&nbsp;z</span><span class="mtk9">eros.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">numberRepr6</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk11">ta.vwap</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"000000"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;`ta.vwap`&nbsp;with&nbsp;commas&nbsp;for&nbsp;each&nbsp;third&nbsp;w</span><span class="mtk9">hole&nbsp;digit&nbsp;from&nbsp;the&nbsp;decimal&nbsp;point.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Values&nbsp;less&nbsp;than&nbsp;1000000&nbsp;include&nbsp;leadi</span><span class="mtk9">ng&nbsp;zeros.&nbsp;The&nbsp;fractional&nbsp;part&nbsp;includes&nbsp;up&nbsp;to&nbsp;two&nbsp;d</span><span class="mtk9">igits.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">numberRepr7</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk11">ta.vwap</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"0000,000.##"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;`100&nbsp;*&nbsp;ta.tr&nbsp;/&nbsp;close`&nbsp;rounded&nbsp;to&nbsp;two&nbsp;f</span><span class="mtk9">ractional&nbsp;digits&nbsp;with&nbsp;`%`&nbsp;at&nbsp;the&nbsp;end.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">numberRepr8</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk12">100</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk11">ta.tr</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">format.percent</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;`ta.tr&nbsp;/&nbsp;close`&nbsp;as&nbsp;a&nbsp;percentage&nbsp;rounde</span><span class="mtk9">d&nbsp;to&nbsp;four&nbsp;fractional&nbsp;digits.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;With&nbsp;`%`&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;`format`,&nbsp;t</span><span class="mtk9">he&nbsp;function&nbsp;multiplies&nbsp;the&nbsp;represented&nbsp;number&nbsp;by&nbsp;1</span><span class="mtk9">00.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">numberRepr9</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk11">ta.tr</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"#.####%"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;`volume`&nbsp;with&nbsp;fixed&nbsp;precision&nbsp;and&nbsp;lett</span><span class="mtk9">er&nbsp;characters&nbsp;for&nbsp;large&nbsp;figures.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`K`&nbsp;means&nbsp;"thousand",&nbsp;`M`&nbsp;means&nbsp;"milli</span><span class="mtk9">on",&nbsp;`B`&nbsp;means&nbsp;"billion",&nbsp;and&nbsp;`T`&nbsp;means&nbsp;"trillion"</span><span class="mtk9">.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">numberRepr10</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk11">volume</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">format.volume</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;a&nbsp;"bool"&nbsp;value.&nbsp;Is&nbsp;`"true"`&nbsp;when&nbsp;`ta.t</span><span class="mtk9">r`&nbsp;exceeds&nbsp;the&nbsp;bar's&nbsp;range,&nbsp;`"false"`&nbsp;otherwise.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">boolRepr</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk11">ta.tr</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Create&nbsp;an&nbsp;array&nbsp;and&nbsp;matrix&nbsp;of&nbsp;price&nbsp;values&nbsp;to&nbsp;c</span><span class="mtk9">onvert&nbsp;into&nbsp;strings.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk33">pricesArray</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.from</span><span class="mtk13">(</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">matrix</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">pricesMatrix</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">matrix.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;()</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">pricesMatrix</span><span class="mtk1">.</span><span class="mtk15">add_row</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">pricesArray</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">pricesMatrix</span><span class="mtk1">.</span><span class="mtk15">reshape</span><span class="mtk13">(</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;the&nbsp;`pricesArray`&nbsp;values&nbsp;with&nbsp;up&nbsp;to&nbsp;tw</span><span class="mtk9">o&nbsp;decimal&nbsp;places&nbsp;and&nbsp;no&nbsp;trailing&nbsp;zeros&nbsp;for&nbsp;each&nbsp;el</span><span class="mtk9">ement.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Contains&nbsp;`[`&nbsp;and&nbsp;`]`&nbsp;characters&nbsp;to&nbsp;mar</span><span class="mtk9">k&nbsp;the&nbsp;start&nbsp;and&nbsp;end&nbsp;of&nbsp;the&nbsp;array's&nbsp;contents.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">numberArrayRepr</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">pricesArray</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"#.##"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;the&nbsp;`pricesMatrix`&nbsp;values&nbsp;with&nbsp;four&nbsp;de</span><span class="mtk9">cimal&nbsp;places&nbsp;and&nbsp;trailing&nbsp;zeros&nbsp;for&nbsp;each&nbsp;element.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Contains&nbsp;`[`&nbsp;and&nbsp;`]`&nbsp;characters&nbsp;to&nbsp;mar</span><span class="mtk9">k&nbsp;the&nbsp;start&nbsp;and&nbsp;end&nbsp;of&nbsp;each&nbsp;row.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">numberMatrixRepr</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">pricesMatrix</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"#.0000"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;a&nbsp;"string"&nbsp;array&nbsp;containing&nbsp;the&nbsp;symbol</span><span class="mtk9">'s&nbsp;type&nbsp;and&nbsp;currency.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">stringArrayRepr</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk16">array.from</span><span class="mtk13">(</span><span class="mtk11">syminfo.type</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">syminfo.currency</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Populate&nbsp;the&nbsp;`displayTable`&nbsp;rows&nbsp;with&nbsp;each&nbsp;of&nbsp;t</span><span class="mtk9">he&nbsp;above&nbsp;variable&nbsp;names&nbsp;and&nbsp;their&nbsp;assigned&nbsp;"string</span><span class="mtk9">"&nbsp;values.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk29">"numberRepr1"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">numberRepr1</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk29">"numberRepr2"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">numberRepr2</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk29">"numberRepr3"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">numberRepr3</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk29">"numberRepr4"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">numberRepr4</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">5</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk29">"numberRepr5"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">numberRepr5</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">6</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk29">"numberRepr6"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">numberRepr6</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">7</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk29">"numberRepr7"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">numberRepr7</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk29">"numberRepr8"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">numberRepr8</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">9</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk29">"numberRepr9"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">numberRepr9</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"numberRepr10"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">numberRepr10</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">11</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"boolRepr"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">boolRepr</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">12</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"numberArrayRepr"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk33">numberArrayRepr</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">13</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"numberMatrixRepr"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">numberMatrixRepr</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">14</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"stringArrayRepr"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk33">stringArrayRepr</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The <code dir="auto">#</code> and <code dir="auto">0</code> tokens control the digits in the represented numbers in a similar way, but with different behaviors for leading and trailing <em>zeros</em>, as shown above. The <code dir="auto">0</code> token <em>always</em> includes a digit at the specified decimal place, even for a leading or trailing zero, whereas the <code dir="auto">#</code> token allows a leading or trailing digit only if it is <em>nonzero</em>.</li>
<li>The <code dir="auto">format</code> argument requires a <code dir="auto">#</code> or <code dir="auto">0</code> token for each <em>fractional</em> digit in a converted number. These tokens are optional for extra <em>whole</em> digits, because <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.tostring">str.tostring()</a> includes the necessary digits automatically.</li>
<li>A single <code dir="auto">,</code> token adds <em>repeated</em> comma separation to whole digits. In the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.tostring">str.tostring()</a> call with the format <code dir="auto">"0000,000.##"</code>, the token specifies that the result includes a dividing comma for every set of <em>three digits</em> to the left of the decimal point.</li>
<li>When the <code dir="auto">%</code> token is at the <em>end</em> of the formatting string, the representation multiplies numbers by 100 to express them as percentages, as shown by the example that uses <code dir="auto">"#.####%"</code>.</li>
</ul>
<aside aria-label="Tip" class="tv-informer not-content" style="--informer-header-color:#089981;--informer-back-color-light:#DAF2EE;--informer-back-color-dark:#082621"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16Zm3.87-12.15c.36.2.49.66.28 1.02l-4 7a.75.75 0 0 1-1.18.16l-3-3a.75.75 0 1 1 1.06-1.06l2.3 2.3 3.52-6.14a.75.75 0 0 1 1.02-.28Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Tip</span>Scripts can convert a numeric “string” value back to a “float” value with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.tonumber">str.tonumber()</a>. When converting strings to numbers with this function, the value’s character sequence can include only ASCII digits, a sign symbol at the beginning (<code dir="auto">+</code> or <code dir="auto">-</code>), and a single period for the decimal point (<code dir="auto">.</code>). If the specified “string” value does not represent a number with this format, the function returns <a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a>. For example, the function can convert <code dir="auto">"1234.50"</code> to a “float” value, but it cannot convert strings such as <code dir="auto">"$1,234.50"</code>.</p></div></aside>
<h3 id="formatting-strings" class="md-heading"><a href="#formatting-strings">Formatting <span class="fancy-wrap">strings<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> function can combine multiple “int”, “float”, “bool”, “string”, or array arguments into one output string in a specified format. Using this function is a simpler alternative to creating multiple separate strings and combining them with repeated <a href="/pine-script-docs/concepts/strings/#concatenation">concatenation</a> operations. Below is the function’s signature:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.format(formatString, arg0, arg1, ...) → string</span></div></div></code></pre></figure></div>
<aside aria-label="Note" class="tv-informer not-content" style="--informer-header-color:#6A6D78;--informer-back-color-light:#F0F3FA;--informer-back-color-dark:#2A2E39"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM8 6a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 2c.49 0 1 .59 1 1v3.01c0 .42-.51.99-1 .99s-1-.57-1-.99V9c0-.41.51-1 1-1Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Note</span>The second overloads of all <code dir="auto">log.*()</code> functions have the <em>same</em> parameter signature and formatting behaviors as <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a>. However, they generate <em>logs</em> with formatted text instead of returning usable strings. See the <a href="/pine-script-docs/writing/debugging/#pine-logs">Pine Logs</a> section of the <a href="/pine-script-docs/writing/debugging/">Debugging</a> page to learn more about these functions.</p></div></aside>
<p>The <code dir="auto">formatString</code> parameter accepts a “string” value that defines the <em>format</em> of the returned string, where the <em>placeholders</em> in curly brackets (<code dir="auto">{}</code>) refer to the function call’s <em>additional arguments</em>. The placeholder <code dir="auto">"{0}"</code> represents the first additional argument <code dir="auto">arg0</code>, <code dir="auto">"{1}"</code> represents <code dir="auto">arg1</code>, and so on. The function <em>replaces</em> each placeholder in the <code dir="auto">formatString</code> with a string representation of the corresponding argument. For instance, the call <code dir="auto">str.format("The timeframe multiplier is {0}", timeframe.multiplier)</code> on a 1D chart returns <code dir="auto">"The timeframe multiplier is 1"</code>.</p>
<p>The following example constructs a formatted string containing various bar information, then displays the result in a <a href="https://www.tradingview.com/pine-script-reference/v6/#type_label">label</a> at the bar’s <a href="https://www.tradingview.com/pine-script-reference/v6/#var_high">high</a>. The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> call’s <code dir="auto">formatString</code> argument includes placeholders for 10 values, where each placeholder’s <em>number</em> corresponds to one of the additional “string”, “bool”, “int”, or “float” arguments:</p>
<p><img src="/pine-script-docs/_astro/Strings-String-conversion-and-formatting-Formatting-strings-1.B6WKMYIo_1y4KGB.webp" alt="image" width="2586" height="1184" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="791"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Formatting&nbsp;strings&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Counts&nbsp;script&nbsp;executions&nbsp;in&nbsp;a&nbsp;bar.&nbsp;Does&nbsp;not&nbsp;roll&nbsp;</span><span class="mtk9">back&nbsp;because&nbsp;it&nbsp;is&nbsp;declared&nbsp;with&nbsp;`varip`.&nbsp;</span></span><br><span><span class="mtk18">varip</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">exCount</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span></span><br><span><span class="mtk33">exCount</span><span class="mtk1">&nbsp;</span><span class="mtk18">+=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Is&nbsp;`true`&nbsp;when&nbsp;the&nbsp;`close`&nbsp;exceeds&nbsp;the&nbsp;current&nbsp;`o</span><span class="mtk9">pen`&nbsp;and&nbsp;the&nbsp;previous&nbsp;`close`;&nbsp;`false`&nbsp;otherwise.&nbsp;</span></span><br><span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">rising</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.max</span><span class="mtk13">(</span><span class="mtk16">nz</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">])</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Is&nbsp;`"realtime"`&nbsp;for&nbsp;all&nbsp;new&nbsp;bars&nbsp;after&nbsp;the&nbsp;script</span><span class="mtk9">'s&nbsp;historical&nbsp;executions;&nbsp;`"historical"`&nbsp;otherwise</span><span class="mtk9">.&nbsp;</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">barState</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isrealtime</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk29">"realtime"</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk29">"historical"</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;formatting&nbsp;string&nbsp;containing&nbsp;placeholders&nbsp;for&nbsp;1</span><span class="mtk9">0&nbsp;values.&nbsp;</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">formatString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Bar:&nbsp;{1}&nbsp;({9}){0}{0}Executions:&nbsp;{2}{0}O:&nbsp;{3}{0}H:</span><span class="mtk29">&nbsp;{4}{0}L:&nbsp;{5}{0}C:&nbsp;{6}{0}V:&nbsp;{7}{0}Rising:&nbsp;{8}"</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;multiline&nbsp;string&nbsp;containing&nbsp;formatted&nbsp;informati</span><span class="mtk9">on&nbsp;for&nbsp;the&nbsp;current&nbsp;bar.&nbsp;</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">formattedString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">formatString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"\n\t"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">exCount</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">nz</span><span class="mtk13">(</span><span class="mtk33">exCount</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">])</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">volume</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">rising</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">barState</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Draw&nbsp;a&nbsp;label&nbsp;displaying&nbsp;the&nbsp;`formattedString`&nbsp;a</span><span class="mtk9">t&nbsp;the&nbsp;bar's&nbsp;`high`.&nbsp;</span></span><br><span><span class="mtk16">label.new</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">formattedString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">18</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">textalign</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">text.align_left</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The <code dir="auto">formatString</code> argument can use placeholders in <em>any order</em> and can repeat specific placeholders <em>more than once</em>. The format in this example uses <code dir="auto">{0}</code> multiple times to insert the first argument (<code dir="auto">"\n\t"</code>) to create multiline text with indentation.</li>
<li>If a placeholder refers to a nonexistent argument, the formatted result treats that placeholder as a <em>literal</em> character sequence. For instance, a placeholder such as <code dir="auto">{20}</code> in the <code dir="auto">formatString</code> argument above includes those characters literally in the formatted result, because the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> call <em>does not</em> contain 21 additional arguments.</li>
<li><em>Non-quoted</em> left curly brackets (<code dir="auto">{</code>) must have corresponding right curly brackets (<code dir="auto">}</code>) inside formatting strings. If a <code dir="auto">formatString</code> contains unbalanced curly brackets, it causes a <em>runtime error</em>.</li>
</ul>
<p>It’s important to note that the apostrophe (<code dir="auto">'</code>) acts as a <em>quote character</em> inside formatting strings. When a formatting string contains a character sequence between two apostrophes, the formatted result includes that sequence directly, without treating the characters as placeholders or formatting tokens. This behavior applies even if the formatting string prefixes apostrophes with the backslash character (<code dir="auto">\</code>). The enclosing apostrophes for a non-empty quoted sequence are <strong>not</strong> part of the formatted string. To include literal apostrophes in a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> call’s result, pass a “string” value containing the character as an <em>extra argument</em>, then use that argument’s <em>placeholder</em> in the specified <code dir="auto">formatString</code>. Alternatively, use pairs of apostrophes with no characters between them directly in the <code dir="auto">formatString</code> (e.g., <code dir="auto">''</code> adds a single <code dir="auto">'</code> character in the result).</p>
<p>The example below demonstrates how using apostrophes directly in formatting strings differs from inserting them via placeholders. The script uses the <code dir="auto">'</code> character directly in the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> call’s <code dir="auto">formatString</code> to define a <em>quoted sequence</em>, and it uses the <code dir="auto">{1}</code> placeholder to insert the character from an extra argument without creating a quoted sequence. The script displays the resulting <code dir="auto">formattedString</code> value in a single-cell <a href="https://www.tradingview.com/pine-script-reference/v6/#type_table">table</a> on the first bar:</p>
<p><img src="/pine-script-docs/_astro/Strings-String-conversion-and-formatting-Formatting-strings-2.BltxB35B_hlmcG.webp" alt="image" width="2594" height="822" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="3g0"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Quotes&nbsp;in&nbsp;formatting&nbsp;strings&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;concatenated&nbsp;formatting&nbsp;string&nbsp;that&nbsp;contains&nbsp;ap</span><span class="mtk9">ostrophes&nbsp;and&nbsp;placeholders.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">formatString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"Apostrophes&nbsp;in&nbsp;formatting&nbsp;strings&nbsp;signify&nbsp;quoted&nbsp;</span><span class="mtk29">character&nbsp;sequences,&nbsp;which&nbsp;do&nbsp;not&nbsp;have&nbsp;special&nbsp;mea</span><span class="mtk29">ning."</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk29">"\n\nQuoting&nbsp;a&nbsp;placeholder&nbsp;includes&nbsp;its&nbsp;characters</span><span class="mtk29">&nbsp;literally:&nbsp;'{0}'"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk29">"\n\nInserting&nbsp;the&nbsp;apostrophe&nbsp;character&nbsp;from&nbsp;argum</span><span class="mtk29">ents&nbsp;does&nbsp;*not*&nbsp;create&nbsp;quoted&nbsp;sequences:&nbsp;{1}{0}{1}</span><span class="mtk29">"</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;formatted&nbsp;string&nbsp;showing&nbsp;how&nbsp;using&nbsp;`'`&nbsp;directly</span><span class="mtk9">&nbsp;differs&nbsp;from&nbsp;insertion&nbsp;via&nbsp;arguments.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">formattedString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk33">formatString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">ticker.standard</span><span class="mtk13">()</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"'"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;single-cell&nbsp;table&nbsp;to&nbsp;display&nbsp;the&nbsp;`formattedStri</span><span class="mtk9">ng`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">table</span><span class="mtk1">&nbsp;</span><span class="mtk33">display</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">table.new</span><span class="mtk13">(</span><span class="mtk11">position.middle_center</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Initialize&nbsp;the&nbsp;cell&nbsp;with&nbsp;white,&nbsp;left-aligned&nbsp;te</span><span class="mtk9">xt.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">display</span><span class="mtk1">.</span><span class="mtk15">cell</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">formattedString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.white</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_halign</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">text.align_left</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk13">)</span></span><br></code></div>
<p>When a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> call contains “int” or “float” arguments, the placeholders for those arguments in the <code dir="auto">formatString</code> can include the <code dir="auto">number</code> <em>modifier</em> followed by a <em>formatting pattern</em> for customized numeric formats (e.g., <code dir="auto">"{0,number,#.000}"</code>).</p>
<p>The possible numeric formatting patterns are similar to those for the <code dir="auto">format</code> parameter of <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.tostring">str.tostring()</a>. They can contain <code dir="auto">#</code>, <code dir="auto">0</code>, and <code dir="auto">.</code> tokens to specify decimal precision; use the <code dir="auto">,</code> token for comma separation; and include <code dir="auto">%</code> at the end for percentage conversion. Alternatively, a placeholder can use one of the following <em>keywords</em> that specify <em>predefined</em> formatting patterns: <code dir="auto">integer</code>, <code dir="auto">currency</code>, or <code dir="auto">percent</code>.</p>
<p>The script below demonstrates how different numeric formats in a <code dir="auto">formatString</code> placeholder affect the formatted representation of a “float” value. On the last bar, the script generates a pseudorandom value between 0 and 10000 with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_math.random">math.random()</a>, uses several <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> calls to format the value in different ways, and displays the results in a <a href="https://www.tradingview.com/pine-script-reference/v6/#type_table">table</a>:</p>
<p><img src="/pine-script-docs/_astro/Strings-String-conversion-and-formatting-Formatting-strings-3.C4oE7UGv_Z1gc7ac.webp" alt="image" width="2590" height="1084" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="3ob"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Numeric&nbsp;formatting&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;two-row,&nbsp;eight-column&nbsp;table&nbsp;showing&nbsp;a&nbsp;pseudoran</span><span class="mtk9">dom&nbsp;number&nbsp;formatted&nbsp;with&nbsp;different&nbsp;format&nbsp;pattern</span><span class="mtk9">s.&nbsp;</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">table</span><span class="mtk1">&nbsp;</span><span class="mtk33">display</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">table.new</span><span class="mtk13">(</span><span class="mtk11">position.middle_center</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">frame_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">frame_width</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Initializes&nbsp;a&nbsp;row&nbsp;to&nbsp;show&nbsp;two&nbsp;specified&nbsp;strings&nbsp;i</span><span class="mtk9">n&nbsp;the&nbsp;`display`&nbsp;table.</span></span><br><span><span class="mtk15">makeRow</span><span class="mtk13">(</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">row</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">str0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">str1</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">bgColor</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">row</span><span class="mtk1">&nbsp;</span><span class="mtk18">==</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.bg_color</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">textColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">row</span><span class="mtk1">&nbsp;</span><span class="mtk18">==</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.bg_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">display</span><span class="mtk1">.</span><span class="mtk15">cell</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">row</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">str0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">textColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_halign</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">text.align_left</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">30</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">bgcolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">bgColor</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">display</span><span class="mtk1">.</span><span class="mtk15">cell</span><span class="mtk13">(</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">row</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">str1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">textColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_halign</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">text.align_left</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">30</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">bgcolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">bgColor</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Initialize&nbsp;the&nbsp;header&nbsp;row&nbsp;for&nbsp;the&nbsp;`display`&nbsp;tab</span><span class="mtk9">le&nbsp;on&nbsp;the&nbsp;first&nbsp;bar.&nbsp;</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Format&nbsp;pattern"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Result"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.islast</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;pseudorandom&nbsp;value&nbsp;between&nbsp;0&nbsp;and&nbsp;10000.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.random</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10000</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;the&nbsp;`value`&nbsp;using&nbsp;the&nbsp;`str.format()`&nbsp;f</span><span class="mtk9">unction's&nbsp;default&nbsp;numeric&nbsp;format&nbsp;(`#,###.###`).</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;format&nbsp;uses&nbsp;comma-separated&nbsp;sets&nbsp;</span><span class="mtk9">of&nbsp;three&nbsp;whole&nbsp;digits,&nbsp;and&nbsp;allows&nbsp;up&nbsp;to&nbsp;three&nbsp;frac</span><span class="mtk9">tional&nbsp;digits.&nbsp;&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;default&nbsp;differs&nbsp;from&nbsp;the&nbsp;default&nbsp;</span><span class="mtk9">for&nbsp;`str.tostring()`&nbsp;(`#.########`).&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">default</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"{0}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;the&nbsp;`value`&nbsp;using&nbsp;the&nbsp;`integer`&nbsp;preset</span><span class="mtk9">&nbsp;(`#,###`).&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;format&nbsp;rounds&nbsp;the&nbsp;`value`&nbsp;to&nbsp;the&nbsp;</span><span class="mtk9">nearest&nbsp;whole&nbsp;and&nbsp;adds&nbsp;comma&nbsp;separation&nbsp;for&nbsp;three-</span><span class="mtk9">digit&nbsp;sets.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">integerPreset</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"{0,number,integer}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;the&nbsp;`value`&nbsp;as&nbsp;an&nbsp;integer&nbsp;without&nbsp;comm</span><span class="mtk9">a-separated&nbsp;digits&nbsp;(`#`).&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">integerNoComma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"{0,number,#}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;the&nbsp;`value`&nbsp;using&nbsp;the&nbsp;`currency`&nbsp;prese</span><span class="mtk9">t&nbsp;(`'$'#,###.00`).&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;format&nbsp;prefixes&nbsp;the&nbsp;result&nbsp;with&nbsp;t</span><span class="mtk9">he&nbsp;`$`&nbsp;symbol,&nbsp;adds&nbsp;comma&nbsp;separation&nbsp;for&nbsp;sets&nbsp;of&nbsp;t</span><span class="mtk9">hree&nbsp;whole&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;digits,&nbsp;and&nbsp;includes&nbsp;two&nbsp;fractional&nbsp;di</span><span class="mtk9">gits.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">currencyPreset</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"{0,number,currency}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;the&nbsp;`value`&nbsp;in&nbsp;dollars&nbsp;with&nbsp;comma-sepa</span><span class="mtk9">rated&nbsp;whole&nbsp;digits&nbsp;and&nbsp;four&nbsp;fractional&nbsp;digits&nbsp;(`'$</span><span class="mtk9">',###.0000`).&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">currencyCustom</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"{0,number,'$',###.0000}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;the&nbsp;`value`&nbsp;using&nbsp;the&nbsp;`percent`&nbsp;preset</span><span class="mtk9">&nbsp;(`#,###%`).</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;format&nbsp;multiplies&nbsp;the&nbsp;`value`&nbsp;by&nbsp;</span><span class="mtk9">100,&nbsp;rounds&nbsp;the&nbsp;result&nbsp;to&nbsp;the&nbsp;nearest&nbsp;whole&nbsp;number</span><span class="mtk9">,&nbsp;adds&nbsp;comma&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;separation&nbsp;for&nbsp;three-digit&nbsp;sets,&nbsp;and&nbsp;i</span><span class="mtk9">ncludes&nbsp;the&nbsp;`%`&nbsp;symbol&nbsp;at&nbsp;the&nbsp;end.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">percentPreset</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"{0,number,percent}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Represents&nbsp;the&nbsp;`value`&nbsp;as&nbsp;a&nbsp;percentage&nbsp;with&nbsp;comma</span><span class="mtk9">-separated&nbsp;whole&nbsp;digits&nbsp;and&nbsp;up&nbsp;to&nbsp;three&nbsp;fractional</span><span class="mtk9">&nbsp;digits.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">percentCustom</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"{0,number,#,###.###%}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Initialize&nbsp;rows&nbsp;showing&nbsp;each&nbsp;numeric&nbsp;format&nbsp;and</span><span class="mtk9">&nbsp;the&nbsp;resulting&nbsp;representation&nbsp;of&nbsp;the&nbsp;`value`.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Default&nbsp;(#,###.###)"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">default</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"integer&nbsp;(#,###)"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">integerPreset</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"integer&nbsp;without&nbsp;commas&nbsp;(#)"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">integerNoComma</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"currency&nbsp;('$'#,###.00)"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">currencyPreset</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">5</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"currency&nbsp;with&nbsp;4&nbsp;fractional&nbsp;digits&nbsp;('$',###.0000)"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">currencyCustom</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">6</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"percent&nbsp;(#,###%)"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">percentPreset</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeRow</span><span class="mtk13">(</span><span class="mtk12">7</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"percent&nbsp;with&nbsp;up&nbsp;to&nbsp;3&nbsp;fractional&nbsp;digits&nbsp;(#,###.###</span><span class="mtk29">%)"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">percentCustom</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>In contrast to <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.tostring">str.tostring()</a>, the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> function does not directly support the preset formats defined by the <code dir="auto">format.*</code> constants (<a href="https://www.tradingview.com/pine-script-reference/v6/#const_format.mintick">format.mintick</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#const_format.percent">format.percent</a>, and <a href="https://www.tradingview.com/pine-script-reference/v6/#const_format.volume">format.volume</a>). To use those formats on numeric values in a formatted string, convert the values with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.tostring">str.tostring()</a> first, then use the resulting strings in the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> call.</li>
</ul>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> function’s <code dir="auto">formatString</code> also supports placeholders with the <code dir="auto">date</code> or <code dir="auto">time</code> modifier, which can format an “int” <a href="/pine-script-docs/concepts/time/#unix-timestamps">UNIX timestamp</a> into a <em>UTC</em> date or time. For example, this line of code creates a string representing the current bar’s opening timestamp as a date and time in the <a href="https://en.wikipedia.org/wiki/ISO_8601#Combined_date_and_time_representations" rel="nofollow">ISO 8601</a> standard format:</p>
<div class="pine-colorizer not-content colorized" data-id="4co"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">formattedTime</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"{0,date,yyyy-MM-dd}T{0,time,HH:mm:ssZ}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">time</span><span class="mtk13">)</span></span><br></code></div>
<p>However, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> <strong>cannot</strong> express dates and times in other time zones. It uses <em>UTC+0</em> exclusively. The specialized <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format_time">str.format_time()</a> function is more optimal for constructing date-time strings, because it can express dates and times in <em>any time zone</em>. See the <a href="/pine-script-docs/concepts/time/#formatting-dates-and-times">Formatting dates and times</a> section of the <a href="/pine-script-docs/concepts/time/">Time</a> page to learn more about this function and the available formatting tokens.</p>
<h3 id="custom-representations" class="md-heading"><a href="#custom-representations">Custom <span class="fancy-wrap">representations<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>All built-in functions that create “string” values to represent data support a limited subset of built-in types. They <em>do not</em> support “color” values or objects of most <em>reference types</em> (e.g., <a href="/pine-script-docs/visuals/text-and-shapes/#labels">labels</a>). Programmers can, however, use custom logic and formatting to create “string” representations of data that the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.tostring">str.tostring()</a> or <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> functions cannot express as strings directly.</p>
<p>For example, this script demonstrates two ways to represent a “color” value as a string based on its red, green, blue, and transparency components. The first method formats the color components directly. The second calculates and formats each component’s <em>hexadecimal</em> form. The script displays the results of both custom formats in a <a href="https://www.tradingview.com/pine-script-reference/v6/#type_label">label</a> on the last historical bar.</p>
<p>After creating the label object, the script also uses <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_log.info">log.info()</a> to create formatted text containing the label’s <code dir="auto">x</code>, <code dir="auto">y</code>, and <code dir="auto">text</code> <em>properties</em> and display the result in the <a href="/pine-script-docs/writing/debugging/#pine-logs">Pine Logs</a> pane:</p>
<p><img src="/pine-script-docs/_astro/Strings-String-conversion-and-formatting-Custom-representations-1.XcnqrSgw_2taBpW.webp" alt="image" width="2594" height="1068" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="328"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Custom&nbsp;representations&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;"color"&nbsp;value&nbsp;to&nbsp;color&nbsp;the&nbsp;label&nbsp;and&nbsp;convert&nbsp;</span><span class="mtk9">to&nbsp;a&nbsp;string.&nbsp;</span></span><br><span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">colorInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.color</span><span class="mtk13">(</span><span class="mtk11">#00897b</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Constructs&nbsp;a&nbsp;formatted&nbsp;string&nbsp;containing&nbsp;the&nbsp;colo</span><span class="mtk9">r's&nbsp;R,&nbsp;G,&nbsp;B,&nbsp;and&nbsp;T&nbsp;components.&nbsp;</span></span><br><span><span class="mtk15">rgbtString</span><span class="mtk13">(</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"color&nbsp;(R:&nbsp;{0},&nbsp;G:&nbsp;{1},&nbsp;B:&nbsp;{2},&nbsp;T:&nbsp;{3})"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.r</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.g</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.b</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.t</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Constructs&nbsp;a&nbsp;string&nbsp;containing&nbsp;the&nbsp;color's&nbsp;hexade</span><span class="mtk9">cimal&nbsp;RGBA&nbsp;representation.&nbsp;</span></span><br><span><span class="mtk15">hexString</span><span class="mtk13">(</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">value</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;of&nbsp;hexadecimal&nbsp;characters&nbsp;formed&nbsp;by&nbsp;spli</span><span class="mtk9">tting&nbsp;a&nbsp;string.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">string</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">chars</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.split</span><span class="mtk13">(</span><span class="mtk29">"0123456789abcdef"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Get&nbsp;the&nbsp;R,&nbsp;G,&nbsp;and&nbsp;B&nbsp;channel&nbsp;values&nbsp;from&nbsp;the&nbsp;`va</span><span class="mtk9">lue`.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">r</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">int</span><span class="mtk13">(</span><span class="mtk16">color.r</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">g</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">int</span><span class="mtk13">(</span><span class="mtk16">color.g</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">int</span><span class="mtk13">(</span><span class="mtk16">color.b</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;A&nbsp;(alpha)&nbsp;channel&nbsp;value&nbsp;(opposite&nbsp;of&nbsp;transpar</span><span class="mtk9">ency),&nbsp;scaled&nbsp;to&nbsp;the&nbsp;range&nbsp;[0,&nbsp;255].&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">int</span><span class="mtk13">((</span><span class="mtk12">100</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.t</span><span class="mtk13">(</span><span class="mtk33">value</span><span class="mtk13">))</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk12">255</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk12">100</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;formatted&nbsp;string&nbsp;combining&nbsp;hex&nbsp;codes&nbsp;for&nbsp;the&nbsp;R,</span><span class="mtk9">&nbsp;G,&nbsp;B,&nbsp;and&nbsp;A&nbsp;channels.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">result</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"#{0}{1}{2}{3}{4}{5}{6}{7}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">chars</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk16">int</span><span class="mtk13">(</span><span class="mtk33">r</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk12">16</span><span class="mtk13">))</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">chars</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk33">r</span><span class="mtk1">&nbsp;</span><span class="mtk18">%</span><span class="mtk1">&nbsp;</span><span class="mtk12">16</span><span class="mtk13">)</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">chars</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk16">int</span><span class="mtk13">(</span><span class="mtk33">g</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk12">16</span><span class="mtk13">))</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">chars</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk33">g</span><span class="mtk1">&nbsp;</span><span class="mtk18">%</span><span class="mtk1">&nbsp;</span><span class="mtk12">16</span><span class="mtk13">)</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">chars</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk16">int</span><span class="mtk13">(</span><span class="mtk33">b</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk12">16</span><span class="mtk13">))</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">chars</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk33">b</span><span class="mtk1">&nbsp;</span><span class="mtk18">%</span><span class="mtk1">&nbsp;</span><span class="mtk12">16</span><span class="mtk13">)</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">chars</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk16">int</span><span class="mtk13">(</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk12">16</span><span class="mtk13">))</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">chars</span><span class="mtk1">.</span><span class="mtk15">get</span><span class="mtk13">(</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">%</span><span class="mtk1">&nbsp;</span><span class="mtk12">16</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.islastconfirmedhistory</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;formatted&nbsp;string&nbsp;containing&nbsp;the&nbsp;results&nbsp;of&nbsp;`rgb</span><span class="mtk9">tString()`&nbsp;and&nbsp;`hexString()`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">labelText</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"{0}\n{1}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">rgbtString</span><span class="mtk13">(</span><span class="mtk33">colorInput</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">hexString</span><span class="mtk13">(</span><span class="mtk33">colorInput</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;label&nbsp;displaying&nbsp;the&nbsp;`labelText`.&nbsp;The&nbsp;script&nbsp;di</span><span class="mtk9">splays&nbsp;this&nbsp;object's&nbsp;properties&nbsp;in&nbsp;the&nbsp;Pine&nbsp;Logs&nbsp;p</span><span class="mtk9">ane.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">label</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayLabel</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">label.new</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">labelText</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">colorInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">textcolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.white</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">36</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Log&nbsp;a&nbsp;custom&nbsp;representation&nbsp;of&nbsp;the&nbsp;`displayLabe</span><span class="mtk9">l`&nbsp;in&nbsp;the&nbsp;Pine&nbsp;Logs&nbsp;pane.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"\nlabel&nbsp;object\nx:&nbsp;{0,number,#}\ny:&nbsp;{1,number,#.#</span><span class="mtk29">####}\ntext:&nbsp;{2}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">displayLabel</span><span class="mtk1">.</span><span class="mtk15">get_x</span><span class="mtk13">()</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayLabel</span><span class="mtk1">.</span><span class="mtk15">get_y</span><span class="mtk13">()</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayLabel</span><span class="mtk1">.</span><span class="mtk15">get_text</span><span class="mtk13">()</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>Not all special types have retrievable properties. For instance, scripts cannot retrieve information from <a href="/pine-script-docs/visuals/lines-and-boxes/#polylines">polylines</a> or <a href="/pine-script-docs/visuals/tables/">tables</a>. To create strings for these types, track the data used in their creation with separate variables, then format the values of those variables into strings.</li>
<li>For an example of creating strings from the field values of user-defined types, see the <a href="/pine-script-docs/writing/debugging/#debugging-objects-of-udts">Debugging objects of UDTs</a> section of the <a href="/pine-script-docs/writing/debugging">Debugging</a> page.</li>
</ul>
<h2 id="modifying-strings" class="md-heading"><a href="#modifying-strings">Modifying <span class="fancy-wrap">strings<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>Several <code dir="auto">str.*()</code> functions provide simplified ways to modify the character sequence from a “string” value, including <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.replace">str.replace()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.replace_all">str.replace_all()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.upper">str.upper()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.lower">str.lower()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.trim">str.trim()</a>, and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.repeat">str.repeat()</a>.</p>
<p>Programmers can use these functions to create copies of strings with replaced character sequences, modified letter cases, trimmed whitespaces, or repeated character patterns.</p>
<h3 id="replacing-substrings" class="md-heading"><a href="#replacing-substrings">Replacing <span class="fancy-wrap">substrings<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.replace">str.replace()</a> function searches a specified <code dir="auto">source</code> string for the nth <em>non-overlapping</em> occurrence of a given substring, then returns a copy of the original string containing a specified replacement at that substring’s position.</p>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.replace_all">str.replace_all()</a> function searches the <code dir="auto">source</code> for <em>every</em> non-overlapping occurrence of the substring and replaces each one in its returned value.</p>
<p>Below are the functions’ signatures:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.replace(source, target, replacement, occurrence) → string</span></div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.replace_all(source, target, replacement) → string</span></div></div></code></pre></figure></div>
<p>Where:</p>
<ul>
<li><code dir="auto">source</code> is the “string” value containing the substrings to replace with a specified <code dir="auto">replacement</code>.</li>
<li><code dir="auto">target</code> is the substring replaced by the <code dir="auto">replacement</code> in the returned copy. If the <code dir="auto">source</code> value does not contain the substring, the function returns a copy of the value without modification.</li>
<li><code dir="auto">replacement</code> is the substring inserted in place of the required <code dir="auto">target</code> occurrences in the result.</li>
<li>The <code dir="auto">occurrence</code> parameter for <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.replace">str.replace()</a> specifies which non-overlapping occurrence of the <code dir="auto">target</code> is swapped for the <code dir="auto">replacement</code> in the result. The default value is 0, meaning the function replaces the <em>first</em> occurrence of the <code dir="auto">target</code>. If the specified occurrence does not exist in the <code dir="auto">source</code> value, the function returns a copy of the value without modification.</li>
</ul>
<p>The following script demonstrates the effects of <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.replace">str.replace()</a> and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.replace_all">str.replace_all()</a> calls on a string containing the sequence <code dir="auto">Hello world!</code>. Additionally, it calls these functions to define the <code dir="auto">formatString</code> value for a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> call, which formats all the replacement results into a single “string” value. The script displays the formatted text inside a <a href="https://www.tradingview.com/pine-script-reference/v6/#type_label">label</a> anchored to the latest bar’s opening time:</p>
<p><img src="/pine-script-docs/_astro/Strings-Modifying-strings-Replacing-substrings-1.Bu9H-So3_Z1xDtOH.webp" alt="image" width="2304" height="1072" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="4kx"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Replacing&nbsp;substrings&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;string&nbsp;containing&nbsp;the&nbsp;sequence&nbsp;`Hello&nbsp;world!`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">originalString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Hello&nbsp;world!"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;copy&nbsp;of&nbsp;the&nbsp;`originalString`&nbsp;with&nbsp;`!`&nbsp;replaced&nbsp;</span><span class="mtk9">by&nbsp;`!!!`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">changePunctuation</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.replace</span><span class="mtk13">(</span><span class="mtk33">originalString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"!"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"!!!"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;copy&nbsp;of&nbsp;the&nbsp;`originalString`&nbsp;with&nbsp;the&nbsp;second&nbsp;`o</span><span class="mtk9">`&nbsp;replaced&nbsp;by&nbsp;`0`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">changeLetter</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.replace</span><span class="mtk13">(</span><span class="mtk33">originalString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"o"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"0"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;copy&nbsp;of&nbsp;the&nbsp;`originalString`&nbsp;with&nbsp;all&nbsp;`l`&nbsp;chara</span><span class="mtk9">cters&nbsp;replaced&nbsp;by&nbsp;1.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">changeLetters</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.replace_all</span><span class="mtk13">(</span><span class="mtk33">originalString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"l"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"1"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;copy&nbsp;of&nbsp;the&nbsp;`originalString`&nbsp;with&nbsp;all&nbsp;zero-widt</span><span class="mtk9">h&nbsp;boundaries&nbsp;replaced&nbsp;by&nbsp;`\n-`.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">insertNewlines</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.replace_all</span><span class="mtk13">(</span><span class="mtk33">originalString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"\n"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;copy&nbsp;of&nbsp;the&nbsp;`originalString`&nbsp;without&nbsp;changes,&nbsp;a</span><span class="mtk9">s&nbsp;`H`&nbsp;does&nbsp;not&nbsp;occur&nbsp;two&nbsp;times.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">unchanged</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.replace</span><span class="mtk13">(</span><span class="mtk33">originalString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"H&nbsp;"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"_"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;formatting&nbsp;string&nbsp;with&nbsp;the&nbsp;following&nbsp;initial&nbsp;st</span><span class="mtk9">ructure:&nbsp;`{0}\n{1}\n{2}\n{3}\n{4}\n{5}`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;script&nbsp;creates&nbsp;the&nbsp;string&nbsp;by&nbsp;repla</span><span class="mtk9">cing&nbsp;zero-width&nbsp;boundaries&nbsp;in&nbsp;the&nbsp;sequence&nbsp;`012345</span><span class="mtk9">`&nbsp;with&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`}\n{`&nbsp;using&nbsp;`str.replace_all()`,&nbsp;then</span><span class="mtk9">&nbsp;removing&nbsp;the&nbsp;extra&nbsp;`}\n`&nbsp;and&nbsp;`\n{`&nbsp;from&nbsp;the&nbsp;start</span><span class="mtk9">&nbsp;and&nbsp;end&nbsp;of&nbsp;the&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call's&nbsp;result&nbsp;with&nbsp;two&nbsp;additional&nbsp;`str</span><span class="mtk9">.replace()`&nbsp;calls.&nbsp;&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">formatString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.replace</span><span class="mtk13">(</span><span class="mtk16">str.replace</span><span class="mtk13">(</span><span class="mtk16">str.replace_all</span><span class="mtk13">(</span><span class="mtk29">"012345"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"}\n{"</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"}\n"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"\n{"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">5</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Create&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;`formatString`&nbsp;with&nbsp;the&nbsp;fi</span><span class="mtk9">rst&nbsp;`}`&nbsp;replaced&nbsp;by&nbsp;`}\n-----------------------`,&nbsp;</span><span class="mtk9">then&nbsp;reassign&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;the&nbsp;variable&nbsp;to&nbsp;use&nbsp;that&nbsp;copy.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">formatString</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.replace</span><span class="mtk13">(</span><span class="mtk33">formatString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"}\n-----------------------"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;formatted&nbsp;string&nbsp;containing&nbsp;the&nbsp;original&nbsp;and&nbsp;mo</span><span class="mtk9">dified&nbsp;"Hello&nbsp;world!"&nbsp;strings.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayText</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">formatString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">originalString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">changePunctuation</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">changeLetter</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">changeLetters</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">insertNewlines</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">unchanged</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Draw&nbsp;a&nbsp;label&nbsp;anchored&nbsp;to&nbsp;the&nbsp;latest&nbsp;bar's&nbsp;openi</span><span class="mtk9">ng&nbsp;time&nbsp;to&nbsp;show&nbsp;the&nbsp;`displayText`.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">label.new</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">math.max</span><span class="mtk13">(</span><span class="mtk11">last_bar_time</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.right_visible_bar_time</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayText</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">xloc.bar_time</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">label.style_label_center</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>Each <code dir="auto">str.replace*()</code> call creates an independent, modified copy of the specified <code dir="auto">source</code> value. Because each modification of the <code dir="auto">originalString</code> is assigned to a separate variable, each value <em>does not</em> contain changes from previous <code dir="auto">str.replace*()</code> calls.</li>
<li>The <code dir="auto">str.replace*()</code> functions can replace zero-width <em>boundaries</em> when the <code dir="auto">target</code> is an empty string, as shown by the <code dir="auto">formatString</code> declaration. The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.replace_all">str.replace_all()</a> call inserts <code dir="auto">}\n{</code> around every character in the literal string <code dir="auto">"012345"</code>.</li>
</ul>
<aside aria-label="Tip" class="tv-informer not-content" style="--informer-header-color:#089981;--informer-back-color-light:#DAF2EE;--informer-back-color-dark:#082621"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16Zm3.87-12.15c.36.2.49.66.28 1.02l-4 7a.75.75 0 0 1-1.18.16l-3-3a.75.75 0 1 1 1.06-1.06l2.3 2.3 3.52-6.14a.75.75 0 0 1 1.02-.28Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Tip</span>When using <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.replace">str.replace()</a>, knowing the precise number of substrings within the <code dir="auto">source</code> value helps ensure correct results. A simple way to count substrings is to remove them with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.replace_all">str.replace_all()</a>, then measure the difference in length relative to the length of the removed substring. See the <a href="/pine-script-docs/concepts/strings/#counting-characters-and-substrings">Counting characters and substrings</a> section to learn more.</p></div></aside>
<h3 id="changing-case" class="md-heading"><a href="#changing-case">Changing <span class="fancy-wrap">case<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.upper">str.upper()</a> and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.lower">str.lower()</a> functions create a copy of a <code dir="auto">source</code> string with all ASCII letter characters converted to <em>uppercase</em> or <em>lowercase</em> variants, providing a convenient alternative to replacing specific characters with several <code dir="auto">str.replace*()</code> calls. The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.upper">str.upper()</a> function replaces all lowercase characters with uppercase characters, and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.lower">str.lower()</a> does the opposite. These are the functions’ signatures:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.upper(source) → string</span></div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.lower(source) → string</span></div></div></code></pre></figure></div>
<p>This simple example demonstrates how these functions affect strings with <em>standard</em> letter characters. The script declares an <code dir="auto">originalString</code> variable to hold a <a href="/pine-script-docs/concepts/strings/#literal-strings">literal string</a>, uses <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.upper">str.upper()</a> on that variable to create a copied string with all letters converted to uppercase, then calls <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.lower">str.lower()</a> to make a copy with only lowercase characters. It logs all three strings in the <a href="/pine-script-docs/writing/debugging/#pine-logs">Pine Logs</a> pane on the first bar:</p>
<p><img src="/pine-script-docs/_astro/Strings-Modifying-strings-Changing-case-1.7yrRmoQ__Z1bjY0c.webp" alt="image" width="2384" height="862" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="2if"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Changing&nbsp;case&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;literal&nbsp;string&nbsp;containing&nbsp;the&nbsp;sequence&nbsp;`Hello&nbsp;W</span><span class="mtk9">orld!`</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">originalString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Hello&nbsp;World!"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;copy&nbsp;of&nbsp;the&nbsp;`originalString`&nbsp;with&nbsp;all&nbsp;lowercase</span><span class="mtk9">&nbsp;ASCII&nbsp;characters&nbsp;changed&nbsp;to&nbsp;uppercase&nbsp;characters.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">uppercaseString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.upper</span><span class="mtk13">(</span><span class="mtk33">originalString</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;copy&nbsp;of&nbsp;the&nbsp;`uppercaseString`&nbsp;with&nbsp;all&nbsp;uppercas</span><span class="mtk9">e&nbsp;ASCII&nbsp;characters&nbsp;changed&nbsp;to&nbsp;lowercase&nbsp;characters</span><span class="mtk9">.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowercaseString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.lower</span><span class="mtk13">(</span><span class="mtk33">uppercaseString</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Log&nbsp;a&nbsp;formatted&nbsp;message&nbsp;containing&nbsp;all&nbsp;three&nbsp;va</span><span class="mtk9">lues.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk29">"\n\nOriginal:&nbsp;{0}\nUppercase:&nbsp;{1}\nLowercase:&nbsp;{2}</span><span class="mtk29">"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">originalString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">uppercaseString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowercaseString</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that these functions can only change the cases of <em>ASCII</em> letter characters. They cannot convert other Unicode letters outside the ASCII range. For example, this script attempts to create uppercase and lowercase versions of a “string” value containing “Mathematical Sans-Serif” Unicode characters using <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.upper">str.upper()</a> and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.lower">str.lower()</a>. As shown below, both function calls return <em>identical</em> copies of the value:</p>
<p><img src="/pine-script-docs/_astro/Strings-Modifying-strings-Changing-case-2.aOK3qDyt_2fqNuJ.webp" alt="image" width="2378" height="840" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="5v3"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Non-ASCII&nbsp;case&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;literal&nbsp;string&nbsp;that&nbsp;uses&nbsp;Unicode&nbsp;characters&nbsp;in&nbsp;</span><span class="mtk9">the&nbsp;"Mathematical&nbsp;Sans-Serif"&nbsp;family.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">originalString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"𝖳𝗁𝗂𝗌&nbsp;𝗌𝗍𝗋𝗂𝗇𝗀&nbsp;𝗂𝗌&nbsp;𝗎𝗇𝖺𝖿𝖿𝖾𝖼𝗍𝖾𝖽&nbsp;</span><span class="mtk29">𝖻𝗒&nbsp;𝗍𝗁𝖾&nbsp;𝖼𝖺𝗌𝖾-𝗌𝗐𝖺𝗉𝗉𝗂𝗇𝗀&nbsp;</span><span class="mtk29">𝖿𝗎𝗇𝖼𝗍𝗂𝗈𝗇𝗌!"</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Call&nbsp;`str.upper()`&nbsp;and&nbsp;`str.lower()`&nbsp;to&nbsp;change&nbsp;</span><span class="mtk9">the&nbsp;case&nbsp;of&nbsp;letters.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Although&nbsp;the&nbsp;characters&nbsp;in&nbsp;the&nbsp;`originalString`</span><span class="mtk9">&nbsp;have&nbsp;the&nbsp;"Letter"&nbsp;property,&nbsp;they&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;</span><span class="mtk9">the&nbsp;standard&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;ASCII&nbsp;set.&nbsp;Consequently,&nbsp;these&nbsp;calls&nbsp;return&nbsp;unm</span><span class="mtk9">odified&nbsp;strings.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">uppercaseString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.upper</span><span class="mtk13">(</span><span class="mtk33">originalString</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowercaseString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.lower</span><span class="mtk13">(</span><span class="mtk33">uppercaseString</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Log&nbsp;a&nbsp;formatted&nbsp;message&nbsp;containing&nbsp;all&nbsp;three&nbsp;va</span><span class="mtk9">lues.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk29">"\n\nOriginal:&nbsp;{0}\nUppercase:&nbsp;{1}\nLowercase:&nbsp;{2}</span><span class="mtk29">"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">originalString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">uppercaseString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lowercaseString</span><span class="mtk13">)</span></span><br></code></div>
<h3 id="trimming-whitespaces" class="md-heading"><a href="#trimming-whitespaces">Trimming <span class="fancy-wrap">whitespaces<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.trim">str.trim()</a> function copies a <code dir="auto">source</code> string and removes leading and trailing whitespace characters, including the standard space (<code dir="auto"> </code>), newline (<code dir="auto">\n</code>), and tab space (<code dir="auto">\t</code>). Below is the function’s signature:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.trim(source) → string</span></div></div></code></pre></figure></div>
<p>This simple example demonstrates the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.trim">str.trim()</a> function’s behavior. The script creates a <a href="/pine-script-docs/concepts/strings/#literal-strings">literal string</a> containing different types of whitespaces at the start and end of the character sequence. Then, it uses <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.trim">str.trim()</a> to create a new “string” value with those characters removed. The script <a href="/pine-script-docs/concepts/strings/#formatting-strings">formats</a> both values into a single string, then displays the result in a <a href="https://www.tradingview.com/pine-script-reference/v6/#type_label">label</a> on the last historical bar:</p>
<p><img src="/pine-script-docs/_astro/Strings-Modifying-strings-Trimming-whitespaces-1.Pw-iWToN_2wcbYS.webp" alt="image" width="2302" height="904" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="32c"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Trimming&nbsp;whitespaces&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.islastconfirmedhistory</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;literal&nbsp;string&nbsp;containing&nbsp;space,&nbsp;newline,&nbsp;and&nbsp;t</span><span class="mtk9">ab&nbsp;characters.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">originalString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"\n\n\t\tABC&nbsp;DEF\t&nbsp;&nbsp;\n\n&nbsp;&nbsp;&nbsp;"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;copy&nbsp;of&nbsp;the&nbsp;`originalString`&nbsp;that&nbsp;contains&nbsp;only</span><span class="mtk9">&nbsp;`ABC&nbsp;DEF`&nbsp;without&nbsp;the&nbsp;other&nbsp;whitespaces.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">trimmedString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.trim</span><span class="mtk13">(</span><span class="mtk33">originalString</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;formatted&nbsp;string&nbsp;containing&nbsp;the&nbsp;`originalString</span><span class="mtk9">`&nbsp;and&nbsp;`trimmedString`&nbsp;values.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayText</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"Original:&nbsp;\"{0}\"\n---\n\nTrimmed:&nbsp;\"{1}\""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">originalString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">trimmedString</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Draw&nbsp;a&nbsp;label&nbsp;to&nbsp;show&nbsp;the&nbsp;`displayText`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">label.new</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayText</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">label.style_label_center</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">30</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">textalign</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">text.align_left</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.trim">str.trim()</a> function removes only the ASCII whitespaces to the left of the <em>first</em> non-whitespace character and the right of the <em>last</em> non-whitespace character. It does <strong>not</strong> remove whitespaces between other characters.</li>
<li>The formatting string in the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> call uses <code dir="auto">\"</code> to include quotation marks around the <code dir="auto">originalString</code> and <code dir="auto">trimmedString</code> values in the displayed text. See the <a href="/pine-script-docs/concepts/strings/#escape-sequences">Escape sequences</a> section above for more information.</li>
</ul>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.trim">str.trim()</a> function is particularly helpful when supplying calculated or input strings to built-in functions that process “string” arguments, because some function parameters require values <em>without</em> leading or trailing whitespaces.</p>
<p>The following example creates an <a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a> of timeframe strings by <a href="/pine-script-docs/concepts/strings/#splitting-strings">splitting</a> the value of a <a href="/pine-script-docs/concepts/inputs/#text-area-input">text area input</a> based on its comma characters. Within a <a href="/pine-script-docs/language/loops/">loop</a>, the script uses each element from the array in a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_time">time()</a> call to retrieve an opening time, then <a href="/pine-script-docs/concepts/strings/#concatenation">concatenates</a> a <a href="/pine-script-docs/concepts/time/#formatting-dates-and-times">formatted date and time</a> with the <code dir="auto">displayText</code>.</p>
<p>Although each item listed in the default string represents a valid timeframe, the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_time">time()</a> call causes a runtime error. The script splits the value only by its commas, resulting in a <em>leading space</em> in each <code dir="auto">timeframes</code> element after the first, and the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_time">time()</a> function <em>does not</em> allow whitespaces in its <code dir="auto">timeframe</code> argument.</p>
<p>If the user enables the input to trim the input string (which is off by default), the script uses <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.trim">str.trim()</a> to remove surrounding whitespaces from the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_time">time()</a> call’s argument and prevent the formatting issue and the runtime error.</p>
<p><img src="/pine-script-docs/_astro/Strings-Modifying-strings-Trimming-whitespaces-2.DXeJgZMp_1HaN4n.webp" alt="image" width="1412" height="572" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="st"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Invalid&nbsp;arguments&nbsp;with&nbsp;whitespaces&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;string&nbsp;containing&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;tim</span><span class="mtk9">eframes.&nbsp;</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframesInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.text_area</span><span class="mtk13">(</span><span class="mtk29">"1,&nbsp;5,&nbsp;15,&nbsp;30,&nbsp;60,&nbsp;240,&nbsp;720,&nbsp;1D"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Timeframes"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;boolean&nbsp;variable&nbsp;that&nbsp;defines&nbsp;whether&nbsp;to&nbsp;trim&nbsp;t</span><span class="mtk9">he&nbsp;input&nbsp;string.</span></span><br><span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">doTrimInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.bool</span><span class="mtk13">(</span><span class="mtk11">false</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Trim&nbsp;the&nbsp;\"Timeframes\"&nbsp;input&nbsp;string"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;of&nbsp;timeframe&nbsp;substrings.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">string</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframes</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.split</span><span class="mtk13">(</span><span class="mtk33">timeframesInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">","</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;concatenated&nbsp;string&nbsp;containing&nbsp;formatted&nbsp;dates&nbsp;</span><span class="mtk9">and&nbsp;times&nbsp;for&nbsp;each&nbsp;value&nbsp;in&nbsp;the&nbsp;`timeframes`&nbsp;array</span><span class="mtk9">.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayText</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Opening&nbsp;times:"</span></span><br><span><span></span></span><br><span><span class="mtk18">for</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">in</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframes</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;copy&nbsp;of&nbsp;the&nbsp;`timeframe`&nbsp;string&nbsp;with&nbsp;surrounding</span><span class="mtk9">&nbsp;whitespaces&nbsp;removed.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">trimmedTimeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.trim</span><span class="mtk13">(</span><span class="mtk33">timeframe</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;UNIX&nbsp;timestamp&nbsp;of&nbsp;the&nbsp;bar's&nbsp;opening&nbsp;time&nbsp;on&nbsp;t</span><span class="mtk9">he&nbsp;timeframe.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;call&nbsp;causes&nbsp;a&nbsp;runtime&nbsp;error&nbsp;if&nbsp;th</span><span class="mtk9">e&nbsp;input&nbsp;string&nbsp;is&nbsp;not&nbsp;trimmed,&nbsp;because&nbsp;the&nbsp;argumen</span><span class="mtk9">t&nbsp;contains</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;leading&nbsp;whitespace&nbsp;(e.g.,&nbsp;"&nbsp;5"),&nbsp;whi</span><span class="mtk9">ch&nbsp;is&nbsp;an&nbsp;*unsupported&nbsp;format*&nbsp;for&nbsp;timeframe&nbsp;string</span><span class="mtk9">s.&nbsp;&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">timestamp</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">time</span><span class="mtk13">(</span><span class="mtk33">doTrimInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk33">trimmedTimeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Add&nbsp;a&nbsp;new&nbsp;text&nbsp;line&nbsp;containing&nbsp;the&nbsp;`timestamp`&nbsp;</span><span class="mtk9">formatted&nbsp;as&nbsp;a&nbsp;date&nbsp;and&nbsp;time&nbsp;in&nbsp;the&nbsp;exchange&nbsp;time&nbsp;</span><span class="mtk9">zone.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">displayText</span><span class="mtk1">&nbsp;</span><span class="mtk18">+=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"\n"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframe</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format_time</span><span class="mtk13">(</span><span class="mtk33">timestamp</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"&nbsp;yyyy-MM-dd,&nbsp;HH:mm:ss"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Draw&nbsp;a&nbsp;label&nbsp;at&nbsp;the&nbsp;bar's&nbsp;`high`&nbsp;with&nbsp;a&nbsp;tooltip</span><span class="mtk9">&nbsp;showing&nbsp;the&nbsp;`displayText`.&nbsp;</span></span><br><span><span class="mtk16">label.new</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">label.style_label_down</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">tooltip</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayText</span><span class="mtk13">)</span></span><br></code></div>
<h3 id="repeating-sequences" class="md-heading"><a href="#repeating-sequences">Repeating <span class="fancy-wrap">sequences<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.repeat">str.repeat()</a> function creates a “string” value that <em>repeats</em> a <code dir="auto">source</code> string’s character sequence a specified number of times, providing a convenient way to construct strings with repetitive character patterns. Below is the function’s signature:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.repeat(source, repeat, separator) → string</span></div></div></code></pre></figure></div>
<p>Where:</p>
<ul>
<li><code dir="auto">source</code> is the “string” value containing the character sequence to repeat in the result.</li>
<li><code dir="auto">repeat</code> is an “int” value specifying the number of times the function repeats the <code dir="auto">source</code> sequence. If the value is 0, the function returns an empty string.</li>
<li><code dir="auto">separator</code> is an optional “string” value containing a character sequence to <em>insert</em> between each repeated instance of the <code dir="auto">source</code> sequence. The default value is an empty string, meaning the function repeats the <code dir="auto">source</code> sequence <em>without</em> inserting additional characters.</li>
</ul>
<p>The following script formats two numbers — the <a href="https://www.tradingview.com/pine-script-reference/v6/#var_ohlc4">ohlc4</a> price and its <a href="https://www.tradingview.com/support/solutions/43000696841/">Simple Moving Average</a> — with a variable number of fractional digits. The minimum and maximum number of fractional digits are set by user inputs. The script uses a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.repeat">str.repeat()</a> call to repeat <code dir="auto">0</code> characters to create a pattern for the <em>required</em> digits, and another call that repeats <code dir="auto">#</code> characters to create a pattern for the <em>optional</em> digits, which are displayed only if they are nonzero. The script then <a href="/pine-script-docs/concepts/strings/#concatenation">concatenates</a> these patterns into one pattern and uses that in a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> call to format the two numbers.</p>
<p>The script calls <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_log.info">log.info()</a> to log the constructed <code dir="auto">formatString</code> on the first bar, and it displays the formatted results for each bar using <a href="/pine-script-docs/visuals/text-and-shapes/#labels">labels</a>:</p>
<p><img src="/pine-script-docs/_astro/Strings-Modifying-strings-Repeating-sequences-1.Crzgj3dM_ZmXEeu.webp" alt="image" width="2594" height="1136" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="44z"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Repeating&nbsp;sequences&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;minimum&nbsp;number&nbsp;of&nbsp;fractional&nbsp;digits&nbsp;in&nbsp;the&nbsp;nu</span><span class="mtk9">meric&nbsp;strings.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">minPrecisionInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Min&nbsp;precision"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">16</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;maximum&nbsp;number&nbsp;of&nbsp;fractional&nbsp;digits&nbsp;in&nbsp;the&nbsp;nu</span><span class="mtk9">meric&nbsp;strings.&nbsp;</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">maxPrecisionInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Max&nbsp;precision"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">16</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Raise&nbsp;an&nbsp;error&nbsp;if&nbsp;the&nbsp;`maxPrecisionInput`&nbsp;is&nbsp;le</span><span class="mtk9">ss&nbsp;than&nbsp;the&nbsp;`minPrecisionInput`.</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">maxPrecisionInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">&lt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">minPrecisionInput</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">runtime.error</span><span class="mtk13">(</span><span class="mtk29">"The&nbsp;'Max&nbsp;precision'&nbsp;cannot&nbsp;be&nbsp;less&nbsp;than&nbsp;the&nbsp;'Min&nbsp;</span><span class="mtk29">precision."</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;string&nbsp;containing&nbsp;the&nbsp;`0`&nbsp;character&nbsp;repeated&nbsp;`m</span><span class="mtk9">inPrecisionInput`&nbsp;times.&nbsp;</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">requiredDigits</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.repeat</span><span class="mtk13">(</span><span class="mtk29">"0"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">minPrecisionInput</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;string&nbsp;containing&nbsp;the&nbsp;`#`&nbsp;character&nbsp;repeated&nbsp;`m</span><span class="mtk9">axPrecisionInput&nbsp;-&nbsp;minPrecisionInput`&nbsp;times.&nbsp;</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">extraDigits</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.repeat</span><span class="mtk13">(</span><span class="mtk29">"#"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">maxPrecisionInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk33">minPrecisionInput</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;string&nbsp;representing&nbsp;a&nbsp;formatting&nbsp;pattern&nbsp;for&nbsp;nu</span><span class="mtk9">meric&nbsp;strings.&nbsp;</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;With&nbsp;default&nbsp;inputs,&nbsp;the&nbsp;value&nbsp;is&nbsp;`"0.</span><span class="mtk9">00######"`,&nbsp;meaning&nbsp;two&nbsp;required&nbsp;digits&nbsp;and&nbsp;six&nbsp;no</span><span class="mtk9">nzero&nbsp;extra&nbsp;digits.&nbsp;</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">formatPattern</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"0."</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">requiredDigits</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">extraDigits</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;formatting&nbsp;string&nbsp;that&nbsp;contains&nbsp;two&nbsp;placeholder</span><span class="mtk9">s&nbsp;for&nbsp;the&nbsp;`formatPattern`&nbsp;for&nbsp;numeric&nbsp;values.&nbsp;</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">formatString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"OHLC4:&nbsp;'{'0,number,{0}'}',&nbsp;MA:&nbsp;'{'1,number,{0}'}'</span><span class="mtk29">"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">formatPattern</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Log&nbsp;the&nbsp;`formatString`&nbsp;value&nbsp;on&nbsp;the&nbsp;first&nbsp;bar.</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk33">formatString</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Draw&nbsp;a&nbsp;label&nbsp;to&nbsp;show&nbsp;the&nbsp;bar's&nbsp;formatted&nbsp;result</span><span class="mtk9">.</span></span><br><span><span class="mtk16">label.new</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk33">formatString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">ohlc4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">ohlc4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk13">))</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">18</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The apostrophe (<code dir="auto">'</code>) in the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> call serves as a <em>quote character</em>, <strong>not</strong> a literal character. The <code dir="auto">formatString</code> uses the apostrophe to quote curly brackets (<code dir="auto">{</code> and <code dir="auto">}</code>), treating them as literal characters instead of direct placeholder markers.</li>
</ul>
<p>The example below demonstrates a more creative use of <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.repeat">str.repeat()</a>. This script generates an ASCII art representation of the Pine Script logo using alternating sequences of repeated <code dir="auto">.</code> (period) and <code dir="auto">@</code> (at) characters. The user-defined <code dir="auto">makeLine()</code> function calls <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.repeat">str.repeat()</a> seven times to create the repeated sequences, then formats their results into a single “string” value with a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> call. On the first bar, the script formats the results of several <code dir="auto">makeLine()</code> calls into a multiline string and displays the result in a single-cell <a href="https://www.tradingview.com/pine-script-reference/v6/#type_table">table</a> in the chart’s top-right corner:</p>
<p><img src="/pine-script-docs/_astro/Strings-Modifying-strings-Repeating-sequences-2.t0jtjbMv_2stnSa.webp" alt="image" width="2442" height="1018" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="19r"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"ASCII&nbsp;art&nbsp;from&nbsp;repeated&nbsp;sequences&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Creates&nbsp;a&nbsp;string&nbsp;containing&nbsp;alternating&nbsp;sequences</span><span class="mtk9">&nbsp;of&nbsp;repeated&nbsp;`.`&nbsp;and&nbsp;`@`&nbsp;characters&nbsp;with&nbsp;`\n`&nbsp;at&nbsp;t</span><span class="mtk9">he&nbsp;end.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Each&nbsp;`dot*`&nbsp;argument&nbsp;defines&nbsp;a&nbsp;sequenc</span><span class="mtk9">e&nbsp;of&nbsp;repeated&nbsp;`.`&nbsp;characters,&nbsp;and&nbsp;each&nbsp;`at*`&nbsp;argum</span><span class="mtk9">ent&nbsp;defines&nbsp;a</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sequence&nbsp;of&nbsp;repeated&nbsp;`@`&nbsp;characters.&nbsp;T</span><span class="mtk9">he&nbsp;function&nbsp;formats&nbsp;the&nbsp;repeated&nbsp;sequences&nbsp;from&nbsp;`s</span><span class="mtk9">tr.repeat()`&nbsp;calls&nbsp;</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;into&nbsp;a&nbsp;single&nbsp;string,&nbsp;in&nbsp;the&nbsp;order&nbsp;of&nbsp;</span><span class="mtk9">the&nbsp;parameters.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;example,&nbsp;`makeLine(6,&nbsp;5,&nbsp;4,&nbsp;3,&nbsp;2)`</span><span class="mtk9">&nbsp;returns&nbsp;`"......@@@@@....@@@..\n"`.</span></span><br><span><span class="mtk15">makeLine</span><span class="mtk13">(</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">dot1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">at1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">dot2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">at2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">dot3</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">at3</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">dot4</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">result</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"{0}{1}{2}{3}{4}{5}{6}\n"</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">str.repeat</span><span class="mtk13">(</span><span class="mtk29">"."</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">dot1</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.repeat</span><span class="mtk13">(</span><span class="mtk29">"@"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">at1</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.repeat</span><span class="mtk13">(</span><span class="mtk29">"."</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">dot2</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.repeat</span><span class="mtk13">(</span><span class="mtk29">"@"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">at2</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">str.repeat</span><span class="mtk13">(</span><span class="mtk29">"."</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">dot3</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.repeat</span><span class="mtk13">(</span><span class="mtk29">"@"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">at3</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.repeat</span><span class="mtk13">(</span><span class="mtk29">"."</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">dot4</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">result</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;string&nbsp;representing&nbsp;the&nbsp;Pine&nbsp;logo&nbsp;using&nbsp;several</span><span class="mtk9">&nbsp;lines&nbsp;of&nbsp;different&nbsp;repeated&nbsp;`.`&nbsp;and&nbsp;`@`&nbsp;sequences</span><span class="mtk9">.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">asciiArt</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"{0}{1}{2}{3}{4}{5}{6}{7}{8}{9}{10}{11}{12}{13}{14</span><span class="mtk29">}{15}{16}{17}"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"{18}{19}{20}{21}{22}{23}{24}{25}{26}{27}{28}{29}{</span><span class="mtk29">30}{31}{32}{33}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">80</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">80</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">38</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">6</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">36</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">37</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">35</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">35</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">12</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">33</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">34</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">15</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">31</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">33</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">7</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">7</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">31</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">31</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">29</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">29</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">27</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">28</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">9</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">25</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">27</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">7</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">14</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">24</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">25</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">17</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">22</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">24</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">19</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">21</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">23</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">7</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">22</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">9</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">19</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">21</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">17</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">16</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">9</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">17</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">20</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">16</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">16</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">18</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">25</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">14</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">9</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">14</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">18</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">14</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">13</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">14</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">18</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">11</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">9</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">14</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">39</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">12</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">15</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">29</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">6</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">7</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">18</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">24</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">14</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">6</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">15</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">21</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">20</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">21</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">5</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">24</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">18</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">25</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">5</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">5</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">5</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">6</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">16</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">17</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">28</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">15</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">16</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">32</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">14</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">14</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">14</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">54</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">12</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">13</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">56</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">11</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">12</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">58</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">62</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">9</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">64</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">7</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">9</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">64</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">7</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">80</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeLine</span><span class="mtk13">(</span><span class="mtk12">80</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;single-cell&nbsp;table&nbsp;to&nbsp;display&nbsp;the&nbsp;`asciiArt`&nbsp;val</span><span class="mtk9">ue.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">table</span><span class="mtk1">&nbsp;</span><span class="mtk33">t</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">table.new</span><span class="mtk13">(</span><span class="mtk11">position.top_right</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">frame_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">frame_width</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Initialize&nbsp;a&nbsp;left-aligned&nbsp;cell&nbsp;with&nbsp;monospace&nbsp;f</span><span class="mtk9">ont&nbsp;for&nbsp;proper&nbsp;alignment.&nbsp;&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">t</span><span class="mtk1">.</span><span class="mtk15">cell</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">asciiArt</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_halign</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">text.align_left</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">6</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">text_font_family</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">font.family_monospace</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_table.cell">table.cell()</a> call uses <a href="https://www.tradingview.com/pine-script-reference/v6/#const_text.align_left">text.align_left</a> as the <code dir="auto">text_halign</code> argument and <a href="https://www.tradingview.com/pine-script-reference/v6/#const_font.family_monospace">font.family_monospace</a> as the <code dir="auto">text_font_family</code> argument to align the text lines to the <em>left</em> with relatively uniform character width.</li>
<li>The formatted string from each <code dir="auto">makeLine()</code> call uses the <code dir="auto">\n</code> <a href="/pine-script-docs/concepts/strings/#escape-sequences">escape sequence</a> at the end to add a line terminator.</li>
</ul>
<h2 id="string-inspection-and-extraction" class="md-heading"><a href="#string-inspection-and-extraction">String inspection and <span class="fancy-wrap">extraction<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p>Several built-in <code dir="auto">str.*()</code> functions allow scripts to measure a “string” value, check for substrings and retrieve their positions, split a string into several substrings, and extract substrings based on positions or match patterns. These functions include <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.length">str.length()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.contains">str.contains()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.startswith">str.startswith()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.endswith">str.endswith()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.split">str.split()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.pos">str.pos()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.substring">str.substring()</a>, and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.match">str.match()</a>.</p>
<p>The sections below explain these functions and some helpful techniques to use them effectively.</p>
<h3 id="counting-characters-and-substrings" class="md-heading"><a href="#counting-characters-and-substrings">Counting characters and <span class="fancy-wrap">substrings<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.length">str.length()</a> function measures the length of a specified “string” value, returning an “int” value representing the number of characters in the argument’s character sequence. It has the following signature:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.length(string) → int</span></div></div></code></pre></figure></div>
<p>This function detects <em>every</em> character within a “string” value’s sequence, even those that are hard to see, such as leading or repeated spaces, line terminators, and invisible characters like U+200B (Zero Width Space).</p>
<p>For example, this simple script declares two variables with assigned <a href="/pine-script-docs/concepts/strings/#literal-strings">literal strings</a> and measures their length. The script creates the first “string” value using <em>Em Space</em> characters (U+2003), and creates the second using <em>En Space</em> characters (U+2002) instead. It measures the length of both strings with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.length">str.length()</a>, creates modified strings with the <code dir="auto">"__"</code> parts <a href="/pine-script-docs/concepts/strings/#replacing-substrings">replaced</a> by the length values, then <a href="/pine-script-docs/concepts/strings/#concatenation">concatenates</a> the results for display in a single-cell <a href="https://www.tradingview.com/pine-script-reference/v6/#type_table">table</a>.</p>
<p>Although the two strings look identical in the output, their lengths differ because one En Space is equivalent to <em>half</em> the width of one Em Space, meaning the second string must include <em>two En Spaces</em> between each word to match the width of each Em Space in the first string:</p>
<p><img src="/pine-script-docs/_astro/Strings-String-inspection-and-extraction-Counting-characters-and-substrings-1.BDBO3GAa_Zvh5Jx.webp" alt="image" width="2114" height="992" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="1yi"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Counting&nbsp;characters&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;single-cell&nbsp;table&nbsp;to&nbsp;display&nbsp;text.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">table</span><span class="mtk1">&nbsp;</span><span class="mtk33">display</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">table.new</span><span class="mtk13">(</span><span class="mtk11">position.middle_center</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;literal&nbsp;string&nbsp;that&nbsp;uses&nbsp;one&nbsp;Em&nbsp;Space&nbsp;(U+2003)&nbsp;</span><span class="mtk9">between&nbsp;each&nbsp;word.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">testString1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"This 'string' contains\n__ characters."</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;literal&nbsp;string&nbsp;that&nbsp;uses&nbsp;two&nbsp;En&nbsp;Spaces&nbsp;(U+2002)</span><span class="mtk9">&nbsp;between&nbsp;each&nbsp;word.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An&nbsp;En&nbsp;Space&nbsp;is&nbsp;half&nbsp;the&nbsp;width&nbsp;of&nbsp;an&nbsp;Em</span><span class="mtk9">&nbsp;Space,&nbsp;so&nbsp;this&nbsp;string&nbsp;contains&nbsp;three&nbsp;extra&nbsp;charac</span><span class="mtk9">ters&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;match&nbsp;the&nbsp;widths&nbsp;of&nbsp;each&nbsp;Em&nbsp;space&nbsp;i</span><span class="mtk9">n&nbsp;`testString1`&nbsp;and&nbsp;produce&nbsp;an&nbsp;identical&nbsp;output.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">testString2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"This  'string'  contains\n__  characters."</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Count&nbsp;the&nbsp;number&nbsp;of&nbsp;characters&nbsp;in&nbsp;`testString1`</span><span class="mtk9">&nbsp;and&nbsp;`testString2`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.length</span><span class="mtk13">(</span><span class="mtk33">testString1</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">length2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.length</span><span class="mtk13">(</span><span class="mtk33">testString2</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Replace&nbsp;the&nbsp;"__"&nbsp;in&nbsp;`testString1`&nbsp;and&nbsp;`testStri</span><span class="mtk9">ng2`&nbsp;with&nbsp;string&nbsp;representations&nbsp;of&nbsp;`length1`&nbsp;and&nbsp;</span><span class="mtk9">`length2`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">testString1</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.replace</span><span class="mtk13">(</span><span class="mtk33">testString1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"__"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">length1</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">testString2</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.replace</span><span class="mtk13">(</span><span class="mtk33">testString2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"__"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">length2</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Concatenate&nbsp;both&nbsp;strings&nbsp;and&nbsp;two&nbsp;newline&nbsp;charac</span><span class="mtk9">ters,&nbsp;then&nbsp;display&nbsp;the&nbsp;result&nbsp;in&nbsp;the&nbsp;table's&nbsp;cell.</span><span class="mtk9">&nbsp;&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">testString1</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk29">"\n\n"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">testString2</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">display</span><span class="mtk1">.</span><span class="mtk15">cell</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.white</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">50</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_halign</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">text.align_left</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>A simple way to verify the added characters is to <em>split</em> the <code dir="auto">testString2</code> value into an <a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a> of substrings with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.split">str.split()</a> and inspect the array’s elements. See the <a href="/pine-script-docs/concepts/strings/#splitting-strings">Splitting strings</a> section to learn more about this function.</li>
</ul>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.length">str.length()</a> function is also useful for counting the number of <em>substrings</em> of any size contained within a string’s sequence, which is helpful information when <a href="/pine-script-docs/concepts/strings/#replacing-substrings">replacing substrings</a> or performing custom routines that depend on recurring characters.</p>
<p>The following example defines a <code dir="auto">countSubstrings()</code> function, which uses <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.replace_all">str.replace_all()</a> and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.length">str.length()</a> to count the number of times a <code dir="auto">target</code> substring occurs within a specified <code dir="auto">source</code> value. The function creates a modified copy of the <code dir="auto">source</code> with all instances of the <code dir="auto">target</code> removed, then calls <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.length">str.length()</a> to measure the length of each separate string. It calculates the number of <code dir="auto">target</code> occurrences by dividing the length difference in the original and reduced strings by the length of the substring.</p>
<p>The script uses <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.repeat">str.repeat()</a> to generate a “string” value that <a href="/pine-script-docs/concepts/strings/#repeating-sequences">repeats</a> the sequence <code dir="auto">aba</code> a pseudorandom number of times with <code dir="auto">baab</code> inserted between each instance, then counts all occurrences of the substring <code dir="auto">ab</code> in the result with a <code dir="auto">countSubstrings()</code> call. It then displays a <a href="/pine-script-docs/concepts/strings/#formatting-strings">formatted</a> message containing the repeated sequence and the total number of <code dir="auto">ab</code> substrings in the <a href="/pine-script-docs/writing/debugging/#pine-logs">Pine Logs</a> pane:</p>
<p><img src="/pine-script-docs/_astro/Strings-String-inspection-and-extraction-Counting-characters-and-substrings-2.C5OGeI0L_Z1zNoWF.webp" alt="image" width="2576" height="1170" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="r3"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Counting&nbsp;substrings&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Counts&nbsp;the&nbsp;number&nbsp;of&nbsp;times&nbsp;a&nbsp;`target`&nbsp;substring&nbsp;o</span><span class="mtk9">ccurs&nbsp;within&nbsp;the&nbsp;specified&nbsp;`source`.&nbsp;</span></span><br><span><span class="mtk15">countSubstrings</span><span class="mtk13">(</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">target</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;copy&nbsp;of&nbsp;the&nbsp;`source`&nbsp;string&nbsp;with&nbsp;all&nbsp;instances&nbsp;</span><span class="mtk9">of&nbsp;the&nbsp;`target`&nbsp;removed.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">reduced</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.replace_all</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">target</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Count&nbsp;the&nbsp;characters&nbsp;in&nbsp;the&nbsp;`source`,&nbsp;`target`,</span><span class="mtk9">&nbsp;and&nbsp;`reduced`&nbsp;strings.&nbsp;&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">sourceLength</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.length</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">targetLength</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.length</span><span class="mtk13">(</span><span class="mtk33">target</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">reducedLength</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.length</span><span class="mtk13">(</span><span class="mtk33">reduced</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Calculate&nbsp;the&nbsp;difference&nbsp;between&nbsp;`sourceLength`</span><span class="mtk9">&nbsp;and&nbsp;`reducedLength`&nbsp;relative&nbsp;to&nbsp;the&nbsp;`targetLength</span><span class="mtk9">`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;This&nbsp;value&nbsp;represents&nbsp;the&nbsp;number&nbsp;of&nbsp;`target`&nbsp;su</span><span class="mtk9">bstrings&nbsp;inside&nbsp;the&nbsp;original&nbsp;`source`.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">(</span><span class="mtk33">sourceLength</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk33">reducedLength</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk33">targetLength</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;string&nbsp;containing&nbsp;`aba`&nbsp;repeated&nbsp;a&nbsp;pseudorandom</span><span class="mtk9">&nbsp;number&nbsp;of&nbsp;times&nbsp;with&nbsp;`baab`&nbsp;inserted&nbsp;between&nbsp;each</span><span class="mtk9">&nbsp;instance.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">randString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.repeat</span><span class="mtk13">(</span><span class="mtk29">"aba"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">int</span><span class="mtk13">(</span><span class="mtk16">math.random</span><span class="mtk13">(</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk13">))</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"baab"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;number&nbsp;of&nbsp;times&nbsp;the&nbsp;`ab`&nbsp;sequence&nbsp;occurs&nbsp;in&nbsp;t</span><span class="mtk9">he&nbsp;`randString`.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">count</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">countSubstrings</span><span class="mtk13">(</span><span class="mtk33">randString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"ab"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Log&nbsp;a&nbsp;formatted&nbsp;message&nbsp;containing&nbsp;the&nbsp;`randStr</span><span class="mtk9">ing`&nbsp;and&nbsp;`count`&nbsp;values&nbsp;in&nbsp;the&nbsp;Pine&nbsp;Logs&nbsp;pane.</span></span><br><span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk29">"randString:&nbsp;{0},&nbsp;&nbsp;count:&nbsp;{1,number,#}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">randString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">count</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>This script uses the <em>second overload</em> of <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_log.info">log.info()</a>, which shares the same signature as <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> but logs a formatted message instead of returning a value. See the <a href="/pine-script-docs/writing/debugging/#pine-logs">Pine Logs</a> section of the <a href="/pine-script-docs/writing/debugging/">Debugging</a> page to learn more about the <code dir="auto">log*()</code> functions.</li>
</ul>
<h3 id="checking-for-substrings" class="md-heading"><a href="#checking-for-substrings">Checking for <span class="fancy-wrap">substrings<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.contains">str.contains()</a> function searches a <code dir="auto">source</code> string for a specified substring, returning a “bool” value representing whether it found the substring. Two similar functions, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.startswith">str.startswith()</a> and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.endswith">str.endswith()</a>, check whether the <code dir="auto">source</code> <em>starts</em> and <em>ends</em> with a specified substring.</p>
<p>These functions have the following signatures:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.contains(source, str) → bool</span></div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.startswith(source, str) → bool</span></div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.endswith(source, str) → bool</span></div></div></code></pre></figure></div>
<p>Where:</p>
<ul>
<li><code dir="auto">source</code> is the “string” value that the function searches to find the substring.</li>
<li><code dir="auto">str</code> is a “string” value containing the substring to find in the <code dir="auto">source</code>. The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.contains">str.contains()</a> function returns <code dir="auto">true</code> if the <code dir="auto">source</code> contains at least one instance of the substring. The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.startswith">str.startswith()</a> function returns <code dir="auto">true</code> only if the <code dir="auto">source</code> starts with the substring, even if the substring exists elsewhere in the character sequence. Likewise, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.endswith">str.endswith()</a> returns <code dir="auto">true</code> only if the <code dir="auto">source</code> ends with the substring.</li>
</ul>
<p>These functions are convenient when a script needs to check whether a substring exists but does not require the substring in additional calculations. Programmers often use these functions in conditional logic to control script behaviors based on a “string” value’s contents.</p>
<p>The following script creates a <a href="https://www.tradingview.com/support/solutions/43000502298-spread-charts/">spread symbol</a> string from two <a href="/pine-script-docs/concepts/inputs/#symbol-input">symbol inputs</a> and requests price information from that spread symbol using a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call. Before executing the request, the script calls <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.startswith">str.startswith()</a> to check whether the <code dir="auto">spreadInput</code> value starts with a leading space and forward slash (<code dir="auto">/</code>), indicating that the first input is <em>empty</em>. If the call returns <code dir="auto">true</code>, the script <a href="/pine-script-docs/concepts/strings/#replacing-substrings">replaces</a> the missing symbol in the “string” value with the chart’s symbol to prevent errors.</p>
<p>The script then plots the retrieved data as candles in a separate pane. The colors of the candles change if the chart is in <a href="https://www.tradingview.com/support/folders/43000547807-bar-replay/">Bar Replay</a> mode. The script tests for Bar Replay mode by searching for the <code dir="auto">replay</code> substring in the chart’s ticker identifier (<a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.tickerid">syminfo.tickerid</a>) using a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.contains">str.contains()</a> call:</p>
<p><img src="/pine-script-docs/_astro/Strings-String-inspection-and-extraction-Checking-for-substrings-1.VmIRjjPH_1mWWQF.webp" alt="image" width="2596" height="1014" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="zd"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Checking&nbsp;for&nbsp;substrings&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;spread&nbsp;symbol&nbsp;created&nbsp;from&nbsp;two&nbsp;symbol&nbsp;inputs.&nbsp;T</span><span class="mtk9">he&nbsp;first&nbsp;input&nbsp;is&nbsp;an&nbsp;empty&nbsp;string&nbsp;by&nbsp;default.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">spreadInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.symbol</span><span class="mtk13">(</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Symbol&nbsp;1"</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk29">"&nbsp;/&nbsp;"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.symbol</span><span class="mtk13">(</span><span class="mtk29">"BATS:SPY"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Symbol&nbsp;2"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Is&nbsp;`true`&nbsp;if&nbsp;the&nbsp;`spreadInput`&nbsp;starts&nbsp;with&nbsp;`&nbsp;/`,&nbsp;</span><span class="mtk9">meaning&nbsp;the&nbsp;first&nbsp;input&nbsp;is&nbsp;empty.&nbsp;</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">missingNumerator</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.startswith</span><span class="mtk13">(</span><span class="mtk33">spreadInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"&nbsp;/"</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;copy&nbsp;of&nbsp;the&nbsp;spreadInput`&nbsp;that&nbsp;inserts&nbsp;the&nbsp;chart</span><span class="mtk9">'s&nbsp;standard&nbsp;ticker&nbsp;ID&nbsp;when&nbsp;`missingNumerator`&nbsp;is&nbsp;`</span><span class="mtk9">true`.&nbsp;</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">spread</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">missingNumerator</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.replace</span><span class="mtk13">(</span><span class="mtk33">spreadInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"&nbsp;/"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">ticker.standard</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk29">"&nbsp;/"</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk33">spreadInput</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Request&nbsp;a&nbsp;tuple&nbsp;of&nbsp;OHLC&nbsp;data&nbsp;from&nbsp;the&nbsp;`spread`&nbsp;</span><span class="mtk9">context.&nbsp;</span></span><br><span><span class="mtk13">[</span><span class="mtk33">o</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">h</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">l</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">c</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk29">"&nbsp;"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">spread</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">])</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Is&nbsp;`true`&nbsp;if&nbsp;the&nbsp;chart's&nbsp;ticker&nbsp;ID&nbsp;contains&nbsp;`repl</span><span class="mtk9">ay`,&nbsp;meaning&nbsp;Bar&nbsp;Replay&nbsp;mode&nbsp;is&nbsp;active.&nbsp;</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">isReplay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.contains</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"replay"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Define&nbsp;variables&nbsp;to&nbsp;hold&nbsp;colors&nbsp;for&nbsp;up&nbsp;and&nbsp;down</span><span class="mtk9">&nbsp;candles.&nbsp;Their&nbsp;values&nbsp;depend&nbsp;on&nbsp;whether&nbsp;`isReplay</span><span class="mtk9">`&nbsp;is&nbsp;`true`.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">upColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">isReplay</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.blue</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">dnColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">isReplay</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.maroon</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.red</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;candles&nbsp;in&nbsp;a&nbsp;separate&nbsp;pane.&nbsp;</span></span><br><span><span class="mtk16">plotcandle</span><span class="mtk13">(</span><span class="mtk33">o</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">h</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">l</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">c</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Spread&nbsp;candles"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">c</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">o</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk33">upColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk33">dnColor</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Log&nbsp;the&nbsp;original&nbsp;`spreadInput`,&nbsp;the&nbsp;final&nbsp;`spre</span><span class="mtk9">ad`&nbsp;value,&nbsp;and&nbsp;the&nbsp;`isReplay`&nbsp;value`&nbsp;in&nbsp;the&nbsp;Pine&nbsp;L</span><span class="mtk9">ogs&nbsp;pane.</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk29">"\n\nOriginal&nbsp;input:&nbsp;{0}\nFinal&nbsp;spread:&nbsp;{1}\nRepla</span><span class="mtk29">y&nbsp;chart:&nbsp;{2}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">spreadInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">spread</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">isReplay</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>We used <code dir="auto">" /"</code> as the substring value in the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.startswith">str.startswith()</a> call because an empty string does <em>not</em> detect the empty input value. When the substring specified in a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.contains">str.contains()</a>, <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.startswith">str.startswith()</a>, or <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.endswith">str.endswith()</a> call is empty, the function always returns <code dir="auto">true</code> because the argument can match <em>any position</em> in a string’s sequence.</li>
</ul>
<h3 id="splitting-strings" class="md-heading"><a href="#splitting-strings">Splitting <span class="fancy-wrap">strings<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.split">str.split()</a> function splits a single “string” value into one or more substrings based on a <code dir="auto">separator</code> substring in the value’s character sequence, then collects the results in an <a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a>. Below is the function’s signature:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.split(string, separator) → array&lt;string&gt;</span></div></div></code></pre></figure></div>
<p>Where:</p>
<ul>
<li>The specified <code dir="auto">string</code> is the value to divide into substrings.</li>
<li>The <code dir="auto">separator</code> is a “string” value containing the characters that divide each substring. The resulting <a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a> does <em>not</em> include the separator in its elements. If the value is empty, the function splits the string into single-character substrings.</li>
</ul>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.split">str.split()</a> function returns an <a href="/pine-script-docs/language/arrays/">array</a> of strings, unlike the other <code dir="auto">str.*()</code> functions. Scripts can use <code dir="auto">array.*()</code> functions on these arrays, or iterate through them directly with <a href="/pine-script-docs/language/loops/#forin-loops">for…in</a> loops. Programmers often use <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.split">str.split()</a> to process “string” inputs and parameters that represent <em>lists</em> of arguments for <a href="/pine-script-docs/concepts/other-timeframes-and-data/#dynamic-requests">dynamic requests</a> and other calculations.</p>
<p>The following script requests data from several contexts based on a <a href="/pine-script-docs/concepts/inputs/#text-area-input">text area input</a> containing a comma-separated list of symbols. First, the script splits the input value based on its commas with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.split">str.split()</a> to construct an array of symbol strings. Then, it uses a <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_for...in">for…in</a> loop to iterate over the array’s contents, request data for each symbol, and populate a <a href="https://www.tradingview.com/pine-script-reference/v6/#type_table">table</a> with the results. Additionally, the table’s first row contains a “string” representation of the array of symbols:</p>
<p><img src="/pine-script-docs/_astro/Strings-String-inspection-and-extraction-Splitting-strings-1.CnHbOLag_Z2bvbAu.webp" alt="image" width="2590" height="1062" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="j"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Splitting&nbsp;strings&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;string&nbsp;containing&nbsp;a&nbsp;list&nbsp;of&nbsp;symbols&nbsp;separated&nbsp;b</span><span class="mtk9">y&nbsp;commas&nbsp;and&nbsp;optional&nbsp;spaces.&nbsp;</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolListInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.text_area</span><span class="mtk13">(</span><span class="mtk29">"AAPL,&nbsp;NVDA,&nbsp;MSFT,&nbsp;AMZN,&nbsp;SPY"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;of&nbsp;symbols&nbsp;created&nbsp;by&nbsp;splitting&nbsp;the&nbsp;`sym</span><span class="mtk9">bolListInput`&nbsp;by&nbsp;its&nbsp;commas.&nbsp;</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">string</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolsArray</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.split</span><span class="mtk13">(</span><span class="mtk33">symbolListInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">","</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.islast</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;two-column&nbsp;table&nbsp;with&nbsp;a&nbsp;row&nbsp;for&nbsp;each&nbsp;`symbolsAr</span><span class="mtk9">ray`&nbsp;item.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">table</span><span class="mtk1">&nbsp;</span><span class="mtk33">display</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">table.new</span><span class="mtk13">(</span><span class="mtk11">position.middle_center</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolsArray</span><span class="mtk1">.</span><span class="mtk15">size</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Initialize&nbsp;a&nbsp;merged&nbsp;cell&nbsp;to&nbsp;show&nbsp;the&nbsp;`symbolsAr</span><span class="mtk9">ray`.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">display</span><span class="mtk1">.</span><span class="mtk15">cell</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Symbols:\n"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">symbolsArray</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">bgcolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.blue</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.white</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">30</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">display</span><span class="mtk1">.</span><span class="mtk15">merge_cells</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Loop&nbsp;through&nbsp;the&nbsp;`symbolsArray`.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">for</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk33">i</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">in</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolsArray</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`close`&nbsp;value&nbsp;requested&nbsp;for&nbsp;the&nbsp;`symbol`&nbsp;on&nbsp;t</span><span class="mtk9">he&nbsp;chart's&nbsp;timeframe.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedValue</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">symbol</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Initialize&nbsp;a&nbsp;cell&nbsp;for&nbsp;the&nbsp;`symbol`&nbsp;and&nbsp;a&nbsp;"strin</span><span class="mtk9">g"&nbsp;representing&nbsp;the&nbsp;`requestedValue`.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">display</span><span class="mtk1">.</span><span class="mtk15">cell</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">display</span><span class="mtk1">.</span><span class="mtk15">cell</span><span class="mtk13">(</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">requestedValue</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The symbol strings in the array contain <em>extra whitespaces</em>, which are not visible in the table. However, in contrast to some other function parameters, the <code dir="auto">symbol</code> parameter of <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> ignores leading and trailing whitespaces in its argument.</li>
<li>The script uses <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.tostring">str.tostring()</a> and <a href="/pine-script-docs/concepts/strings/#concatenation">concatenation</a> to create the strings used for the table’s text.</li>
<li>This script can fetch data from other contexts within a loop using “series string” <code dir="auto">symbol</code> values because scripts allow dynamic requests by default. See the <a href="/pine-script-docs/concepts/other-timeframes-and-data/#dynamic-requests">Dynamic requests</a> section of the <a href="/pine-script-docs/concepts/other-timeframes-and-data/">Other timeframes and data</a> page for more information.</li>
</ul>
<h3 id="locating-and-retrieving-substrings" class="md-heading"><a href="#locating-and-retrieving-substrings">Locating and retrieving <span class="fancy-wrap">substrings<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.pos">str.pos()</a> function searches a <code dir="auto">source</code> string for the <em>first</em> occurrence of a specified substring and returns an “int” value representing the <em>position</em> of its initial character boundary. The function’s signature is as follows:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.pos(source, str) → int</span></div></div></code></pre></figure></div>
<p>Where:</p>
<ul>
<li><code dir="auto">source</code> is the “string” value to search for the first occurrence of the <code dir="auto">str</code> substring.</li>
<li><code dir="auto">str</code> is a “string” value representing the substring to locate in the <code dir="auto">source</code>. If the argument is <a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a> or an empty “string” value, the function returns 0 (the first possible position).</li>
</ul>
<p>The <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.substring">str.substring()</a> function retrieves a substring from a <code dir="auto">source</code> value at specified character positions. This function has the following signatures:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.substring(source, begin_pos) → string</span></div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.substring(source, begin_pos, end_pos) → string</span></div></div></code></pre></figure></div>
<p>Where:</p>
<ul>
<li><code dir="auto">source</code> is the “string” value containing the substring.</li>
<li><code dir="auto">begin_pos</code> is an “int” value representing the position of the substring’s first character in the <code dir="auto">source</code>, where the numbering starts from zero. If the value is <a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a>, the function sets the initial position to 0. The script raises an error if the specified position is invalid.</li>
<li>The <code dir="auto">end_pos</code> is an “int” value representing the position <em>after</em> the substring’s last character in the <code dir="auto">source</code>. This position is <em>exclusive</em>, meaning the returned value does <strong>not</strong> contain this position’s character. If the value is not specified or represents a position outside the string’s length, the substring includes <em>all</em> characters from the <code dir="auto">begin_pos</code> onward. If the value is less than the <code dir="auto">begin_pos</code>, it causes a runtime error.</li>
</ul>
<p>For example, the <code dir="auto">begin_pos</code> value of the substring <code dir="auto">"Trading"</code> in the string <code dir="auto">"TradingView"</code> is 0, because the substring starts at the source string’s <em>first</em> character position. The <code dir="auto">end_pos</code> value is 7, because the substring’s last character (<code dir="auto">g</code>) is at position 6, and <code dir="auto">end_pos</code> represents the position <em>after</em> that character. To retrieve only the first character of a string as a substring, use a call such as <code dir="auto">str.substring("TradingView", 0, 1)</code>.</p>
<p>Programmers often use these functions together by retrieving positional values with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.pos">str.pos()</a> and then using those values to extract substrings with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.substring">str.substring()</a> for additional calculations. This technique is an efficient alternative to <a href="/pine-script-docs/concepts/strings/#matching-patterns">matching patterns</a> for substrings at specific positions that have unique characters.</p>
<p>The following simple script uses these functions to extract the “area” and “location” parts of the <a href="https://www.tradingview.com/pine-script-reference/v6/#var_syminfo.timezone">syminfo.timezone</a> variable’s <em>IANA identifier</em>. The script calls <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.pos">str.pos()</a> to get the position of the <code dir="auto">/</code> character in the <a href="/pine-script-docs/concepts/time/#time-zone-strings">time zone string</a>, which it assigns to the <code dir="auto">dividerPos</code> variable. Then, it uses that variable in two <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.substring">str.substring()</a> calls. The first call retrieves the substring from position 0 to <code dir="auto">dividerPos</code>, and the second retrieves the substring from the position at <code dir="auto">dividerPos + 1</code> to the end of the string.</p>
<p>The script displays the IANA identifier, the retrieved substrings, and the <a href="/pine-script-docs/concepts/time/#formatting-dates-and-times">formatted date and time</a> of the latest execution in a single-cell <a href="https://www.tradingview.com/pine-script-reference/v6/#type_table">table</a> on the last bar:</p>
<p><img src="/pine-script-docs/_astro/Strings-String-inspection-and-extraction-Locating-and-retrieving-substrings-1.BMr53GtF_Z12LWpe.webp" alt="image" width="2584" height="1022" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="2uw"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Locating&nbsp;and&nbsp;retrieving&nbsp;substrings&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.islast</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;single-cell&nbsp;table&nbsp;to&nbsp;show&nbsp;the&nbsp;`displayText`.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">table</span><span class="mtk1">&nbsp;</span><span class="mtk33">display</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">table.new</span><span class="mtk13">(</span><span class="mtk11">position.bottom_right</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">frame_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">frame_width</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;position&nbsp;of&nbsp;the&nbsp;`/`&nbsp;character&nbsp;in&nbsp;the&nbsp;exchange</span><span class="mtk9">&nbsp;time&nbsp;zone's&nbsp;IANA&nbsp;identifier.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">dividerPos</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.pos</span><span class="mtk13">(</span><span class="mtk11">syminfo.timezone</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"/"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`syminfo.timezone`&nbsp;substring&nbsp;from&nbsp;position&nbsp;0&nbsp;</span><span class="mtk9">to&nbsp;`dividerPos`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;substring&nbsp;epresents&nbsp;the&nbsp;"area"&nbsp;pa</span><span class="mtk9">rt&nbsp;of&nbsp;the&nbsp;time&nbsp;zone&nbsp;identifier.&nbsp;&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;character&nbsp;at&nbsp;`dividerPos`&nbsp;is&nbsp;not&nbsp;i</span><span class="mtk9">ncluded.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">areaString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.substring</span><span class="mtk13">(</span><span class="mtk11">syminfo.timezone</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">dividerPos</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`syminfo.timezone`&nbsp;substring&nbsp;from&nbsp;`dividerPos</span><span class="mtk9">&nbsp;+&nbsp;1`&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;string,&nbsp;without&nbsp;low&nbsp;lines.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;substring&nbsp;represents&nbsp;the&nbsp;"locatio</span><span class="mtk9">n"&nbsp;part&nbsp;of&nbsp;the&nbsp;time&nbsp;zone&nbsp;identifier.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">locationString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.replace_all</span><span class="mtk13">(</span><span class="mtk16">str.substring</span><span class="mtk13">(</span><span class="mtk11">syminfo.timezone</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">dividerPos</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"_"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"&nbsp;"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;string&nbsp;representing&nbsp;the&nbsp;latest&nbsp;execution's&nbsp;date</span><span class="mtk9">&nbsp;and&nbsp;time&nbsp;in&nbsp;the&nbsp;chart's&nbsp;time&nbsp;zone.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">formattedTime</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format_time</span><span class="mtk13">(</span><span class="mtk11">timenow</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"HH:mm:ss&nbsp;'on'&nbsp;MMM&nbsp;d,&nbsp;yyyy"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;formatted&nbsp;string&nbsp;containing&nbsp;`syminfo.timezone`,</span><span class="mtk9">&nbsp;`areaString`,&nbsp;`locationString`,&nbsp;and&nbsp;`formattedTim</span><span class="mtk9">e`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayText</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk29">"IANA&nbsp;identifier:&nbsp;{0}\n\nArea:&nbsp;{1}\nLocation:&nbsp;{2}\</span><span class="mtk29">n\nTime&nbsp;of&nbsp;latest&nbsp;tick:&nbsp;{3}"</span><span class="mtk18">,</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk11">syminfo.timezone</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">areaString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">locationString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">formattedTime</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Initialize&nbsp;the&nbsp;table&nbsp;cell&nbsp;with&nbsp;the&nbsp;`displayText</span><span class="mtk9">`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">display</span><span class="mtk1">.</span><span class="mtk15">cell</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">displayText</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">24</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The first <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.substring">str.substring()</a> call does <em>not</em> include the character at the position specified by <code dir="auto">dividerPos</code>. Its result contains only the characters from position 0 to <code dir="auto">dividerPos - 1</code>.</li>
</ul>
<p>It’s important to emphasize that the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.pos">str.pos()</a> function only finds the <em>first</em> occurrence of a specified substring. However, in some cases, programmers might require the positions of the substring’s <em>other</em> occurrences. One way to achieve this result is by repeatedly <em>reducing</em> a “string” value with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.substring">str.substring()</a> and locating the substring in the new value with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.pos">str.pos()</a>.</p>
<p>The advanced example script below contains a <code dir="auto">getPositions()</code> function that returns an <a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a> containing every <code dir="auto">substring</code> position within a specified <code dir="auto">source</code>. The function first uses <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.pos">str.pos()</a> to get the position of the first <code dir="auto">substring</code> and creates an array containing that value with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_array.from">array.from()</a>. If the initial position is not <a href="https://www.tradingview.com/pine-script-reference/v6/#var_na">na</a>, the function removes all characters up to the substring’s end position with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.substring">str.substring()</a>. Then, it executes a <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_for...in">for…in</a> loop that repeatedly locates the substring, pushes the calculated position into the array, and reduces the character sequence. The loop stops only after the array contains the position of every substring in the <code dir="auto">source</code> value.</p>
<p>On the first bar, the script uses the function to analyze substring occurrences in four arbitrarily selected strings, then logs <a href="/pine-script-docs/concepts/strings/#formatting-strings">formatted</a> messages containing the results in the <a href="/pine-script-docs/writing/debugging/#pine-logs">Pine Logs</a> pane:</p>
<p><img src="/pine-script-docs/_astro/Strings-String-inspection-and-extraction-Locating-and-retrieving-substrings-2.CmNJVVN6_Z2899pm.webp" alt="image" width="2520" height="758" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="4v0"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Locating&nbsp;multiple&nbsp;substrings&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk15">getPositions</span><span class="mtk13">(</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">substring</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;position&nbsp;of&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;the&nbsp;`subs</span><span class="mtk9">tring`.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">firstPos</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.pos</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">substring</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;containing&nbsp;the&nbsp;starting&nbsp;position&nbsp;of&nbsp;each</span><span class="mtk9">&nbsp;`substring`&nbsp;occurrence&nbsp;in&nbsp;the&nbsp;`source`.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">int</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">positions</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.from</span><span class="mtk13">(</span><span class="mtk33">firstPos</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Search&nbsp;for&nbsp;extra&nbsp;positions&nbsp;if&nbsp;`firstPos`&nbsp;is&nbsp;not</span><span class="mtk9">&nbsp;`na`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk18">not</span><span class="mtk1">&nbsp;</span><span class="mtk16">na</span><span class="mtk13">(</span><span class="mtk33">firstPos</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;length&nbsp;of&nbsp;the&nbsp;`substring`.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">substringLength</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.length</span><span class="mtk13">(</span><span class="mtk33">substring</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;substring&nbsp;of&nbsp;`source`&nbsp;from&nbsp;`firstPos&nbsp;+&nbsp;substrin</span><span class="mtk9">gLength`&nbsp;onward.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">reduced</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.substring</span><span class="mtk13">(</span><span class="mtk33">source</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">firstPos</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">substringLength</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Loop&nbsp;through&nbsp;the&nbsp;`positions`&nbsp;array.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">for</span><span class="mtk1">&nbsp;</span><span class="mtk33">pos</span><span class="mtk1">&nbsp;</span><span class="mtk18">in</span><span class="mtk1">&nbsp;</span><span class="mtk33">positions</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;end&nbsp;boundary&nbsp;position&nbsp;of&nbsp;the&nbsp;first&nbsp;`substring</span><span class="mtk9">`&nbsp;occurrence&nbsp;in&nbsp;the&nbsp;`reduced`&nbsp;string.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">newPos</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.pos</span><span class="mtk13">(</span><span class="mtk33">reduced</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">substring</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">substringLength</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Add&nbsp;a&nbsp;new&nbsp;element&nbsp;to&nbsp;the&nbsp;`positions`&nbsp;array&nbsp;and&nbsp;</span><span class="mtk9">reduce&nbsp;the&nbsp;`reduced`&nbsp;string&nbsp;if&nbsp;`newPos`&nbsp;is&nbsp;not&nbsp;`na</span><span class="mtk9">`.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk18">not</span><span class="mtk1">&nbsp;</span><span class="mtk16">na</span><span class="mtk13">(</span><span class="mtk33">newPos</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Push&nbsp;`pos&nbsp;+&nbsp;newPos`&nbsp;into&nbsp;the&nbsp;`positions`&nbsp;array,</span><span class="mtk9">&nbsp;allowing&nbsp;another&nbsp;iteration.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;The&nbsp;`newPos`&nbsp;is&nbsp;added&nbsp;to&nbsp;the&nbsp;latest&nbsp;`pos`&nbsp;to&nbsp;ge</span><span class="mtk9">t&nbsp;the&nbsp;actual&nbsp;position&nbsp;in&nbsp;the&nbsp;original&nbsp;`source`.&nbsp;&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">positions</span><span class="mtk1">.</span><span class="mtk15">push</span><span class="mtk13">(</span><span class="mtk33">pos</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">newPos</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Assign&nbsp;the&nbsp;substring&nbsp;from&nbsp;`newPos`&nbsp;onward&nbsp;to&nbsp;th</span><span class="mtk9">e&nbsp;`reduced`&nbsp;variable.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">reduced</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.substring</span><span class="mtk13">(</span><span class="mtk33">reduced</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">newPos</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">positions</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Define&nbsp;four&nbsp;arbitrary&nbsp;strings.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">testStr1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"NASDAQ:AAPL"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">testStr2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"1234321234321"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">testStr3</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.repeat</span><span class="mtk13">(</span><span class="mtk16">str.repeat</span><span class="mtk13">(</span><span class="mtk29">"abc"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">",&nbsp;"</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"&nbsp;a"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">testStr4</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format_time</span><span class="mtk13">(</span><span class="mtk11">time</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Get&nbsp;arrays&nbsp;containing&nbsp;the&nbsp;positions&nbsp;of&nbsp;various&nbsp;</span><span class="mtk9">substrings&nbsp;in&nbsp;the&nbsp;four&nbsp;test&nbsp;strings.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">int</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">positions1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">getPositions</span><span class="mtk13">(</span><span class="mtk33">testStr1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"A"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">int</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">positions2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">getPositions</span><span class="mtk13">(</span><span class="mtk33">testStr2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"12"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">int</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">positions3</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">getPositions</span><span class="mtk13">(</span><span class="mtk33">testStr3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">",&nbsp;"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">int</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">positions4</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">getPositions</span><span class="mtk13">(</span><span class="mtk33">testStr4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"-"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;formatting&nbsp;string&nbsp;for&nbsp;all&nbsp;`log.info()`&nbsp;calls.</span><span class="mtk9">&nbsp;The&nbsp;`{0}`&nbsp;placeholder&nbsp;is&nbsp;for&nbsp;apostrophes.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">formatString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Positions&nbsp;of&nbsp;{0}{1}{0}&nbsp;in&nbsp;{0}{2}{0}:&nbsp;{3}"</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Log&nbsp;formatted&nbsp;results&nbsp;in&nbsp;the&nbsp;Pine&nbsp;Logs&nbsp;pane.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk33">formatString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"'"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"A"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">testStr1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">positions1</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk33">formatString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"'"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"12"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">testStr2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">positions2</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk33">formatString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"'"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">",&nbsp;"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">testStr3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">positions3</span><span class="mtk13">))</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk33">formatString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"'"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"-"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">testStr4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">positions4</span><span class="mtk13">))</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>Although the <code dir="auto">positions</code> array starts with <em>one</em> element, the <a href="https://www.tradingview.com/pine-script-reference/v6/#kw_for...in">for…in</a> loop performs <em>more than one</em> iteration because Pine loops can have dynamic boundaries. After each execution of the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_array.push">array.push()</a> call, the <code dir="auto">positions</code> array’s size increases, allowing a <em>new iteration</em>. Refer to the <a href="/pine-script-docs/language/loops/">Loops</a> page for more information.</li>
<li>Each reduced version of the string starts at the position <em>after</em> the last character of the detected substring. The script identifies the end position by adding the substring’s <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.length">str.length()</a> value to its starting position.</li>
</ul>
<h3 id="matching-patterns" class="md-heading"><a href="#matching-patterns">Matching <span class="fancy-wrap">patterns<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p>Pine scripts can dynamically match and retrieve substrings using the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.match">str.match()</a> function. In contrast to the other <code dir="auto">str.*()</code> functions, which only match sequences of literal characters, the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.match">str.match()</a> function uses <a href="https://en.wikipedia.org/wiki/Regular_expression" rel="nofollow">regular expressions (regex)</a> to match variable <em>character patterns</em>. The function’s signature is as follows:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">str.match(source, regex) → string</span></div></div></code></pre></figure></div>
<p>Where:</p>
<ul>
<li><code dir="auto">source</code> is the “string” value containing the sequence to match using the regular expression.</li>
<li><code dir="auto">regex</code> is a “string” value representing the regular expression that specifies the <em>pattern</em> to match in the <code dir="auto">source</code>. The function returns the <em>first substring</em> that follows the match pattern. If the regex does not match any substring in the <code dir="auto">source</code>, the function returns an empty string.</li>
</ul>
<aside aria-label="Tip" class="tv-informer not-content" style="--informer-header-color:#089981;--informer-back-color-light:#DAF2EE;--informer-back-color-dark:#082621"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16Zm3.87-12.15c.36.2.49.66.28 1.02l-4 7a.75.75 0 0 1-1.18.16l-3-3a.75.75 0 1 1 1.06-1.06l2.3 2.3 3.52-6.14a.75.75 0 0 1 1.02-.28Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header">Tip</span>Using <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.match">str.match()</a> requires a basic understanding of regular expressions and how they work. The tables in the <a href="/pine-script-docs/concepts/strings/#regex-syntax-reference">next section</a> provide a detailed overview of the syntax supported by Pine’s regex engine to help you make the most of this function.</p></div></aside>
<p>Because the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.match">str.match()</a> function matches <em>patterns</em> in a string’s character sequence rather than strictly literal characters, a single call to this function can perform a wide range of text-matching tasks that would otherwise require multiple calls to other <code dir="auto">str.*()</code> functions or custom operations.</p>
<p>For example, this script requests data from a <a href="https://www.finra.org/finra-data/browse-catalog/short-sale-volume-data" rel="nofollow">FINRA Short Sale Volume</a> series for a specified symbol. It uses separate <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.startswith">str.startswith()</a> calls to check whether the symbol string has one of the supported exchange prefixes. It locates and removes the exchange prefix with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.pos">str.pos()</a> and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.substring">str.substring()</a>, constructs a FINRA ticker ID with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.format">str.format()</a> and <a href="/pine-script-docs/writing/debugging/#pine-logs">logs</a> its value, then executes the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_request.security">request.security()</a> call only if one of the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.startswith">str.startswith()</a> calls returns <code dir="auto">true</code>. The script plots the retrieved data on the chart as columns:</p>
<p><img src="/pine-script-docs/_astro/Strings-String-inspection-and-extraction-Matching-patterns-1.CiTTTCok_Z4gXAH.webp" alt="image" width="2588" height="1076" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="396"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Detecting&nbsp;substrings&nbsp;with&nbsp;other&nbsp;functions&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;symbol&nbsp;for&nbsp;which&nbsp;to&nbsp;request&nbsp;Short&nbsp;Sale&nbsp;Volume</span><span class="mtk9">&nbsp;data.&nbsp;</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.symbol</span><span class="mtk13">(</span><span class="mtk29">"NASDAQ:AAPL"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Symbol"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;`true`&nbsp;if&nbsp;the&nbsp;`symbolInput`&nbsp;starts&nbsp;with&nbsp;`BATS:`,&nbsp;</span><span class="mtk9">`NASDAQ:`,&nbsp;`NYSE:`,&nbsp;or&nbsp;`AMEX:`.&nbsp;Otherwise,&nbsp;`false`</span><span class="mtk9">.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">supportedSymbol</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.startswith</span><span class="mtk13">(</span><span class="mtk33">symbolInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"BATS:"</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">or</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">str.startswith</span><span class="mtk13">(</span><span class="mtk33">symbolInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"NASDAQ:"</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">or</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">str.startswith</span><span class="mtk13">(</span><span class="mtk33">symbolInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"NYSE:"</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">or</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">str.startswith</span><span class="mtk13">(</span><span class="mtk33">symbolInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"AMEX:"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;requested&nbsp;FINRA&nbsp;data&nbsp;if&nbsp;`supportedSymbol`&nbsp;is&nbsp;</span><span class="mtk9">`true`,&nbsp;`na`&nbsp;otherwise.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedData</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">supportedSymbol</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`symbolInput`&nbsp;value&nbsp;without&nbsp;the&nbsp;exchange&nbsp;pref</span><span class="mtk9">ix.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">noPrefix</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.substring</span><span class="mtk13">(</span><span class="mtk33">symbolInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.pos</span><span class="mtk13">(</span><span class="mtk33">symbolInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">":"</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;formatted&nbsp;string&nbsp;representing&nbsp;the&nbsp;ticker&nbsp;ID&nbsp;of&nbsp;</span><span class="mtk9">a&nbsp;FINRA&nbsp;Short&nbsp;Sale&nbsp;Volume&nbsp;dataset.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">finraTickerID</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"FINRA:{0}_SHORT_VOLUME"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">noPrefix</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Log&nbsp;the&nbsp;`finraTickerID`&nbsp;in&nbsp;the&nbsp;Pine&nbsp;Logs&nbsp;pane&nbsp;o</span><span class="mtk9">n&nbsp;the&nbsp;first&nbsp;bar.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk33">finraTickerID</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Retrieve&nbsp;the&nbsp;data.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">finraTickerID</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.isintraday</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk29">"1D"</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`requestedData`</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">requestedData</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Short&nbsp;Sale&nbsp;Volume"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_columns</span><span class="mtk13">)</span></span><br></code></div>
<p>In the script version below, we replaced the multiple <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.startswith">str.startswith()</a> calls with an expression containing a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.match">str.match()</a> call. The call matches one of the supported exchange prefixes at the start of the string using the following regular expression:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">^(?:BATS|NASDAQ|NYSE|AMEX):</span></div></div></code></pre></figure></div>
<p>We also replaced the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.pos">str.pos()</a> and <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.substring">str.substring()</a> calls with a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.match">str.match()</a> call. The call calculates the <code dir="auto">noPrefix</code> value with a regex that matches all characters after the input value’s colon (<code dir="auto">:</code>):</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">(?&lt;=:).+</span></div></div></code></pre></figure></div>
<p>These changes achieve the same results as the previous script, but with more concise function calls:</p>
<div class="pine-colorizer not-content colorized" data-id="79"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Matching&nbsp;substrings&nbsp;with&nbsp;regex&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;symbol&nbsp;for&nbsp;which&nbsp;to&nbsp;request&nbsp;Short&nbsp;Sale&nbsp;Volume</span><span class="mtk9">&nbsp;data.&nbsp;</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbolInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.symbol</span><span class="mtk13">(</span><span class="mtk29">"NASDAQ:AAPL"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Symbol"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;`true`&nbsp;if&nbsp;the&nbsp;`symbolInput`&nbsp;starts&nbsp;with&nbsp;`BATS:`,&nbsp;</span><span class="mtk9">`NASDAQ:`,&nbsp;`NYSE:`,&nbsp;or&nbsp;`AMEX:`.&nbsp;Otherwise,&nbsp;`false`</span><span class="mtk9">.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;`^`&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;regex&nbsp;ma</span><span class="mtk9">tches&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;string.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;`(?:...)`&nbsp;defines&nbsp;a&nbsp;non-capturing&nbsp;gr</span><span class="mtk9">oup.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;`|`&nbsp;is&nbsp;an&nbsp;OR&nbsp;operator&nbsp;that&nbsp;allows&nbsp;th</span><span class="mtk9">e&nbsp;group&nbsp;to&nbsp;match&nbsp;one&nbsp;of&nbsp;the&nbsp;listed&nbsp;options.&nbsp;</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">supportedSymbol</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.match</span><span class="mtk13">(</span><span class="mtk33">symbolInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"^(?:BATS|NASDAQ|NYSE|AMEX):"</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">!=</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;requested&nbsp;FINRA&nbsp;data&nbsp;if&nbsp;`supportedSymbol`&nbsp;is&nbsp;</span><span class="mtk9">`true`,&nbsp;`na`&nbsp;otherwise.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedData</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">supportedSymbol</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`symbolInput`&nbsp;value&nbsp;without&nbsp;the&nbsp;exchange&nbsp;pref</span><span class="mtk9">ix.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;`(?&lt;=:)`&nbsp;in&nbsp;the&nbsp;regex&nbsp;is&nbsp;a&nbsp;lookbehin</span><span class="mtk9">d&nbsp;assertion&nbsp;that&nbsp;checks&nbsp;if&nbsp;`:`&nbsp;precedes&nbsp;the&nbsp;match.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;`.`&nbsp;matches&nbsp;any&nbsp;character&nbsp;except&nbsp;for</span><span class="mtk9">&nbsp;line&nbsp;terminators&nbsp;in&nbsp;this&nbsp;context.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;`+`&nbsp;is&nbsp;a&nbsp;quantifier&nbsp;that&nbsp;specifies&nbsp;o</span><span class="mtk9">ne&nbsp;or&nbsp;more&nbsp;consecutive&nbsp;`.`&nbsp;matches.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">noPrefix</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.match</span><span class="mtk13">(</span><span class="mtk33">symbolInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"(?&lt;=:).+"</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;formatted&nbsp;string&nbsp;representing&nbsp;the&nbsp;ticker&nbsp;ID&nbsp;of&nbsp;</span><span class="mtk9">a&nbsp;FINRA&nbsp;Short&nbsp;Sale&nbsp;Volume&nbsp;dataset.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">finraTickerID</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"FINRA:{0}_SHORT_VOLUME"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">noPrefix</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Log&nbsp;the&nbsp;`finraTickerID`&nbsp;in&nbsp;the&nbsp;Pine&nbsp;Logs&nbsp;pane&nbsp;o</span><span class="mtk9">n&nbsp;the&nbsp;first&nbsp;bar.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.isfirst</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk33">finraTickerID</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Retrieve&nbsp;the&nbsp;data.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">finraTickerID</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.isintraday</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk29">"1D"</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`requestedData`</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">requestedData</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Short&nbsp;Sale&nbsp;Volume"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_columns</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>The caret (<code dir="auto">^</code>) at the beginning of the regex string matches the <em>beginning</em> of the <code dir="auto">symbolInput</code>.</li>
<li>The <code dir="auto">(?:...)</code> syntax in the regex string creates a <em>non-capturing group</em>.</li>
<li>The pipe character (<code dir="auto">|</code>) in the regex acts as an <em>OR operator</em>. The group matches only <em>one</em> of the character sequences separated by the character (<code dir="auto">BATS</code>, <code dir="auto">NASDAQ</code>, <code dir="auto">NYSE</code>, or <code dir="auto">AMEX</code>).</li>
<li>The <code dir="auto">(?&lt;=...)</code> syntax defines a <em>lookbehind assertion</em>, which checks if the specified pattern precedes the match.</li>
<li>The <code dir="auto">.</code> (period) character has a special meaning in regex strings. It matches <em>any</em> character, excluding line terminators by default.</li>
<li>The <code dir="auto">+</code> (plus sign) character is a <em>quantifier</em>. It specifies that the previous token (<code dir="auto">.</code>) must match <em>one or more</em> times.</li>
</ul>
<p>The flexibility of regular expressions also allows <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.match">str.match()</a> to perform advanced matching tasks that are impractical or infeasible with other <code dir="auto">str.*()</code> functions.</p>
<p>For instance, suppose we want to create a script that executes <a href="/pine-script-docs/concepts/other-timeframes-and-data/#dynamic-requests">dynamic requests</a> for a list of symbols specified in a <a href="/pine-script-docs/concepts/inputs/#text-area-input">text area input</a>, and we require a specific input format consisting of only valid ticker patterns, comma separators with optional space characters, and no empty items. This validation is difficult to achieve with the other <code dir="auto">str.*()</code> functions because they rely on <em>literal</em> character sequences. However, with <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.match">str.match()</a>, we can define a single regular expression that matches the input only if it meets our required formatting criteria.</p>
<p>The script below demonstrates a single <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.match">str.match()</a> function call that validates the format of an input list of symbols. The user-defined <code dir="auto">processList()</code> function combines strings to form the following regex for matching the <code dir="auto">list</code> value:</p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">^ *(?:(?:\w+:)?\w+(?:\.\w+){0,2}!? *, *)*(?:\w+:)?\w+(?:\.\w+){0,2}!? *$</span></div></div></code></pre></figure></div>
<p>If the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.match">str.match()</a> call returns a <em>non-empty</em> string, meaning the constructed pattern matches the <code dir="auto">list</code> argument, the <code dir="auto">processList()</code> function uses <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.replace_all">str.replace_all()</a> to remove all space characters, then calls <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.split">str.split()</a> to split the string based on its commas to create an <a href="https://www.tradingview.com/pine-script-reference/v6/#type_array">array</a> of symbol substrings. Otherwise, it raises a runtime error with the <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_runtime.error">runtime.error()</a> function.</p>
<p>The script loops through the returned array of substrings to request data for each specified symbol and populate a <a href="https://www.tradingview.com/pine-script-reference/v6/#type_table">table</a> with the results:</p>
<p><img src="/pine-script-docs/_astro/Strings-String-inspection-and-extraction-Matching-patterns-2.CvX-NVT1_CiLGG.webp" alt="image" width="2594" height="1024" loading="lazy" decoding="async"></p>
<div class="pine-colorizer not-content colorized" data-id="2ki"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs" target="_blank" rel="noopener"><span>Pine Script®</span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip">Copied</div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">6</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Processing&nbsp;inputs&nbsp;with&nbsp;regex&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;string&nbsp;containing&nbsp;a&nbsp;list&nbsp;of&nbsp;symbols&nbsp;separated&nbsp;b</span><span class="mtk9">y&nbsp;commas&nbsp;and&nbsp;optional&nbsp;spaces.&nbsp;</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">listInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.text_area</span><span class="mtk13">(</span><span class="mtk29">"AMEX:SPY,&nbsp;AMEX:GLD,&nbsp;NASDAQ:TLT,&nbsp;CME:BTC1!,&nbsp;NYMEX:</span><span class="mtk29">CL1!,&nbsp;TVC:US10Y"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Symbol&nbsp;list"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Checks&nbsp;a&nbsp;string&nbsp;value&nbsp;for&nbsp;a&nbsp;pattern&nbsp;of&nbsp;symbols&nbsp;se</span><span class="mtk9">parated&nbsp;by&nbsp;commas&nbsp;and&nbsp;optional&nbsp;space&nbsp;characters.&nbsp;</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;the&nbsp;specified&nbsp;`list`&nbsp;does&nbsp;not&nbsp;match</span><span class="mtk9">&nbsp;this&nbsp;format,&nbsp;the&nbsp;function&nbsp;raises&nbsp;a&nbsp;runtime&nbsp;error.</span><span class="mtk9">&nbsp;</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Otherwise,&nbsp;it&nbsp;returns&nbsp;an&nbsp;array&nbsp;of&nbsp;subs</span><span class="mtk9">trings&nbsp;representing&nbsp;each&nbsp;listed&nbsp;symbol.&nbsp;</span></span><br><span><span class="mtk15">processList</span><span class="mtk13">(</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">list</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;pattern&nbsp;for&nbsp;an&nbsp;optional&nbsp;group&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;wo</span><span class="mtk9">rd&nbsp;characters&nbsp;(`\w`&nbsp;class)&nbsp;followed&nbsp;by&nbsp;a&nbsp;colon&nbsp;(`:</span><span class="mtk9">`).</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;pattern&nbsp;matches&nbsp;a&nbsp;symbol's&nbsp;exchan</span><span class="mtk9">ge&nbsp;prefix,&nbsp;if&nbsp;listed&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(e.g.,&nbsp;"NASDAQ:"&nbsp;for&nbsp;"NASDAQ:AAPL"&nbsp;or&nbsp;</span><span class="mtk9">""&nbsp;for&nbsp;"AAPL").</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;`(?:...)`&nbsp;defines&nbsp;a&nbsp;non-capturing&nbsp;g</span><span class="mtk9">roup.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;`\\w`&nbsp;is&nbsp;an&nbsp;ASCII&nbsp;digit,&nbsp;letter,&nbsp;or</span><span class="mtk9">&nbsp;low&nbsp;line.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;`+`&nbsp;means&nbsp;the&nbsp;regex&nbsp;checks&nbsp;for&nbsp;</span><span class="mtk9">one&nbsp;or&nbsp;more&nbsp;consecutive&nbsp;matches&nbsp;of&nbsp;the&nbsp;previous&nbsp;to</span><span class="mtk9">ken&nbsp;(`\w`).</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;`?`&nbsp;at&nbsp;the&nbsp;end&nbsp;makes&nbsp;the&nbsp;group&nbsp;</span><span class="mtk9">optional.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">exchange</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"(?:\\w+:)?"</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;pattern&nbsp;for&nbsp;1+&nbsp;word&nbsp;characters,&nbsp;with&nbsp;0-2&nbsp;extra&nbsp;</span><span class="mtk9">word&nbsp;sequences&nbsp;divided&nbsp;by&nbsp;`.`,&nbsp;then&nbsp;an&nbsp;optional&nbsp;`!</span><span class="mtk9">`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;pattern&nbsp;matches&nbsp;symbols&nbsp;without&nbsp;t</span><span class="mtk9">he&nbsp;exchange&nbsp;prefix</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(e.g.,&nbsp;"AAPL"&nbsp;for&nbsp;"NASDAQ:AAPL",&nbsp;"BTC.</span><span class="mtk9">D"&nbsp;for&nbsp;"CRYPTOCAP:BTC.D",&nbsp;"ES1!"&nbsp;for&nbsp;"CME_MINI:ES1</span><span class="mtk9">!").</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;`\\w+`&nbsp;means&nbsp;one&nbsp;or&nbsp;more&nbsp;word&nbsp;chara</span><span class="mtk9">cters.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;`\\.`&nbsp;makes&nbsp;the&nbsp;`.`&nbsp;character&nbsp;liter</span><span class="mtk9">al.&nbsp;When&nbsp;not&nbsp;escaped,&nbsp;it&nbsp;matches&nbsp;any&nbsp;character.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;`{0,2}`&nbsp;means&nbsp;the&nbsp;regex&nbsp;matches&nbsp;the</span><span class="mtk9">&nbsp;group's&nbsp;pattern&nbsp;(`\.\w+`)&nbsp;zero&nbsp;to&nbsp;two&nbsp;times.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;`?`&nbsp;makes&nbsp;the&nbsp;`!`&nbsp;character&nbsp;opt</span><span class="mtk9">ional.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"\\w+(?:\\.\\w+){0,2}!?"</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;pattern&nbsp;that&nbsp;matches&nbsp;a&nbsp;symbol&nbsp;or&nbsp;comma-separate</span><span class="mtk9">d&nbsp;list&nbsp;of&nbsp;symbols&nbsp;with&nbsp;optional&nbsp;spaces.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(e.g.,&nbsp;"AAPL,&nbsp;OANDA:EURUSD,&nbsp;BATS:SPY,&nbsp;</span><span class="mtk9">BINANCE:BTCUSDT.P")</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;`^`&nbsp;at&nbsp;the&nbsp;beginning&nbsp;matches&nbsp;the&nbsp;st</span><span class="mtk9">art&nbsp;of&nbsp;the&nbsp;text&nbsp;line.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;`*`&nbsp;after&nbsp;the&nbsp;spaces&nbsp;and&nbsp;group&nbsp;cons</span><span class="mtk9">truction&nbsp;`(?:...)`&nbsp;mean&nbsp;the&nbsp;regex&nbsp;matches&nbsp;them&nbsp;zer</span><span class="mtk9">o&nbsp;or&nbsp;more&nbsp;times.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;`$`&nbsp;at&nbsp;the&nbsp;end&nbsp;matches&nbsp;the&nbsp;end&nbsp;of&nbsp;t</span><span class="mtk9">he&nbsp;text&nbsp;line.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;formatted&nbsp;result&nbsp;combines&nbsp;`exchang</span><span class="mtk9">e`&nbsp;and&nbsp;`symbol`&nbsp;to&nbsp;form&nbsp;this&nbsp;regex&nbsp;pattern:</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`^&nbsp;*(?:(?:\w+:)?\w+(?:\.\w+){0,2}!?&nbsp;*,</span><span class="mtk9">&nbsp;*)*(?:\w+:)?\w+(?:\.\w+){0,2}!?&nbsp;*$`</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">matchPattern</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"^&nbsp;*(?:{0}{1}&nbsp;*,&nbsp;*)*{0}{1}&nbsp;*$"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">exchange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;copy&nbsp;of&nbsp;the&nbsp;`list`&nbsp;if&nbsp;the&nbsp;`matchPattern`&nbsp;produc</span><span class="mtk9">es&nbsp;a&nbsp;match.&nbsp;Otherwise,&nbsp;an&nbsp;empty&nbsp;string.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">match</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.match</span><span class="mtk13">(</span><span class="mtk33">list</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">matchPattern</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;If&nbsp;the&nbsp;`match`&nbsp;is&nbsp;empty,&nbsp;meaning&nbsp;the&nbsp;`list`&nbsp;doe</span><span class="mtk9">s&nbsp;not&nbsp;have&nbsp;the&nbsp;required&nbsp;format,&nbsp;raise&nbsp;a&nbsp;runtime&nbsp;er</span><span class="mtk9">ror.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">match</span><span class="mtk1">&nbsp;</span><span class="mtk18">==</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">runtime.error</span><span class="mtk13">(</span><span class="mtk29">"Invalid&nbsp;list.&nbsp;The&nbsp;value&nbsp;must&nbsp;represent&nbsp;a&nbsp;comma-se</span><span class="mtk29">parated&nbsp;list&nbsp;of&nbsp;symbols&nbsp;with&nbsp;optional&nbsp;spaces."</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Log&nbsp;an&nbsp;`info`&nbsp;message&nbsp;showing&nbsp;the&nbsp;pattern&nbsp;and&nbsp;t</span><span class="mtk9">he&nbsp;match.&nbsp;&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">log.info</span><span class="mtk13">(</span><span class="mtk29">"\n\nThe&nbsp;pattern:\n\n{0}\n\nmatches:\n\n{1}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">matchPattern</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">match</span><span class="mtk13">)</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><br><span><span></span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;copy&nbsp;of&nbsp;the&nbsp;`match`&nbsp;without&nbsp;space&nbsp;characters.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">noSpaces</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.replace_all</span><span class="mtk13">(</span><span class="mtk33">match</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"&nbsp;"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;of&nbsp;substrings&nbsp;formed&nbsp;by&nbsp;splitting&nbsp;the&nbsp;`n</span><span class="mtk9">oSpaces`&nbsp;value&nbsp;by&nbsp;its&nbsp;commas.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">string</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">result</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.split</span><span class="mtk13">(</span><span class="mtk33">noSpaces</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">","</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;array&nbsp;of&nbsp;symbols&nbsp;from&nbsp;the&nbsp;processed&nbsp;`listInput</span><span class="mtk9">`.&nbsp;</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">string</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbols</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">processList</span><span class="mtk13">(</span><span class="mtk33">listInput</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">barstate.islast</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;two-column&nbsp;table&nbsp;with&nbsp;a&nbsp;row&nbsp;for&nbsp;each&nbsp;`symbols`&nbsp;</span><span class="mtk9">item.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">table</span><span class="mtk1">&nbsp;</span><span class="mtk33">display</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">table.new</span><span class="mtk13">(</span><span class="mtk11">position.middle_center</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbols</span><span class="mtk1">.</span><span class="mtk15">size</span><span class="mtk13">())</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Loop&nbsp;through&nbsp;the&nbsp;`symbols`&nbsp;array.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">for</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk33">i</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">in</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbols</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`close`&nbsp;value&nbsp;requested&nbsp;for&nbsp;the&nbsp;`symbol`&nbsp;on&nbsp;t</span><span class="mtk9">he&nbsp;chart's&nbsp;timeframe.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">requestedValue</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">symbol</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">timeframe.period</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Initialize&nbsp;a&nbsp;cell&nbsp;for&nbsp;the&nbsp;`symbol`&nbsp;and&nbsp;a&nbsp;string</span><span class="mtk9">&nbsp;representing&nbsp;the&nbsp;`requestedValue`.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">display</span><span class="mtk1">.</span><span class="mtk15">cell</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">24</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">display</span><span class="mtk1">.</span><span class="mtk15">cell</span><span class="mtk13">(</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">requestedValue</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text_size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">24</span><span class="mtk13">)</span></span><br></code></div>
<p>Note that:</p>
<ul>
<li>When creating regex strings, it is often helpful to display them in a script’s text outputs to ensure they are formatted as intended. In this script, we included a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_log.info">log.info()</a> call to show the resulting regular expression and its match in the <a href="/pine-script-docs/writing/debugging/#pine-logs">Pine Logs</a> pane.</li>
<li>Because the backslash (<code dir="auto">\</code>) is an <a href="/pine-script-docs/concepts/strings/#escape-sequences">escape character</a> in Pine strings, the value used as the <code dir="auto">regex</code> argument in a <a href="https://www.tradingview.com/pine-script-reference/v6/#fun_str.match">str.match()</a> call requires <strong>two</strong> consecutive backslashes for each single backslash in the regular expression.</li>
<li>The <code dir="auto">\\w</code> parts of the regex string specify the <code dir="auto">\w</code> pattern, a <em>predefined character class</em> that matches <em>word characters</em> (letters, digits, or low lines).</li>
<li>The <code dir="auto">*</code> (asterisk) and <code dir="auto">{0,2}</code> parts of the regular expression are <em>quantifiers</em>, similar to <code dir="auto">+</code>. The asterisk requires the previous token to match <em>zero or more</em> times. The <code dir="auto">{0,2}</code> quantifier requires the match to occur exactly <em>zero to two</em> times.</li>
<li>The <code dir="auto">$</code> (dollar sign) character in this regular expression matches the <em>end</em> of the input, excluding any final line terminators (<code dir="auto">\n</code>).</li>
<li>Because the <code dir="auto">.</code> (period) character has a special meaning in regex strings, we must prefix it with two backslashes (<code dir="auto">\\</code>) in the string to match a literal period.</li>
</ul>
<h4 id="regex-syntax-reference" class="md-heading"><a href="#regex-syntax-reference">Regex syntax <span class="fancy-wrap">reference<span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p>Every programming language’s regex engine has unique characteristics and syntax. Some regex syntax is universal across engines, while other patterns and modifiers are engine-specific.</p>
<p>The tables below provide a categorized overview of the syntax patterns supported by Pine’s regex engine along with descriptions, remarks, and examples to explain how they work.</p>
<p><strong>Escapes and character references</strong></p>
<details open=""><summary><a>Click to show/hide</a></summary>








































<table><thead><tr><th style="text-align:left">Token/syntax</th><th style="text-align:left">Description and remarks</th></tr></thead><tbody><tr><td style="text-align:left"><code dir="auto">\</code></td><td style="text-align:left">Changes the meaning of the next character.<br><br>Because Pine strings natively use <code dir="auto">\</code> as an escape character, regex strings containing it must include an <em>additional</em> <code dir="auto">\</code> to use the token in the pattern. For example, <code dir="auto">"\\"</code> represents a single <code dir="auto">\</code> (escape token) in the regex, and <code dir="auto">"\\\\"</code> represents <code dir="auto">\\</code> (literal backslash).<br><br>Some other characters always or conditionally represent regex syntax, including <code dir="auto">.</code>, <code dir="auto">^</code>, <code dir="auto">$</code>, <code dir="auto">*</code>, <code dir="auto">+</code>, <code dir="auto">?</code>, <code dir="auto">(</code>, <code dir="auto">)</code>, <code dir="auto">[</code>, <code dir="auto">]</code>, <code dir="auto">{</code>, <code dir="auto">}</code>, <code dir="auto">|</code>, and <code dir="auto">-</code>.<br>To match a special character literally, include <code dir="auto">"\\"</code> immediately before it in the string (e.g., <code dir="auto">"\\+"</code> matches the literal <code dir="auto">+</code> character).<br><br>Note that some sequences of otherwise literal characters can also have syntactical meaning. See below for examples.</td></tr><tr><td style="text-align:left"><code dir="auto">\Q...\E</code></td><td style="text-align:left">Matches everything between <code dir="auto">\Q</code> and <code dir="auto">\E</code> <em>literally</em>, ignoring the syntactical meaning of special characters and sequences.<br><br>For example, the regex string <code dir="auto">"\\Q[^abc]\\E"</code> matches the literal sequence of <code dir="auto">[</code>, <code dir="auto">^</code>, <code dir="auto">a</code>, <code dir="auto">b</code>, <code dir="auto">c</code>, and <code dir="auto">]</code> characters instead of creating a <em>character class</em>.</td></tr><tr><td style="text-align:left"><code dir="auto">a</code></td><td style="text-align:left">Matches the literal character <code dir="auto">a</code> (U+0061).<br><br>By default, the regex engine is <em>case-sensitive</em>. If the string includes the <code dir="auto">(?i)</code> modifier <em>before</em> the token, the match becomes <em>case-insensitive</em>. For example, the regex string <code dir="auto">"(?i)a"</code> matches the <code dir="auto">a</code> or <code dir="auto">A</code> character.</td></tr><tr><td style="text-align:left"><code dir="auto">\t</code></td><td style="text-align:left">Matches the <em>tab space</em> character (U+0009).</td></tr><tr><td style="text-align:left"><code dir="auto">\n</code></td><td style="text-align:left">Matches the <em>newline</em> character (U+000A).</td></tr><tr><td style="text-align:left"><code dir="auto">\x61</code></td><td style="text-align:left">A <em>two-digit</em> Unicode reference that matches the hexadecimal point U+0061 (the <code dir="auto">a</code> character).<br><br>This shorthand syntax works only for codes with leading zeros and up to <strong>two</strong> nonzero end digits. It cannot reference other Unicode points. For example, the regex string <code dir="auto">"\\x2014"</code> matches U+0020 (the <em>space</em> character) followed by U+0031 (the <code dir="auto">1</code> character) and U+0034 (the <code dir="auto">4</code> character). It <strong>does not</strong> match U+2014 (the <code dir="auto">—</code> character).</td></tr><tr><td style="text-align:left"><code dir="auto">\u2014</code></td><td style="text-align:left">A <em>four-digit</em> Unicode reference that matches the hexadecimal point U+2014 (<code dir="auto">—</code>, Em Dash).<br><br>This syntax works only for codes with leading zeros and up to <strong>four</strong> nonzero end digits. It cannot reference larger Unicode points. For example, the regex string <code dir="auto">"\\u1F5E0"</code> matches U+1F5E (unassigned) followed by U+0030 (the <code dir="auto">0</code> character), resulting in no match. It <strong>does not</strong> match U+1F5E0 (the Stock Chart character).</td></tr><tr><td style="text-align:left"><code dir="auto">\x{...}</code></td><td style="text-align:left">The <em>full-range</em> Unicode reference syntax. The hexadecimal digits enclosed in the brackets can refer to <em>any</em> Unicode point.<br><br>Leading zeros in the digits <em>do not</em> affect the matched Unicode point. For example, the regex strings <code dir="auto">"\\x{61}"</code>, <code dir="auto">"\\x{061}"</code>, <code dir="auto">"\\x{0061}"</code>, and <code dir="auto">"\\x{000061}"</code> all match U+0061 (the <code dir="auto">a</code> character).</td></tr></tbody></table></details>
<p><strong>Character class and logical constructions</strong></p>
<details open=""><summary><a>Click to show/hide</a></summary>
































<table><thead><tr><th style="text-align:left">Token/syntax</th><th style="text-align:left">Description and remarks</th></tr></thead><tbody><tr><td style="text-align:left"><code dir="auto">[abc]</code></td><td style="text-align:left">A character class that matches only <em>one</em> of the characters listed (<code dir="auto">a</code>, <code dir="auto">b</code>, or <code dir="auto">c</code>). It does <strong>not</strong> match the <em>entire</em> <code dir="auto">abc</code> sequence.<br><br>Each listed character, range, or nested class between two <code dir="auto">[]</code> brackets represents a specific possible match.<br><br>Note that several special characters have a <em>literal</em> meaning inside classes (e.g., the regex string <code dir="auto">"[.+$]"</code> matches <code dir="auto">.</code>, <code dir="auto">+</code>, or <code dir="auto">$</code> literally). However, regex strings should still escape the following characters to treat them literally because they maintain a special meaning in most cases: <code dir="auto">\</code>, <code dir="auto">[</code>, <code dir="auto">]</code>, <code dir="auto">^</code>, <code dir="auto">-</code>.</td></tr><tr><td style="text-align:left"><code dir="auto">[a-z]</code></td><td style="text-align:left">A class that matches a single character in the <em>range</em> from <code dir="auto">a</code> (U+0061) to <code dir="auto">z</code> (U+007A). It is equivalent to <code dir="auto">[\x{61}-\x{7A}]</code>.<br><br>Note that the left side of the <code dir="auto">-</code> character must have a <em>smaller</em> Unicode value than the right.<br>For example, the regex string <code dir="auto">"[f-a]"</code> is <em>invalid</em> because <code dir="auto">f</code> has the Unicode value U+0066, which is <em>larger</em> than the value of <code dir="auto">a</code>.<br><br>If the dash (<code dir="auto">-</code>) is at the start or end of the enclosed text, the regex treats it as a <em>literal</em> character instead of a character range marker (e.g., <code dir="auto">"[-abc]"</code> matches <code dir="auto">-</code>, <code dir="auto">a</code>, <code dir="auto">b</code>, or <code dir="auto">c</code> literally).</td></tr><tr><td style="text-align:left"><code dir="auto">[a-zA-Z]</code></td><td style="text-align:left">A class containing a <em>list</em> of character <em>ranges</em>. It matches any character from <code dir="auto">a</code> (U+0061) to <code dir="auto">z</code> (U+007A) or <code dir="auto">A</code> (U+0041) to <code dir="auto">Z</code> (U+005A) only.<br><br>It is equivalent to <code dir="auto">[\x{61}-\x{7A}\x{41}-\x{5A}]</code>.<br>The syntax <code dir="auto">[a-z[A-Z]]</code> also produces the same match.</td></tr><tr><td style="text-align:left"><code dir="auto">[^...]</code></td><td style="text-align:left">The syntax for a class that matches any character <em>except</em> for the ones specified.<br><br>For example, the regex string <code dir="auto">"[^abc\\n ]"</code> matches any character except for <code dir="auto">a</code>, <code dir="auto">b</code>, <code dir="auto">c</code>, <code dir="auto">\n</code> (newline), or <code dir="auto"> </code> (space).<br><br>Note that only a caret (<code dir="auto">^</code>) at the <em>start</em> of the enclosed text signifies <em>negation</em>. If the character comes after that point, the regex considers it a possible <em>literal</em> match (e.g., <code dir="auto">"[ab^c]"</code> matches the <code dir="auto">a</code>, <code dir="auto">b</code>, <code dir="auto">^</code>, or <code dir="auto">c</code> character literally).</td></tr><tr><td style="text-align:left"><code dir="auto">[...&amp;&amp;[...]]</code></td><td style="text-align:left">The syntax for a nested class structure that matches any character within the <em>intersection</em> of two character classes.<br><br>Example 1: The regex string <code dir="auto">"[abc&amp;&amp;[cde]]"</code> matches <code dir="auto">c</code> exclusively because it is the only character common to both lists.<br><br>Example 2: The regex string <code dir="auto">"[a-z&amp;&amp;[^def]]"</code> matches any character from lowercase <code dir="auto">a</code> to <code dir="auto">z</code> except for <code dir="auto">d</code>, <code dir="auto">e</code>, or <code dir="auto">f</code>.</td></tr><tr><td style="text-align:left"><code dir="auto">expr1|expr2</code></td><td style="text-align:left">An OR operation that matches either the <code dir="auto">expr1</code> or <code dir="auto">expr2</code> substring. It does <em>not</em> include both in the match.</td></tr></tbody></table></details>
<p><strong>Predefined classes</strong></p>
<details open=""><summary><a>Click to show/hide</a></summary>












































<table><thead><tr><th style="text-align:left">Token/syntax</th><th style="text-align:left">Description and remarks</th></tr></thead><tbody><tr><td style="text-align:left"><code dir="auto">.</code></td><td style="text-align:left">Matches any character on the line.<br><br>By default, it <em>excludes</em> line terminators (e.g., <code dir="auto">\n</code>). To include line terminators in the match, add the <code dir="auto">(?s)</code> modifier <em>before</em> the token in the regex string (e.g., <code dir="auto">"(?s)."</code>).</td></tr><tr><td style="text-align:left"><code dir="auto">\d</code></td><td style="text-align:left">Matches a decimal digit character.<br><br>By default, it is equivalent to <code dir="auto">[0-9]</code>. However, if the regex string includes the <code dir="auto">"(?U)"</code> modifier before the token, it can match <em>other</em> Unicode characters with the “Digit” property.<br><br>For example, the string <code dir="auto">"(?U)\\d"</code> can match characters such as U+FF11 (Fullwidth Digit One). In contrast, the only “Digit One” character matched by the <code dir="auto">[0-9]</code> class, even with the <code dir="auto">(?U)</code> modifier, is U+0031 (the <code dir="auto">1</code> character).</td></tr><tr><td style="text-align:left"><code dir="auto">\D</code></td><td style="text-align:left">Matches a <em>non-digit</em> character.<br><br>By default, it is equivalent to <code dir="auto">[^0-9]</code>, which does <em>not</em> negate other Unicode digits. To exclude other Unicode digits from the match, include the <code dir="auto">(?U)</code> modifier before the token in the regex string (e.g., <code dir="auto">"(?U)\\D"</code>).</td></tr><tr><td style="text-align:left"><code dir="auto">\w</code></td><td style="text-align:left">Matches a <em>word character</em> (letter, digit, or low line).<br><br>By default, it is equivalent to <code dir="auto">[a-zA-Z0-9_]</code>, which excludes other Unicode characters. To include other Unicode letters, digits, or low lines in the match, add the <code dir="auto">(?U)</code> modifier before the token in the regex string.<br>For example, <code dir="auto">"(?U)\\w"</code> can match characters such as U+FE4F (Wavy Low Line), whereas the only low line character the <code dir="auto">[a-zA-Z0-9_]</code> class matches is U+005F (<code dir="auto">_</code>).</td></tr><tr><td style="text-align:left"><code dir="auto">\W</code></td><td style="text-align:left">Matches a <em>non-word</em> character.<br><br>By default, it is equivalent to <code dir="auto">[^a-zA-Z0-9_]</code>, which does not negate other Unicode characters. To exclude other Unicode word characters from the match, include the <code dir="auto">(?U)</code> modifier before the token (e.g., <code dir="auto">"(?U)\\W"</code>).</td></tr><tr><td style="text-align:left"><code dir="auto">\h</code></td><td style="text-align:left">Matches a <em>horizontal whitespace</em> character, such as the tab space (<code dir="auto">\t</code>), standard space, and other characters such as U+2003 (Em Space).<br><br>The token matches other Unicode characters, even if the regex string includes the <code dir="auto">(?-U)</code> modifier.</td></tr><tr><td style="text-align:left"><code dir="auto">\H</code></td><td style="text-align:left">Matches a character that is <em>not</em> a horizontal whitespace. It also excludes other Unicode spaces, even if the regex string includes the <code dir="auto">(?-U)</code> modifier</td></tr><tr><td style="text-align:left"><code dir="auto">\s</code></td><td style="text-align:left">Matches a <em>whitespace</em> or other <em>control character</em>. In contrast to <code dir="auto">\h</code>, this token covers a broader range of characters, including <em>vertical</em> spaces such as <code dir="auto">\n</code>.</td></tr><tr><td style="text-align:left"><code dir="auto">\S</code></td><td style="text-align:left">Matches a <em>non-whitespace</em> character. In contrast to <code dir="auto">\H</code>, this token excludes a broader character range of characters from the match.</td></tr></tbody></table></details>
<p><strong>Unicode property classes</strong></p>
<details open=""><summary><a>Click to show/hide</a></summary>




























<table><thead><tr><th style="text-align:left">Token/syntax</th><th style="text-align:left">Description and remarks</th></tr></thead><tbody><tr><td style="text-align:left"><code dir="auto">\p{...}</code></td><td style="text-align:left">The syntax to match a Unicode point that has a specific <a href="https://en.wikipedia.org/wiki/Unicode_character_property" rel="nofollow">property</a>, such as <a href="https://en.wikipedia.org/wiki/Script_(Unicode)" rel="nofollow">script type</a>, <a href="https://en.wikipedia.org/wiki/Unicode_block" rel="nofollow">block</a>, <a href="https://en.wikipedia.org/wiki/Unicode_character_property#General_Category" rel="nofollow">general category</a>, etc. See the following rows to learn the required syntax for different common Unicode property references.<br><br>To match any character that does <em>not</em> have a specific Unicode property, use the <em>uppercase</em> <code dir="auto">P</code> in the syntax (<code dir="auto">\P{...}</code>)</td></tr><tr><td style="text-align:left"><code dir="auto">\p{IsScriptName}</code> or<br><code dir="auto">\p{Script=ScriptName}</code></td><td style="text-align:left"><a href="https://en.wikipedia.org/wiki/Script_(Unicode)#List_of_encoded_scripts" rel="nofollow">Unicode script</a> reference syntax. Matches any code point belonging to the <code dir="auto">ScriptName</code> Unicode script. The specified name should not contain spaces.<br><br>For example, the regex strings <code dir="auto">"\\p{IsLatin}"</code> and <code dir="auto">"\\p{Script=Latin}"</code> both match any Unicode point that is part of the <a href="https://en.wikipedia.org/wiki/Latin_script_in_Unicode" rel="nofollow">Latin script</a>.</td></tr><tr><td style="text-align:left"><code dir="auto">\p{InBlockName}</code> or<br><code dir="auto">\p{Block=BlockName}</code></td><td style="text-align:left"><a href="https://en.wikipedia.org/wiki/Unicode_block#List_of_blocks" rel="nofollow">Unicode block</a> reference syntax. Matches any code point belonging to the <code dir="auto">BlockName</code> Unicode block. The specified name should not contain spaces.<br><br>For example, the regex string <code dir="auto">"\\p{InBasicLatin}"</code> matches any Unicode point that is part of the <a href="https://en.wikipedia.org/wiki/Basic_Latin_(Unicode_block)" rel="nofollow">Basic Latin</a> block, and <code dir="auto">"\\p{Block=Latin-1Supplement}"</code> matches any point belonging to the <a href="https://en.wikipedia.org/wiki/Latin-1_Supplement" rel="nofollow">Latin-1 Supplement</a> block.</td></tr><tr><td style="text-align:left"><code dir="auto">\p{category}</code> or<br><code dir="auto">\p{gc=category}</code></td><td style="text-align:left">Unicode <a href="https://en.wikipedia.org/wiki/Unicode_character_property#General_Category" rel="nofollow">general category</a> reference syntax. Matches any Unicode point with the assigned <code dir="auto">category</code> <em>abbreviation</em>.<br><br>For example, the regex string <code dir="auto">"\\p{L}"</code> or <code dir="auto">"\\p{gc=L}"</code> matches any Unicode point in the <em>Letter (L)</em> category, and <code dir="auto">"\\p{N}"</code> matches any point in the <em>Number (N)</em> category.<br><br>Note that, unlike some regex engines, Pine’s regex engine does not support the <em>long form</em> of a category name, (e.g., <code dir="auto">"Letter"</code> instead of <code dir="auto">"L"</code>).</td></tr><tr><td style="text-align:left"><code dir="auto">\p{ClassName}</code></td><td style="text-align:left">The syntax for referencing the Unicode mapping of a <a href="https://en.wikipedia.org/wiki/Regular_expression#Character_classes" rel="nofollow">POSIX character class</a>, in Java notation.<br><br>For example, the regex string <code dir="auto">"\\p{XDigit}"</code> matches a <em>hexadecimal</em> digit. By default, it is equivalent to <code dir="auto">"[A-Fa-f0-9]"</code>.<br><br>Note that the default behavior for POSIX classes matches only <em>ASCII</em> characters. To allow other Unicode matches for a POSIX class, use the <code dir="auto">(?U)</code> modifier. For instance, <code dir="auto">"(?U)\\p{XDigit}"</code> can match non-ASCII characters that represent hexadecimal digits, such as U+1D7D9 (the <code dir="auto">𝟙</code> character).</td></tr></tbody></table></details>
<p><strong>Group constructions</strong></p>
<details open=""><summary><a>Click to show/hide</a></summary>
























<table><thead><tr><th style="text-align:left">Token/syntax</th><th style="text-align:left">Description and remarks</th></tr></thead><tbody><tr><td style="text-align:left"><code dir="auto">(...)</code></td><td style="text-align:left">A <em>capturing group</em> that matches the enclosed sequence and stores the matched substring for later reference.<br><br>Each capturing group construction has an assigned <em>group number</em> starting from 1. The regex can reference a capturing group’s match with the <code dir="auto">\#</code> syntax, where <code dir="auto">#</code> represents the group number.<br><br>For example, the regex string <code dir="auto">"(a|b)cde\\1"</code> matches <code dir="auto">a</code> or <code dir="auto">b</code>, followed by <code dir="auto">cde</code>, and then another occurrence of the <code dir="auto">(a|b)</code> group’s initial match. If the group matched <code dir="auto">a</code>, the <code dir="auto">\1</code> reference also matches <code dir="auto">a</code>. If it matched <code dir="auto">b</code>, the reference also matches <code dir="auto">b</code>.<br><br>If the regex does not need to use a group’s match later, using a <em>non-capturing</em> group is the more efficient choice, e.g., <code dir="auto">(?:...)</code>.</td></tr><tr><td style="text-align:left"><code dir="auto">(?&lt;name&gt;...)</code></td><td style="text-align:left">A <em>named</em> capturing group that matches the enclosed sequence and stores the matched substring with an assigned <em>identifier</em>.<br><br>The regex can use the <code dir="auto">\k&lt;name&gt;</code> syntax to reference the group’s match, where <code dir="auto">name</code> is the assigned <em>identifier</em>. For example, the string <code dir="auto">"(?&lt;myGroup&gt;a|b)cde\\k&lt;myGroup&gt;"</code> matches <code dir="auto">a</code> or <code dir="auto">b</code>, followed by <code dir="auto">cde</code>, and then another instance of the substring (<code dir="auto">a</code> or <code dir="auto">b</code>) matched by the capturing group.<br><br>As with a standard capturing group, a named capturing group contributes to the group count and has a <em>group number</em>, meaning the regex can also reference a named group with the <code dir="auto">\#</code> syntax, for example, <code dir="auto">"(?&lt;myGroup&gt;a|b)cde\\1"</code>.</td></tr><tr><td style="text-align:left"><code dir="auto">(?:...)</code></td><td style="text-align:left">A <em>non-capturing</em> group that matches the enclosed sequence <em>without</em> storing the matched substring. Unlike a capturing group, the regex string <em>cannot</em> reference a previous non-capturing group’s match.<br><br>For example, the regex string <code dir="auto">"(?:a|b)\\1"</code> matches <code dir="auto">a</code> or <code dir="auto">b</code>, then references an <em>unassigned</em> group match, resulting in <em>no match</em>.<br><br>In contrast to all other group constructions, standard non-capturing groups can contain <em>pattern modifiers</em> that apply exclusively to their scopes. For example, <code dir="auto">"(?i)(?-i:a|b)c"</code> matches <code dir="auto">a</code> or <code dir="auto">b</code> followed by lowercase <code dir="auto">c</code> or uppercase <code dir="auto">C</code>. The <code dir="auto">(?i)</code> part of the regex activates case-insensitive matching globally, but the <code dir="auto">-i</code> token <em>deactivates</em> the behavior for the group’s scope only.<br><br>Note that non-capturing groups typically have a <em>lower</em> computational cost than capturing groups.</td></tr><tr><td style="text-align:left"><code dir="auto">(?&gt;...)</code></td><td style="text-align:left">An <em>independent</em> non-capturing group (<em>atomic group</em>). Unlike a standard non-capturing group, an atomic group consumes as many characters as possible <em>without</em> allowing other parts of the pattern to use them.<br><br>For example, the regex string <code dir="auto">"(?s)(?&gt;.+).+"</code> fails to produce a match because the atomic group <code dir="auto">(?&gt;.+)</code> consumes <em>every</em> available character, leaving <em>nothing</em> for the following <code dir="auto">.+</code> portion to match.<br><br>In contrast, the regex string <code dir="auto">"(?s)(?:.+).+"</code> matches the entire source string because the standard non-capturing group <code dir="auto">(?:.+)</code> <em>releases</em> characters from its match as needed, allowing <code dir="auto">.+</code> to match <em>at least one</em> character.</td></tr></tbody></table></details>
<p><strong>Quantifiers</strong></p>
<details open=""><summary><a>Click to show/hide</a></summary>
































<table><thead><tr><th style="text-align:left">Token/syntax</th><th style="text-align:left">Description and remarks</th></tr></thead><tbody><tr><td style="text-align:left"><code dir="auto">?</code></td><td style="text-align:left">Appending <code dir="auto">?</code> to a character, group, or class specifies that the matched substring must contain the pattern <em>once</em> or <em>not at all</em>.<br><br>For example, the regex string <code dir="auto">"a?bc?"</code> matches <code dir="auto">abc</code>, <code dir="auto">ab</code>, <code dir="auto">bc</code>, or <code dir="auto">b</code> because <code dir="auto">a</code> and <code dir="auto">c</code> are <em>optional</em>.<br><br>By default, regex quantifiers are <em>greedy</em>, meaning they match as many characters as possible, releasing some as necessary. Adding <code dir="auto">?</code> to another quantifier makes it <em>lazy</em>, meaning it matches the <em>fewest</em> characters possible, expanding its match only when required.<br><br>For example, with a source string of <code dir="auto">"a12b34b"</code>, the regex string <code dir="auto">"a.*b"</code> matches the entire sequence, whereas <code dir="auto">"a.*?b"</code> matches the <em>smallest</em> valid substring with the pattern, which is <code dir="auto">a12b</code>.</td></tr><tr><td style="text-align:left"><code dir="auto">*</code></td><td style="text-align:left">Appending <code dir="auto">*</code> to a character, group, or class specifies that the matched substring must contain the pattern <em>zero</em> or <em>more</em> times consecutively.<br><br>For example, the regex string <code dir="auto">"a*b"</code> matches zero or more consecutive <code dir="auto">a</code> characters followed by a single <code dir="auto">b</code> character.</td></tr><tr><td style="text-align:left"><code dir="auto">+</code></td><td style="text-align:left">Appending <code dir="auto">+</code> to a character, group, or class specifies that the matched substring must contain the pattern <em>one</em> or <em>more</em> times consecutively.<br><br>For example, the regex string <code dir="auto">"\\w+abc"</code> matches one or more consecutive word characters followed by <code dir="auto">abc</code>.<br><br>Adding <code dir="auto">+</code> to another quantifier makes it <em>possessive</em>. Unlike a greedy quantifier (default), which <em>releases</em> characters from the match as necessary, a possessive quantifier consumes as many characters as possible <em>without</em> releasing them for use in other parts of the pattern.<br><br>For instance, the regex string <code dir="auto">"\\w++abc"</code> fails to produce a match because <code dir="auto">\w++</code> consumes <em>all</em> word characters in the pattern, including <code dir="auto">a</code>, <code dir="auto">b</code>, and <code dir="auto">c</code>, leaving none for the <code dir="auto">abc</code> portion to match.</td></tr><tr><td style="text-align:left"><code dir="auto">{n}</code></td><td style="text-align:left">Appending <code dir="auto">{n}</code> to a character, group, or class specifies that the matched substring must contain the pattern exactly <code dir="auto">n</code> times consecutively, where <code dir="auto">n</code> &gt;= 0.<br><br>For example, the regex string <code dir="auto">"[abc]{2}"</code> matches two consecutive characters from the <code dir="auto">[abc]</code> class, meaning the possible substrings are <code dir="auto">aa</code>, <code dir="auto">ab</code>, <code dir="auto">ac</code>, <code dir="auto">ba</code>, <code dir="auto">bb</code>, <code dir="auto">bc</code>, <code dir="auto">ca</code>, <code dir="auto">cb</code>, or <code dir="auto">cc</code>.</td></tr><tr><td style="text-align:left"><code dir="auto">{n,}</code></td><td style="text-align:left">Appending <code dir="auto">{n,}</code> to a character, group, or class specifies that the matched substring must contain the pattern <em>at least</em> <code dir="auto">n</code> times consecutively, where <code dir="auto">n</code> &gt;= 0.<br><br>For example, the regex string <code dir="auto">"a{1,}b{2,}"</code> matches one or more consecutive <code dir="auto">a</code> characters followed by two or more consecutive <code dir="auto">b</code> characters.</td></tr><tr><td style="text-align:left"><code dir="auto">{n, m}</code></td><td style="text-align:left">Appending <code dir="auto">{n, m}</code> to a character, group, or class specifies that the matched substring must contain the pattern at least <code dir="auto">n</code> times but no more than <code dir="auto">m</code> times, where <code dir="auto">n</code> &gt;= 0, <code dir="auto">m</code> &gt;= 0, and <code dir="auto">m</code> &gt;= <code dir="auto">n</code>.<br><br>For example, the regex string <code dir="auto">"\\w{1,5}b{2,4}"</code> matches one to five consecutive word characters followed by two to four repeated <code dir="auto">b</code> characters.</td></tr></tbody></table></details>
<p><strong>Boundary assertions</strong></p>
<details open=""><summary><a>Click to show/hide</a></summary>




































<table><thead><tr><th style="text-align:left">Token/syntax</th><th style="text-align:left">Description and remarks</th></tr></thead><tbody><tr><td style="text-align:left"><code dir="auto">\A</code></td><td style="text-align:left">Matches the <em>starting point</em> of the source string without consuming characters. It enables the regex to isolate the initial pattern in a string without allowing matches in other locations.<br><br>For example, the regex string <code dir="auto">"\\A\\w+"</code> matches a sequence of one or more word characters only if the sequence is at the start of the source string.</td></tr><tr><td style="text-align:left"><code dir="auto">^</code></td><td style="text-align:left">When this character is outside a character class construction (i.e., <code dir="auto">[^...]</code>), it matches the <em>starting point</em> of a <em>line</em> in the source string without consuming characters.<br><br>By default, the character performs the same match as <code dir="auto">\A</code>. However, if the regex string uses the <code dir="auto">(?m)</code> modifier, it can also match a point immediately after a <em>newline</em> character (<code dir="auto">\n</code>).<br><br>For example, the regex string <code dir="auto">"(?m)^[xyz]"</code> matches <code dir="auto">x</code>, <code dir="auto">y</code>, or <code dir="auto">z</code> if the character is at the start of the source string or immediately after the <code dir="auto">\n</code> character.</td></tr><tr><td style="text-align:left"><code dir="auto">\Z</code></td><td style="text-align:left">Matches the <em>ending point</em> of the source string, or the point immediately before the final character if it is <code dir="auto">\n</code>, without consuming characters. It enables the regex to isolate the final pattern in a string without allowing matches in other locations.<br><br>For example, the regex string <code dir="auto">"\\w+\\Z"</code> matches a sequence of one or more word characters only if the sequence is at the end of the source string or immediately before the final line terminator.</td></tr><tr><td style="text-align:left"><code dir="auto">\z</code></td><td style="text-align:left">Matches the <em>absolute</em> ending point of the source string without consuming characters. Unlike <code dir="auto">\Z</code> (uppercase), this token does not match the point <em>before</em> any final line terminator.<br><br>For example, the regex string <code dir="auto">"(?s)\\w+.*\\z"</code> matches a sequence of one or more word characters, followed by zero or more extra characters, only if the sequence is at the absolute end of the source string.</td></tr><tr><td style="text-align:left"><code dir="auto">$</code></td><td style="text-align:left">Matches the <em>ending point</em> of a <em>line</em> in the source string without consuming characters.<br><br>By default, it performs the same match as <code dir="auto">\Z</code> (uppercase). However, if the regex string uses the <code dir="auto">(?m)</code> modifier, it can match any point immediately before a newline (<code dir="auto">\n</code>) character. For example, the regex string <code dir="auto">"(?m)[123]$"</code> matches <code dir="auto">1</code>, <code dir="auto">2</code>, or <code dir="auto">3</code> only if the character is at the end of the source string or immediately before the <code dir="auto">\n</code> character.</td></tr><tr><td style="text-align:left"><code dir="auto">\b</code></td><td style="text-align:left">Matches a <em>word boundary</em>, which is the point immediately before or after a sequence of word characters (members of the <code dir="auto">\w</code> class).<br><br>For example, the regex string <code dir="auto">"\\babc"</code> matches <code dir="auto">abc</code> only if it is at the starting point of a word character sequence.</td></tr><tr><td style="text-align:left"><code dir="auto">\B</code></td><td style="text-align:left">Matches a <em>non-word</em> boundary, which is any point between characters that is <em>not</em> the start or end of a word character sequence.<br><br>For example, the regex string <code dir="auto">"\\Babc"</code> matches <code dir="auto">abc</code> only if it is not at the start of a word character sequence.</td></tr></tbody></table></details>
<p><strong>Lookahead and lookbehind assertions</strong></p>
<details open=""><summary><a>Click to show/hide</a></summary>
























<table><thead><tr><th style="text-align:left">Token/syntax</th><th style="text-align:left">Description and remarks</th></tr></thead><tbody><tr><td style="text-align:left"><code dir="auto">(?=...)</code></td><td style="text-align:left">A <em>positive lookahead</em> assertion that checks whether the specified sequence immediately <em>follows</em> the current match location, without consuming characters.<br><br>For example, the regex string <code dir="auto">"a(?=b)"</code> matches the <code dir="auto">a</code> character only if <code dir="auto">b</code> occurs immediately after that point, and it does not include <code dir="auto">b</code> in the matched substring.</td></tr><tr><td style="text-align:left"><code dir="auto">(?!...)</code></td><td style="text-align:left">A <em>negative lookahead</em> assertion that checks whether the specified sequence <em>does not</em> immediately follow the current match location, without consuming characters.<br><br>For example, the regex string <code dir="auto">"a(?!b)"</code> matches the <code dir="auto">a</code> character only if the <code dir="auto">b</code> character does not immediately follow it.</td></tr><tr><td style="text-align:left"><code dir="auto">(?&lt;=...)</code></td><td style="text-align:left">A <em>positive lookbehind</em> assertion that checks whether the specified sequence immediately <em>precedes</em> the current match location, without consuming characters.<br><br>For example, the regex string <code dir="auto">"(?&lt;=a)b"</code> matches the <code dir="auto">b</code> character only if the <code dir="auto">a</code> character occurs immediately before that point, and it does not include <code dir="auto">a</code> in the matched substring.</td></tr><tr><td style="text-align:left"><code dir="auto">(?&lt;!...)</code></td><td style="text-align:left">A <em>negative lookbehind</em> assertion that checks whether the specified sequence <em>does not</em> immediately precede the current match location, without consuming characters.<br><br>For example, the regex string <code dir="auto">"(?&lt;!a)b"</code> matches the <code dir="auto">b</code> character only if the <code dir="auto">a</code> character does not immediately precede it.</td></tr></tbody></table></details>
<p><strong>Pattern modifiers</strong></p>
<details open=""><summary><a>Click to show/hide</a></summary>
































<table><thead><tr><th style="text-align:left">Token/syntax</th><th style="text-align:left">Description and remarks</th></tr></thead><tbody><tr><td style="text-align:left"><code dir="auto">(?...)</code></td><td style="text-align:left">This syntax applies a global list of inline <em>pattern modifiers</em> (flags) to the regex string. Pattern modifiers change the matching behaviors of the regex engine. All parts of the regex string that come after this syntax update their behaviors based on the specified modifiers, and those behaviors persist from that point until explicitly overridden.<br><br>For example, <code dir="auto">"(?mi)"</code> activates <em>multiline</em> and <em>case-insensitive</em> modes for the rest of the regex string.<br><br>To deactivate modifiers, include the <code dir="auto">-</code> character before the list of modifier tokens. For instance, <code dir="auto">"(?-mi)"</code> deactivates multiline and case-insensitive modes for the rest of the regex string.<br><br>Standard <em>non-capturing groups</em> can also utilize modifiers <em>locally</em>, allowing different behaviors exclusively within group constructions.<br><br>For example, <code dir="auto">"(?U:\\d)123"</code> activates <em>Unicode-aware</em> matching only for the specific group. The modifier does not apply globally, meaning the remaining <code dir="auto">123</code> part of the regex string can only match <em>ASCII</em> characters.<br><br>See the rows below for details about the most common, useful pattern modifiers for Pine regex strings.</td></tr><tr><td style="text-align:left"><code dir="auto">i</code></td><td style="text-align:left">The <code dir="auto">i</code> character represents <em>case-insensitive</em> mode when used as a global modifier (<code dir="auto">(?i)</code>) or group modifier (<code dir="auto">(?i:...)</code>).<br><br>For example, the regex string <code dir="auto">"a(?i)b(?-i)c"</code> matches lowercase <code dir="auto">a</code>, uppercase <code dir="auto">B</code> or lowercase <code dir="auto">b</code>, and then lowercase <code dir="auto">c</code>.<br><br>Note that case-insensitive mode only applies to ASCII characters unless Unicode-aware mode is active.</td></tr><tr><td style="text-align:left"><code dir="auto">m</code></td><td style="text-align:left">The m character represents multiline mode when used as a global modifier (<code dir="auto">(?m)</code>) or group modifier (<code dir="auto">(?m:...)</code>).<br><br>By default, the <code dir="auto">^</code> and <code dir="auto">$</code> boundary assertions match the start and end of the source string, excluding final line terminators. With multiline mode enabled, they match the start and end boundaries of any <em>separate line</em> in the string.<br><br>For example, the regex string <code dir="auto">"^abc"</code> matches <code dir="auto">abc</code> only if the source string starts with that sequence, whereas <code dir="auto">"(?m)^abc"</code> matches <code dir="auto">abc</code> if it is at the start of the string or immediately follows a <em>newline character</em> (<code dir="auto">\n</code>).</td></tr><tr><td style="text-align:left"><code dir="auto">s</code></td><td style="text-align:left">The lowercase <code dir="auto">s</code> character represents <em>single-line mode</em> (<em>dotall mode</em>) when used as a global modifier (<code dir="auto">(?s)</code>) or group modifier (<code dir="auto">(?s:...)</code>).<br><br>By default, the <code dir="auto">.</code> character matches any character except for line terminators such as <code dir="auto">\n</code>. With single-line mode enabled, the regex treats the source string as <em>one line</em>, allowing the character to match line terminators.<br><br>For example, using the regex string <code dir="auto">".+"</code> on the source string <code dir="auto">"ab\nc"</code> matches <code dir="auto">ab</code> only, whereas <code dir="auto">"(?m).+"</code> matches the <em>entire</em> source string.</td></tr><tr><td style="text-align:left"><code dir="auto">U</code></td><td style="text-align:left">The uppercase <code dir="auto">U</code> character represents <em>Unicode-aware</em> mode when used as a global modifier (<code dir="auto">(?U)</code>) or group modifier (<code dir="auto">(?U:...)</code>).<br><br>By default, most of the regex engine’s predefined character classes and mapped POSIX classes do not match <em>non-ASCII</em> characters. With Unicode-aware mode enabled, the regex allows these classes, and various ASCII character tokens, to match related Unicode characters.<br><br>For example, the regex string <code dir="auto">"\\d(?U)\\d+"</code> matches a single ASCII digit followed by one or more Unicode digit characters.</td></tr><tr><td style="text-align:left"><code dir="auto">x</code></td><td style="text-align:left">The lowercase <code dir="auto">x</code> character represents <em>verbose mode</em> (<em>comments mode</em>) when used as a global modifier (<code dir="auto">(?x)</code>) or group modifier (<code dir="auto">(?x:...)</code>).<br><br>In this mode, the regex string ignores <em>whitespace</em> characters and treats sequences starting with <code dir="auto">#</code> as <em>comments</em>.<br><br>For example, the regex string <code dir="auto">"(?x)[a-f ] 1 2\n3 # this is a comment!"</code> produces the same match as <code dir="auto">"[a-f]123"</code>. It does <strong>not</strong> match the space or newline characters, or anything starting from the <code dir="auto">#</code> character.<br><br> Regex strings with this modifier can include multiple comments on <em>separate lines</em> (e.g., <code dir="auto">"a #match 'a' \nb #followed by 'b'"</code> matches <code dir="auto">ab</code>).<br><br>To match whitespaces or the <code dir="auto">#</code> character in this mode, <em>escape</em> them using backslashes or the <code dir="auto">\Q...\E</code> syntax. For instance, <code dir="auto">"(?x)\\#\\ \\# #comment"</code> and <code dir="auto">"(?x)\\Q# #\\E #comment"</code> both literally match the sequence <code dir="auto"># #</code>.</td></tr></tbody></table></details>      </div> <div class="pagination-buttons not-content" data-astro-cid-xgirumru=""> <a href="/pine-script-docs/concepts/strategies" class="pagination-card" data-pagefind-ignore="" data-astro-cid-assl6cvf=""> <p data-astro-cid-assl6cvf="">Previous</p> <h4 class="pagination-card-header" data-astro-cid-assl6cvf=""> <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-assl6cvf="" data-icon="theme/arrow-back">  <use xlink:href="#ai:local:theme/arrow-back"></use>  </svg> Strategies  </h4> </a>  <a href="/pine-script-docs/concepts/time" class="pagination-card" data-pagefind-ignore="" data-astro-cid-assl6cvf=""> <p data-astro-cid-assl6cvf="">Next</p> <h4 class="pagination-card-header" data-astro-cid-assl6cvf="">  Time <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-assl6cvf="" data-icon="theme/arrow">  <symbol id="ai:local:theme/arrow"><path fill="none" stroke="var(--arrow-fill-color, #131722)" d="m11 8 6 6-6 6"></path></symbol><use xlink:href="#ai:local:theme/arrow"></use>  </svg> </h4> </a>  </div>  </main>   <div id="toc" data-pagefind-ignore="all" data-astro-cid-oor6cujd=""><aside class="document-toc-container ml-4 w-48" data-astro-cid-oor6cujd=""><section id="toc-scroll-section" class="slick-scroll" data-astro-cid-oor6cujd=""><header data-astro-cid-oor6cujd=""><h2 class="toc-header" data-astro-cid-oor6cujd="">On this page</h2></header><ul class="" id="toc-entries" data-astro-cid-oor6cujd=""><a href="#introduction" aria-current="true" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-current="" data-astro-cid-oor6cujd="">Introduction</li></a><a href="#literal-strings" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">Literal strings</li></a><a href="#escape-sequences" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">Escape sequences</li></a><a href="#concatenation" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">Concatenation</li></a><a href="#string-conversion-and-formatting" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">String conversion and formatting</li></a><a href="#converting-values-to-strings" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Converting values to strings</li></a><a href="#formatting-strings" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Formatting strings</li></a><a href="#custom-representations" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Custom representations</li></a><a href="#modifying-strings" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">Modifying strings</li></a><a href="#replacing-substrings" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Replacing substrings</li></a><a href="#changing-case" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Changing case</li></a><a href="#trimming-whitespaces" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Trimming whitespaces</li></a><a href="#repeating-sequences" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Repeating sequences</li></a><a href="#string-inspection-and-extraction" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-astro-cid-oor6cujd="">String inspection and extraction</li></a><a href="#counting-characters-and-substrings" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Counting characters and substrings</li></a><a href="#checking-for-substrings" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Checking for substrings</li></a><a href="#splitting-strings" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Splitting strings</li></a><a href="#locating-and-retrieving-substrings" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Locating and retrieving substrings</li></a><a href="#matching-patterns" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd="">Matching patterns</li></a><a href="#regex-syntax-reference" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd="">Regex syntax reference</li></a></ul></section><div class="toc-bottom-fade" data-astro-cid-oor6cujd=""></div><div class="back-top-space" data-astro-cid-oor6cujd=""><div class="not-content" style="" data-astro-cid-pkzv2hgs=""> <a id="back-top-button" title="Back to top" href="#top" data-astro-cid-pkzv2hgs="" class="floating-button not-content stvb-base stvb-pointer stvb-gray stvb-medium stvb-secondary stvb-icon stvb-icon-force-color stvb-force-no-border"> <svg width="18" height="18" viewBox="0 0 18 18" data-astro-cid-oor6cujd="" data-icon="theme/arrow-up">  <symbol id="ai:local:theme/arrow-up"><g fill="none"><g clip-path="url(#a)"><path fill="currentColor" fill-rule="evenodd" d="m9 3.5.5.44 4 3.5-1 1.12-2.75-2.4V14h-1.5V6.15L5.49 8.56l-.98-1.12 4-3.5z" clip-rule="evenodd"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h18v18H0z"></path></clipPath></defs></g></symbol><use xlink:href="#ai:local:theme/arrow-up"></use>  </svg> </a> </div> </div></aside></div> </main> </div>   <footer data-astro-cid-b6pf7ola=""> <div class="footer-content" data-astro-cid-b6pf7ola="">  <ul data-astro-cid-b6pf7ola=""> <li data-astro-cid-b6pf7ola=""> <a href="https://www.tradingview.com/chat/#BfmVowG1TZkKO235" data-astro-cid-b6pf7ola="">Pine Q&amp;A chat</a>  </li><li data-astro-cid-b6pf7ola=""> <a href="https://stackoverflow.com/questions/tagged/pine-script" data-astro-cid-b6pf7ola="">Stack Overflow</a>  ↗ </li><li data-astro-cid-b6pf7ola=""> <a href="https://t.me/PineCodersQA" data-astro-cid-b6pf7ola="">Telegram</a>  ↗ </li><li data-astro-cid-b6pf7ola=""> <a href="https://www.reddit.com/r/TradingView/" data-astro-cid-b6pf7ola="">Reddit</a>  ↗ </li> </ul> <div class="flex" data-astro-cid-b6pf7ola=""></div> <div class="copyright" data-astro-cid-b6pf7ola="">Copyright © 2025 TradingView, Inc.</div> </div> </footer>         </body></html>